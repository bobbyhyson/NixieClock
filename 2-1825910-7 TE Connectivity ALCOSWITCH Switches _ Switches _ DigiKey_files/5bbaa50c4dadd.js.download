//15.140.1-es2019 2025-10-30T13:46:05.982Z (5bbaa50c4dadd)
var CS_CONF={"collectionEnabled":true,"projectId":3715,"status":1,"hostnames":["digikey.com","www.digikey.com","digikey.de","digikey.jp","digikey.in","qualtrics.com","digikey.cn","www.digikey.cn","digikey.kr","digikey.co.uk","digikey.fr","digikey.co.il","digikey.com.mx","digikey.com.au"],"crossDomainTracking":0,"crossDomainSingleIframeTracking":0,"consentRequired":0,"allowSubdomains":1,"visitorCookieTimeout":34164000000,"sampleRate":100,"replayRecordingRate":100,"validationRate":10,"lastTrackingDraw":1754653898,"trackerDomain":"c.contentsquare.net","recordingDomain":"r.contentsquare.net","useMalkaPipeline":1,"ed":"l.contentsquare.net/log/web","eMerchandisingEnabled":0,"mouseMoveHeatmapEnabled":1,"autoInsightsEnabled":0,"jsErrorsEnabled":1,"customErrorsEnabled":1,"jsCustomErrorsEnabled":0,"apiErrorsEnabled":1,"customHashIdEnabled":1,"recordingEncryptionEnabled":0,"recordingEncryptionPublicKey":"MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAucFIZ8aP87TOVppfn1eX\n\nApOr0VVGw2hGZ+OR22eaiwmFSPyOXg3UywPq4Du1LgzwjOaNBkcEeT7yUzTu1ZDo\n\njEVB6KNN22zkNMD8AH/kPSFyIXxZMTeycPR805FEu1dTH0Zqbz8mPkmqG6sRkDlW\n\np3LdiGQfmwm3r60/P/XcOFHbB/BKk66q/yh3iB5ysMitwD1eb9PdgblWdrbc/3is\n\nM1D/RUYz/jxSpdDwbyWGd2j7nB+utrFZhNcb/jwbw0cRH8eyfpYcLzpUb95xNI2V\n\nevA52xC6hmsQdv2Roq8FLsnjDdop8WCc7w/jkWqx8i1Q4AquvwOANKw4/z4uMVJi\n\n+wIDAQAB","recordingEncryptionPublicKeyId":1684,"secureCookiesEnabled":0,"triggerSessionReplayEnabled":0,"triggerSessionReplayRegex":null,"dynamicIdRegex":null,"whitelistedAttributes":[],"replayRecordingUnmaskedUrlRegex":null,"replayRecordingUnmaskedUrlRegexRules":[],"replayRecordingMaskedUrlRegexRules":[],"replayRecordingMaskedUrlRegex":".*\\/MyDigiKey\\/ReviewOrder.*|\\/ordering\\/submit\\?submit=yes","anonymisationMethod":"replayRecordingMaskedUrlRegex","tagDeploymentMode":"CONTENTSQUARE","experimental":null,"iframesTracking":0,"textVisibilityEnabled":1,"cookielessTrackingEnabled":0,"malkaUrlEnabled":0,"malkaEtrEnabled":0,"pathComputationRules":{"reliableSelectors":[],"uniqueAttributes":[],"uniqueCssSelectors":[".jumpLinkCntr"]},"asyncSerializerEnabled":1,"pendingInactivityTimeout":5000,"accessibilityEnabled":0,"uxaDomain":"app.contentsquare.com","webviewsTrackingEnabled":0,"useStaticResourceManager":1,"performanceTimingOptions":{"withNavigation":true,"withResource":true},"replayConsentRequiredForSession":0,"eventsApiEnabled":0,"clickedElementTextEnabled":1,"collectHierarchy":1,"collectSubmit":1,"collectTargetText":1,"apiErrors":{"collectStandardHeaders":1,"collectionRules":[{"bodyAttributePaths":[{"path":"errors[0].message","encrypted":0,"primary":0,"type":"response"}],"collectQueryParam":0,"collectRequestBody":0,"collectResponseBody":0,"customHeaders":[],"url":"graphql","statusCode":200,"bodyContent":"errors\":"},{"bodyAttributePaths":[],"collectQueryParam":0,"collectRequestBody":0,"collectResponseBody":0,"customHeaders":[{"headerName":"cf-cache-status","encrypted":0,"type":"request"},{"headerName":"cf-ray","encrypted":0,"type":"request"},{"headerName":"x-cache-enabled","encrypted":0,"type":"request"},{"headerName":"x-cache","encrypted":0,"type":"request"},{"headerName":"x-amz-cf-id","encrypted":0,"type":"request"},{"headerName":"x-ray","encrypted":0,"type":"request"},{"headerName":"upgrade","encrypted":0,"type":"request"},{"headerName":"X-Request-Id","encrypted":0,"type":"request"},{"headerName":"x-wix-request-id","encrypted":0,"type":"request"},{"headerName":"X-Pass-Why","encrypted":0,"type":"request"},{"headerName":"x-nginx-cache-status","encrypted":0,"type":"request"},{"headerName":"trace-id","encrypted":0,"type":"request"},{"headerName":"traceparent","encrypted":0,"type":"request"},{"headerName":"X-NewRelic-Transaction","encrypted":0,"type":"request"},{"headerName":"X-Datadog-Trace-ID","encrypted":0,"type":"request"}]}]},"customErrors":{"consoleMessageLogLevels":[]},"displayAdOptions":null,"taskSchedulerOptions":{"enabled":1},"malkaQuotaServiceDomain":"q-aus1.contentsquare.net","malkaRecordingDomain":"k-aus1.contentsquare.net","staticResourceManagerDomain":"srm.bf.contentsquare.net","paProxyDomainUri":"api.us.hp.contentsquare.net","voc":{"siteId":null,"enabled":0},"heapEnvironment":{"env_id":"4241014072","heap_tag_status":"cs_crosswrites_heap","heap_storage_location":null},"implementations":[{"template":{"name":"PageEvent","args":{"eventName":"Click - PLP Smart Filters","iterable":null}},"triggers":[{"name":"ElementClick","args":{"selector":".tss-css-1um5f9r-smartInputContainer"}}]}],"anonymizeDigits":null,"dynamicConfDomain":"t.contentsquare.net/settings","identityEncryptionKey":"MIIBojANBgkqhkiG9w0BAQEFAAOCAY8AMIIBigKCAYEAlL8xaiIUlNZLxrm8XMtTLHMbemquLst2omH6itNokm81n/P/KUJdaAJGopwXDj6TL9zrhnJWrxnyVGI6jEbOSw0RMaLahwVVhwtIuTFtcx6VlsKYEZqn+QBTARMiGR46Z0j6/5+w2x439lFueWn+VADuUBWQ7b+wOozD/SBrUTx2lgv0npyv29OLJvLkeCabUWRNBNErx7R+CZ7LUMt74y2xTuYkDR/hEoApBA7O9WGRrCQ97+Jc74NC84Fmh/VkeyBozV8XHKsT7EUxyPFP61cTh6XUP7F+5hPkE+KlprTkwTGx6P3W4aiUQYwD/klFmSJZ0tPYDUNjSYPOuco0sY8rhihf0ZpfvaMog+JMbieuBMG+xG6+wFifZEh9cXwTVbtIuaKMI7unbgiqJrgL15XzHWEeRluWUEcgBPTACVfQbEq8JYyfRyKEzmGyYcsv/cdFx0FegSRI1hdg516pSKpEefWCUcGEvtCAN/V8aTJWam/Jyci9NFfsuNMfd+lNAgMBAAE=","tagVerificationDomain":"tcvsapi.contentsquare.com"};
var CS_INTEGRATIONS_CONF = {"optimizely":{},"qualtrics":{},"cs-get-replay-link":{},"launch-darkly":{},"google-analytics-4":{},"datadog":{"settings":["setReplayLinkToFirstPV"],"vendorSettings":{"domain":"app.datadoghq.com"}}};
/* integration-optimizely 2.9.2 */
(()=>{"use strict";function e(e,n){try{e()}catch(e){window._uxa=window._uxa||[],window._uxa.push(["logSnippetError",n,e]),(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&(console.log(`%cCSQ INTEGRATION ERROR: [${n}] : ${e.message}`,"color:rgb(228, 25, 45); font-weight: bold"),console.log(e))}}function n(e){window._uxa=window._uxa||[],window._uxa.push(["event",e])}function t(e,n,t){if((t=t||window)&&n&&e){let i=!1,o=t[e];o?n():Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return o},set:function(e){o=e,i||(i=!0,n())}})}}function i(e){return e&&"string"==typeof e?e.replace(/[\W_]+/g,"-"):""}const o=JSON.parse('{"QC":"Optimizely","Mz":"AB_OP_","be":"OP_"}'),a=function(n){let t,i,o,a;if(e(function(){const e=n.name;t=n.version;const c=e.replace("@contentsquare/integration-","");i=c+"-"+t;let r="-contentsquare";a=new RegExp(r+"$").test(c),o=c.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),a||(r="-cap",a=new RegExp(r+"$").test(c),o=c.replace(/-cap([^-cap]*)$/,"$1"))},"Shared-Function-readPackageJSON"),a)return{snippetBuildName:i,parameterName:o,snippetVersion:t}}(JSON.parse('{"name":"@contentsquare/integration-optimizely-contentsquare","version":"2.9.2","scripts":{"build:snippet":"npx webpack"}}')),c=(a.parameterName,a.snippetBuildName),r=a.snippetVersion;e(function(){const a=o.QC,s=o.Mz,l=o.be;var u,p;function d(e,t){!function(e,n){window._uxa=window._uxa||[],window._uxa.push(["trackDynamicVariable",{key:e,value:n}])}(e=s+e,t);const o=t.endsWith(" [Holdback]");var a,r;n(`${o?"HB_":""}${i(e.replace(s,""))}/${o?t.replace(" [Holdback]",""):i(t)}`),n(`${l}${i(e.replace(s,""))}-${i(t)}`),function(e,n,t){(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&(t?"warn"===t&&console.log(`%cCSQ INTEGRATION: [${e}] : ${n}`,"color:rgb(255, 86, 2); font-weight: bold"):console.log(`%cCSQ INTEGRATION: [${e}] : ${n}`,"color: #2a9d8f; font-weight: bold"))}(c,(a=e,r=t,document.getElementById("csKey")&&document.getElementById("csValue")&&(document.getElementById("csKey").textContent=a,document.getElementById("csValue").textContent=r),`Dynamic variable with ${a} and value ${r} sent`))}u=a,p=r,CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push(u+" - v"+p);let m=!1;const g=[];!function(e,n,i){i=i||window;const o=e.split(".");if(1==o.length)t(e,n,i);else{let e=i,a=0;const c=function(){e=a>0?e[o[a-1]]:window,a++,a>=o.length?t(o[a-1],n,e):t(o[a-1],c,e)};c()}}("optimizely",function(){setTimeout(function(){e(function(){function n(){e(function(){const e=optimizely.get&&optimizely.get("state");if(e&&e.getCampaignStates&&"function"==typeof e.getCampaignStates&&"object"==typeof e.getCampaignStates()){const t=e.getCampaignStates({isActive:!0}),i=Object.keys(t);if(n=i,Array.isArray(n))for(let e=0;e<i.length;e++)if(-1===g.indexOf(i[e])){g.push(i[e]);const n=t[i[e]];if(n.experiment){let e,t;e=n.experiment.name?n.campaignName:n.experiment.id,t=n.experiment.campaignName&&n.experiment.name?n.experiment.name+" - "+n.variation.name:n.variation.name?n.variation.name:n.variation.id,n.isInCampaignHoldback&&(t+=" [Holdback]"),e&&t&&d(e,t)}}}var n},c)}n(),m||(m=!0,window.optimizely=window.optimizely||[],"function"==typeof optimizely.push&&optimizely.push({type:"addListener",filter:{type:"lifecycle",name:"campaignDecided"},handler:n}))},c)},500)})},c)})();
/* integration-qualtrics 3.2.2 */
(()=>{"use strict";function e(e,t){try{e()}catch(e){window._uxa=window._uxa||[],window._uxa.push(["logSnippetError",t,e]),(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&(console.log(`%cCSQ INTEGRATION ERROR: [${t}] : ${e.message}`,"color:rgb(228, 25, 45); font-weight: bold"),console.log(e))}}function t(e,t){let n=!1;window._uxa=window._uxa||[],window._uxa.push(["afterPageView",function(i){t?n||(e(i),n=!0):e(i)}])}function n(e){const t=e+"=",n=document.cookie.split(";");for(let e=0;e<n.length;e++){let i=n[e];for(;" "==i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(t))return i.substring(t.length,i.length)}return""}function i(){let e=0,t=document.location.host;const n=t.split("."),i="_cs_tld"+(new Date).getTime();for(;e<n.length-1&&-1==document.cookie.indexOf(i+"="+i);)t=n.slice(-1-++e).join("."),document.cookie=i+"="+i+";domain="+t+";SameSite=None;Secure";return document.cookie=i+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain="+t+";Secure",t}function o(e){return e.toString().replace(/[^\w. ]/gi,function(e){return"&#"+e.charCodeAt(0)+";"})}function c(e){return Array.isArray(e)}function a(e,t){t||(t="="),e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=new RegExp("[\\?&=]"+e+t+"([^&#]*)").exec(location.search);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))}const s=JSON.parse('{"QC":"Qualtrics","Mz":"FB_QT_","ir":"cs_qualtrics","X3":"qt"}'),u=function(t){let n,i,o,c;if(e(function(){const e=t.name;n=t.version;const a=e.replace("@contentsquare/integration-","");i=a+"-"+n;let s="-contentsquare";c=new RegExp(s+"$").test(a),o=a.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),c||(s="-cap",c=new RegExp(s+"$").test(a),o=a.replace(/-cap([^-cap]*)$/,"$1"))},"Shared-Function-readPackageJSON"),c)return{snippetBuildName:i,parameterName:o,snippetVersion:n}}(JSON.parse('{"name":"@contentsquare/integration-qualtrics-contentsquare","version":"3.2.2","scripts":{"build:snippet":"npx webpack"}}')),r=u.parameterName,d=u.snippetBuildName,l=u.snippetVersion;e(function(){const u=s.QC,p=s.Mz,f=s.ir,g=s.X3;var _,S;_=u,S=l,CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push(_+" - v"+S);let w=!1;window.self!=window.top&&(w=CS_CONF.iframesTracking);const m=function(e){function t(e){return"object"==typeof e&&null!==e}if(t(window.CS_INTEGRATIONS_CONF)&&t(window.CS_INTEGRATIONS_CONF[e]))return window.CS_INTEGRATIONS_CONF[e].settings}(r),C=c(m)?m:[],I=C.includes("sendArtificialPageviews"),h=C.includes("setReplayLinkToCurrentPV");let y=!1;function D(e,t,n,i){var o,c,a;(function(e,t){window._uxa=window._uxa||[],window._uxa.push(["trackDynamicVariable",{key:e,value:t}])})(e=p+((a=e)?((new DOMParser).parseFromString(a,"text/html").body.textContent||"").trim():""),t),y&&"etr"===n&&function(e){window._uxa=window._uxa||[],window._uxa.push(["trackEventTriggerRecording","@ETS@"+e])}(e),i&&I&&function(e){window._uxa=window._uxa||[],window._uxa.push(["trackPageview",e])}(window.location.pathname+"?"+i),function(e,t,n){(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&(n?"warn"===n&&console.log(`%cCSQ INTEGRATION: [${e}] : ${t}`,"color:rgb(255, 86, 2); font-weight: bold"):console.log(`%cCSQ INTEGRATION: [${e}] : ${t}`,"color: #2a9d8f; font-weight: bold"))}(d,(o=e,c=t,document.getElementById("csKey")&&document.getElementById("csValue")&&(document.getElementById("csKey").textContent=o,document.getElementById("csValue").textContent=c),`Dynamic variable with ${o} and value ${c} sent`))}function b(){const e={contentsquare_integration:n("_cs_s"),vendor:"qualtrics"};window.opener?window.opener.postMessage(e,"*"):window.self!=window.top&&window.top.postMessage(e,"*")}if(window.Qualtrics&&Qualtrics.SurveyEngine&&"function"==typeof Qualtrics.SurveyEngine.addOnPageSubmit){if(!w){let v;if(window._cs_integration_qualtrics_postmessage_csid||window.ClickTaleSettings&&ClickTaleSettings.PTC&&ClickTaleSettings.PTC.IntegrationHandler&&ClickTaleSettings.PTC.IntegrationHandler.UserValues)window._cs_integration_qualtrics_postmessage_csid?v=_cs_integration_qualtrics_postmessage_csid:ClickTaleSettings.PTC.IntegrationHandler.UserValues&&(v=ClickTaleSettings.PTC.IntegrationHandler.UserValues);else{const x=document.location.search;x.indexOf("CSID=")>-1?v=a("CSID"):CS_CONF.ptcDomain&&x.indexOf("CT_UID=")>-1?v=a("CT_UID"):window._cs_integration_qualtrics_csid&&(v=decodeURIComponent(_cs_integration_qualtrics_csid))}if(v&&"null"!=v){const E=v.split("~"),N=E[0],O=E[1],q=E[2],R=E[3],P=i();N&&O&&q&&(R?document.cookie="_cs_optout="+R+";domain="+P+";path=/;SameSite=None;Secure":(document.cookie="_cs_optout=;domain="+P+";path=/;expires=Thu, 01-Jan-1970 00:00:01 GMT;SameSite=None;Secure",document.cookie="_cs_optout=;path=/;expires=Thu, 01-Jan-1970 00:00:01 GMT;SameSite=None;Secure",document.cookie="_cs_optout=;domain=."+document.location.host+";path=/;expires=Thu, 01-Jan-1970 00:00:01 GMT;SameSite=None;Secure"),document.cookie="_cs_id="+N+";domain="+P+";path=/;SameSite=None;Secure",document.cookie="_cs_s="+O+";domain="+P+";path=/;SameSite=None;Secure",document.cookie="_cs_c="+q+";domain="+P+";path=/;SameSite=None;Secure")}}let T;function k(){if(!w){let t=n("_cs_s");if(t&&t.indexOf(".T.")>-1){const i=setInterval(function(){e(function(){t=n("_cs_s"),t&&-1===t.indexOf(".T.")&&(clearInterval(i),b())},d)},500)}else b()}}if(window.Page?T=!1:window.q&&(T=!0),setTimeout(function(){(function(e,t,n,i){return new Promise(function(o,c){function a(){window._uxa.push(["replay:link:generate",{withTimestamp:n},s])}function s(i){if(i&&i.replayLink&&i.isRecording){let c="https://"+i.replayLink+"&vd="+e;if(!t&&!n){const e=new URLSearchParams(c);e.set("pvid",1);const t=e.toString();c=decodeURIComponent(t)}o(c)}}e||(e="missingFromDynamicSnippet"),n||(n=!1),i?a():(window._uxa=window._uxa||[],window._uxa.push(["onRecordingStateChange",function(e){e&&e.isRecording&&a()}]))})})(g,h,!1,w).then(function(t){e(function(){if(y=!0,t&&Qualtrics.SurveyEngine){const e=Qualtrics.SurveyEngine;let n;CS_CONF.ptcDomain&&(n="ClicktaleSpecificRecording",!0===T&&"function"==typeof e.setJSEmbeddedData?e.setJSEmbeddedData(n,t):!1===T&&"function"==typeof e.setEmbeddedData&&e.setEmbeddedData(n,t)),n="ContentsquareReplayLink",!0===T&&"function"==typeof e.setJSEmbeddedData?e.setJSEmbeddedData(n,t):!1===T&&"function"==typeof e.setEmbeddedData&&e.setEmbeddedData(n,t)}},d)})},500),t(k,!1),window.addEventListener("Contentsquare_QT_Integration_Dispatcher",function(t){e(function(){if(t&&"object"==typeof t.detail&&"string"==typeof t.detail.key&&"string"==typeof t.detail.value){let e=t.detail.key;const n=t.detail.value;"FB_QT_"===e.slice(0,6)&&(e=e.slice(6)),D(e,n)}},d)}),!1===T&&"function"==typeof Page.getSessionId&&Page.runtime&&Page.runtime.ED&&Page.runtime.ED.SurveyID&&Page._questionRenderers&&Qualtrics.SurveyEngine.QuestionInfo){const F=Page.runtime.ED.SurveyID,Q=Page.getSessionId().replace("FS_","R_");D("Feedback Displayed","Survey ID : "+F);let A=!1,V=!1,$=!1;const B=[];function U(){const e=Qualtrics.SurveyEngine.QuestionInfo,t=Object.keys(e);if(c(t))for(let e=0;e<t.length;e++){const n=Qualtrics.SurveyEngine.QuestionInfo[t[e]].Selector;if(n&&"TB"!=n){V=!0;break}}}function J(){e(function(){U(),A||(A=!0,D("Feedback Accepted","Survey ID : "+F,0,f+"=feedback_accepted_"+F)),setTimeout(function(){e(function(){V&&!$&&!1===Page.runtime.FailedValidation&&($=!0,D("Feedback Submitted","Survey ID : "+F,"etr",f+"=feedback_submitted_"+F),D("Feedback Response ID",Q))},d)},2e3);const t=Page._questionRenderers,n=Object.keys(t);if(c(n))for(let e=0;e<n.length;e++){const i=t[n[e]].runtime;if(i&&i.Selector&&i.QuestionText&&i.Displayed){const t=i.QuestionText;if("NPS"===i.Selector&&i.Selected){const o=parseInt(i.Selected);B.includes(n[e]+"~~~"+o)||(B.push(n[e]+"~~~"+o),D("NPS Rating - "+n[e]+" - "+F+" - "+t,o),D("NPS Rating - "+n[e]+" - "+F,o))}if("STAR"===i.Selector){const t=i.Choices,o=Object.keys(t);if(c(o))for(let i=0;i<o.length;i++){const c=t[o[i]].Display;if(t[o[i]].Value){const a=parseInt(t[o[i]].Value);B.includes(n[e]+" ("+(i+1)+")~~~"+a)||(B.push(n[e]+" ("+(i+1)+")~~~"+a),D("Star Rating - "+n[e]+" ("+(i+1)+") - "+F+" - "+c,a),D("Star Rating - "+n[e]+" ("+(i+1)+") - "+F,a))}}}if("SAVR"===i.Selector||"SAHR"===i.Selector){const t=i.Selected;if(t&&i.Choices){const o=i.Choices[t].ID;o&&(B.includes(n[e]+"~~~AID"+o)||(B.push(n[e]+"~~~AID"+o),D(n[e]+" - "+F,"AID"+o)))}}if("MAVR"===i.Selector&&i.Choices){const t=i.Choices,o=Object.keys(t);if(c(o))for(let i=0;i<o.length;i++)if(t[o[i]].Selected){const c=t[o[i]].ID;c&&(B.includes(n[e]+"~~~AID"+c)||(B.push(n[e]+"~~~AID"+c),D(n[e]+" - "+F,"AID"+c)))}}if("Likert"===i.Selector&&i.Choices){const t=i.Choices,o=Object.keys(t);if(c(o))for(let i=0;i<o.length;i++){const c=t[o[i]].Selected;if(c&&!B.includes(n[e]+"~~~"+c)){const a=t[o[i]].ID;a&&(B.push(n[e]+"~~~"+c),D(n[e]+" - "+F+" - AID"+a,c))}}}}}setTimeout(function(){document.getElementById("NextButton")||D("Feedback Completed","Survey ID : "+F,0,f+"=feedback_completed_"+F)},2e3),Qualtrics.SurveyEngine.addOnPageSubmit(J)},d)}U(),Qualtrics.SurveyEngine.addOnPageSubmit(J)}else if(!0===T&&window.q.init&&window.q.init.appData&&window.q.init.appData.setup&&window.q.init.appData.setup.survey&&window.q.init.appData.setup.survey.id&&window.q.init.appData.session&&window.q.init.appData.session.id){const M=window.q.init.appData.setup.survey.id,G=window.q.init.appData.session.id.replace("FS_","R_");D("Feedback Displayed","Survey ID : "+M);let L=!1;function j(){e(function(){L||(L=!0,D("Feedback Submitted","Survey ID : "+M,"etr",f+"=feedback_submitted_"+M),D("Feedback Response ID",G)),setTimeout(function(){e(function(){document.getElementById("next-button")||D("Feedback Completed","Survey ID : "+M,0,f+"=feedback_completed_"+M)},d)},2e3),Qualtrics.SurveyEngine.addOnPageSubmit(j)},d)}Qualtrics.SurveyEngine.addOnPageSubmit(j)}}else if(!w){function H(t){const n=t.data;n&&(n.contentsquare_integration&&"qualtrics"===n.vendor&&e(function(){const e=n.contentsquare_integration,t=e.split("."),c=Number(t[t.length-1]),a=new Date(c).toUTCString();if(window.CS_CONF&&CS_CONF.allowSubdomains){const t=i();document.cookie="_cs_s="+o(e)+";expires="+a+";domain="+t+";path=/;Secure"}else document.cookie="_cs_s="+o(e)+";expires="+a+";path=/;Secure";X()},d),n.message&&"Contentsquare_QT_Integration_Ready"===n.message&&e(function(){const e={message:"Contentsquare_QT_Integration_Launch",user_values:z()};t.source.postMessage(e,"*")},d))}function z(){const e=n("_cs_id"),t=n("_cs_c"),i=n("_cs_optout");return e+"~"+K+"~"+t+"~"+i}let K;function X(){function t(){const e=z();localStorage.setItem("CSID",e),CS_CONF.ptcDomain&&(localStorage.setItem("CT_UID",e),sessionStorage.setItem("CT_UID",e)),sessionStorage.setItem("CSID",e)}if(K=n("_cs_s"),K&&K.indexOf(".T.")>-1){const i=setInterval(function(){e(function(){K=n("_cs_s"),K&&-1===K.indexOf(".T.")&&(clearInterval(i),t())},d)},500)}else t()}window.addEventListener("message",H),t(X,!1)}},d)})();
/* integration-cs-get-replay-link 2.2.0 */
!function(e){var n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(n){return e[n]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=2)}([function(e){e.exports=JSON.parse('{"displayName":"CS Replay Link Generator","replayKey":"csrlg"}')},function(e){e.exports=JSON.parse('{"name":"@contentsquare/integration-cs-get-replay-link-contentsquare","version":"2.2.0","scripts":{"build:snippet":"webpack"}}')},function(e,n,t){"use strict";function r(e,n){try{e()}catch(e){window._uxa=window._uxa||[],window._uxa.push(["logSnippetError",n,e.message]),(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&console.log(`%cCSQ INTEGRATION ERROR: [${n}] : ${e.message}`,"color:rgb(228, 25, 45); font-weight: bold")}}t.r(n);var o=t(0);const i=function(e){let n,t,o,i;if(r((function(){const r=e.name;n=e.version;const a=r.replace("@contentsquare/integration-","");t=a+"-"+n;let u="-contentsquare";i=new RegExp(u+"$").test(a),o=a.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),i||(u="-cap",i=new RegExp(u+"$").test(a),o=a.replace(/-cap([^-cap]*)$/,"$1"))}),"Shared-Function-readPackageJSON"),i)return{snippetBuildName:t,parameterName:o,snippetVersion:n}}(t(1)),a=(i.parameterName,i.snippetBuildName),u=i.snippetVersion;r((function(){const e=o.displayName,n=o.replayKey;var t,i;t=e,i=u,CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push(t+" - v"+i);let c={},s=!1;function p(){return"undefined"!=typeof performance&&"function"==typeof performance.now&&performance.timing&&performance.timing.navigationStart&&"undefined"!=typeof Math&&"function"==typeof Math.round?performance.timing.navigationStart+Math.round(performance.now()):Date.now()}new Promise((function(e,n){window._uxa=window._uxa||[],window._uxa.push(["onRecordingStateChange",function(n){n&&n.isRecording&&e(!0)}])})).then((function(e){r((function(){e&&(s=!0)}),a)}));!function(e,n){let t=!1;window._uxa=window._uxa||[],window._uxa.push(["afterPageView",function(r){n?t||(e(r),t=!0):e(r)}])}((function(e){r((function(){c=e;const t=p();CS_CONF.integrations_handler=CS_CONF.integrations_handler||{},CS_CONF.integrations_handler.getReplayLink=function(e,r){if(s&&c){isNaN(e)||(r=e);const o=r;isNaN(o)&&(r=0);const i=c.sessionKey.split("."),a=i[0],u=i[1],s=c.projectId,f=c.pageNumber;let l=f-r;r>=f&&(l=f),0===o&&(l=1);let d="";if("no_ts"!=e&&(d="&t="+(p()-parseInt(t))),s&&a&&u&&l){return"https://app.contentsquare.com/quick-playback/index.html?pid="+s+"&uu="+a+"&sn="+u+"&pvid="+l+"&recordingType=cs&vd="+n+d}return null}}}),a)}),!0)}),a)}]);
/* integration-launch-darkly 3.2.0 */
!function(e){var n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(n){return e[n]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=2)}([function(e){e.exports=JSON.parse('{"displayName":"LaunchDarkly","dvarPrefix":"AB_LD_"}')},function(e){e.exports=JSON.parse('{"name":"@contentsquare/integration-launch-darkly-contentsquare","version":"3.2.0","scripts":{"build:snippet":"webpack"}}')},function(e,n,t){"use strict";function r(e,n){try{e()}catch(e){window._uxa=window._uxa||[],window._uxa.push(["logSnippetError",n,e.message]),(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&console.log(`%cCSQ INTEGRATION ERROR: [${n}] : ${e.message}`,"color:rgb(228, 25, 45); font-weight: bold")}}function o(e,n){!!(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&console.log(`%cCSQ INTEGRATION: [${e}] : ${n}`,"color: #2a9d8f; font-weight: bold")}t.r(n);var a=t(0);const i=function(e){let n,t,o,a;if(r((function(){const r=e.name;n=e.version;const i=r.replace("@contentsquare/integration-","");t=i+"-"+n;let u="-contentsquare";a=new RegExp(u+"$").test(i),o=i.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),a||(u="-cap",a=new RegExp(u+"$").test(i),o=i.replace(/-cap([^-cap]*)$/,"$1"))}),"Shared-Function-readPackageJSON"),a)return{snippetBuildName:t,parameterName:o,snippetVersion:n}}(t(1)),u=(i.parameterName,i.snippetBuildName),c=i.snippetVersion;r((function(){const e=a.displayName,n=a.dvarPrefix;var t,r;function i(e,t){(function(e,n){window._uxa=window._uxa||[],window._uxa.push(["trackDynamicVariable",{key:e,value:n}])})(e=n+e,t),o(u,`Dynamic variable with ${e} and value ${t} sent`)}if(t=e,r=c,CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push(t+" - v"+r),CS_CONF.integrations_handler=CS_CONF.integrations_handler||{},CS_CONF.integrations_handler.launchdarkly=function(e,n){e&&n&&i(e,n.toString())},"function"==typeof window.CustomEvent){const e=new window.CustomEvent("Contentsquare_LD_Integration_Launch");window.dispatchEvent(e)}}),u)}]);
/* integration-google-analytics-4 0.14.1 */
!function(e){var n={};function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(o,r,function(n){return e[n]}.bind(null,r));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=2)}([function(e){e.exports=JSON.parse('{"displayName":"Google Analytics 4","dvarPrefix":"AN_GA_"}')},function(e){e.exports=JSON.parse('{"name":"@contentsquare/integration-google-analytics-4-contentsquare","version":"0.14.1","scripts":{"build:snippet":"webpack"}}')},function(e,n,t){"use strict";function o(e,n){try{e()}catch(e){window._uxa=window._uxa||[],window._uxa.push(["logSnippetError",n,e.message]),(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&console.log(`%cCSQ INTEGRATION ERROR: [${n}] : ${e.message}`,"color:rgb(228, 25, 45); font-weight: bold")}}function r(e,n){function t(e){return"object"==typeof e&&null!==e}if(t(window.CS_INTEGRATIONS_CONF)&&t(window.CS_INTEGRATIONS_CONF[e]))return window.CS_INTEGRATIONS_CONF[e][n]}t.r(n);let i,a=1e3,u=10;function c(e,n,t,o,l,s){var d;n&&t&&(i||(i=r(e,"timingSettings"),"object"==typeof(d=i)&&null!==d&&Object.keys(d).length&&(a=i.doOnlyWhenInterval,u=i.doOnlyWhenTimes)),void 0===(l=l)&&(l=a),void 0===(s=s)&&(s=u),--s<0?"function"==typeof o&&o():t()?n():setTimeout((function(){c(e,n,t,o,l,s)}),l))}function l(e,n){!!(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&console.log(`%cCSQ INTEGRATION: [${e}] : ${n}`,"color: #2a9d8f; font-weight: bold")}var s=t(0);const d=function(e){let n,t,r,i;if(o((function(){const o=e.name;n=e.version;const a=o.replace("@contentsquare/integration-","");t=a+"-"+n;let u="-contentsquare";i=new RegExp(u+"$").test(a),r=a.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),i||(u="-cap",i=new RegExp(u+"$").test(a),r=a.replace(/-cap([^-cap]*)$/,"$1"))}),"Shared-Function-readPackageJSON"),i)return{snippetBuildName:t,parameterName:r,snippetVersion:n}}(t(1)),f=d.parameterName,p=d.snippetBuildName,g=d.snippetVersion;o((function(){const e=s.displayName,n=s.dvarPrefix;var t,o;t=e,o=g,CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push(t+" - v"+o);const i=r(f,"logSettings");var a;const u=(a=i,Array.isArray(a)?i:[]).includes("enableLogsVID");function d(e,t){(function(e,n){window._uxa=window._uxa||[],window._uxa.push(["trackDynamicVariable",{key:e,value:n}])})(e=n+e,t),l(p,`Dynamic variable with ${e} and value ${t} sent`)}function b(){var e,n;e="gaGlobal.vid doesn't exist",n=p,window._uxa=window._uxa||[],window._uxa.push(["logSnippetError",n,e]),(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&console.log(`%cCSQ INTEGRATION LOG ERROR: [${n}] : ${e.message}`,"color:rgb(228, 25, 45); font-weight: bold")}c(f,(function(){const e=window.gaGlobal.vid;e?d("ClientID",e):b()}),(function(){return!(!window.gaGlobal||!gaGlobal.vid)}),(function(){u&&b()}))}),p)}]);
/* integration-datadog 3.2.1 */
!function(e){var n={};function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(o,i,function(n){return e[n]}.bind(null,i));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=2)}([function(e){e.exports=JSON.parse('{"displayName":"Datadog","dvarPrefix":"APM_DD_","replayKey":"dd"}')},function(e){e.exports=JSON.parse('{"name":"@contentsquare/integration-datadog-contentsquare","version":"3.2.1","scripts":{"build:snippet":"webpack"}}')},function(e,n,t){"use strict";function o(e,n){try{e()}catch(e){window._uxa=window._uxa||[],window._uxa.push(["logSnippetError",n,e.message]),(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&console.log(`%cCSQ INTEGRATION ERROR: [${n}] : ${e.message}`,"color:rgb(228, 25, 45); font-weight: bold")}}function i(e,n){function t(e){return"object"==typeof e&&null!==e}if(t(window.CS_INTEGRATIONS_CONF)&&t(window.CS_INTEGRATIONS_CONF[e]))return window.CS_INTEGRATIONS_CONF[e][n]}t.r(n);function r(e,n,t){if((t=t||window)&&n&&e){let o=!1,i=t[e];i?n():Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return i},set:function(e){i=e,o||(o=!0,n())}})}}function a(e,n){!!(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&console.log(`%cCSQ INTEGRATION: [${e}] : ${n}`,"color: #2a9d8f; font-weight: bold")}var u=t(0);const c=function(e){let n,t,i,r;if(o((function(){const o=e.name;n=e.version;const a=o.replace("@contentsquare/integration-","");t=a+"-"+n;let u="-contentsquare";r=new RegExp(u+"$").test(a),i=a.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),r||(u="-cap",r=new RegExp(u+"$").test(a),i=a.replace(/-cap([^-cap]*)$/,"$1"))}),"Shared-Function-readPackageJSON"),r)return{snippetBuildName:t,parameterName:i,snippetVersion:n}}(t(1)),s=c.parameterName,f=c.snippetBuildName,l=c.snippetVersion;o((function(){const e=u.displayName,n=u.dvarPrefix,t=u.replayKey;var c,d;c=e,d=l,CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push(c+" - v"+d);const p=i(s,"settings");var w;const g=(w=p,Array.isArray(w)?p:[]).includes("setReplayLinkToCurrentPV");function _(e,t){(function(e,n){window._uxa=window._uxa||[],window._uxa.push(["trackDynamicVariable",{key:e,value:n}])})(e=n+e,t),a(f,`Dynamic variable with ${e} and value ${t} sent`)}function y(){setTimeout((function(){o((function(){if("function"==typeof DD_RUM.getInternalContext&&"object"==typeof DD_RUM.getInternalContext()){const n=DD_RUM.getInternalContext().session_id;if(n){const t=i(s,"vendorSettings");let o=("object"==typeof(e=t)&&null!==e?t:{}).domain;if(o){o=o.trim(),o=o.replace("http://",""),o=o.replace("https://",""),o=o.replace("/","");let e=new Date;e.setHours(e.getHours()-2),e=Date.parse(e);let t=new Date;t.setHours(t.getHours()+1),t=Date.parse(t);_("Session Link","https://"+o+"/rum/explorer?query=@session.id:"+n+"&tab=session&from_ts="+e+"&to_ts="+t+"&live=true")}_("SessionID",n)}(function(e,n,t,o){return new Promise((function(i,r){function a(){window._uxa.push(["replay:link:generate",{withTimestamp:t},u])}function u(o){if(o&&o.replayLink&&o.isRecording){let r="https://"+o.replayLink+"&vd="+e;if(!n&&!t){const e=new URLSearchParams(r);e.set("pvid",1);const n=e.toString();r=decodeURIComponent(n)}i(r)}}e||(e="missingFromDynamicSnippet"),t||(t=!1),o?a():(window._uxa=window._uxa||[],window._uxa.push(["onRecordingStateChange",function(e){e&&e.isRecording&&a()}]))}))})(t,g).then((function(e){o((function(){if(e){const n={ContentsquareReplay:e};"function"==typeof DD_RUM.addUserAction?DD_RUM.addUserAction("Contentsquare",n):"function"==typeof DD_RUM.addAction&&DD_RUM.addAction("Contentsquare",n)}}),f)}))}var e}),f)}),500)}!function(e,n){let t=!1;window._uxa=window._uxa||[],window._uxa.push(["afterPageView",function(o){n?t||(e(o),t=!0):e(o)}])}((function(e){o((function(){e&&1===e.pageNumber&&function(e,n,t){t=t||window;const o=e.split(".");if(1==o.length)r(e,n,t);else{let e=t,i=0;const a=function(){e=i>0?e[o[i-1]]:window,i++,i>=o.length?r(o[i-1],n,e):r(o[i-1],a,e)};a()}}("DD_RUM",y)}),f)}),!0)}),f)}]);
(()=>{var Lu=Object.defineProperty;var Uu=(s,n,t)=>n in s?Lu(s,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[n]=t;var Re=(s,n,t)=>Uu(s,typeof n!="symbol"?n+"":n,t);var ye={};ye.d=(s,n)=>{for(var t in n)ye.o(n,t)&&!ye.o(s,t)&&Object.defineProperty(s,t,{enumerable:!0,get:n[t]})};ye.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();ye.o=(s,n)=>Object.prototype.hasOwnProperty.call(s,n);ye.r=s=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})};var Zr={};ye.r(Zr);ye.d(Zr,{getRequestParameters:()=>vy});function Ts(s,n){let t;return window.Zone&&typeof window.Zone.__symbol__=="function"&&(t=s[window.Zone.__symbol__(n)]),t!=null?t:s[n]}function ft(s){return X(s)&&(typeof s=="number"||s instanceof Number)&&!isNaN(s)}function Gs(s){return s===parseInt(s,10)}function A(s){return X(s)&&(typeof s=="string"||s instanceof csString)}function mn(s){return typeof s=="boolean"}function xe(s){return typeof s=="object"}function X(s){return typeof s!="undefined"}function ut(s){return X(s)&&s!==null}function Y(s){return typeof s=="object"&&s!==null}function Vu(s,n,t){return Gs(s)&&s>=n&&s<=t}function Ar(s){for(let n in s)return!1;return!0}function Se(s){return typeof s=="function"}function Le(s){return s instanceof Element}function ve(s){return s instanceof Error}function On(s){let n=s.length;for(let t=0;t<n;t++)switch(csString.prototype.charCodeAt.call(s,t)){case 9:case 10:case 11:case 12:case 13:case 32:case 160:continue;default:return!1}return!0}var Ri=typeof window=="undefined";function ju(){return typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof ye.g!="undefined"?ye.g:typeof process!="undefined"?process:Function("return this")()}var Z=ju();var pt=(()=>{let s;return function(n){n.debug="debug",n.warn="warn",n.implementation="implementation",n.error="error",n.critical="critical"}(s||(s={})),s})(),Yn={[pt.debug]:0,[pt.warn]:1,[pt.implementation]:1,[pt.error]:2,[pt.critical]:3},it={debug(...s){},warn(...s){},implementation(...s){},error(...s){},critical(...s){},isPerfLoggingActive(){return!1}};function Hu(s){it=s}var P=s=>(n,t,e)=>{let i=(t==null?void 0:t.toString())||"",r=s||`${n.constructor&&n.constructor.name}.${i}`;if(e){let o=e.value;e.value=function(...c){return ls(r,o.bind(this))(...c)}}};function ls(s,n){return function(...t){try{let e=n.apply(this,t);return X(Z.Promise)&&e instanceof Z.Promise?e.then(i=>i,i=>it.error(ve(i)?i:new Error(i),s)):e}catch(e){try{it.error(ve(e)?e:new Error(e),s)}catch{}}}}function tt(s,n,t,e){var i=arguments.length,r=i<3?n:e===null?e=Object.getOwnPropertyDescriptor(n,t):e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,n,t,e);else for(var c=s.length-1;c>=0;c--)(o=s[c])&&(r=(i<3?o(r):i>3?o(n,t,r):o(n,t))||r);return i>3&&r&&Object.defineProperty(n,t,r),r}function Nn(s){let n=new ArrayBuffer(s.length),t=new Uint8Array(n);for(let e=0,i=s.length;e<i;e+=1)t[e]=csString.prototype.charCodeAt.call(s,e);return n}function oa(s){let n=new Uint8Array(s),t="";for(let e=0;e<n.byteLength;e+=1)t+=csString.fromCodePoint(n[e]);return t}function Bu(s){return new Promise((n,t)=>{let e=new csFileReader;e.onload=i=>{var r,o;if(typeof((r=i.target)===null||r===void 0?void 0:r.result)!="string")return t("Unexpected output: "+((o=i.target)===null||o===void 0?void 0:o.result));n(csString.prototype.split.call(i.target.result,",")[1])},e.readAsDataURL(new Blob([s]))})}function to(s){let n=self.atob(s);return Nn(n)}function yn(s){let n=csArray.from(new Uint8Array(s));return csArray.prototype.join.call(csArray.prototype.map.call(n,t=>csString.prototype.padStart.call(t.toString(16),2,"0")),"")}function aa(s){let n=csString.prototype.indexOf.call(s,";base64,")!==-1,t=csString.prototype.indexOf.call(s,","),e=n?[csString.prototype.substring.call(s,0,t-7),csString.prototype.substring.call(s,t+1)]:[csString.prototype.substring.call(s,0,t),csString.prototype.substring.call(s,t+1)];if(!n&&/^%3Csvg/i.test(e[1]))try{e[1]=decodeURIComponent(e[1])}catch(o){it.warn(`${o}, calling decodeURIComponent on: ${e[1]}`)}let r=n?to(e[1]):Nn(e[1]);return new Blob([r],{type:csString.prototype.replace.call(e[0],"data:","")})}var kc=typeof performance!="undefined"&&!!performance.now,ca=kc?()=>performance.now():()=>csDate.now(),Fu=(()=>{var s,n;return kc?(n=(s=performance.timing)===null||s===void 0?void 0:s.navigationStart)!==null&&n!==void 0?n:Math.floor(performance.timeOrigin):0})(),eo=34164e6,C={now(){return Math.round(ca()+Fu)},elapsed(){return ca()}};function la(){return Math.floor(C.now()/1e3)}function Dc(){return typeof window.Promise=="function"}function so(){var s;return typeof crypto!="undefined"&&Se((s=crypto.subtle)===null||s===void 0?void 0:s.digest)}function ha(){var s,n;return typeof((s=window.navigation)===null||s===void 0?void 0:s.addEventListener)=="function"&&typeof((n=window.navigation)===null||n===void 0?void 0:n.removeEventListener)=="function"}function bt(s,n){return csString.prototype.lastIndexOf.call(s,n,0)===0}function Js(s,n){return csString.prototype.indexOf.call(s,n,s.length-n.length)!==-1}async function ua(s,n){return yn(await window.crypto.subtle.digest(s,n))}var $u=Number.MAX_SAFE_INTEGER||9007199254740991,_s={percentage(){return Math.floor(Math.random()*1e4)/100},boolean(s){return this.percentage()<s},integer(s=$u){return Math.floor(Math.random()*s)}};function qs(s,n){let t,e,i,r,o,c=null,l=f=>{let d=C.elapsed();if(!f&&c!==null){let m=n-(d-c);if(m>=1){i=Z.csSetTimeout(l,m);return}}let E=d-r;i=null,c=null,r=null,o=s.apply(t,[E,...e])},h=function(){if(t=this,e=arguments,r){c=C.elapsed();return}return r=C.elapsed(),i=Z.csSetTimeout(l,n),o};return h.flushPending=()=>{i&&(Z.csClearTimeout(i),l(!0))},h.cancel=()=>{c=null,r=null,i&&(Z.csClearTimeout(i),i=null)},h}function zu(s=0){return(n,t,e)=>{e.value=qs(e.value,s)}}var Ei=(()=>{class s{static setGlobalService(t){s.globalService=t}constructor(t){this.name=t,this.values={}}reset(){this.values={}}flush(){if(!s.globalService)return!1;let t=this.values,e=Object.keys(t);if(!e.length)return!1;let i=csArray.prototype.map.call(e,r=>({name:this.name,parameter:r,value:Math.round(t[r])}));return s.globalService.push(i),this.reset(),i.length>0}}return s.globalService=null,tt([P()],s.prototype,"flush",null),s})(),Ot=(()=>{class s extends Ei{constructor(t,e=100){super(t),this.Sy=e,this.values={},e&&(this.debouncedFlush=qs(()=>this.flush(),this.Sy))}count(t,e=1){Ei.globalService&&(this.values[t]=(this.values[t]||0)+e,this.debouncedFlush())}}return s})(),da=(()=>{class s extends Ei{constructor(){super(...arguments),this.values={average:0,count:0,max:0,total:0}}get average(){return this.values.average}get count(){return this.values.count}get max(){return this.values.max}get total(){return this.values.total}push(t){this.values.count++,this.values.total+=t,this.values.max=Math.max(this.values.max,t),this.values.average=this.values.total/this.values.count}reset(){this.values={count:0,total:0,max:0,average:0}}}return s})(),Gu=(()=>{class s extends Ei{add(t,e){var i,r,o,c,l,h,f;let d=E=>this.values[`${t}.${E}`];(i=(c=this.values)[l=`${t}.count`])!==null&&i!==void 0||(c[l]=0),(r=(h=this.values)[f=`${t}.total`])!==null&&r!==void 0||(h[f]=0),this.values[`${t}.count`]++,this.values[`${t}.total`]+=e,this.values[`${t}.max`]=Math.max((o=d("max"))!==null&&o!==void 0?o:0,e),this.values[`${t}.average`]=d("total")/d("count")}}return s})(),G={counters:{commandsFromIntegrations:new Ot("commands-from-integrations"),commandsFromCSTC:new Ot("commands-from-cstc"),commandsFromIframe:new Ot("commands-from-iframe"),commandApplied:new Ot("command-applied"),commandError:new Ot("command-error"),commandMisuse:new Ot("command-misuse"),CSTCSnippetUsed:new Ot("cstc-snippet-used"),redactedPII:new Ot("redacted-pii"),pageAnonymisation:new Ot("page-anonymisation"),patchedNativeFunctions:new Ot("patched-native-functions"),pureWindowState:new Ot("pure-window-state"),sensitiveElements:new Ot("sensitive-elements"),cspErrors:new Ot("csp-errors"),networkRequests:new Ot("network-requests"),webVitalsErrors:new Ot("web-vitals-errors"),trackedFeatures:new Ot("tracked-features"),longTasks:new da("longTasks"),tasks:new da("tasks"),errors:new Ot("errors"),methodPerformance:new Gu("perf")},setService(s){Ei.setGlobalService(s)}},Ci=(()=>{class s{constructor(){this._o=0}get length(){return this._o}get isEmpty(){return!this.Us}pushAll(t){for(let e=0;e<t.length;e++)this.push(t[e])}push(t){this._o++,this.Yn?this.Yn=this.Yn[1]=[t,void 0]:this.Yn=this.Us=[t,void 0]}pop(){if(!this.Us)return null;this._o--;let t=this.Us[0];return this.Us=this.Us[1],this.Us||(this.Yn=void 0),t}forEach(t){let e=this.Us;for(;e!=null&&e.length;)t(e[0]),e=e[1]}clear(){this._o=0,this.Us=this.Yn=void 0}}return s})(),Rr=0,io=s=>{Rr++,csQueueMicrotask(()=>As(()=>{try{s()}finally{Rr--}},_e.MicroTask))},En=new Ci,Sn=new Ci;function jt(s,n="high"){En.isEmpty&&Sn.isEmpty&&xc(qu),n==="high"?Sn.push(pa(s)):En.push(pa(s))}function xc(s,n=10){n===0?io(s):csQueueMicrotask(()=>xc(s,n-1))}function qu(){for(;!Sn.isEmpty;)Sn.pop()();for(;!En.isEmpty;)En.pop()()}async function Lc(s=1){for(let n=0;n<s;n++)await new Promise(t=>jt(t))}function pa(s){return function(){try{s.apply(window,arguments)}catch(n){it.critical(n)}}}var un="null",ss=null,Uc=[],Wu=()=>{var s;return Ri||!!(!((s=document.body)===null||s===void 0)&&s.getAttribute("data-cs-tag-extension"))};!Ri&&Wu()&&(window._uxa?_uxa.push(["debugEvents",!0]):window._uxa=[["debugEvents",!0]],ss=new BroadcastChannel("cs-tag"),document.addEventListener("cs.tracking.recordingEvent",s=>{Cr({type:"UXA_EVENT",event:s.detail})}),ss.addEventListener("message",s=>{if(s.data.type==="CONNECT"){if(s.data.sessionId===un)return;un=s.data.sessionId,csArray.prototype.forEach.call(Uc,n=>n()),ss==null||ss.postMessage({type:"CONNECTED",sessionId:un})}}));function Yu(s){Ri||(un!==null&&csSetTimeout(s),csSetTimeout(()=>csArray.prototype.push.call(Uc,s)))}function Cr(s){ss==null||ss.postMessage(s)}function Ws(s){var n;let t=(n=s.length)!==null&&n!==void 0?n:0,e=new csArray(t);for(let i=0;i<t;i+=1)e[i]=s[i];return e}function ke(s,n){let t=s.length,e=new csArray(t);for(let i=0;i<t;i+=1)e[i]=n(s[i]);return e}function Xu(s,n,t){let e=[],i=0;for(let r=0;r<s.length;r+=1){let o=n(s[r]);for(let c=0;c<o.length;c++)t(o[c],i++)}return e}function no(s,n){let t=[];return Xu(s,n,e=>csArray.prototype.push.call(t,e)),t}function W(s,n){if(Ku(s)){let t=s.length;for(let e=0;e<t;e++)n(s[e],e)}else{let t=0,e=s.next();for(;!e.done;)n(e.value,t++),e=s.next()}}function Ku(s){return s.length>=0}function me(s,n){let t=s.length;for(let e=0;e<t;e++)if(n(s[e],e))return s[e]}function Si(s,n){let t=s.length;for(let e=0;e<t;e++)if(n(s[e],e))return!0;return!1}function ro(s,n){let t=s.length;for(let e=0;e<t;e++)if(!n(s[e],e))return!1;return!0}function vi(s,n){let t=s.length,e=[];for(let i=0;i<t;i+=1){let r=s[i];n(r)&&csArray.prototype.push.call(e,r)}return e}function Ju(s,n,t){let e=s.length+n.length+((t==null?void 0:t.length)||0),i=new csArray(e),r=0;for(let o=0;o<s.length;o++)i[r++]=s[o];for(let o=0;o<n.length;o++)i[r++]=n[o];if(!t)return i;for(let o=0;o<t.length;o++)i[r++]=t[o];return i}function fa(s,n){for(let t=0;t<s.length;t++)csArray.prototype.push.call(n,s[t])}function Ue(s){let n=s instanceof Map,t=[];return s.forEach((e,i)=>csArray.prototype.push.call(t,n?[i,e]:e)),t}function Qu(s){return csArray.isArray(s)&&s.length>0}var Ii=(()=>{class s{constructor(t,e=""){this.name=t,this.format=e}}return s})(),Ce=(()=>{class s extends Ii{constructor(t){super(t,"Value: {count}"),this.count=0}increase(t=1){this.count+=t}decrease(){this.count>0&&this.count--}clear(){this.count=0}getData(){return{count:this.count}}}return s})();var ga=(()=>{class s extends Ii{constructor(t){super(t,"Living intances: {instances}<br/>Added: {added}<br/>Removed: {removed}"),this.added=0,this.removed=0}get value(){return this.added-this.removed}increase(){this.added++}decrease(){this.removed++}getData(){return{added:this.added,removed:this.removed,instances:this.added-this.removed}}}return s})(),Ie=(()=>{class s extends Ii{constructor(t){super(t,"Count: {count}<br/>Average: {average}ms<br/>Max: {max}ms<br/>Total: {total}ms"),this.total=0,this.count=0,this.max=0}get average(){return this.count?this.total/this.count:0}elapsed(t){return this.count++,this.max=Math.max(this.max,t),this.total+=t,t}measure(t){let e=C.elapsed();t(),this.count++;let i=C.elapsed()-e;return this.max=Math.max(this.max,i),this.total+=i,i}asyncMeasure(){let t=C.elapsed();return()=>{this.count++;let e=C.elapsed()-t;return this.max=Math.max(this.max,e),this.total+=e,e}}getData(){return{total:this.total,count:this.count,average:this.average,max:this.max}}}return s})(),Zu=(()=>{class s extends Ii{constructor(){super("INP","Value: {value}")}getData(){return{value:yt.tasks.eventListener.max}}}return s})(),yt={general:{category:"General",nbEvents:new Ce("Nb of Events"),pendingTasks:new Ce("Pending Tasks"),pendingEvents:new Ce("Pending Tasks"),nbOfMutationObservers:new ga("Nb of Mutation Observers"),inp:new Zu},mutations:{category:"Mutations",initialDOM:new Ie("Initial DOM"),pendingMutations:new Ce("Nb of Mutations scheduled"),serializedMutations:new Ie("Serialized Mutations"),count:new Ce("Mutation Count"),elementMutationObserved:new ga("Nb of Elements Observed by MutationObserver"),unobserveGarbageCollection:new Ie("Unobserve GC")},visibilityObserver:{category:"Visibility Observer",hiddenElements:new Ce("Nb of Hidden Elements "),nbElements:new Ce("Nb of  Elements")},tasks:{category:"Tasks",tasks:new Ce("Tasks"),errors:new Ce("Errors"),timer:new Ie("Timers"),microtask:new Ie("Microtasks"),mutationObserver:new Ie("MutationObserver"),monkeyPatch:new Ie("MonkeyPatch"),eventListener:new Ie("EventListener"),intersectionObserver:new Ie("Intersection")}};function td(){let s=null;Yu(()=>{let n=r=>Object.keys(r),t=csArray.prototype.map.call(n(yt),r=>yt[r]),e=csArray.prototype.map.call(t,r=>csArray.prototype.filter.call(csArray.prototype.map.call(n(r),o=>r[o]),o=>o instanceof Ii));Cr({type:"UXA_PERFORMANCE_COUNTER_SCHEMA",event:csArray.prototype.map.call(t,(r,o)=>({category:r.category,performanceCounters:csArray.prototype.map.call(e[o],c=>({name:c.name,format:c.format}))}))}),!s&&(s=csSetInterval(()=>{As(()=>{let r=no(ke(e,o=>ke(o,c=>c.getData())),o=>o);Cr({type:"UXA_PERFORMANCE_COUNTER",event:r})},_e.Timer)},1e3))})}var _e=(()=>{let s;return function(n){n.Timer="timer",n.MonkeyPatch="monkeyPatch",n.MutationObserver="mutationObserver",n.EventListener="eventListener",n.IntersectionObserver="intersectionObserver",n.MicroTask="microtask"}(s||(s={})),s})(),Qt=null;async function As(s,n,t=null){if(Qt&&n!==_e.MicroTask)return s();t&&(Qt=t),Qt||(Qt={type:n,elapsed:0},yt.tasks.tasks.increase());try{Qt.elapsed+=ed(s)}catch(e){yt.tasks.errors.increase(),it.critical(new Error(`Task error:  ${n}/${s.name}.
${e.message}
${e.stack}`,e),"TASK_ERROR")}finally{Rr<=0&&(yt.tasks[Qt.type].elapsed(Qt.elapsed),Qt.elapsed>50?G.counters.longTasks.push(Qt.elapsed):G.counters.tasks.push(Qt.elapsed),Qt=null)}}function ed(s){let n=C.elapsed();return s(),C.elapsed()-n}var Xn,sd="cs-native-frame";var We={navigatorProperties:[{propertyName:"sendBeacon",binding:navigator}],nodeProperties:["childNodes","parentNode","nextSibling","firstChild"],elementProperties:["shadowRoot"],elementPropertiesValues:["matches","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector"],eventProperties:["target"],imageProperties:["src"],constructors:{Date:"csDate",JSON:"csJSON",Array:"csArray",String:"csString",URL:"csURL",MutationObserver:"csMutationObserver",screen:"csScreen",RegExp:"csRegExp"}};function Vc(s,n){let t=Ts(window,s);return function(e,i){return t(()=>As(e,n),i)}}window.csSetTimeout=Vc("setTimeout",_e.Timer);window.csSetInterval=Vc("setInterval",_e.Timer);window.csQueueMicrotask=(Xn=Ts(window,"queueMicrotask"))!==null&&Xn!==void 0?Xn:setTimeout;window.csClearTimeout=Ts(window,"clearTimeout");window.csClearInterval=Ts(window,"clearInterval");window.csFileReader=Ts(window,"FileReader");(()=>{var s;let n=0;function t(i){return"cs$Symbol_"+i}function e(i){return t(i)+ ++n}e.for=t,window.csSymbol=(s=window.Symbol)!==null&&s!==void 0?s:e})();function id(){let s=document.createElement("iframe");s.id=sd,s.setAttribute("hidden",""),s.setAttribute("title","Intentionally blank"),s.setAttribute("sandbox","allow-same-origin");let n=document.createElement("cs-native-frame-holder");if(n.setAttribute("hidden",""),document.body.appendChild(n),!!Element.prototype.attachShadow){let e=n.attachShadow({mode:"closed"});return e.innerHTML=s.outerHTML,e.firstElementChild.contentWindow}return n.innerHTML=s.outerHTML,n.firstElementChild.contentWindow}function nd(s,n){let t,e=s;for(;e&&!(t=Object.getOwnPropertyDescriptor(e,n));)e=Object.getPrototypeOf(e);return t}function rd(s,n,t){let e=nd(s,n);if(!e)return function(){return this[n]};switch(t){case"get":return e.get;case"set":return e.set;case"value":return e.value}}function jc(s){var n,t;Object.keys(We.constructors).forEach(i=>{window[We.constructors[i]]=s[i]instanceof Function&&s[i].prototype==null?s[i].bind(window):s[i]}),cd(s);let e=s.MutationObserver;("Prototype"in window||ad())&&(e=(t=(n=Ts(window,"MutationObserver"))!==null&&n!==void 0?n:window.WebKitMutationObserver)!==null&&t!==void 0?t:window.MutationObserver),window.csIntersectionObserver=ma(window.IntersectionObserver,_e.IntersectionObserver),window.csMutationObserver=ma(e,_e.MutationObserver),ks("csNode",We.nodeProperties,s.Node.prototype,"get"),ks("csElement",We.elementProperties,s.Element.prototype,"get"),ks("csElement",We.elementPropertiesValues,s.Element.prototype,"value",!1),ks("csHTMLImageElement",We.imageProperties,s.HTMLImageElement.prototype,"set"),ks("csEvent",We.eventProperties,s.Event.prototype,"get"),ks("csNavigator",We.navigatorProperties,s.navigator,"value")}function ks(s,n,t,e,i=!0){n.forEach(r=>{let o=typeof r!="string"&&"binding"in r,c=o?r.propertyName:r;(i||c in t)&&(window[`${s+c}`]=rd(t,c,e),o&&(window[`${s+c}`]=window[`${s+c}`].bind(r.binding)))})}function oo(s,n){window.CSProtectnativeFunctionsLogs=window.CSProtectnativeFunctionsLogs||{},window.CSProtectnativeFunctionsLogs[s]=n}function od(){try{let s=id();return s?(window.CSPureWindow=s,jc(window.CSPureWindow),!0):!1}catch(s){return oo("Warning",`failed to copy references from pure iframe: ${s.message}`),!1}}if(!od())try{jc(Z)}catch(s){oo("Critical",`failed to copy references from window: ${s.message}`)}function ad(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function cd(s){window.csquerySelector={1:s.Element.prototype.querySelector,9:s.Document.prototype.querySelector,11:s.DocumentFragment.prototype.querySelector},window.csquerySelectorAll={1:s.Element.prototype.querySelectorAll,9:s.Document.prototype.querySelectorAll,11:s.DocumentFragment.prototype.querySelectorAll}}function ma(s,n){try{let t=function(e,i){return new s((o,c)=>{As(()=>e(o,c),n)},i)};return t.base=s,t}catch{return oo("Warning",`failed to extends ${s.name}`),s}}var K=(()=>{let s;return function(n){n.ELLIPSIS="\u2026";function t(o){return csString.prototype.replace.call(o,/[.*+?^${}()|[\]\\]/g,"\\$&")}function e(o){return csString.prototype.replace.call(o,/([#;&,.+*~':"!^$[\]()<=>|/%?@`{}\\ ])/g,"\\$1")}n.escapeInvalidCharacters=e;function i(o,c,l){if("replaceAll"in csString.prototype)return csString.prototype.replaceAll.call(o,c,l);let h=new csRegExp(t(c),"g");return csString.prototype.replace.call(o,h,l)}n.stringReplaceAll=i;function r(o,c,l=""){return o.length<=c?o:csString.prototype.slice.call(o,0,c-l.length)+l}n.truncate=r}(s||(s={})),s})();function Ir(s){return K.escapeInvalidCharacters(csString.prototype.toLowerCase.call(s.localName))}function ld(s){let n=s.getAttribute("id");return n&&K.escapeInvalidCharacters(n)}function dt(s){return s.nodeType===1}function vn(s){return s.nodeType===3}function hd(s){return s.nodeType===8}function Hc(s){return dt(s)&&s.localName==="link"}function ud(s){return dt(s)&&s.localName==="source"}function Bc(s){return dt(s)&&s.localName==="a"}function ao(s){return Hc(s)&&csString.prototype.indexOf.call(s.rel,"stylesheet")!==-1}function dd(s){return dt(s)&&s.localName==="img"}function Pi(s){return dt(s)&&s.localName==="style"}function Mn(s){return dt(s)&&s.localName==="input"}function kn(s){return dt(s)&&s.localName==="textarea"}function Oi(s){return dt(s)&&s.localName==="script"}function pd(s){return dt(s)&&s.localName==="button"}function Qs(s){return dt(s)&&"ownerSVGElement"in s}function co(s){return dt(s)&&s.localName==="select"}function fd(s){return dt(s)&&s.localName==="details"}function gd(s){return dt(s)&&s.localName==="summary"}function md(s){return Qs(s)&&s.localName==="image"}function yd(s){return Qs(s)&&s.localName==="use"}function Ed(s){return Qs(s)&&s.localName==="feImage"}function Sd(s){switch(s.nodeType){case 9:case 11:return!0;default:return!1}}function vd(s){switch(s.nodeType){case 9:case 11:case 1:return!0;default:return!1}}function _n(s){return s.nodeType===9}function _i(s){return Sd(s)&&"host"in s&&"mode"in s}function Fc(s){return dt(s)&&!!csElementshadowRoot.apply(s)&&_i(csElementshadowRoot.apply(s))}var _d=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"];function wd(s){return dt(s)&&ut(s.tagName)&&csString.prototype.indexOf.call(s.tagName,"-")>0&&csString.prototype.indexOf.call(s.tagName,":")===-1&&csString.prototype.indexOf.call(s.tagName,'"')===-1&&csString.prototype.indexOf.call(s.tagName,",")===-1&&csArray.prototype.indexOf.call(_d,csString.prototype.toLocaleLowerCase.call(s.tagName))<0}var Ni="detached";function $c(s){let n=s,t=[n];for(;csNodeparentNode.apply(n)!==null;)n=csNodeparentNode.apply(n),csArray.prototype.push.call(t,n);return wn(n)&&csArray.prototype.push.call(t,Ni),{ancestors:t,selectionRoot:n}}function bd(s){let n=s,t=[n],e=null;for(;csNodeparentNode.apply(n)!==null;)e===null&&Bc(n)&&(e=n),csArray.prototype.push.call(t,csNodeparentNode.apply(n)),n=csNodeparentNode.apply(n);return wn(n)&&csArray.prototype.push.call(t,Ni),{firstAnchorParent:e,ancestors:t,selectionRoot:n}}function wn(s){return De.isValidElement(s)}var Es=(()=>{var s,n;return(n=(s=Z.Element)===null||s===void 0?void 0:s.prototype)!==null&&n!==void 0?n:{}})(),Yt=Es.matches||Es.matchesSelector||Es.mozMatchesSelector||Es.msMatchesSelector||Es.oMatchesSelector||Es.webkitMatchesSelector,ya=Es.closest,zc=9;function Td(s,n){return n?csArray.prototype.some.call(n,t=>Yt.call(s,t)):!1}function Ad(s,n,t){if(s===Ni||s.nodeType===zc)return 0;let e=t.dynamicElementNameRegex,i=!!(e!=null&&e.test(n.localName)),r=Ir(n),o=0,c=n.previousElementSibling;for(;c;)(Ir(c)===r||i&&(e!=null&&e.test(c.localName)))&&!Td(c,t.reliableSelectors)&&(o+=1),c=c.previousElementSibling;return o}function Rd(s,n,t){if(s===Ni||s.nodeType===zc)return 0;let e=0,i=n.previousElementSibling;for(;i;)Yt.call(i,t)&&(e+=1),i=i.previousElementSibling;return e}var Cd=[/\d{4}/,/^ember\d+$/],Id="@",lo="data-cs-override-id",Pd="data-cs-dynamic-id";function Gc(s,n,t,e){let i=e.dynamicIdRegex||null,r=e.dynamicElementNameRegex,o=Ir(s);if(r&&r.test(s.localName)&&(o=csString.prototype.replace.call(o,r,`$1${Id}`)),Md(s,t)){let E=ho(s);return{hasUniqueIdentifier:!0,elementSelector:`${o}[${lo}="${E}"]`}}let c=jd(s,t,e);if(c.success)return{hasUniqueIdentifier:!0,elementSelector:`${o}#UA[${c.attributeName}="${c.attributeValue}"]`};let l=Od(s,t,e);if(l)return{hasUniqueIdentifier:!0,elementSelector:`${o}#UCS[${l}]`};let h=ld(s);if(Dd(s,h,t,i))return{hasUniqueIdentifier:!0,elementSelector:`${o}#${h}`};let f=Nd(s,e);if(f){let E=Rd(n,s,f);return{hasUniqueIdentifier:!1,elementSelector:`${o}[${f}](${E})`}}let d=Ad(n,s,e);return{hasUniqueIdentifier:!1,elementSelector:`${o}:eq(${d})`}}function Od(s,n,t){if(t.uniqueCssSelectors){for(let e of t.uniqueCssSelectors)if(Yt.call(s,e)&&Vd(e,n))return e}}function Nd(s,n){if(n.reliableSelectors){for(let t of n.reliableSelectors)if(Yt.call(s,t))return t}}function Md(s,n){let t=ho(s);return t&&csString.prototype.match.call(t,/^[\w-]+$/)&&uo(lo,t,n)}function kd(s){return ho(s)!==null}function ho(s){return s.getAttribute(lo)}function Dd(s,n,t,e){return n&&!kd(s)&&!xd(s,n,e)&&Ud(n,t)}function xd(s,n,t){return s.hasAttribute(Pd)||Ld(n,t)}function Ld(s,n){let t=!1;return s&&n&&(t=n.test(s)),s&&(csArray.prototype.some.call(Cd,e=>e.test(s))||t)}function Ud(s,n){return s&&uo("id",s,n)}function uo(s,n,t){try{return window.csquerySelectorAll[t.nodeType].call(t,`[${s}="${n}"]`).length===1}catch(e){if(e.name!=="SyntaxError")throw e}return!1}function Vd(s,n){try{return window.csquerySelectorAll[n.nodeType].call(n,s).length===1}catch(t){if(t.name!=="SyntaxError")throw t}return!1}function jd(s,n,t){if(!t.uniqueAttributes)return{success:!1};for(let e of t.uniqueAttributes){let i=s.getAttribute(e);if(i!==null&&uo(e,i,n))return{attributeName:e,attributeValue:i,success:!0}}return{success:!1}}var Pr=11;function bn(s,n,t){let e=csArray.prototype.shift.call(s);if(s.length===0)return Ea(e,t);let i=e,r=s[0],{elementSelector:o,hasUniqueIdentifier:c}=Gc(i,r,n,t);if(!t.fullPath&&c){let h=s[s.length-1];return`${Ea(h,t)}${o}`}let l=bn(s,n,t);return`${l?`${l}>`:""}${o}`}function Ea(s,n){if(s===Ni)return"|detached|";if(s.host){let{ancestors:t,selectionRoot:e}=$c(s.host);return`${bn(t,e,n)}|shadow-root|`}return s.nodeType===Pr?"|fragment|":""}var qc=(()=>{class s{constructor(t){this.options=t,this.done=!1,this.path=null}getPath(){if(this.path===null)throw new Error("getPath was called before serializeElement");return this.path}isDone(){return this.done}}return s})(),Hd=(()=>{class s extends qc{constructor(){super(...arguments),this.wo=!1,this.bo=!1,this.Ec=!1}vy(t,e){return this.wo&&!(e===null&&wn(t))&&t.nodeType!==Pr&&!t.host}_y(t){return!t.localName}serializeElement(t,e,i){var r;if((r=this.path)!==null&&r!==void 0||(this.path=""),this.vy(t,e))return;let o=!1;e===null&&wn(t)&&(o=!0,this.done=!0);let c=this.bo&&!this.options.fullPath?"":">",l=!!t.host;if(l&&this.path&&(this.path="|shadow-root|"+c+this.path,this.Ec=!0,this.wo=!1,this.bo=!1),!l&&e===null&&t.nodeType===Pr){this.path="|fragment|"+c+this.path,this.done=!0;return}if(this._y(t))return;let h=e!=null?e:"detached",{elementSelector:f,hasUniqueIdentifier:d}=Gc(t,h,i,this.options);d&&(this.bo=!0,this.wo=!this.options.fullPath);let E=`${o?`|detached|${c}`:""}${this.wo&&!d?"":f}`,S=!d&&this.bo&&!this.options.fullPath?"":this.path&&!this.Ec?">":"";this.Ec=!1,this.path=`${E}${S}${this.path}`}}return s})();function $t(s,n=Vt.SHOW_ALL){let t=n|Vt.SHOW_ELEMENT,e=[document.createTreeWalker(s,t,null,!1)],i=Sa(s);i&&csArray.prototype.push.call(e,document.createTreeWalker(i,t,null,!1));let r=null;return{root:s,nextNode(){if(i){let o=i;return i=null,o}for(;e.length>0;){if(r){let h=r;return r=null,h}let c=e[e.length-1].nextNode();if(!c){csArray.prototype.pop.call(e);continue}let l=Sa(c);if(n&Vt.SHOW_DOCUMENT_FRAGMENT&&l&&(r=l),l&&csArray.prototype.push.call(e,document.createTreeWalker(l,t,null,!1)),(Jn[c.nodeType]&n)!==0)return c}return null},visitAll(o){Jn[s.nodeType]&n&&o(s);let c=this.nextNode();for(;c;){if((Jn[c.nodeType]&n)===0){c=this.nextNode();continue}o(c),c=this.nextNode()}},find(o){let c;return this.visitAll(l=>o(l)&&(c=l)),c},collectAll(o){let c=[];return this.visitAll(l=>csArray.prototype.push.call(c,o?o(l):l)),c}}}function Sa(s){return s&&Fc(s)?s.shadowRoot:null}var Kn=(()=>{var s;return(s=Z.Node)!==null&&s!==void 0?s:{}})(),Vt=(()=>{var s;return(s=Z.NodeFilter)!==null&&s!==void 0?s:{}})(),Jn={2:Vt.SHOW_ATTRIBUTE,4:Vt.SHOW_CDATA_SECTION,8:Vt.SHOW_COMMENT,11:Vt.SHOW_DOCUMENT_FRAGMENT,9:Vt.SHOW_DOCUMENT,10:Vt.SHOW_DOCUMENT_TYPE,1:Vt.SHOW_ELEMENT,[Kn.ENTITY_NODE]:Vt.SHOW_ENTITY,[Kn.ENTITY_REFERENCE_NODE]:Vt.SHOW_ENTITY_REFERENCE,[Kn.NOTATION_NODE]:Vt.SHOW_NOTATION,7:Vt.SHOW_PROCESSING_INSTRUCTION,3:Vt.SHOW_TEXT},Wc=!1,Or=5;function Bd(s=5){Wc=it.isPerfLoggingActive(),Or=s}function Rs(s,n){return function(){if(!Wc)return s.apply(this,arguments);let t=C.elapsed(),e=s.apply(this,arguments);if(e!=null&&e.then)e.then(()=>{let i=C.elapsed()-t;i>=Or&&G.counters.methodPerformance.add(n,i)});else{let i=C.elapsed()-t;i>=Or&&G.counters.methodPerformance.add(n,i)}return e}}var It=function(s){return function(n,t,e){let i=e.value;e.value=Rs(i,s)}},vs=(()=>{let s;return function(n){function t(){return!!Element.prototype.attachShadow}n.isSupported=t;function e(r){return r&&Fc(r)?r.shadowRoot:null}n.getShadowRoot=e;function i(r){return $t(r,NodeFilter.SHOW_DOCUMENT_FRAGMENT).collectAll(o=>o.host)}n.getAllShadowHosts=Rs(i,"getAllShadowHosts")}(s||(s={})),s})(),Et=(()=>{let s;return function(n){function t(){let d=[i()];return document.documentElement&&csArray.prototype.push.call(d,document.documentElement.scrollHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight),document.body&&csArray.prototype.push.call(d,document.body.scrollHeight,document.body.offsetHeight),Math.max(...d)}n.documentHeight=t;function e(){return document.documentElement.scrollWidth}n.documentWidth=e;function i(){return window.innerHeight}n.windowHeight=i;function r(){return window.innerWidth}n.windowWidth=r;function o(){let d=window.csScreen.width;return Gs(d)&&d>0?d:window.screen.width}n.screenWidth=o;function c(){let d=window.csScreen.height;return Gs(d)&&d>0?d:window.screen.height}n.screenHeight=c;function l(){return window.pageXOffset}n.windowOffsetX=l;function h(){return window.pageYOffset}n.windowOffsetY=h;function f(){return{dw:`${e()}`,dh:`${t()}`,ww:`${r()}`,wh:`${i()}`,sw:`${o()}`,sh:`${c()}`}}n.getRequestParameters=f}(s||(s={})),s})(),Qn=(()=>{var s;return(s=Z.Node)!==null&&s!==void 0?s:Object})(),ot=(()=>{let s;return function(n){let t="isConnected"in Qn.prototype?w=>w.isConnected:w=>!w.ownerDocument||!(w.ownerDocument.compareDocumentPosition(w)&w.DOCUMENT_POSITION_DISCONNECTED);function e(w,L){for(let V=w;V;V=csNodenextSibling.apply(V))L(w)}n.forEachChild=e;function i(w){return t(w)}n.isConnected=i;function r(w,L){let V=[];for(let F of l(w,L))csArray.prototype.push.call(V,F);return V}n.getAncestors=r;let o=(w,L)=>{var V;return(V=csNodeparentNode.apply(w))!==null&&V!==void 0?V:L&&_i(w)?w.host:null};function c(w,L,V=!1){let F=w;for(;F;){if(L(F))return F;let lt=o(F,V);if(lt&&lt!==F)F=lt;else break}return null}n.findAncestor=c;function*l(w,L=!1){let V=w;for(;V;){yield V;let F=o(V,L);if(F&&F!==V)V=F;else break}}n.walkUp=l;function h(w,L){if(w===L||L.contains(w))return!0;let V=n.getParentElement(w);return V&&V!==w?h(V,L):!1}n.isDescendantOf=h;function f(w){var L;return w.parentElement?w.parentElement:n.getRootNode(w)?(L=n.getRootNode(w))===null||L===void 0?void 0:L.host:null}n.getParentElement=f;function d(w,L=document){let V=Ws(window.csquerySelectorAll[L.nodeType].call(L,w)),F=vs.getAllShadowHosts(L);for(let lt of F){let Dt=vs.getShadowRoot(lt);if(!Dt)continue;let se=Ws(window.csquerySelectorAll[Dt.nodeType].call(Dt,w));csArray.prototype.push.call(V,...se)}return V}n.findAllElements=d,n.getRootNode=(()=>{if("getRootNode"in Qn.prototype)return(V,F)=>V.getRootNode(F);function w(V){let F=L(V);return _i(F)?w(F.host):F}function L(V){return csNodeparentNode.apply(V)!=null?L(csNodeparentNode.apply(V)):V}return(V,F)=>typeof F=="object"&&!!F.composed?w(V):L(V)})();function E(w){return w==="transparent"||/^(rgba|hsla)\(\d+, \d+%?, \d+%?, 0\)$/.test(w)}function m(w){let L=w.getBoundingClientRect();return L.right+Et.windowOffsetX()<0||L.bottom+Et.windowOffsetY()<0}function S(w){var L,V;if(((L=w.checkVisibility)===null||L===void 0?void 0:L.call(w,{checkOpacity:!0,checkVisibilityCSS:!0}))===!1)return!0;if(!w.offsetParent){if(!w.getBoundingClientRect)return it.warn(`SUP-11432: Element doesn't have getBoundingClientRect. Node: ${w instanceof Qn} Ctor: ${(V=w==null?void 0:w.constructor)===null||V===void 0?void 0:V.name}`),!1;let Dt=w.getBoundingClientRect();if(Dt.width==0&&Dt.height==0)return!0}let F=window.getComputedStyle(w);return F?F.display==="none"||F.visibility==="hidden"||F.visibility==="collapse"||F.opacity==="0"||F.filter==="opacity(0)"||F.width==="0px"&&F.height==="0px"||E(F.color):!0}n.isHiddenByCSS=S;function O(w){if(S(w))return!0;let V=f(w);return V!=null&&O(V)}n.areAncestorsHiddenByCSS=O;function N(w){let L=null,V=w;do if(S(V))L=V;else break;while(V=f(V));return L}n.getTopAncestorHiddenByCSS=N;function v(w){let L=_(w);return L!==null&&!w.contains(L)&&!L.contains(w)}function _(w){let L=w.getBoundingClientRect(),V=L.left+.5*L.width,F=L.top+.5*L.height;return k(document,V,F)}n.getTopElement=_;function M(w){if(!w.getBoundingClientRect)return null;let L=w.getBoundingClientRect(),V=L.x+L.width/2,F=L.y+L.height/2;return n.getTopElementFromPoint(document,V,F)}n.getElementOnTop=M;function k(w,L,V){let F=w.elementFromPoint(L,V);if(!F)return null;let lt=vs.getShadowRoot(F);return lt&&lt!=n.getRootNode(document.body)&&lt!==w?k(lt,L,V):F}n.getTopElementFromPoint=k;function T(w){return!m(w)&&!S(w)&&!v(w)}n.isVisibleInDocument=T;function B(w){return S(w)?!1:et(w)}n.isVisibleInViewportInForeground=B;function et(w){let L=_(w);return L===null?!1:w===L?!0:Ut(w)?w.textContent!==""&&L.contains(w):w.contains(L)}n.isInViewPort=et;function ct(w,L,V){let F=w.getAttributeNS(L,V);return F===""?w.hasAttributeNS(L,V)?F:null:F}n.getAttributeNS=ct;function Ht(w){return!!(w.hasAttribute("tabIndex")||w.getAttribute("contentEditable")==="true"||Bc(w)&&w.hasAttribute("href")||(co(w)||kn(w)||Mn(w)||pd(w))&&!w.hasAttribute("disabled")||fd(w)||gd(w))}n.isElementFocusable=Ht;function Ut(w){return w.localName==="span"||w.localName==="a"||w.localName==="b"||w.localName==="i"||w.localName==="button"||w.localName==="input"||w.localName==="label"||w.localName==="cite"||w.localName==="small"||w.localName==="strong"||w.localName==="code"||w.localName==="abbr"||w.localName==="em"||w.localName==="dfn"||w.localName==="time"||w.localName==="output"||w.localName==="object"||w.localName==="sub"}n.isInlineElement=Ut}(s||(s={})),s})(),Fd=(()=>{class s{constructor(t){this.wy=t}run(t){let e=[...this.wy],i=ot.getAncestors(t,!1),r=i[i.length-1];for(;e.length>0&&i.length>0;){let o=csArray.prototype.shift.call(i),c=i[0]||null;if(this.by(e,o,c,r),this.Ty(e),e.length===0)break;i.length===0&&o.host&&(i=ot.getAncestors(o.host,!1),r=i[i.length-1])}}by(t,e,i,r){for(let o of t)o.serializeElement(e,i,r)}Ty(t){for(let e=0;e<t.length;e++)t[e].isDone()&&(csArray.prototype.splice.call(t,e,1),e--)}}return s})(),$d=(()=>{class s extends qc{serializeElement(t){var e;if((e=this.path)!==null&&e!==void 0||(this.path=""),(t==="detached"||t.localName==="body")&&(this.done=!0,this.path.length>0))return;let i=this.Ay(t);if(i+=i.length>0?"|":"",this.path.length+i.length>this.options.hierarchyMaxLength){this.done=!0;return}this.path=i+this.path}Ay(t){if(!t.localName)return"";let e=`@${t.localName};`;return e+=this.Ry(t.id),t.classList&&(e+=this.Cy(csArray.from(t.classList))),t.attributes&&(e+=this.Iy(t)),e}Ry(t){return t?`#${t};`:""}Cy(t){return t.length>0?`.${csArray.prototype.join.call(csArray.prototype.sort.call(t),";.")};`:""}Py(t,e){var i,r;return((r=(i=this.options).isAttributeSensitive)===null||r===void 0?void 0:r.call(i,t,e))||csArray.prototype.indexOf.call(this.options.attributeIgnoreTokens,e)!==-1||Qs(t)&&csString.prototype.indexOf.call(e,"data-")===-1&&e!=="aria-label"||Mn(t)&&e==="value"}Oy(t,e){return this.options.useAnonymization&&!this.options.allWhitelistedAttributes.has(t)||e.length>this.options.attrMaxLength}Ny(t){let e={};for(let i of csArray.from(t.attributes))this.Py(t,i.name)||(e[i.name]=i.value);return e}Iy(t){var e,i;if(!((i=(e=this.options).isNodeSensitive)===null||i===void 0)&&i.call(e,t))return"";let r=Object.entries(this.Ny(t));return csArray.prototype.join.call(csArray.prototype.sort.call(csArray.prototype.map.call(csArray.prototype.filter.call(r,([o])=>o.length<this.options.attrMaxLength),([o,c])=>this.Oy(o,c)?`[${o}]`:`[${o}=${c}]`)),";")+(r.length>0?";":"")}}return s})(),De=(()=>{let s;return function(n){n.INVALID_ELEMENT="INVALID_ELEMENT";function t(c){return!!c&&"localName"in c&&"getAttribute"in c&&"hasAttribute"in c&&"parentNode"in c}n.isValidElement=t;function e(c,l,h={fullPath:!1,dynamicIdRegex:null}){let f=o(c);if(f===document)return{path:"",hierarchy:""};if(!t(f))return{path:n.INVALID_ELEMENT,hierarchy:n.INVALID_ELEMENT};let d=new Hd(h),E=new $d(l);return new Fd([d,E]).run(f),{path:d.getPath(),hierarchy:E.getPath()}}n.getElementPathAndHierarchy=e;function i(c,l={fullPath:!1,dynamicIdRegex:null}){let h=o(c);if(h===document)return"";if(!t(h))return n.INVALID_ELEMENT;let{ancestors:f,selectionRoot:d}=$c(h);return bn(f,d,l)}n.getElementPath=i;function r(c,l={fullPath:!1,dynamicIdRegex:null}){let h=o(c);if(h===document)return{path:"",firstAnchorParent:null};if(!t(h))return{path:n.INVALID_ELEMENT,firstAnchorParent:null};let{firstAnchorParent:f,ancestors:d,selectionRoot:E}=bd(h);return{path:bn(d,E,l),firstAnchorParent:f}}n.getElementPathAndFirstAnchorParent=r;function o(c){return c&&"jquery"in c&&c.length===1?c[0]:c}}(s||(s={})),s})();window.CSPathComputation=window.CSPathComputation||De;var Yc=["t.contentsquare.net","clicktale"],zd=s=>{var n;if(typeof s.filename=="string"&&csArray.prototype.some.call(Yc,t=>csString.prototype.indexOf.call(s.filename,t)>-1)&&!(csString.prototype.indexOf.call(s.filename,"blob")>-1&&(s.message==null?void 0:csString.prototype.indexOf.call(s.message,"importScripts"))>-1)){let t=new Error(s.message);t.stack=(n=s.error)===null||n===void 0?void 0:n.stack,H.critical(t)}};window.addEventListener("error",zd);var H=(()=>{class s{constructor(){}static whiteListFilename(t){csArray.prototype.push.call(Yc,t)}static setStrategy(t){s.Qi=t}static computeIsActive(t){s.$e=_s.boolean(t),s.$e?s.Sc=_s.boolean(10):s.Sc=!1}static isLoggingActive(){return s.$e}static getStrategy(){return s.Qi}static debug(t,e=""){s.$e&&this.Qi.send(t,e,pt.debug)}static warn(t,e=!0,i=""){var r;G.counters.errors.count("warning"),s.$e&&e&&this.Qi.send(t,i,pt.warn),(r=window.UXAnalytics.Console)===null||r===void 0||r.warn(t)}static implementation(t,e=""){G.counters.errors.count("implementation"),s.$e&&this.Qi.send(t,e,pt.implementation)}static error(t,e=""){var i;G.counters.errors.count("error"),s.$e&&this.Qi.send(t,e,pt.error),(i=window.UXAnalytics.Console)===null||i===void 0||i.error(t)}static critical(t,e=""){G.counters.errors.count("critical"),this.Qi.send(t,e,pt.critical)}static tryToExecute(t,e){return function(...i){try{let r=e.apply(this,i);return X(Z.Promise)&&r instanceof Z.Promise?r.then(o=>o,o=>s.error(ve(o)?o:new Error(o),t)):r}catch(r){try{s.error(ve(r)?r:new Error(r),t)}catch{}}}}static isPerfLoggingActive(){return s.Sc}}return s.$e=!1,s.Sc=!1,s})();var Gd=/^\d+\.\d+(?:\.\d+)?$/,qd=s=>{if(!Gd.test(s))return;let[n,t,e]=csArray.prototype.map.call(csString.prototype.split.call(s,"."),Number);return{major:n,minor:t,patch:!e||Number.isNaN(e)?0:e}},Wd=(s,n)=>s.major!==n.major?s.major-n.major:s.minor!==n.minor?s.minor-n.minor:s.patch-n.patch,Yd=(s,n)=>Wd(s,n)>=0;function te(s){return bt(s,"data:")}function Xd(s){return bt(s,"#")}function Kd(s){return!!s&&(Js(s,".css")||bt(s,"https://fonts.googleapis.com/css"))}var va=/\bhttps?:\/\/[^\s<>"')\]]*[^\s<>"'),.;:\])]/gi;function Jd(s){va.lastIndex=0;let n,t=0,e=[];for(;(n=va.exec(s))!==null;){let i=n.index,r=n.index+n[0].length;if(i>t){let c=csString.prototype.slice.call(s,t,i);csArray.prototype.push.call(e,{content:c,isUrl:!1})}let o=csString.prototype.slice.call(s,i,r);csArray.prototype.push.call(e,{content:o,isUrl:!0}),t=r}if(t<s.length){let i=csString.prototype.slice.call(s,t);csArray.prototype.push.call(e,{content:i,isUrl:!1})}return e}var Qd=["id","class","style","srcset","sizes","rel","type","width","height","media","align","dir","bgcolor","color","border","colspan","rowspan","cols","rows","size","start","slot","data-cs-override-id"],Xc=s=>{let n=new Set(Qd);return csArray.prototype.forEach.call(s,t=>{n.add(t)}),n},Zd=["svg","slot"],tp=(s,n,t)=>t==="radio"&&s==="input"&&n==="name"||csArray.prototype.indexOf.call(Zd,s)>-1,Kc={href:new Set(["a"]),src:new Set(["iframe"])},ep=s=>Kc.hasOwnProperty(s),sp=(s,n,t)=>{var e;return((e=Kc[n])===null||e===void 0?void 0:e.has(s))&&!te(t)},ip=(s,n,t)=>(t==="submit"||t==="button")&&s==="input"&&n==="value";function Zn(s){return s?np(s):null}function np(s){try{let n=/^\/(.*)\/([gim]*)$/.exec(s);if(n){let[,t,e]=n;return new csRegExp(`^${t}$`,e)}return new csRegExp(`^${s}$`)}catch{return null}}var rp=1,op="f553e78fb58e051e51fe8074c4c6e73e",Nr=(()=>{let s;return function(n){n[n.Disabled=0]="Disabled",n[n.ButtonAndLinkOnly=1]="ButtonAndLinkOnly",n[n.Enabled=2]="Enabled"}(s||(s={})),s})(),ap=(()=>{class s{constructor(t){var e,i,r,o,c,l,h,f,d,E,m,S,O,N;this.isChild=!1,this.isSMB=(e=t.isSMB)!==null&&e!==void 0?e:!1,this.trackerDomain=t.trackerDomain,this.dynamicConfDomain=t.dynamicConfDomain,this.settingsFileUri=t.settingsFileUri,this.tagDomain=t.tagDomain,this.loggerDomain=t.ed,this.minLogLevel=t.logLevel,this.projectId=t.projectId,this.smbConfig=t.smbConfig,this.status=t.status,this.hostnames=t.hostnames,this.iframesTracking=!!t.iframesTracking,this.crossDomainTracking=!!t.crossDomainTracking,this.crossDomainSingleIframeTracking=!!t.crossDomainSingleIframeTracking,this.consentRequired=!!t.consentRequired,this.allowSubdomains=!!t.allowSubdomains,this.visitorCookieTimeout=t.visitorCookieTimeout||eo,this.sampleRate=t.sampleRate,this.replayRecordingRate=t.replayRecordingRate,this.validationRate=t.validationRate,this.lastTrackingDraw=t.lastTrackingDraw||1,this.useHttps=!0,this.eMerchandisingEnabled=t.eMerchandisingEnabled,this.jsErrorsEnabled=t.jsErrorsEnabled,this.collectionEnabled=!!(!((o=(i=t.collectionEnabled)!==null&&i!==void 0?i:(r=t.smbConfig)===null||r===void 0?void 0:r.record)!==null&&o!==void 0)||o),this.useSentry=!!((c=t.useSentry)!==null&&c!==void 0?c:!((l=t.smbConfig)===null||l===void 0)&&l.useSentry),this.apiErrors={enabled:(h=t.apiErrorsEnabled)!==null&&h!==void 0?h:0,...t.apiErrors},this.customErrors={enabled:(f=t.customErrorsEnabled)!==null&&f!==void 0?f:0,...t.customErrors},this.jsCustomErrorsEnabled=t.jsCustomErrorsEnabled,this.triggerSessionReplayEnabled=t.triggerSessionReplayEnabled,this.triggerSessionReplayRegex=Zn(t.triggerSessionReplayRegex),this.dynamicIdRegex=t.dynamicIdRegex?new csRegExp(t.dynamicIdRegex):null,this.whitelistedAttributes=t.whitelistedAttributes||[],this.replayRecordingUnmaskedUrlRegex=Zn(t.replayRecordingUnmaskedUrlRegex),this.replayRecordingMaskedUrlRegex=Zn(t.replayRecordingMaskedUrlRegex),this.replayRecordingMaskedUrlRegexRules=t.replayRecordingMaskedUrlRegexRules||null,this.replayRecordingUnmaskedUrlRegexRules=t.replayRecordingUnmaskedUrlRegexRules||null,this.anonymisationMethod=t.anonymisationMethod||null,this.tagDeploymentMode=t.tagDeploymentMode,this.dualCollectionTagDomain=t.dualCollectionTagDomain||null,this.ptcDomain=t.ptcDomain||null,this.ptcGuid=t.ptcGuid||null,this.secureCookiesEnabled=!!t.secureCookiesEnabled,this.ptcSha512=t.ptcSha512||null,this.ptcSnapshotPath=t.ptcSnapshotPath||null,this.emitDebugEvents=!1,this.staticResourceManagerDomain=t.staticResourceManagerDomain||null,this.malkaRecordingDomain=t.malkaRecordingDomain||null,this.textVisibilityEnabled=t.textVisibilityEnabled,this.experimental=t.experimental||{},this.malkaEtrEnabled=!!t.malkaEtrEnabled,this.malkaUrlEnabled=!!t.malkaUrlEnabled,this.recordingUrlRules=(d=t.recordingUrlRules)!==null&&d!==void 0?d:[],this.cookielessTrackingEnabled=t.cookielessTrackingEnabled,this.customHashIdEnabled=!!t.customHashIdEnabled,this.encryptionEnabled=!!t.recordingEncryptionEnabled,this.encryptionPublicKey=t.recordingEncryptionPublicKey||null,this.pathComputationRules=t.pathComputationRules||{},t.pathComputationRules&&t.pathComputationRules.dynamicElementNameRegex===""&&(this.pathComputationRules.dynamicElementNameRegex=null),t.pathComputationRules&&t.pathComputationRules.dynamicElementNameRegex&&(this.pathComputationRules.dynamicElementNameRegex=new csRegExp(t.pathComputationRules.dynamicElementNameRegex)),this.asyncSerializerEnabled=!!t.asyncSerializerEnabled,this.encryptionPublicKeyId=t.recordingEncryptionPublicKeyId,this.pendingInactivityTimeout=t.pendingInactivityTimeout||5e3,this.accessibilityEnabled=!!t.accessibilityEnabled,this.useStaticResourceManager=!!t.useStaticResourceManager,t.taskSchedulerOptions&&(this.taskSchedulerOptions={...t.taskSchedulerOptions,enabled:!!t.taskSchedulerOptions.enabled}),this.uxaDomain=t.uxaDomain,this.environment=((E=t.uxaDomain)===null||E===void 0?void 0:E.indexOf("staging"))>-1?"staging":"production",this.performanceTimingOptions=t.performanceTimingOptions,this.replayConsentRequiredForSession=!!t.replayConsentRequiredForSession,this.isWebView=!1,t.displayAdOptions&&t.displayAdOptions.length&&(this.displayAdOptions=t.displayAdOptions),t.voc&&(this.voc={...t.voc,enabled:!!t.voc.enabled}),this.vocData=t.vocData,t.heapEnvironment&&(this.heapEnvironment=t.heapEnvironment),t.implementations&&t.implementations.length&&(this.implementations=t.implementations),this.eventsApiEnabled=!!t.eventsApiEnabled,this.anonymizeDigits=(m=t.anonymizeDigits)!==null&&m!==void 0?m:null,this.isHeapPresent=window.heap!==void 0,this.recordTargetingRules=(S=t.recordTargetingRules)!==null&&S!==void 0?S:[],this.paProxyDomainUri=t.paProxyDomainUri||null,this.emitRecordInfoEvents=t.emitRecordInfoEvents!=!1,this.collectHierarchy=!!t.collectHierarchy,this.collectSubmit=!!t.collectSubmit,this.collectTargetText=(O=t.collectTargetText)!==null&&O!==void 0?O:Nr.Disabled,this.identityEncryptionKey=t.identityEncryptionKey||null,this.tagVerificationDomain=t.tagVerificationDomain,this.tagVerificationEnabled=!!t.tagVerificationEnabled,this.trackingCodeVerified=!!t.trackingCodeVerified,this.quotas=(N=t.quotas)!==null&&N!==void 0?N:null}getTrackerUri(){return`${this.fs()}://${this.trackerDomain}`}getSentryFileUri(){return`${this.fs()}://${this.tagDomain}/uxa/smb/errors.js`}getSentryDSNUri(){return`https://${op}@${this.loggerDomain}/4508608369131520`}getRecordingUri(){return`${this.fs()}://${this.malkaRecordingDomain}`}getLoggerUri(){return`${this.fs()}://${this.loggerDomain}`}getMetricsUri(){return`${this.fs()}://${this.loggerDomain}/metrics`}getStaticResourceManagerUri(){return`${this.fs()}://${this.staticResourceManagerDomain}`}getVerificationEndpoint(){return`${this.fs()}://${this.tagVerificationDomain}`}getSettingsFileUri(){return this.settingsFileUri?this.settingsFileUri:`${this.fs()}://${this.dynamicConfDomain}/${this.projectId}.json`}isQuotaEnabled(){return this.isSMB||this.quotas!==null}getPaProxyDomainUri(){return`${this.fs()}://${this.paProxyDomainUri}`}fs(){return this.useHttps?"https":"http"}isProjectActive(){return this.status===rp}processOptionOverrides(t){t&&t.forEach&&t.forEach(([e,...i])=>{if(e==="setOption"){let[r,o]=i;this.My(r,o)}})}My(t,e){t==="trackerDomain"&&(this.trackerDomain=e),t==="loggerDomain"&&(this.loggerDomain=e),t==="malkaRecordingDomain"&&(this.malkaRecordingDomain=e),t==="staticResourceManagerDomain"&&(this.staticResourceManagerDomain=e),t==="minLogLevel"&&(this.minLogLevel=e),t==="useHttps"&&(this.useHttps=!!e),t==="isWebView"&&(this.isWebView=e),t==="dynamicConfDomain"&&(this.dynamicConfDomain=e),t==="paProxyDomainUri"&&(this.paProxyDomainUri=e)}getRequestParameters(){return{pid:`${this.projectId}`}}updateDynamicFields(t,e){t==="emitDebugEvents"&&(this.emitDebugEvents=e),t==="minLogLevel"&&(this.minLogLevel=e)}isCsSideloadingHeap(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="cs_sideloads_heap"&&!this.isHeapPresent}isHeapSideloadsCs(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="heap_sideloads_cs"}isHeapSideloadsCsV5(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="heap_sideloads_cs"&&this.dd()}isHeapSideloadsStartDataCollection(){if(this.isHeapSideloadsCs()){if(this.dd())return!0;let t=qd(this.getHeapVersion()||"");if(t&&t.major===4&&Yd(t,{major:4,minor:23,patch:5}))return!0}return!1}dd(){var t;return typeof((t=window.heap)===null||t===void 0?void 0:t.getUserId)=="function"}getHeapVersion(){var t,e,i,r,o,c;return typeof((t=window.heap)===null||t===void 0?void 0:t.getConfig)=="function"&&((r=(i=(e=window.heap)===null||e===void 0?void 0:e.getConfig())===null||i===void 0?void 0:i.sdk)===null||r===void 0?void 0:r.version)||((c=(o=window.heap)===null||o===void 0?void 0:o.version)===null||c===void 0?void 0:c.heapJsVersion)||void 0}isCsCrosswritingHeap(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="cs_crosswrites_heap"}getHeapStorageLocation(){var t,e;return(e=(t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_storage_location)!==null&&e!==void 0?e:null}getHeapWebAppUri(){return this.getHeapStorageLocation()==="eu-west-1"?"https://eu.heapanalytics.com":"https://heapanalytics.com"}isCollectTargetTextEnabled(){return this.isSMB||this.collectTargetText!==Nr.Disabled}isNetworkDetailsEnabled(){return this.performanceTimingOptions?this.performanceTimingOptions.withResource||this.performanceTimingOptions.withNavigation:!1}hasRecordingUrlRules(){var t;return!!(!((t=this.recordingUrlRules)===null||t===void 0)&&t.length)}hasTargetingRules(){var t;return!!(!((t=this.recordTargetingRules)===null||t===void 0)&&t.length)}getHeapEnvId(){return this.heapEnvironment?this.heapEnvironment.env_id:""}}return s})(),cp=(()=>{class s{constructor(t,e){this.To=t,this.pd=e}init(){this.gd=this.To!==this.To.top,this.md=this.pd.isWebView&&this.To===this.To.top,this.pd.iframesTracking&&this.gd||this.md?this.yd=!1:this.yd=!0}isInIframeContext(){return this.gd}isTopWindowTracker(){return this.yd}isInWebViewContext(){return this.md}}return s})();function Tn(){}function An(s,n){return csString.prototype.lastIndexOf.call(s,n,0)===0}function lp(s,n){return csString.prototype.indexOf.call(s,n,s.length-n.length)!==-1}var tr=csSymbol("cachedJson");function hp(s){if(s[tr])return s[tr];if(csArray.isArray(s)){if(s.length===0)return"[]";let n="["+ws(s[0]);for(let t=1;t<s.length;t++)n+=","+ws(s[t]);return n+="]"}return s[tr]=csJSON.stringify(s)}var ws=typeof window.Symbol!="undefined"?hp:csJSON.stringify;var wi=(()=>{let s;return function(n){function t(e){return csArray.prototype.join.call(csArray.prototype.map.call(Object.keys(e),i=>`${encodeURIComponent(i)}=${encodeURIComponent(e[i])}`),"&")}n.toQuery=t}(s||(s={})),s})(),Jc=(()=>{class s{constructor(t,e){this.domainUri=t,this.path=e,this.beforeRequestCallbacks=[],this.afterRequestCallbacks=[]}setRequestParametersProviders(...t){this.requestParametersProviders=t}before(t){csArray.prototype.push.call(this.beforeRequestCallbacks,t)}after(t){csArray.prototype.push.call(this.afterRequestCallbacks,t)}retrieveParameters(){return this.requestParametersProviders?csArray.prototype.reduce.call(csArray.prototype.map.call(this.requestParametersProviders,t=>t.getRequestParameters()),(t,e)=>({...t,...e})):{}}}return s})(),Ys=(()=>{class s extends Jc{constructor(t,e){super(t,e)}send(){csArray.prototype.forEach.call(this.beforeRequestCallbacks,i=>i());let t=this.retrieveParameters();this.vc(t);let e=wi.toQuery(t);this.ky(e),csArray.prototype.forEach.call(this.afterRequestCallbacks,i=>i())}ky(t){let e=new window.Image(1,1);e.onload=Tn,e.onerror=Tn,csHTMLImageElementsrc.call(e,`${this.domainUri}${this.path?`/${this.path}`:""}?${t}`)}vc(t){t.r=csString.prototype.slice.call(`${Math.random()}`,2,8)}}return s})();var up=(()=>{class s{constructor(t,e){this.gs=t,this.Dy=e}init(){this.ms=new Ys(this.gs.getLoggerUri()),this.ms.setRequestParametersProviders(this,this.Dy)}send(t){this.Ao=t,this.ms.send()}getRequestParameters(){return{a:this.Ao.app,l:this.Ao.level,m:this.Ao.message,s:this.Ao.stacktrace}}}return s})(),dp=/[a-zA-Z0-9._%+-]+(?:@|%40|%2540)[a-zA-Z0-9.%-_]+((?:\.|%2[eE])[a-zA-Z0-9-]+)+/g,pp=/[a-zA-Z0-9+_-](?:@|%40|%2540)/,fp="CS_ANONYMIZED_EMAIL",er="([-A-Za-z0-9+/=_]|=[^=]|={3,})+",gp=new csRegExp(`(ey${er}\\.ey${er}\\.${er})`,"g"),mp="CS_ANONYMIZED_JWT",yp=/[0-9]{4}/,Ep=/(^|[^a-zA-Z0-9*.,-])([45*][0-9*]{3}([ -]?)[0-9*]{4}\3[0-9*]{4}\3[0-9*]{4})($|[^a-zA-Z0-9*.,-])/g,Sp="CS_ANONYMIZED_PII",vp="\u2022",_p=/\d/g,wp=/([+(]{0,2}\d[-_ ()/]{0,4}){9,}/,bp=/(?:\d{1,3}\.){3}\d{1,3}/,Tp=/(?:[A-F0-9]{1,4}:){7}[A-F0-9]{1,4}/,Ye=(()=>{let s;return function(n){function t(f){return csString.prototype.replace.call(f,dp,fp)}n.replaceEmail=t;function e(f){return csString.prototype.replace.call(f,gp,mp)}n.replaceJWT=e;function i(f,d){return csString.prototype.replace.call(f,Ep,d)}n.replaceCreditCardNumber=i;function r(f){return csString.prototype.replace.call(f,_p,vp)}n.replaceDigits=r;function o(f){return bp.test(f)||Tp.test(f)}n.mayHaveIPAddress=o;function c(f){return wp.test(f)}n.mayHaveNumberSequence=c;function l(f){return yp.test(f)}n.mayHaveCreditCardNumber=l;function h(f){return pp.test(f)}n.mayHaveEmail=h}(s||(s={})),s})(),Mi=(()=>{class s{hasPII(t,e){let i=this.checkAndAnonymizePII(t,e);return t!==i}checkAndAnonymizePII(t,e=null){let i=this.xy(this._c(t));return e===!0?i=this.Ly(i):e===!1&&(i=this.Uy(i)),i}anonymizePII(t){return this._c(t)}anonymizeJwt(t){return Ye.replaceJWT(t)}anonymizeFields(t,e){return csArray.prototype.forEach.call(e,i=>{t[i]=this._c(t[i])}),t}_c(t){if(Ye.mayHaveEmail(t)){let e=Ye.replaceEmail(t);return e!==t&&G.counters.redactedPII.count("email"),e}return t}Ly(t){return Ye.replaceDigits(t)}Uy(t){return Ye.mayHaveNumberSequence(t)?Ye.replaceDigits(t):t}xy(t){return Ye.mayHaveCreditCardNumber(t)?Ye.replaceCreditCardNumber(t,(e,i,r,o,c)=>{if(csString.prototype.indexOf.call(r,"*")===-1){let h=o.length?csArray.prototype.join.call(csString.prototype.split.call(r,o),""):r;if(!this.Vy(h))return e;G.counters.redactedPII.count("cc")}else G.counters.redactedPII.count("cc-partial");return`${i}${Sp}${c}`}):t}Vy(t){let e=parseInt(t[t.length-1]),i=0;for(let r=t.length-2;r>=0;r--){let o=parseInt(t[r]);r%2===0&&(o*=2),i+=Math.floor(o/10)+o%10}return 10-i%10===e}}return s})(),Qc="15.140.1";function po(){return{v:Qc}}var Ap=(()=>{class s{constructor(t,e){this.f=t,this.M=e}getRequestParameters(){return{d:`${C.now()}`,p:this.M.anonymizePII(window.location.href),...this.f.getRequestParameters(),...po()}}}return s})(),Rp="uxa",_a=5,Cp="No stacktrace",Zc="snippet-",tl="implementation-snippet-",wa=(()=>{let s;return function(n){n.IMPLEMENTATION="implementation",n.DYNAMIC="dynamic"}(s||(s={})),s})(),Ip=(()=>{class s{constructor(t,e,i){this.ys=e,this.M=new Mi,this.Ed=Yn[pt.warn],this.Ed=Yn[t.minLogLevel||pt.warn],this.ms=i||new up(t,new Ap(t,this.M)),this.Sd={[pt.debug]:[],[pt.warn]:[],[pt.implementation]:[],[pt.error]:[],[pt.critical]:[]},this.Ro={implementation:{},dynamic:{}},this.ms.init()}send(t,e="",i=pt.warn){if(!this.jy(i,e))return;csArray.prototype.push.call(this.Sd[i],e||"");let r={message:this.Hy(t,e),stacktrace:this.By(t),app:Rp,level:i};this.ms.send(r)}Hy(t,e){let i=ve(t)?this.M.anonymizePII(t.message||t.toString()):t;return e&&(i+=` ErrorCode: ${e}`),i}By(t){return ve(t)?`${t.stack||Cp} ${this.Xn()}`:this.Xn()}Xn(){let t=this.ys.getVisitorService(),e=t==null?void 0:t.getVisitor();if(!e)return"No context";let i=this.ys.getSessionService(),r=i&&i.getSession(),o={userId:e.id,sessionNumber:e.visitsCount,pageNumber:r&&r.pageNumber};return csJSON.stringify(o)}jy(t,e){if(Yn[t]<this.Ed)return!1;if((e==null?void 0:csString.prototype.indexOf.call(e,tl,0))===0)return this.vd(e,wa.IMPLEMENTATION);if((e==null?void 0:csString.prototype.indexOf.call(e,Zc,0))===0)return this.vd(e,wa.DYNAMIC);let i=this.Sd[t];return i.length>=_a?!1:!(e&&csArray.prototype.some.call(i,r=>r===e))}vd(t,e){return t in this.Ro[e]?this.Ro[e][t]>=_a?!1:(this.Ro[e][t]+=1,!0):(this.Ro[e][t]=1,!0)}}return s})(),Mt=!Ri&&document.createElement("a"),Pp=/(:443|:80)$/;function Ee(s){return Mt?(Mt.href=s,Mt.href):""}function Op(s,n){return new csURL(s,n).href}function Np(s,n){return csArray.prototype.some.call(n,t=>Js(s,`.${t}`)||s===t||t==="")}function Mp(s){return s[0]==="/"?s:`/${s}`}function ba(s){return csString.prototype.replace.call(s,Pp,"")}function el(s){return!Mt||!bt(s,"http://")&&!bt(s,"https://")?null:(Mt.href=s,{hash:Mt.hash,host:ba(Mt.host),hostname:Mt.hostname,href:Mt.href,origin:Mt.origin?Mt.origin:ba(`${Mt.protocol}//${Mt.host}`),pathname:Mp(Mt.pathname),port:Mt.port,protocol:Mt.protocol,search:Mt.search})}var Nt=(()=>{let s;return function(n){n.Discovery="discovery",n.Stop="stop",n.RecordingContext="recordingContext",n.SensitiveStatus="sensitiveStatus",n.RecordingEvent="recordingEvent",n.EndOfBufferedMessages="endOfBufferedMessages",n.ChildLogMessage="childLogMessage",n.AnalysisEvent="analysisEvent",n.JavascriptError="javascriptError",n.ApiError="apiError",n.Assets="assets",n.DetailedApiError="detailedApiError",n.EmerchandisingMessage="emerchandisingMessage",n.Commands="commands",n.IntegrationCallback="integrationCallback",n.StaticResource="staticResource",n.TrackingContextResultMessage="trackingContextResultMessage",n.TrackingContextRequestMessage="trackingContextRequestMessage",n.CustomError="customError"}(s||(s={})),s})();var kp=(()=>{class s{setContext(t,e){this.O=t,this.R=e}getVisitorService(){return this.O}getSessionService(){return this.R}}return s})(),Mr=!1;function Dp(){Mr=!0}function ht(){return(s,n,t)=>{if(t){let e=t.value;t.value=function(i,r){(i==null?void 0:i.isTrusted)===!1&&Mr||e.call(this,i,r)}}else{let e=s[n];if(typeof e!="function")return;s[n]=function(i,...r){(i==null?void 0:i.isTrusted)===!1&&Mr||e.call(this,i,r)}}}}function xp(s){if(document!=null&&document.prerendering){document.addEventListener("prerenderingchange",s,{once:!0});return}s()}function j(s,n,t,e){var i=arguments.length,r=i<3?n:e===null?e=Object.getOwnPropertyDescriptor(n,t):e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,n,t,e);else for(var c=s.length-1;c>=0;c--)(o=s[c])&&(r=(i<3?o(r):i>3?o(n,t,r):o(n,t))||r);return i>3&&r&&Object.defineProperty(n,t,r),r}function Lp(){let s=new MutationObserver(n=>{n.forEach(t=>{W(t.removedNodes,e=>{e instanceof HTMLElement&&e.tagName==="CS-NATIVE-FRAME-HOLDER"&&(G.counters.pureWindowState.count("iframe-deletion"),it.warn("<cs-native-frame-holder> deleted"),s.disconnect())})})});s.observe(document.body,{childList:!0})}function Ta(s){return typeof s!="function"?!1:s.toString().indexOf("[native code]")!==-1}function Up(){(!Ta(MutationObserver)||!Ta(MutationObserver.prototype.observe))&&G.counters.patchedNativeFunctions.count("MutationObserver")}function Vp(){try{window.CSPureWindow&&Lp(),Up()}catch{}}var St=(()=>{let s;return function(n){n.CURRENT_DOMAIN="CURRENT_DOMAIN";function t(l){let f=new csRegExp(`(^|;)[ ]*${l}=([^;]*)`).exec(document.cookie);return f?decodeURIComponent(f[2]):null}n.get=t;function e(l,h,f,d,E,m){let S=encodeURIComponent(`${h}`),O=f===n.CURRENT_DOMAIN?void 0:f,N=i(d),v=N?`;expires=${N.toUTCString()}`:"",_=";path=/",M=ut(O)?`;domain=${O}`:"",k=`${l}=${S}${v}${_}${M}`;return X(E)&&E!==is.NotSet&&(k=`${k};SameSite=${E}`),X(m)&&m===fe.Yes&&(k=`${k};Secure`),document.cookie=k,!0}n.set=e;function i(l){return ft(l)?new csDate(C.now()+l):l}n.toExpireDate=i;function r(l,h){t(l)&&e(l,"",h,new csDate(0)),t(l)&&e(l,"",h,new csDate(0),is.None,fe.Yes)}n.remove=r;function o(){return document.cookie.length>0}n.isCookiePresent=o;function c(l,h){let f="_cs_root-domain",d=t(f);if(d!==null&&d!=="1")return d;let E=csString.prototype.split.call(window.location.hostname,"."),m=csArray.prototype.pop.call(E);for(;E.length&&(d===null||d==="1");)m=csArray.prototype.join.call([csArray.prototype.pop.call(E),m],"."),e(f,m,m,void 0,l,h),d=t(f);return r(f,m),m}n.getRootDomain=c}(s||(s={})),s})(),jp=(()=>{let s;return function(n){function t(){return window.navigator.vendor&&csString.prototype.indexOf.call(window.navigator.vendor,"Apple")>-1&&window.navigator.appVersion&&csString.prototype.indexOf.call(window.navigator.appVersion,"Version/12.")>-1}n.browserIsSafariV12=t}(s||(s={})),s})(),is=(()=>{let s;return function(n){n.None="None",n.Lax="Lax",n.NotSet="X"}(s||(s={})),s})(),fe=(()=>{let s;return function(n){n[n.Yes=1]="Yes",n[n.No=0]="No"}(s||(s={})),s})(),Dn=(()=>{class s{constructor(t,e,i){this.f=t,this.w=e,this.yi=i,this.wc=!1,this._d=is.NotSet,this.bc=fe.No}getSameSiteFlag(){return this._d}getSecureFlag(){return this.bc}getDomain(){return this.Tc}getRootDomain(){return this.wd}init(){if(this.f.cookielessTrackingEnabled)return;let t=this.Fy(),e=this.$y();this.wc=this.zy(t,e),this.wc?(this._d=t,this.bc=e):this.f.secureCookiesEnabled&&this.w.getUrlProtocol()==="https:"&&(this.bc=fe.Yes),this.wd=this.Gy(),this.Tc=this.qy(this.wd)}zy(t,e){return jp.browserIsSafariV12()?!1:(St.set(s.COOKIE_TEST_FOR_SAME_SITE,"Test same site",s.CURRENT_DOMAIN,void 0,t,e),St.get(s.COOKIE_TEST_FOR_SAME_SITE)?(St.remove(s.COOKIE_TEST_FOR_SAME_SITE,s.CURRENT_DOMAIN),!0):!1)}Fy(){return this.w.getUrlProtocol()==="http:"?is.Lax:this.yi.isSameSiteNoneSecureNeeded()||this.f.crossDomainTracking?is.None:is.Lax}$y(){return this.w.getUrlProtocol()==="http:"?fe.No:this.f.secureCookiesEnabled||this.f.crossDomainTracking||this.yi.isSameSiteNoneSecureNeeded()?fe.Yes:fe.No}isSameSiteSupported(){return this.wc}set(t,e,i,r){let o=St.toExpireDate(i),c=r?fe.Yes:this.getSecureFlag();St.set(t,e,this.Tc,o,this.getSameSiteFlag(),c)}get(t){let i=new csRegExp(`(^|;)[ ]*${t}=([^;]*)`).exec(document.cookie);return i?decodeURIComponent(i[2]):null}delete(t,e){let i=e||this.Tc;St.remove(t,i)}Gy(){let t=this.yi.isSameSiteNoneSecureNeeded()&&this.isSameSiteSupported(),e=t?is.None:void 0,i=t?fe.Yes:void 0;return St.getRootDomain(e,i)}qy(t){return this.f.allowSubdomains?t:St.CURRENT_DOMAIN}}return s.CURRENT_DOMAIN="CURRENT_DOMAIN",s.COOKIE_TEST_FOR_SAME_SITE="_cs_same_site",s})(),Ds="_cs_t",Aa="1",Hp=(()=>{class s{constructor(t,e){this.wt=t,this.f=e,this.Co=!1,this.Io=!1}init(){if(!this.f.cookielessTrackingEnabled&&this.wt.isTopWindowTracker()&&"cookie"in document){if(!this.wt.isInIframeContext()&&St.isCookiePresent()){this.Co=!0,this.Io=!1;return}if(St.set(Ds,Aa,St.CURRENT_DOMAIN),St.get(Ds)!==null){this.Co=!0,this.Io=!1,St.remove(Ds,St.CURRENT_DOMAIN);return}St.set(Ds,Aa,St.CURRENT_DOMAIN,void 0,is.None,fe.Yes),St.get(Ds)!==null&&(this.Co=!0,this.Io=!0,St.remove(Ds,St.CURRENT_DOMAIN))}}areCookiesEnabled(){return this.Co}isSameSiteNoneSecureNeeded(){return this.Io}}return s})();function Bp(){let s="CSSessionStorageTest";try{return sessionStorage.setItem(s,s),sessionStorage.getItem(s)!==s?!1:(sessionStorage.removeItem(s),!0)}catch{return!1}}var Fp=(()=>{class s{constructor(t,e){this.f=t,this.yi=e}canTrack(){return this.f.isProjectActive()&&this.Wy()&&this.bd()&&this.Yy()}canTrackInChild(){return this.f.isProjectActive()&&this.Xy()&&(this.bd()||this.Ky())}Yy(){return this.f.cookielessTrackingEnabled?Bp():this.yi.areCookiesEnabled()}bd(){return Np(window.location.hostname,this.f.hostnames)}Wy(){return!this.Td()&&this.Jy()}Xy(){return!this.Td()&&this.Qy()}Ky(){return window.location.protocol==="about:"&&window.location.hostname===""}Td(){return"visibilityState"in document&&document.visibilityState==="prerender"}Jy(){return this.Ad()&&this.Zy()}Qy(){return this.Ad()}Zy(){try{return!!window.localStorage}catch{return!1}}Ad(){return"pageXOffset"in window&&"pageYOffset"in window&&"onpagehide"in window&&"JSON"in window&&"parse"in window.csJSON&&"stringify"in window.csJSON&&"addEventListener"in window&&"removeEventListener"in window&&"Node"in window&&"filter"in csArray.prototype&&"forEach"in csArray.prototype&&"querySelectorAll"in document&&"now"in csDate&&"keys"in Object&&"performance"in window&&"Map"in window&&"Set"in window}}return s})(),$p=(()=>{class s{constructor(t,e){this.Ac=!1,this.Rd=new Map,this.Cd=new Map,this.Id=new Map,this.Pd="CS_WORKER_SIGNATURE";let i=`
    const algorithm = ${t.algorithm};
    const compressor = (${t.getCompressorSourceCode()})();
    (()=>{"use strict";function e(e,t,r,s){return new(r||(r=Promise))((function(o,a){function i(e){try{c(s.next(e))}catch(e){a(e)}}function n(e){try{c(s.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,n)}c((s=s.apply(e,t||[])).next())}))}var t,r;Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError,function(e){e.UNCOMPRESSED="0",e.GZIP="2"}(t||(t={})),function(e){e.debug="debug",e.warn="warn",e.implementation="implementation",e.error="error",e.critical="critical"}(r||(r={})),r.debug,r.warn,r.implementation,r.error,r.critical;let s={debug(...e){},warn(...e){},implementation(...e){},error(...e){},critical(...e){},isPerfLoggingActive:()=>!1};class o{constructor(e){var t;this.queryParams={},this.headers={},this.handleRecoveredRequests=e=>{for(const t of e){const{metadata:e,events:r}=t;this.send(r,e)}},this.endpoint=e.endpoint,this.compressionOpts=e.compressionOpts,this.recoveryStorage=e.recoveryStorage,this.mandatoryParameters=null!==(t=e.mandatoryParameters)&&void 0!==t?t:[],this.contentType=e.contentType,this.worker=!!e.worker,this.recoveryStorage&&this.recoveryStorage.recover(this.handleRecoveredRequests)}setQueryParams(e){Object.keys(e).forEach((t=>{this.queryParams[t]=e[t]}))}removeQueryParams(e){e?e.forEach((e=>{delete this.queryParams[e]})):this.queryParams={}}send(e,r){const o=r||Object.assign({},this.queryParams),a=!("ct"in o),i="application/json"===this.contentType||"string"!=typeof e&&!this.isArrayBuffer(e);"ct"in o||(this.compressionOpts&&a?o.ct=this.compressionOpts.compressionType:o.ct=t.UNCOMPRESSED);const n=i?JSON.stringify(e):e,c=Object.keys(o).map((e=>\`\${encodeURIComponent(e)}=\${encodeURIComponent(o[e])}\`)).join("&"),h=\`\${this.endpoint}?\${c}\`;!function(e,t){const r=e.length;for(let s=0;s<r;s++)if(t(e[s],s))return!0;return!1}(this.mandatoryParameters,(e=>null==o[e]))?this.compressionOpts&&a&&"string"==typeof n?this.compressionOpts.compressor(n,this.compressionOpts.compressionOutputType,(e=>this.doSend(h,o,e))):this.doSend(h,o,n):s.warn(\`[\${this.worker?"WORKER":"MAIN"}] All mandatory parameters are not present on \${h}\`)}onLoad(e){this.onLoadCallback=e}onError(e){this.onErrorCallback=e}onTimeout(e,t){this.onTimeoutCallback=e,this.timeout=t}abort(){this.abortCurrentXhrCall&&this.abortCurrentXhrCall()}setRequestHeader(e,t){this.headers[e]=t}getQueryParams(){return this.queryParams}isArrayBuffer(e){return e&&void 0!==e.byteLength}doSend(e,t,r){const s=new XMLHttpRequest,o=Object.keys(t).map((e=>\`\${encodeURIComponent(e)}=\${encodeURIComponent(t[e])}\`)).join("&");s.open("POST",e),this.contentType&&s.setRequestHeader("Content-Type",this.contentType),s.onload=()=>{if(this.recoveryStorage&&this.recoveryStorage.recover(this.handleRecoveredRequests),this.onLoadCallback){const e={params:t,responseText:s.responseText,status:s.status};this.onLoadCallback(e)}},s.onerror=()=>{this.recoveryStorage&&this.recoveryStorage.save({key:o,metadata:t,events:r}),this.onErrorCallback&&this.onErrorCallback({params:t})},this.timeout&&this.onTimeoutCallback&&(s.timeout=this.timeout,s.ontimeout=()=>{this.onTimeoutCallback()}),this.abortCurrentXhrCall=()=>s.abort(),Object.keys(this.headers).forEach((e=>{s.setRequestHeader(e,this.headers[e])})),s.send(r)}}class a{constructor(e){this.maxStoredBytes=e,this.storageBytesUsed=0}addString(e){this.storageBytesUsed+=2*e.length}addArrayBuffer(e){this.storageBytesUsed+=e.byteLength}isThresholdReached(){return this.storageBytesUsed>this.maxStoredBytes}reset(){this.storageBytesUsed=0}}class i{constructor(e){this.ramStorage={},this.byteSizeCounter=new a(e)}save({key:e,metadata:t,events:r}){this.byteSizeCounter.isThresholdReached()||(this.byteSizeCounter.addString(e),"string"==typeof r?this.byteSizeCounter.addString(r):this.byteSizeCounter.addArrayBuffer(r),this.byteSizeCounter.isThresholdReached()||(this.ramStorage[e]={metadata:t,events:r}))}recover(e){const t=[];this.getStorageKeys().forEach((e=>{const r=this.ramStorage[e];void 0!==r&&(delete r.metadata.datatype,t.push(r),this.removeItem(e))})),0!==t.length&&(e(t),this.byteSizeCounter.reset())}getStorageKeys(){return Object.keys(this.ramStorage)}removeItem(e){delete this.ramStorage[e]}}var n;!function(e){e[e.NOT_STARTED=0]="NOT_STARTED",e[e.OPEN_IN_PROGRESS=1]="OPEN_IN_PROGRESS",e[e.OPEN_FAILED=2]="OPEN_FAILED",e[e.READY=3]="READY"}(n||(n={}));class c{constructor(e,t,r){this.storageName=e,this.onOpenError=r,this.cacheState=n.NOT_STARTED,this.toBeSavedBuffer=[],this.recoveryInProgress=0,this.origin=self.origin,this.context="object"==typeof window?"":"worker-",this.byteSizeCounter=new a(t),this.init()}init(){return e(this,void 0,void 0,(function*(){yield this.openCache(),this.cacheState===n.READY?this.flushToBeSavedBuffer():this.onOpenError(this.toBeSavedBuffer)}))}flushToBeSavedBuffer(){this.toBeSavedBuffer.forEach((e=>{this.save(e)})),this.toBeSavedBuffer=[]}save(t){return e(this,void 0,void 0,(function*(){try{if(this.cacheState===n.OPEN_IN_PROGRESS)return void this.toBeSavedBuffer.push(t);if(this.cacheState!==n.READY)return;if(this.byteSizeCounter.isThresholdReached())return;const{key:e,metadata:r,events:s}=t;if(this.byteSizeCounter.addString(e),"string"==typeof s?this.byteSizeCounter.addString(s):this.byteSizeCounter.addArrayBuffer(s),this.byteSizeCounter.isThresholdReached())return;yield this.cache.put(\`\${this.origin}/\${e}\`,new Response(s,{headers:r}))}catch(e){}}))}recover(t){return e(this,void 0,void 0,(function*(){(this.cache||(yield this.openCache(),this.cacheState===n.READY))&&this.doRecover(t)}))}openCache(){return e(this,void 0,void 0,(function*(){try{this.cacheState=n.OPEN_IN_PROGRESS,this.cache=yield self.caches.open(\`\${this.context}\${this.storageName}\`),this.cacheState=n.READY}catch(e){this.cacheState=n.OPEN_FAILED}}))}doRecover(t){return e(this,void 0,void 0,(function*(){try{if(this.recoveryInProgress++,this.recoveryInProgress>1)return;const e=yield this.cache.keys();if(0===e.length)return;const r=(yield this.cache.matchAll()).map((e=>{const t={};e.headers.forEach(((e,r)=>{t[r]=e})),delete t["content-type"];const r=t.datatype;return delete t.datatype,"json"===r||"base64"===r?e.text().then((e=>({metadata:t,events:e}))):e.arrayBuffer().then((e=>({metadata:t,events:e})))})),s=yield Promise.all(r);yield Promise.all(e.map((e=>this.cache.delete(e)))),t(s),this.byteSizeCounter.reset()}catch(e){}finally{this.recoveryInProgress--}}))}}class h{constructor(e){try{this.initializeStorageStrategy(e)}catch(e){this.setRamStorageStrategy()}}initializeStorageStrategy(e){self.caches?this.setCachesStrategy(e):this.setRamStorageStrategy()}save(e){this.storageStrategy.save(e)}recover(e){this.storageStrategy.recover(e)}setCachesStrategy(e){this.storageStrategy=new c(e,h.MAX_SIZE,(e=>{this.setRamStorageStrategy(e)}))}setRamStorageStrategy(e){this.storageStrategy=new i(h.MAX_SIZE),e&&e.forEach((e=>{this.storageStrategy.save(e)}))}}h.MAX_SIZE=16777216,function(){const t="CS_WORKER_SIGNATURE",r=new Map,s=new h("csPersisted");function a(e){var a;if((a=e)&&a.WORKER_SIGNATURE===t)switch(e.type){case"CreatePostRequest":{const{endpoint:a,compressionOutputType:i,useRetry:n,mandatoryParameters:c}=e,h={endpoint:a,mandatoryParameters:c,worker:!0};i&&(h.compressionOpts={compressor,compressionOutputType:i,compressionType:algorithm}),n&&(h.recoveryStorage=s);const d=new o(h);r.set(a,d),d.onLoad((e=>{const r={type:"onLoad",endpoint:a,response:e,WORKER_SIGNATURE:t};self.postMessage(r)})),d.onError((e=>{const r={type:"onError",endpoint:a,response:e,WORKER_SIGNATURE:t};self.postMessage(r)}))}break;case"SetQueryParams":{const{endpoint:t,queryParams:s}=e,o=r.get(t);o&&o.setQueryParams(s)}break;case"RemoveQueryParams":{const{endpoint:t,queryParams:s}=e,o=r.get(t);o&&o.removeQueryParams(s)}break;case"Send":{const{endpoint:t,payload:s,queryParams:o}=e,a=r.get(t);a&&a.send(s,o)}break;case"Abort":{const{endpoint:t}=e,s=r.get(t);s&&s.abort()}break;case"SetHeader":{const{endpoint:t,headerName:s,headerValue:o}=e,a=r.get(t);a&&a.setRequestHeader(s,o)}break;case"SetTimeout":{const{endpoint:s,timeout:o}=e,a=r.get(s);a&&a.onTimeout((()=>{const e={type:"onTimeout",endpoint:s,WORKER_SIGNATURE:t};self.postMessage(e)}),o)}break;default:throw new Error(JSON.stringify(e))}}self.addEventListener("message",(function(t){t.data.getReader?function(t,r){e(this,void 0,void 0,(function*(){const e=t.getReader();for(;;){const{done:t,value:s}=yield e.read();if(t)break;r(s)}}))}(t.data,a):a(t.data)}))}()})();`;try{this.Es=this.tE(e||i),this.Ac=!0,s.isTransferableStreamSupported()&&(this.Od=new ReadableStream({start:r=>{this.Rc=r},cancel:()=>{this.Rc=null}}),this.Es.postMessage(this.Od,[this.Od]))}catch(r){r.name==="SecurityError"&&G.counters.cspErrors.count("network-worker"),this.Ac=!1}}postMessage(t){t.WORKER_SIGNATURE=this.Pd,this.Rc?this.Rc.enqueue(t):this.Es.postMessage(t)}tE(t){let e=window.csURL||window.webkitURL,i=window.Blob,r=window.Worker,o=new i([t],{type:"application/javascript"}),c=e.createObjectURL(o);H.whiteListFilename(c);let l=new r(c);return l.onmessage=h=>{let{type:f,endpoint:d,WORKER_SIGNATURE:E}=h.data;if(E===this.Pd){if(f==="onLoad"){let{response:m}=h.data,S=this.Rd.get(d);S&&S(m)}else if(f==="onError"){let{response:m}=h.data,S=this.Cd.get(d);S&&S(m)}else if(f==="onTimeout"){let m=this.Id.get(d);m&&m()}}},l}registerOnLoadCallback(t,e){this.Rd.set(t,e)}registerOnErrorCallback(t,e){this.Cd.set(t,e)}registerOnTimeoutCallback(t,e){this.Id.set(t,e)}isSupported(){return this.Ac}static isTransferableStreamSupported(){try{let t=new ReadableStream;return structuredClone(t,{transfer:[t]}),!0}catch{return!1}}}return s})(),zp=(()=>{class s{constructor(t){var e;this.Kt={},this.Jt=t.endpoint,this.Te=t.networkWorker,this.eE=t.compressionOutputType,this.sE=t.useRetry,this.Te.postMessage({type:"CreatePostRequest",endpoint:this.Jt,compressionOutputType:this.eE,useRetry:this.sE,mandatoryParameters:(e=t.mandatoryParameters)!==null&&e!==void 0?e:[]})}setQueryParams(t){this.Te.postMessage({type:"SetQueryParams",endpoint:this.Jt,queryParams:t}),csArray.prototype.forEach.call(Object.keys(t),e=>{this.Kt[e]=t[e]})}getQueryParams(){return this.Kt}removeQueryParams(t){this.Te.postMessage({type:"RemoveQueryParams",endpoint:this.Jt,queryParams:t}),t&&csArray.prototype.forEach.call(t,e=>{delete this.Kt[e]})}send(t,e){this.Te.postMessage({type:"Send",endpoint:this.Jt,payload:t,queryParams:e})}abort(){this.Te.postMessage({type:"Abort",endpoint:this.Jt})}onLoad(t){this.Te.registerOnLoadCallback(this.Jt,t)}onError(t){this.Te.registerOnErrorCallback(this.Jt,t)}setRequestHeader(t,e){this.Te.postMessage({type:"SetHeader",endpoint:this.Jt,headerName:t,headerValue:e})}onTimeout(t,e){this.Te.registerOnTimeoutCallback(this.Jt,t),this.Te.postMessage({type:"SetTimeout",endpoint:this.Jt,timeout:e})}}return s})(),xn=(()=>{let s;return function(n){n.UNCOMPRESSED="0",n.GZIP="2"}(s||(s={})),s})(),sl=(()=>{class s{constructor(t){this.onError=t}}return s})(),Gp=(()=>{class s{constructor(t){var e;this.Kt={},this.Cc={},this.Nd=i=>{for(let r of i){let{metadata:o,events:c}=r;this.send(c,o)}},this.Jt=t.endpoint,this.Kn=t.compressionOpts,this.Qt=t.recoveryStorage,this.mandatoryParameters=(e=t.mandatoryParameters)!==null&&e!==void 0?e:[],this.Ic=t.contentType,this.worker=!!t.worker,this.Qt&&this.Qt.recover(this.Nd)}setQueryParams(t){Object.keys(t).forEach(e=>{this.Kt[e]=t[e]})}removeQueryParams(t){t?t.forEach(e=>{delete this.Kt[e]}):this.Kt={}}send(t,e){let i=e||{...this.Kt},r=!("ct"in i),o=this.Ic==="application/json"||typeof t!="string"&&!this.iE(t);"ct"in i||(!this.Kn||!r?i.ct=xn.UNCOMPRESSED:i.ct=this.Kn.compressionType);let c=o?JSON.stringify(t):t,l=Object.keys(i).map(f=>`${encodeURIComponent(f)}=${encodeURIComponent(i[f])}`).join("&"),h=`${this.Jt}?${l}`;if(Si(this.mandatoryParameters,f=>i[f]==null)){it.warn(`[${this.worker?"WORKER":"MAIN"}] All mandatory parameters are not present on ${h}`);return}this.Kn&&r&&typeof c=="string"?this.Kn.compressor(c,this.Kn.compressionOutputType,f=>this.Md(h,i,f)):this.Md(h,i,c)}onLoad(t){this.Zi=t}onError(t){this.Jn=t}onTimeout(t,e){this.Ei=t,this.Qn=e}abort(){this.kd&&this.kd()}setRequestHeader(t,e){this.Cc[t]=e}getQueryParams(){return this.Kt}iE(t){return t&&t.byteLength!==void 0}Md(t,e,i){let r=new XMLHttpRequest,o=Object.keys(e).map(c=>`${encodeURIComponent(c)}=${encodeURIComponent(e[c])}`).join("&");r.open("POST",t),this.Ic&&r.setRequestHeader("Content-Type",this.Ic),r.onload=()=>{if(this.Qt&&this.Qt.recover(this.Nd),this.Zi){let c={params:e,responseText:r.responseText,status:r.status};this.Zi(c)}},r.onerror=()=>{this.Qt&&this.Qt.save({key:o,metadata:e,events:i}),this.Jn&&this.Jn({params:e})},this.Qn&&this.Ei&&(r.timeout=this.Qn,r.ontimeout=()=>{this.Ei()}),this.kd=()=>r.abort(),Object.keys(this.Cc).forEach(c=>{r.setRequestHeader(c,this.Cc[c])}),r.send(i)}}return s})(),il=(()=>{class s{constructor(t){this.Pc=t,this.Te=new $p(this.Pc)}create(t,e,i,r,o=[]){if(this.Te.isSupported()&&e)return new zp({networkWorker:this.Te,endpoint:t,compressionOutputType:i,useRetry:!!r,mandatoryParameters:o});{let c=i?{compressor:this.Pc.compress,compressionOutputType:i,compressionType:this.Pc.algorithm}:void 0;return new Gp({endpoint:t,compressionOpts:c,recoveryStorage:r})}}}return s})(),qp=(()=>{class s{constructor(t,e,i,r,o){this.O=t,this.R=e,this.Ke=i,this.vt=r,this.f=o}get(){return{exclusion:this.Ke.getAppliedTrackingDraw(),visitor:this.O.getVisitor(),session:this.R.getSession(),cvars:this.vt.getCustomVariablesSession()}}apply(t){t&&(t.exclusion?this.exclude():this.include(t))}exclude(){this.Ke.exclude(this.f),this.O.removeVisitor(),this.R.removeSession(),this.vt.removeCustomVariablesSession()}include(t){this.Ke.removeExclusion(),this.O.setVisitor(t.visitor),t.session?this.R.setSession(t.session):this.R.removeSession(),t.cvars?this.vt.setCustomVariableSession(t.cvars):this.vt.removeCustomVariablesSession()}}return s})(),Rn=".",fo="__DOT__",Wp=/^(([a-z0-9\-])+(\.[0-9]+){6})(\.[0-1])?(\.\b(x|[0-9a-fA-F]{12})\b)?$/,nl="x";function Yp(s){let[n,t,e,i,r,o,c,l,h]=Zp(s);return{id:n,creationTimestamp:Number(t),visitsCount:Number(e),hitTimestamp:Number(i),lastVisitTimestamp:Number(r),appliedTrackingDraw:Number(o),expires:Number(c),allowSubdomains:l===void 0?void 0:!!Number(l),identityPrint:h===void 0||h===nl?null:h}}function Xp(s){var n;return csArray.prototype.join.call(csArray.prototype.map.call(csArray.prototype.map.call([s.id,s.creationTimestamp,s.visitsCount,s.hitTimestamp,s.lastVisitTimestamp,s.appliedTrackingDraw,s.expires,s.allowSubdomains?1:0,(n=s.identityPrint)!==null&&n!==void 0?n:nl],csString),Jp),Rn)}function Kp(s){return Wp.test(s)}function Jp(s){return csString.prototype.replace.call(s,/\./g,fo)}function Qp(s){return csString.prototype.replace.call(s,new csRegExp(fo,"g"),Rn)}function Zp(s){return csString.prototype.indexOf.call(s,fo)!==-1?csArray.prototype.map.call(csString.prototype.split.call(s,Rn),Qp):csString.prototype.split.call(s,Rn)}var U=(()=>{let s;return function(n){n.QUOTA_REACHED="X",n.RECORDING_RULES_TARGETING="8",n.ANALYTICS_ONLY_RULES_TARGETING="9",n.ANALYTICS_ONLY="0",n.RECORDING_GLOBAL_SAMPLING="5",n.RECORDING_TEMPORARILY="T",n.RECORDING_URL_SAMPLING="6",n.RECORDING_ETR_SAMPLING="7",n.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED="B",n.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN="W"}(s||(s={})),s})(),Wt=(()=>{let s;return function(n){n.ETR_OFF="0",n.ETR_ON="1"}(s||(s={})),s})(),os=(()=>{let s;return function(n){n.ETR_LEGACY="0",n.ETR_SESSION="1",n.ETR_PAGE="2"}(s||(s={})),s})(),Zt=(()=>{let s;return function(n){n.ETR_DISABLED="0",n.ETR_PENDING="1",n.ETR_SAVED_PAGE="2",n.ETR_SAVED_SESSION="3",n.ETR_NOT_SAVED_SESSION="9"}(s||(s={})),s})(),kr=(()=>{let s;return function(n){n.UNNECESSARY="U",n.NOT_EXPRESSED="N",n.WITHDRAWN="W",n.GRANTED="G"}(s||(s={})),s})();var tf=(()=>{let s;return function(n){n.ETR_DISABLED="0",n.ETR_PENDING="1",n.ETR_SAVED_PAGE="2",n.ETR_SAVED_SESSION="3",n.ETR_NOT_SAVED_SESSION="9"}(s||(s={})),s})(),rl=/^(\d+\.[01356789TBWX](\.[01UNWG])?(\.[39])?)(\.\d+)?$/,ol=".";function ef(s){return csArray.prototype.join.call([s.pageNumber,s.collectState,s.replayConsent,s.etrStatus],ol)}function sf(s){if(!go(s))return null;let n=Dr(s);return n!==null?al(n):null}function al(s){var n,t;let[e,i,r,o]=csString.prototype.split.call(s,ol);return{collectState:i,replayConsent:(n=r)!==null&&n!==void 0?n:kr.UNNECESSARY,etrStatus:(t=o)!==null&&t!==void 0?t:tf.ETR_NOT_SAVED_SESSION,pageNumber:parseInt(e,10)}}function go(s){return rl.test(s)}function Dr(s){if(!s)return null;let n=(()=>{var t;return(t=csString.prototype.match.call(s,rl))===null||t===void 0?void 0:t[1]})();return n!=null?n:null}var Oe="_cs_ex",Ra=2592e6,nf=/^[0-9]+$/,rf=(()=>{class s{constructor(t,e,i){this.f=t,this.N=e,this.X=i}onCookieToSet(t){this.Si=t}onCookieToRemove(t){this.vi=t}get(){return this.f.cookielessTrackingEnabled?Number(this.X.getItem(Oe)):Number(this.N.get(Oe))}set(t){var e;this.f.cookielessTrackingEnabled?this.X.setItem(Oe,t):(this.N.set(Oe,t,Ra),(e=this.Si)===null||e===void 0||e.call(this,Oe,t,Ra))}remove(){var t;this.f.cookielessTrackingEnabled?this.X.removeItem(Oe):(this.N.delete(Oe),(t=this.vi)===null||t===void 0||t.call(this,Oe))}static isValidExclusionString(t){return nf.test(t)}}return s})(),Xe="_cs_cvars",of=(()=>{class s{constructor(t,e,i){this.f=t,this.N=e,this.X=i}onCookieToSet(t){this.Si=t}onCookieToRemove(t){this.vi=t}get(){return this.f.cookielessTrackingEnabled?this.X.getItem(Xe):this.N.get(Xe)}set(t){var e;this.f.cookielessTrackingEnabled?this.X.setItem(Xe,t):(this.N.set(Xe,t),(e=this.Si)===null||e===void 0||e.call(this,Xe,t))}remove(){var t;this.f.cookielessTrackingEnabled?this.X.removeItem(Xe):(this.N.delete(Xe),(t=this.vi)===null||t===void 0||t.call(this,Xe))}static isValidCustomVarString(t){return typeof t=="string"}}return s})();function oe(s,n,t,e){var i=arguments.length,r=i<3?n:e===null?e=Object.getOwnPropertyDescriptor(n,t):e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,n,t,e);else for(var c=s.length-1;c>=0;c--)(o=s[c])&&(r=(i<3?o(r):i>3?o(n,t,r):o(n,t))||r);return i>3&&r&&Object.defineProperty(n,t,r),r}var af=1,Ca=csSymbol("nodeIdentifier");function rt(s){let n=s[Ca];return n!=null?n:s[Ca]=af++}var ki=(()=>{class s{constructor(){this.set=new Set}add(t){this.set.add(t),this.set.size===1&&csSetTimeout(()=>{this.set.clear()})}has(t){return this.set.has(t)}del(t){this.set.delete(t)}clear(){this.set.clear()}values(){return Ue(this.set)}get count(){return this.set.size}}return s})(),cf=(()=>{class s extends ki{constructor(t="high"){super(),this.cE=t}add(t){this.set.add(t),this.set.size===1&&jt(()=>{this.set.clear()},this.cE)}}return s})();function Ln(s,n=!1){let t=new ki;return{push(e){t.count===0&&(n?jt:csSetTimeout)(()=>{s(t.values()),t.clear()}),t.add(e)}}}function lf(){let s=new Error,n=s.stack?csArray.prototype.filter.call(csString.prototype.split.call(s.stack,`
`),e=>e!=="Error"&&csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(e),"promise ")===-1&&csString.prototype.indexOf.call(e,"[native code]")===-1&&csString.prototype.indexOf.call(e,"(<anonymous>)")===-1):[];if(n.length===0)return"";let t=uf(n);return t===""||(n=df(n,t),n.length===0)?"":cl(n[0])}function hf(s){return csString.prototype.indexOf.call(s,"@")!==-1}function uf(s){return s.length>0?cl(s[0]):""}function df(s,n){return csArray.prototype.filter.call(s,t=>csString.prototype.indexOf.call(t,n)===-1)}function cl(s){let n="",t;hf(s)?t=new csRegExp("@(.+):(\\d+):(\\d+)$"):t=new csRegExp("\\((.+):(\\d+):(\\d+)\\)");let e=t.exec(s);return e&&(n=e[1]),n}var pf=s=>s;function ff(s,n,t,e){let i=csSymbol.for("propertyProxy");Object.defineProperty(s,n,{get(){var r;if(this[i])return this[i];let o=(r=t.get)===null||r===void 0?void 0:r.apply(this);return typeof o!="object"?o:(typeof Proxy=="function"?this[i]=new Proxy(o,{get(c,l){let h=Reflect.get(c,l);return typeof h=="function"?h.bind(c):h},set:(c,l,h)=>{let f=c[l],d=Reflect.set(c,l,h);return e.forEach(E=>E(this,h,f,"subproperty")),d}}):this[i]=o,this[i])},set(){var r;let o=arguments,c=this[n],l=(r=t.set)===null||r===void 0?void 0:r.apply(this,o);delete this[i];try{e.forEach(h=>h(this,o[0],c,"property"))}catch(h){it.error(h)}return l}})}function gf(s,n,t){let e=mf(s,n);if(!e)return null;let i=(r,o,c,l)=>t(r,o,c,l);return{activate:()=>{e.add(i)},deactivate:()=>{e.delete(i)}}}function mf(s,n){let t=csSymbol.for(n);if(s[t])return s[t];let e=new Set,i=Object.getOwnPropertyDescriptor(s,n);return i?i.configurable?(s[t]=e,ff(s,n,i,e),e):(it.warn(`Cannot intercept non configurable property '${csString(n)}' of object '${s}'`),null):(it.warn(`Cannot intercept property '${csString(n)}' because it does not exist directly on the target object '${s}'`),null)}function yf(s,n){let t=csSymbol.for(n);if(s[t])return s[t];let e=Object.getOwnPropertyDescriptor(s,n);if(!(e!=null&&e.writable)&&!(e!=null&&e.set))return it.warn(`Cannot intercept read only function '${csString(n)}' of object '${s}'`),null;let i=new Set;s[t]=i;let r=s[n];if(typeof r=="function"){let o=function(){let c=arguments,l=[];try{l=csArray.prototype.map.call(Ue(i),f=>f(c))}catch(f){it.critical(f)}let h=r.apply(this,c);return As(()=>{let f={result:h,context:this,args:c};csArray.prototype.forEach.call(l,d=>d(f))},_e.MonkeyPatch),h};Sf(o,r),s[n]=o}return i}function qt({target:s,methodName:n,hook:t,hookPrepareArgs:e=pf,options:i}){let r=yf(s,n);if(!r)return null;let o=c=>{let l=e(c),h=i!=null&&i.withCallerName?{callerName:lf()}:{};return f=>t({...f,...h,args:l})};return{activate:()=>{r.add(o)},deactivate:()=>{r.delete(o)}}}function Ef(s,n){let t=csSymbol.for(n);if(s[t])return s[t];let e=new Set,i=Object.getOwnPropertyDescriptor(s,n);return i?i.configurable?(s[t]=e,Object.defineProperty(s,n,{set(){var r;let o=this[n],c=arguments;return As(()=>{e.forEach(l=>l(this,c[0],o,"property"))},_e.MonkeyPatch),(r=i.set)===null||r===void 0?void 0:r.apply(this,c)}}),e):(it.warn(`Cannot intercept read only property '${csString(n)}' of object '${s}'`),null):e}function Cn(s,n,t){let e=Ef(s,n);if(!e)return null;let i=(r,o,c)=>t(r,o,c,"property");return{activate:()=>{e.add(i)},deactivate:()=>{e.delete(i)}}}function Sf(s,n){s.prototype=n.prototype,Object.defineProperty(s,"toString",{value:()=>n.toString()})}var Zs=(()=>{var s;class n{static lE(e){this.Vs.forEach(i=>{e(i,"initial")})}static Zn(e){if(this.D||(this.D=new csMutationObserver(i=>{for(let r of i)r.target.isConnected&&W(r.addedNodes,this.hE),W(r.removedNodes,this.uE)})),csArray.prototype.push.call(this.Re,e),!this.z){this.z=!0,this.D.observe(document,this.tr);for(let i of vs.getAllShadowHosts(document)){let r=csElementshadowRoot.apply(i);this.Vs.add(r),this.D.observe(r,this.tr)}this.Dc||(this.Dc=qt({target:Element.prototype,methodName:"attachShadow",hook:i=>this.dE(i.result)&&this.Ld(i.result)})),this.Dc.activate()}this.lE(e)}static dE(e){return e.isConnected&&e.ownerDocument===document}static er(e){var i,r;this.Re=csArray.prototype.filter.call(this.Re,o=>o!==e),this.Re.length===0&&(this.Re=[],this.z=!1,(i=this.D)===null||i===void 0||i.disconnect(),(r=this.Dc)===null||r===void 0||r.deactivate(),this.Vs.clear())}constructor(e){this.A=e,this.A=ls("DocumentShadowRootObserver:callback",(i,r)=>e(i,r))}get shadowRoots(){return Ue(s.Vs)}takeRecords(){var e,i;return(i=(e=s.D)===null||e===void 0?void 0:e.takeRecords())!==null&&i!==void 0?i:[]}observe(){vs.isSupported()&&s.Zn(this.A)}disconnect(){vs.isSupported()&&s.er(this.A)}}return s=n,n.Re=[],n.Vs=new Set,n.z=!1,n.tr={childList:!0,subtree:!0},n.Ld=t=>{s.Vs.has(t)||(s.D.observe(t,s.tr),s.Vs.add(t),W(s.Re,e=>e(t,"added")))},n.hE=t=>{$t(t,NodeFilter.SHOW_DOCUMENT_FRAGMENT).visitAll(s.Ld)},n.uE=t=>{t.isConnected||$t(t,NodeFilter.SHOW_DOCUMENT_FRAGMENT).visitAll(e=>{s.Vs.has(e)&&(s.Vs.delete(e),W(s.Re,i=>i(e,"removed")))})},tt([P()],n.prototype,"observe",null),tt([P()],n.prototype,"disconnect",null),n})(),Ia={childList:!0,subtree:!0,attributes:!0,characterData:!0,characterDataOldValue:!0,attributeOldValue:!0},ce=(()=>{var s;class n{static setShadowRootFilter(e){csArray.prototype.push.call(s.shadowRootFilters,e)}static xc(e){if(s.shadowRootFilters.length>0&&_i(e))for(let i=0;i<s.shadowRootFilters.length;i++){let r=s.shadowRootFilters[i];if(r(e))return}this.observedTargets.add(e),this.mutationObserver.observe(e,Ia)}static disconnectShadowRoot(e){this.observedTargets.has(e)&&(this.observedTargets.delete(e),this.isRefreshing||(this.isRefreshing=!0,jt(()=>{this.isRefreshing=!1;let i=this.mutationObserver.takeRecords();i.length&&s.mutationCallback(i),this.mutationObserver.disconnect(),this.observedTargets.forEach(r=>{this.mutationObserver.observe(r,Ia)})})))}static observe(e,i){csArray.prototype.push.call(this.callbacks,e),i&&csArray.prototype.push.call(this.shadowRootCallbacks,i),this.started?i&&csArray.prototype.forEach.call(vs.getAllShadowHosts(document),r=>i(csElementshadowRoot.apply(r),"initial")):(this.mutationObserver=new csMutationObserver(this.mutationCallback),this.xc(document),this.shadowRootObserver=new Zs(this.onShadowRoot),this.shadowRootObserver.observe(),this.started=!0,W(this.shadowRootObserver.shadowRoots,r=>{this.xc(r)}))}static disconnect(e,i){var r,o;this.callbacks=csArray.prototype.filter.call(this.callbacks,c=>c!==e),i&&(this.shadowRootCallbacks=csArray.prototype.filter.call(this.shadowRootCallbacks,c=>c!==i)),this.callbacks.length===0&&(this.callbacks=[],this.shadowRootCallbacks=[],s.shadowRootFilters=[],(r=this.shadowRootObserver)===null||r===void 0||r.disconnect(),(o=this.mutationObserver)===null||o===void 0||o.disconnect(),this.observedTargets.clear(),this.started=!1)}constructor(e,i){this.A=e,this.Ud=i;let r=Ln(o=>e(o,this),!0);this.A=ls("DocumentMutationObserver:callback",o=>{W(o,c=>r.push(c))})}get shadowRoots(){var e,i;return(i=(e=s.shadowRootObserver)===null||e===void 0?void 0:e.shadowRoots)!==null&&i!==void 0?i:[]}takeRecords(){var e;let i=(e=s.mutationObserver)===null||e===void 0?void 0:e.takeRecords(),r=s.shadowRootObserver.takeRecords();return i!=null&&i.length&&r.length?Ju(i,r):i!=null?i:r}observe(){s.observe(this.A,this.Ud)}disconnect(){s.disconnect(this.A,this.Ud)}}return s=n,n.callbacks=[],n.shadowRootCallbacks=[],n.started=!1,n.observedTargets=new Set,n.shadowRootFilters=[],n.mutationCallback=t=>{yt.mutations.count.increase(t.length),csArray.prototype.forEach.call(s.callbacks,e=>e(t,s.mutationObserver))},n.onShadowRoot=(t,e)=>{W(s.shadowRootCallbacks,i=>i(t,e)),e!=="removed"?s.xc(t):s.disconnectShadowRoot(t)},n.isRefreshing=!1,tt([P()],n.prototype,"observe",null),tt([P()],n.prototype,"disconnect",null),n})(),sr;function kt(s){if(sr||(sr=document.createElement("div")),!(!!s&&A(s)))return it.warn(`isValidSelector: invalid selector provided '${s}'`),!1;try{return Yt.call(sr,s),!0}catch{return it.warn(`isValidSelector: invalid selector provided '${s}'`),!1}}function Xs(s,n){if(ya)return ya.call(s,n);let t=s;do{if(Yt.call(t,n))return t;t=t==null?void 0:t.parentElement}while(t!==null&&t.nodeType===1);return null}var ae=(()=>{class s{get selectors(){return this.ze===""?null:this.ze}constructor(t,e={closest:!1}){this.A=t,this.Tt=e,this.ze="",this.ir=new ki,this.Po=Rs(i=>{if(this.ze==="")return;let r=[];for(let o of no(i,c=>c.addedNodes)){if(!(vd(o)||this.Tt.closest&&vn(o)))continue;let c=this.Tt.closest?this.pE(o,this.ze):this.findMatchingElements(o,this.ze);fa(c,r)}r.length&&this.A(r,"added")},"SelectorObserver.processMutations"),this.fE=(i,r)=>{if(this.ze===""||r!=="added")return;let o=this.findMatchingElements(i,this.ze);o.length&&this.A(o,"added")},this.G=new ce(this.Po,this.fE)}observe(t){this.ze===""?this.G.observe():this.ze+=",",this.ze+=t;let e=this.findMatchingElements(document,t);for(let i of this.G.shadowRoots){let r=this.findMatchingElements(i,t);fa(r,e)}e.length&&(W(e,i=>{this.ir.add(i)}),this.A(e,"initial"))}processPendingMutations(){this.Po(this.G.takeRecords())}disconnect(){this.G.disconnect(),this.ir.clear(),this.ze=""}pE(t,e){let i=[];if(vn(t)){if(t.parentElement){let r=Xs(t.parentElement,e);r&&csArray.prototype.push.call(i,r)}return csArray.prototype.filter.call(i,r=>this.ir.has(r)===!1)}else{if(Le(t)){let r=Xs(t,e);if(r)return csArray.prototype.push.call(i,r),csArray.prototype.filter.call(i,o=>this.ir.has(o)===!1)}return this.findMatchingElements(t,e)}}findMatchingElements(t,e){let i=Ws(window.csquerySelectorAll[t.nodeType].call(t,e));return dt(t)&&Yt.call(t,e)&&csArray.prototype.push.call(i,t),csArray.prototype.filter.call(i,r=>this.ir.has(r)===!1)}}return tt([P()],s.prototype,"observe",null),tt([P()],s.prototype,"disconnect",null),tt([It("SelectorObserver.findMatchingElements")],s.prototype,"findMatchingElements",null),s})();function vf(s){let n=null;return t=>t?n=t:n||(n=s())}var xs=vf(()=>new WeakMap),dn=(()=>{let s;return function(n){function t(c){return xs().get(c)}n.getAll=t;function e(c,l){var h;return(h=xs().get(c))===null||h===void 0?void 0:h[l]}n.get=e;function i(c,l,h){let f=xs().get(c);f||xs().set(c,f={}),f[l]=h}n.set=i;function r(c,l){let h=xs().get(c);h&&delete h[l]}n.remove=r;function o(){xs(new WeakMap)}n.reset=o}(s||(s={})),s})(),st=(()=>{let s;return function(n){function t(l,h,f){var d;if(typeof Node!="undefined"&&l instanceof Node)dn.set(l,h,f);else{let E=l;(d=E.props)!==null&&d!==void 0||(E.props={}),E.props[h]=f}}n.setProperty=t;function e(l,h){var f;return typeof Node!="undefined"&&l instanceof Node?dn.get(l,h):(f=l.props)===null||f===void 0?void 0:f[h]}n.getProperty=e;function i(l){return typeof Node!="undefined"&&l instanceof Node?dn.getAll(l):l.props}n.getProperties=i;function r(l,h){let f=null;return o(l,(d,E,m)=>h(d)&&(f=d)&&!!m()),f}n.findDescendant=r;function o(l,h){c(l,void 0,h)}n.traverse=o;function c(l,h,f){let d=!1;if(f(l,h,()=>d=!0),d)return;let m=l.shadowRoot;m&&c(m,l,f);let S=l.children;if(S!=null&&S.length){for(let O of S)if(O&&(c(O,l,f),d))break}}}(s||(s={})),s})(),le=(()=>{class s{constructor(){this.ce=[],this.isStarted=!1}async produceEvent(t){var e;this.isStarted&&(t.timestamp=(e=t.timestamp)!==null&&e!==void 0?e:C.now(),t.timestamp==null&&(t.timestamp=C.now()),csArray.prototype.forEach.call(this.ce,i=>i(t)))}onStop(){}start(){this.isStarted||(this.isStarted=!0,this.onStart())}stop(){this.isStarted&&(this.isStarted=!1,this.onStop(),this.ce=[])}stopForInactivity(){this.isStarted&&(this.isStarted=!1,this.onStop())}subscribe(t){return csArray.prototype.push.call(this.ce,t),()=>{let e=csArray.prototype.indexOf.call(this.ce,t);csArray.prototype.splice.call(this.ce,e,1)}}}return s})(),Ct=(()=>{class s extends Error{constructor(t,e){let i=e?`Command misuse: ${t} - ${e}`:`Command misuse: ${t}`;super(i),this.name="MisusedCommandError"}}return s})(),x=(()=>{let s;return function(n){let t;(function(v){v[v.NotMasked=0]="NotMasked",v[v.Parent=1]="Parent",v[v.Child=2]="Child"})(t=n.MaskedElementState||(n.MaskedElementState={})),n.maskedProp="masked",n.maskedAttributeProp="maskedAttribute";function e(v){return xe(v)&&"Attributes"in v&&"PIISelectors"in v?v.Attributes instanceof Array&&v.PIISelectors instanceof Array:!1}n.isSelectorUserInput=e;function i(v){if(!xe(v)||v===null)throw new Ct("setPIISelectors");return"Attributes"in v||(v.Attributes=[]),"PIISelectors"in v||(v.PIISelectors=[]),v}n.sanitizeSelectorUserInput=i;function r(v){var _;return(_=st.getProperty(v,n.maskedProp))!==null&&_!==void 0?_:{state:t.NotMasked}}n.getMaskedElementDetails=r;function o(v){var _;return(_=st.getProperty(v,n.maskedAttributeProp))!==null&&_!==void 0?_:{attributes:[]}}n.getMaskedAttributeDetails=o;function c(v){let _=st.getProperty(v,n.maskedProp);return(_==null?void 0:_.state)===t.Parent}n.isMaskedElement=c;function l(v){let _=st.getProperty(v,n.maskedProp);return(_==null?void 0:_.state)===t.Child}n.isMaskedElementChild=l;function h(v,_){let M=st.getProperty(v,n.maskedAttributeProp);return((M==null?void 0:M.attributes)==null?void 0:csArray.prototype.indexOf.call(M==null?void 0:M.attributes,_))>-1}n.isMaskedAttribute=h;function f(v,_){st.setProperty(v,n.maskedProp,_)}n.setMaskedElementProperty=f;function d(v){st.setProperty(v,n.maskedProp,void 0)}n.unsetMaskedElementProperty=d;function E(v,_){st.setProperty(v,n.maskedAttributeProp,_)}n.setMaskedAttributeProperty=E;function m(v,_){let M=csArray.prototype.filter.call(v.PIISelectors,B=>kt(B));_.elementSelector.length>0&&csArray.prototype.push.call(M,...csString.prototype.split.call(_.elementSelector,","));let k=N([...M]),T={elementSelector:csArray.prototype.join.call(k,","),attrSelector:_.attrSelector,attrSelectors:_.attrSelectors};return csArray.prototype.forEach.call(v.Attributes,B=>{B!=null&&B.attrName&&(B!=null&&B.selector)&&kt(B.selector)&&!S(T.attrSelectors,B)&&csArray.prototype.push.call(T.attrSelectors,B)}),T.attrSelector=O(T.attrSelectors),T}n.getComputedSelectorSettings=m;function S(v,_){return csArray.prototype.some.call(v,M=>M.selector===_.selector&&M.attrName===_.attrName)}function O(v){let _="";return csArray.prototype.forEach.call(v,M=>{let k=csString.prototype.split.call(M.selector,",");csArray.prototype.forEach.call(k,T=>{kt(T)&&(_&&(_+=","),_+=T)})}),_}function N(v){if(v.length<=1)return v;let _=[];for(let M of v){let k=csString.prototype.split.call(M,",");for(let T of k)csArray.prototype.indexOf.call(_,T)===-1&&csArray.prototype.push.call(_,T)}return _}}(s||(s={})),s})(),_f=(()=>{class s extends le{constructor(t){super(),this.B=null,this.Oo=null,this.D=null,this.js=null,this.Vd=["value","checked","src","data","alt"],this.Mo={state:x.MaskedElementState.Child},this.gE=e=>{for(let i of e){if(x.isMaskedElement(i.target)||x.isMaskedElementChild(i.target))for(let r=0;r<i.addedNodes.length;r+=1){let o=i.addedNodes[r];x.isMaskedElement(o)||x.isMaskedElementChild(o)||dt(o)&&this.jd(o)}for(let r=0;r<i.removedNodes.length;r+=1){let o=i.removedNodes[r];ot.isConnected(o)||this.Hd(o)}}},this.mE=t}setMaskedElementSettings(t){this.Ss=t}startIdentifier(){this.isStarted||(this.isStarted=!0,this.onStart())}stopIdentifier(){return this.isStarted=!1,this.onStop()}start(){}stop(){}onStart(){var t,e,i,r;this.Ss||(it.error("maskedElementSettings not initialized","MaskedElementIdentifier.start"),this.Ss={elementSelector:"",attrSelector:"",attrSelectors:[]});let{elementSelector:o,attrSelector:c,attrSelectors:l}=this.Ss;(t=this.js)!==null&&t!==void 0||(this.js=this.yE()),o.length!==0&&((e=this.B)!==null&&e!==void 0||(this.B=this.EE()),this.B.observe(o)),c.length!==0&&((i=this.Oo)!==null&&i!==void 0||(this.Oo=this.SE(l)),this.Oo.observe(c)),(r=this.D)!==null&&r!==void 0||(this.D=new ce(this.gE,(h,f)=>f==="added"&&this.vE(h))),this.D.observe(),csSetTimeout(this.mE)}onStop(){var t,e,i;this.B&&(this.Hd(document),this.B.disconnect()),(t=this.Oo)===null||t===void 0||t.disconnect(),(e=this.D)===null||e===void 0||e.disconnect(),(i=this.js)===null||i===void 0||i.disconnect()}yE(){return window.ResizeObserver?new ResizeObserver(t=>{csArray.prototype.forEach.call(t,e=>{this.resizeObserverCallback(e)})}):null}EE(){return new ae(t=>{csArray.prototype.forEach.call(t,e=>{this._E(e)?this.jd(e):(this.wE(e),this.bE(e))})})}SE(t){return new ae(e=>{csArray.prototype.forEach.call(e,i=>this.TE(i,t))})}resizeObserverCallback(t){let e=t.target.getBoundingClientRect(),i=x.getMaskedElementDetails(t.target);if(i.state!==x.MaskedElementState.Parent||e.width===i.width&&e.height===i.height)return;let r={state:x.MaskedElementState.Parent,width:e.width,height:e.height};x.setMaskedElementProperty(t.target,r),this.produceEvent({type:"ResizeMaskedElement",target:rt(t.target),width:e.width,height:e.height})}bE(t){!this.js||!dt(t)||Oi(t)||this.js.observe(t)}_E(t){let e=csNodeparentNode.apply(t);return e?x.isMaskedElement(e)||x.isMaskedElementChild(e):_i(t)?x.isMaskedElement(t.host)||x.isMaskedElementChild(t.host):!1}vE(t){(x.isMaskedElement(t.host)||x.isMaskedElementChild(t.host))&&x.setMaskedElementProperty(t,this.Mo)}Hd(t){$t(t,NodeFilter.SHOW_ELEMENT).visitAll(i=>{x.unsetMaskedElementProperty(i)})}wE(t){let e=t.getBoundingClientRect(),i={state:x.MaskedElementState.Parent,width:e.width,height:e.height};x.setMaskedElementProperty(t,i),this.AE(t),$t(t).visitAll(r=>r!=t&&x.setMaskedElementProperty(r,this.Mo))}jd(t){x.setMaskedElementProperty(t,this.Mo),$t(t).visitAll(e=>e!=t&&x.setMaskedElementProperty(e,this.Mo))}AE(t){var e;let i=(e=st.getProperty(t,x.maskedAttributeProp))!==null&&e!==void 0?e:{attributes:[]};for(let r=0;r<this.Vd.length;r+=1){let o=this.Vd[r];csArray.prototype.indexOf.call(i.attributes,o)===-1&&csArray.prototype.push.call(i.attributes,o)}i.attributes.length!==0&&x.setMaskedAttributeProperty(t,i)}TE(t,e){var i;let r=(i=st.getProperty(t,x.maskedAttributeProp))!==null&&i!==void 0?i:{attributes:[]};for(let o=0;o<t.attributes.length;o+=1){let c=t.attributes[o].name;csArray.prototype.indexOf.call(r.attributes,c)===-1&&csArray.prototype.some.call(e,l=>csString.prototype.indexOf.call(l.attrName,c)>-1&&Yt.call(t,l.selector))&&csArray.prototype.push.call(r.attributes,c)}r.attributes.length!==0&&x.setMaskedAttributeProperty(t,r)}}return oe([P()],s.prototype,"resizeObserverCallback",null),s})(),ge=(()=>{let s;return function(n){n.ANONYMIZED_TEXT_STATUS_PROP="anonymizationStatus",n.WHITELISTED_STATUS="whitelisted";function t(r){return st.getProperty(r,n.ANONYMIZED_TEXT_STATUS_PROP)===n.WHITELISTED_STATUS}n.isWhitelistedElement=t;function e(r){st.setProperty(r,n.ANONYMIZED_TEXT_STATUS_PROP,n.WHITELISTED_STATUS)}n.whitelistElement=e;function i(r){st.setProperty(r,n.ANONYMIZED_TEXT_STATUS_PROP,void 0)}n.removeWhitelistElement=i}(s||(s={})),s})(),wf=(()=>{class s{constructor(){this.Lc=0,this.U=!1,this.Bd="data-cs-capture",this.Hs=t=>{for(let e of t){if(ge.isWhitelistedElement(e.target))for(let i=0;i<e.addedNodes.length;i+=1){let r=e.addedNodes[i];ge.isWhitelistedElement(r)||dt(r)&&this.Fd(r)}for(let i=0;i<e.removedNodes.length;i+=1){let r=e.removedNodes[i];ot.isConnected(r)||this.$d(r)}}}}start(){this.Lc++,!this.U&&(this.U=!0,this.RE())}RE(){this.B||(this.B=new ae(e=>W(e,i=>this.Fd(i))));let t=this.Uc?`[${this.Bd}], ${this.Uc}`:`[${this.Bd}]`;this.B.observe(t),this.D||(this.D=new ce(this.Hs,(e,i)=>i==="added"&&this.CE(e))),this.D.observe()}stop(){this.U&&(this.Lc--,this.Lc===0&&(this.U=!1,this.IE()))}IE(){this.B&&(this.$d(document),this.B.disconnect()),this.D&&this.D.disconnect()}setWhitelistedElementsSelector(t,e=!0){if(kt(t))this.Uc=t;else if(e)throw new Ct("setCapturedElementsSelector")}getWhitelistedElementsSelector(){return this.Uc}Fd(t){$t(t).visitAll(e=>{ge.whitelistElement(e)})}CE(t){ge.isWhitelistedElement(t.host)&&ge.whitelistElement(t)}$d(t){$t(t,NodeFilter.SHOW_ELEMENT).visitAll(i=>{ge.removeWhitelistElement(i)})}}return s})(),Ne=(()=>{let s;return function(n){n.EDITABLE_NODE_PROP="editableNode";function t(r){return st.getProperty(r,n.EDITABLE_NODE_PROP)===!0}n.isEditableNode=t;function e(r){st.setProperty(r,n.EDITABLE_NODE_PROP,!0)}n.markEditableNode=e;function i(r){st.setProperty(r,n.EDITABLE_NODE_PROP,void 0)}n.unmarkEditableNode=i}(s||(s={})),s})(),bf=(()=>{class s{constructor(){this.B=null,this.D=null,this.U=!1,this.Hs=t=>{for(let e of t)if(Ne.isEditableNode(e.target))for(let i=0;i<e.addedNodes.length;i+=1){let r=e.addedNodes[i];if(!Ne.isEditableNode(r)){if(vn(r)||hd(r)){Ne.markEditableNode(r);continue}dt(r)&&this.zd(r)}}}}start(){this.U||(this.U=!0,this.B=new ae(t=>W(t,e=>{this.zd(e)})),this.B.observe("[contenteditable]"),this.D=new ce(this.Hs,(t,e)=>e==="added"&&this.PE(t)),this.D.observe())}stop(){var t,e;this.U&&(this.U=!1,(t=this.B)===null||t===void 0||t.disconnect(),this.B=null,(e=this.D)===null||e===void 0||e.disconnect(),this.D=null)}zd(t){$t(t).visitAll(e=>{Ne.markEditableNode(e)})}PE(t){Ne.isEditableNode(t.host)&&Ne.markEditableNode(t)}}return s})(),ll=(()=>{let s;return function(n){n.ENCRYPTED_NODE_PROP="encrypted";function t(r){return st.getProperty(r,n.ENCRYPTED_NODE_PROP)===!0}n.shouldEncrypt=t;function e(r){st.setProperty(r,n.ENCRYPTED_NODE_PROP,!0)}n.markEncryptedNode=e;function i(r){st.setProperty(r,n.ENCRYPTED_NODE_PROP,void 0)}n.unmarkEncryptedNode=i}(s||(s={})),s})();var Tf="spki",Pa="RSA-OAEP",Af="SHA-256",Oa="AES-CTR",Rf="SHA-1",Na=190,as=(()=>{let s;return function(n){var t;let e=!1,i=null,r,o=typeof TextEncoder!="undefined"?new TextEncoder:null,c;n.crypto=(t=Z.crypto)===null||t===void 0?void 0:t.subtle,n.MAX_DIGEST_INPUT_SIZE=100;function l(){return!e}n.isKeyImported=l;function h(){return i}n.getCryptoKey=h;function f(){var k,T;return((T=(k=Z.self.crypto)===null||k===void 0?void 0:k.subtle)===null||T===void 0?void 0:T.encrypt)!=null&&Z.self.CryptoKey!=null}n.isSupported=f;async function d(k){r=n.crypto.importKey(Tf,to(k),{name:Pa,hash:Af},!1,["encrypt"]).catch(()=>(e=!0,null)),i=await r,r=void 0,i||it.warn(`Fail to import public key '${k}'`)}n.importKey=d;async function E(k){if(!f()||e)return null;await r;let T=Nn(k);T.byteLength>Na&&(T=T.slice(0,Na));try{let B=await n.crypto.encrypt({name:Pa},i,T);return oa(B)}catch{return null}}n.asymmetricEncrypt=E;async function m(k,T){if(!f()||e)return null;let B={counter:T.initializationVector,name:Oa,length:64},et=o.encode(k);try{let ct=await n.crypto.encrypt(B,T.cryptoKey,et);return oa(ct)}catch{return null}}n.symmetricEncrypt=m;async function S(k){let T=await O(k);if(!T)throw new Error("Export secret failed");let B=await E(T);if(!B)throw new Error("Encrypt secret failed");return B}n.encryptSecret=S;async function O(k){var T;if(!f())return null;try{return(T=(await n.crypto.exportKey("jwk",k)).k)!==null&&T!==void 0?T:null}catch{return null}}async function N(){if(!f()||e)return null;try{return{cryptoKey:await n.crypto.generateKey({name:Oa,length:128},!0,["encrypt","decrypt"]),initializationVector:Z.crypto.getRandomValues(new Uint8Array(16))}}catch{return null}}n.generateSymmetricKey=N;function v(k){c=k}n.setDigestSalt=v;async function _(k){k=csString.prototype.toLocaleLowerCase.call(csString.prototype.trim.call(k)),c&&(k=`${k}:${c}`);let T=o.encode(k);try{let B=await n.crypto.digest(Rf,T);return yn(B)}catch{return null}}n.digest=_;function M(){return Z.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["encrypt","decrypt"])}n.generateKeyPair=M}(s||(s={})),s})(),Pe=(()=>{let s;return function(n){n.REGEX="regex",n.START="start",n.NOT_START="not-start",n.END="end",n.NOT_END="not-end",n.CONTAIN="contain",n.NOT_CONTAIN="not-contain",n.EXACT="exact",n.NOT_EXACT="not-exact"}(s||(s={})),s})(),Ke=(()=>{let s;return function(n){n.START="start",n.NOT_START="not-start",n.END="end",n.NOT_END="not-end",n.CONTAIN="contain",n.NOT_CONTAIN="not-contain",n.EXACT="exact",n.NOT_EXACT="not-exact"}(s||(s={})),s})(),ms=(()=>{let s;return function(n){n.replayRecordingUnmaskedUrlRegex="replayRecordingUnmaskedUrlRegex",n.replayRecordingMaskedUrlRegex="replayRecordingMaskedUrlRegex",n.replayRecordingUnmaskedUrlRegexRules="replayRecordingUnmaskedUrlRegexRules",n.replayRecordingMaskedUrlRegexRules="replayRecordingMaskedUrlRegexRules"}(s||(s={})),s})(),mo=(()=>{class s{constructor(){this.jc=[]}setRegexRules(t){this.jc=csArray.prototype.filter.call(csArray.prototype.map.call(t,e=>this.NE(e)),e=>e!==null)}evaluateUrl(t){return csArray.prototype.some.call(this.jc,e=>this.qd(t,e))}getMatchingRules(t){return csArray.prototype.map.call(csArray.prototype.filter.call(this.jc,e=>this.qd(t,e)),e=>e.ruleInput)}qd(t,e){var i,r;let o=this.ME(t,e);return!this.kE(e)||!this.DE(e)?!1:!!(e!=null&&e.notOperator?!(!((i=e.regex)===null||i===void 0)&&i.test(o)):!((r=e.regex)===null||r===void 0)&&r.test(o))}kE(t){let e=new csDate,i=t.startDate&&t.startDate>e,r=t.endDate&&t.endDate<e;return!i&&!r}DE(t){let e=t.samplingRate!==100,i=e&&_s.boolean(t.samplingRate);return!e||i}ko(t){return!bt(t,"http://")&&!bt(t,"https://")?`https://${t}`:t}ME(t,e){let i=el(this.ko(t));return i?e.ignoreQueryParams&&e.ignoreURIFragments?`${i.origin}${i.pathname}`:e.ignoreQueryParams?`${i.origin}${i.pathname}${i.hash}`:e.ignoreURIFragments?`${i.origin}${i.pathname}${i.search}`:t:t}Do(t){return t!=null&&t.ignoreCaseSensitivity?"i":""}NE(t){let e=null,i=!1;switch(t.operator){case Ke.NOT_START:case Pe.NOT_START:i=!0;case Ke.START:case Pe.START:e=new csRegExp(`^${t.value}`,this.Do(t));break;case Ke.NOT_END:case Pe.NOT_END:i=!0;case Ke.END:case Pe.END:e=new csRegExp(`${t.value}$`,this.Do(t));break;case Ke.NOT_CONTAIN:case Pe.NOT_CONTAIN:i=!0;case Ke.CONTAIN:case Pe.CONTAIN:case Pe.REGEX:e=new csRegExp(`${t.value}`,this.Do(t));break;case Ke.NOT_EXACT:case Pe.NOT_EXACT:i=!0;case Ke.EXACT:case Pe.EXACT:e=new csRegExp(`^${t.value}$`,this.Do(t));break;default:it.warn(`compileRegexRule, unknown operator: ${t.operator}`)}if(e===null)return null;let r=t.startDate?this.Wd(t.startDate):void 0,o=t.endDate?this.Wd(t.endDate):void 0;return{regex:e,ignoreQueryParams:t.ignoreQueryParams,ignoreURIFragments:t.ignoreURIFragments,notOperator:i,samplingRate:t.samplingRate!==void 0?t.samplingRate:100,startDate:r,endDate:o,ruleInput:t}}Wd(t){let e=new csDate(t);return isNaN(e.getTime())?void 0:e}}return s})(),Cf=(()=>{class s{constructor(t,e,i,r){this.le=t,this.nr=e,this.rr=i,this.bt=r}init(){this.xE()}shouldMaskNonTextElements(){if(this.le.anonymisationMethod!==ms.replayRecordingMaskedUrlRegexRules)return!1;if(this.le.isSMB)return this.shouldUseAnonymization();let t=this.rr.getMatchingRules(this.nr.getAnonymizedUrl());return csArray.prototype.some.call(t,e=>e.maskMedia)}shouldUseAnonymization(){if(this.bt&&!this.bt.isReplayUnanonymizedAllowedByConsent()){switch(this.le.anonymisationMethod){case null:case ms.replayRecordingUnmaskedUrlRegex:return!(this.le.replayRecordingUnmaskedUrlRegex&&this.le.replayRecordingUnmaskedUrlRegex.test(this.nr.getAnonymizedUrl()));case ms.replayRecordingUnmaskedUrlRegexRules:return!this.rr.evaluateUrl(this.nr.getAnonymizedUrl())}return!0}else{switch(this.le.anonymisationMethod){case null:case ms.replayRecordingMaskedUrlRegex:return!!(this.le.replayRecordingMaskedUrlRegex&&this.le.replayRecordingMaskedUrlRegex.test(this.nr.getAnonymizedUrl()));case ms.replayRecordingMaskedUrlRegexRules:return this.rr.evaluateUrl(this.nr.getAnonymizedUrl())}return!1}}xE(){this.le.anonymisationMethod===ms.replayRecordingMaskedUrlRegexRules&&this.le.replayRecordingMaskedUrlRegexRules?this.rr.setRegexRules(this.le.replayRecordingMaskedUrlRegexRules):this.le.anonymisationMethod===ms.replayRecordingUnmaskedUrlRegexRules&&this.le.replayRecordingUnmaskedUrlRegexRules&&this.rr.setRegexRules(this.le.replayRecordingUnmaskedUrlRegexRules)}}return s})();function If(s){return s.nodeType===1}function Rt(s){let n=csEventtarget.apply(s);return n&&If(n)&&csElementshadowRoot.apply(n)&&s.composedPath?s.__csOriginalTarget||s.composedPath()[0]:n}function Pf(s){return s.composedPath&&Object.defineProperty(s,"__csOriginalTarget",{value:s.composedPath()[0],writable:!1,enumerable:!1}),s}function Of(){return(s,n,t)=>{let e=t.value;return e&&(t.value=function(i){if(Rt(i)===csEventtarget.apply(i))return e.call(this,i)}),t}}var wt=(()=>{let s;return function(n){n[n.TAP=0]="TAP",n[n.LONG_PRESS=1]="LONG_PRESS",n[n.DRAG=2]="DRAG",n[n.FLICK=3]="FLICK",n[n.PINCH_IN=4]="PINCH_IN",n[n.PINCH_OUT=5]="PINCH_OUT"}(s||(s={})),s})(),en=(()=>{let s;return function(n){n[n.UP=1]="UP",n[n.DOWN=2]="DOWN",n[n.LEFT=3]="LEFT",n[n.RIGHT=4]="RIGHT"}(s||(s={})),s})(),Nf=(()=>{class s{compute(t,e){let i=this.Bs(e.x)-this.Bs(t.x),r=this.Bs(e.y)-this.Bs(t.y),o=e.time-t.time;return{duration:o,distance:this.Yd(i,r),direction:this.LE(i,r),velocity:this.UE(i,r,o)}}computePinchMetrics(t,e){let i=this.Bs(e.x)-this.Bs(t.x),r=this.Bs(e.y)-this.Bs(t.y);return{duration:e.time-t.time,distance:this.Yd(i,r)}}getScale(t,e){return Math.abs(e/t-1)}Bs(t){return t/window.devicePixelRatio}Yd(t,e){return Math.round(Math.sqrt(t*t+e*e))}UE(t,e,i){let r=i/1e3,o=t/r,c=e/r;return Math.round(Math.abs(o)+Math.abs(c))}LE(t,e){return Math.abs(t)>Math.abs(e)?t>0?en.RIGHT:en.LEFT:e>0?en.DOWN:en.UP}}return s})(),hl=typeof performance!="undefined"&&!!performance.now,Ma=hl?()=>performance.now():()=>csDate.now(),Mf=(()=>{var s;return hl?(s=performance.timing)===null||s===void 0?void 0:s.navigationStart:0})(),sn={now(){return Math.round(Ma()+Mf)},elapsed(){return Ma()}};function ka(s,n=0){let t=Math.pow(10,n);return Math.round(s*t)/t}var kf=1e3,Df=100,xf=.1,xr=(()=>{class s{constructor(){this.Bt={},this.Hc=()=>{},this.xo=new Nf,this.Ce()}static isGestureDetectionSupported(){return typeof devicePixelRatio!="undefined"}onGesture(t){this.Hc=t}isValidTouchEvent(t){return"touches"in t&&"changedTouches"in t}processActionDown(t){if(!this.VE(t))return;this.jE(t)&&this.Ce();let e={x:t.touches[0].clientX,y:t.touches[0].clientY,time:sn.now()};if(t.touches.length===1)this.Bt.startPinchTime=e.time,this.Bt.firstTouch=e;else if(t.touches.length===2&&(this.Bt.secondTouch={x:t.touches[1].clientX,y:t.touches[1].clientY,time:sn.now()},this.Bt.firstTouch&&this.Bt.secondTouch)){let i=this.xo.computePinchMetrics(this.Bt.firstTouch,this.Bt.secondTouch);this.tn=i.distance}csArray.prototype.push.call(this.or,e),this.Lo=Rt(t)}processActionMove(){this.Bc=!0}processActionUp(t){if(this.HE(t)){if(csArray.prototype.push.call(this.or,{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:sn.now()}),this.BE(t)&&this.Bt.startPinchTime){let e={x:t.touches[0].clientX,y:t.touches[0].clientY,time:this.Bt.startPinchTime},i={x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:sn.now()};this.Bt.firstTouch&&(this.Bt.firstTouch=e,this.Bt.secondTouch=i),this.FE(t)}this.tn||this.$E()&&this.zE(t)}}Ce(){this.or=[],this.Lo=null,this.Bc=!1,this.tn=null,this.ar=!0}zE(t){let e=this.xo.compute(this.or[0],this.or[1]);this.ar=t.isTrusted;let i=this.Bc?this.GE(e):this.qE(e);if(this.WE(i.type,t.changedTouches)){let r=t.changedTouches[0];i.pageX=ka(r.pageX,1),i.pageY=ka(r.pageY,1)}this.Hc(i,t)}FE(t){if(!(this.Bt.firstTouch&&this.Bt.secondTouch))return;let e=this.xo.computePinchMetrics(this.Bt.firstTouch,this.Bt.secondTouch);this.ar=t.isTrusted;let i=this.YE(e);i&&this.Hc(i,t)}YE(t){return!this.tn||this.xo.getScale(this.tn,t.distance)<xf?void 0:{type:this.tn>t.distance?wt.PINCH_IN:wt.PINCH_OUT,target:this.Lo,distance:t.distance,isTrusted:this.ar}}GE(t){return{type:t.velocity<Df?wt.DRAG:wt.FLICK,target:this.Lo,velocity:t.velocity,distance:t.distance,direction:t.direction,isTrusted:this.ar}}qE(t){return{type:t.duration<kf?wt.TAP:wt.LONG_PRESS,target:this.Lo,isTrusted:this.ar}}WE(t,e){return t===wt.TAP&&e&&e.length===1}jE(t){return t.touches.length===1}$E(){return this.or.length===2}VE(t){return t.touches.length>0}HE(t){return t.changedTouches.length>0}BE(t){return this.Bc&&!!this.tn&&t.changedTouches.length===1&&t.touches.length===1}}return s})(),yo=(()=>{class s{constructor(){this.subscriptions={}}subscribe(t,e){this.subscriptions[t]=e,Object.keys(this.subscriptions).length===1&&this.onStartTracking()}unsubscribe(t){delete this.subscriptions[t],Object.keys(this.subscriptions).length===0&&this.onStopTracking()}}return s})(),ul=!0,pn=csSymbol("safe"),Da=csSymbol("task");function gt(s,n=ul){var t;(t=s[pn])!==null&&t!==void 0||(s[pn]=function(e){let i=arguments;As(()=>(e[Da]=Qt,s.listener.apply(s.boundElement,i)),_e.EventListener,e[Da])}),s.boundElement.addEventListener(s.type,s[pn],n)}function mt(s,n=ul){s.boundElement.removeEventListener(s.type,s[pn],n)}var Lf=(()=>{class s extends yo{constructor(t){super(),this.XE=t,this.Fs=[{boundElement:document,type:"touchstart",listener:e=>this.Q(e)},{boundElement:document,type:"touchmove",listener:e=>this.Q(e)},{boundElement:document,type:"touchend",listener:e=>this.Q(e)}],this.cr=new xr,this.cr.onGesture((e,i)=>this.Fc(e,i))}Fc(t,e){for(let i in this.subscriptions){let r=this.subscriptions[i];r(t,e)}}onStartTracking(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.Fs,t=>gt(t))}onStopTracking(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.Fs,t=>mt(t))}canDetectGesture(){return typeof devicePixelRatio!="undefined"}Q(t){this.XE.tryToExecute("process gesture event",()=>{if(this.cr.isValidTouchEvent(t))switch(t.type){case"touchstart":this.cr.processActionDown(t);break;case"touchmove":this.cr.processActionMove();break;case"touchend":this.cr.processActionUp(t);break}})()}static isSwipe(t){return t.type===wt.FLICK||t.type===wt.DRAG}}return s})();var Tt=(()=>{class s{constructor(){this._isStarted=!1}get isStarted(){return this._isStarted}start(...t){this._isStarted||(this._isStarted=!0,this.onStart(...t))}stop(){this._isStarted&&(this._isStarted=!1,this.onStop())}restart(){this.stop(),this.start()}}return s})();var bs;(function(s){s.ContentSquare="CONTENTSQUARE",s.LoadedByClicktale="LOADED_BY_CLICKTALE",s.LoadClicktalePtc="LOAD_CLICKTALE_PTC",s.DualCollectionReview="DUAL_COLLECTION_REVIEW",s.DualCollection="DUAL_COLLECTION",s.ContentSquareTagClickTaleEndpoints="CONTENTSQUARE_TAG_CLICKTALE_ENDPOINTS"})(bs||(bs={}));function dl(s){return s.tagDeploymentMode===bs.DualCollectionReview||s.tagDeploymentMode===bs.DualCollection}function Uf(s){return dl(s)||s.tagDeploymentMode===bs.LoadClicktalePtc}var xa=(()=>{let s;return function(n){function t(){return window.ClickTaleIsRecording&&window.ClickTaleIsRecording()}n.isRecording=t;function e(){window.ClickTaleStop&&window.ClickTaleStop()}n.stopRecording=e;function i(c){window.ClickTaleLogicalWithUploadPage&&window.ClickTaleLogicalWithUploadPage(c)}n.triggerLogicalPageView=i;function r(c){window.ClickTaleEvent&&window.ClickTaleEvent(c)}n.sendPageEvent=r;function o(c){window.ClickTaleEventTrigger&&window.ClickTaleEventTrigger(c)}n.sendEventTriggerRecording=o}(s||(s={})),s})();var Vf=(()=>{class s{constructor(t){this.mt=t}on(t,e){return i=>{this.mt.hasValidEventTarget(i)&&this.yS(i,t)&&e(i)}}yS(t,e){let i=Rt(t);return Yt.call(i,e)}isMatchesSelectorSupported(){return!!Yt}}return s})(),jf=(()=>{class s extends Tt{constructor(){super(),this.tp=0}onStart(){H.isPerfLoggingActive()&&(this.lr=window.csSetInterval(()=>this.ep(),s.ES))}onStop(){H.isPerfLoggingActive()&&(this.ep(),csClearInterval(this.lr))}ep(){this.tp>=s.SS||G.counters.methodPerformance.flush()&&this.tp++}}return s.ES=5e3,s.SS=5,s})(),Hf=(()=>{class s{constructor(){}init(){this.sp=new jf}onStartTracking(){this.sp.start()}onOptout(){this.sp.stop()}}return s})();var La=(()=>{let s;return function(n){function t(r){return A(r)||ft(r)}n.isValidIdentity=t;function e(r){let o=!1;return i(r)&&(o=!!r.hash),o}n.parseIdentityOptionsHash=e;function i(r){return ut(r)&&xe(r)&&"hash"in r}}(s||(s={})),s})(),Ua=["identify"],Bf=["getIdentity"],Ff=["resetIdentity"],$f=(()=>{class s{constructor(t,e){this.E=t,this.Je=e}init(){this.E.register(Ua,(t,e)=>{if(!La.isValidIdentity(t))throw new Ct(Ua[0]);let i=La.parseIdentityOptionsHash(e);this.Je.identify(t.toString(),i)}),this.E.register(Ff,()=>this.Je.resetIdentity()),this.E.register(Bf,()=>this.Je.getIdentity())}onStartTracking(){this.Je.start()}onBeforeSessionRenewal(){this.Je.stop()}onOptout(){this.Je.stop()}}return s})();var zf=s=>{let n=s*60*1e3;return`${Math.floor(csDate.now()/n)}`},Gf=5e3,Lr=(()=>{class s extends Jc{constructor(t,e,i){super(t,e),this.rn=null,this.TS=(i==null?void 0:i.type)||"json",this.rp=i==null?void 0:i.cacheMinutes,this.Qn=i==null?void 0:i.timeout}onLoad(t){this.Zi=t}onError(t){this.Jn=t}onTimeout(t,e){this.Ei=t,this.Qn=e}send(){csArray.prototype.forEach.call(this.beforeRequestCallbacks,r=>r());let t=this.retrieveParameters();this.vc(t);let e=wi.toQuery(t),i=`${this.domainUri}${this.path?`/${this.path}`:""}?${e}`;this.AS(i,this.TS)}abort(){this.rn&&(this.rn.abort(),this.rn=null)}isInProgress(){return this.rn!==null}AS(t,e){var i;let r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType=e,r.onerror=()=>{var o;return(o=this.Jn)===null||o===void 0?void 0:o.call(this,r)},r.ontimeout=()=>{var o;return(o=this.Ei)===null||o===void 0?void 0:o.call(this,r)},r.onload=()=>{var o,c;r.status>=200&&r.status<400?((o=this.Zi)===null||o===void 0||o.call(this,this.RS(r,e)?r.response:r.responseText),csArray.prototype.forEach.call(this.afterRequestCallbacks,l=>l())):(c=this.Jn)===null||c===void 0||c.call(this,r)},r.onloadend=()=>{this.rn=null},r.timeout=(i=this.Qn)!==null&&i!==void 0?i:Gf,this.rn=r,r.send()}RS(t,e){let i=t.getResponseHeader("Content-Type");return i===null?e==="json":csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(i),"json")>0}vc(t){let e;this.rp?e=`${zf(this.rp)}`:e=csString.prototype.slice.call(`${Math.random()}`,2,8),t.r=e}}return s})(),qf=Math.pow(2,52),li=null;async function pl(s){if((li==null?void 0:li.visitorId)===s)return li.heapUserId;let n=await Wf(s),t=Number(n%BigInt(qf));return li={visitorId:s,heapUserId:t},t}async function Wf(s){let n=await crypto.subtle.digest("SHA-256",Yf(s)),t=new Uint8Array(n.slice(0,8));return t=Kf(t),Xf(t)}function Yf(s){let n=new ArrayBuffer(s.length),t=new Uint8Array(n);for(let e=0;e<s.length;e++)t[e]=csString.prototype.charCodeAt.call(s,e);return n}function Xf(s){let n=[];return Uint8Array.from(s).forEach(function(e){let i=e.toString(16);i.length%2&&(i="0"+i),csArray.prototype.push.call(n,i)}),BigInt("0x"+csArray.prototype.join.call(n,""))}function Kf(s){let n=new ArrayBuffer(s.byteLength+1),t=new Uint8Array(n);for(let e=1;e<t.byteLength;e++)t[e]=s[e-1];return t}var fl=(()=>{let s;return function(n){function t(r){return Y(r)}n.isValidProperties=t;let e=255;function i(r){let o={};for(let c of Object.keys(r)){let l=r[c];if(A(l)||ft(l)){let h=K.truncate(csString(c),e);o[h]=K.truncate(csString(l),e)}}return o}n.sanitizeProperties=i}(s||(s={})),s})(),Jf=(()=>{class s extends Tt{constructor(t,e,i,r){super(),this.Gs=t,this.Wc=e,this.O=i,this.F=r,this.Ho=null,this.op=!1,this.Bo=null,so()&&(this.op=!0,e.setRequestParametersProviders({getRequestParameters:()=>{var o;return(o=this.Bo)!==null&&o!==void 0?o:{}}}),e.after(()=>{this.Bo=null}))}async addUserProperties(t){if(!this.op)return;if(!this.Gs){it.error("missing heap env id","UserPropertiesService");return}let e=fl.sanitizeProperties(t);Object.keys(e).length>0&&(this.isStarted?await this.ap(e,this.Gs):this.Ho=e)}async ap(t,e){let i=this.O.getVisitor();if(!i){it.warn("could not get current visitor",!0,"UserPropertiesService");return}let r=csString(await pl(i.id));this.Bo={a:e,u:r,st:C.now().toString(),b:"web",v:"1",s:"1",tv:"4.0"};for(let o of Object.keys(t))this.Bo[`_${o}`]=t[o];this.Wc.send(),this.F.refreshSession()}onStart(){this.Ho!==null&&(this.ap(this.Ho,this.Gs),this.Ho=null)}onStop(){}}return s})(),Va=["addUserProperties"],Qf="api/add_user_properties_v3",Zf=(()=>{class s{constructor(t,e,i,r){this.E=t,this.f=e,this.O=i,this.F=r}init(){let t=new Lr(this.f.getPaProxyDomainUri(),Qf);this.Fo=new Jf(this.f.heapEnvironment.env_id,t,this.O,this.F),this.E.register(Va,e=>{if(!fl.isValidProperties(e))throw new Ct(Va[0]);this.Fo.addUserProperties(e)})}onStartTracking(){this.Fo.start()}onBeforeSessionRenewal(){this.Fo.stop()}onOptout(){this.Fo.stop()}}return s})();var bi={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,STYLESHEET:50};var ja=new Map,ir=!Ri&&document.implementation.createHTMLDocument("");function gl(s){var n,t;return(t=(n=s.sheet)===null||n===void 0?void 0:n.href)!==null&&t!==void 0?t:s.getAttribute("href")}function tg(s){if(!Pi(s))return null;let n=ml(s);if(n===null||n.length===0)return null;let t="";if(On(s.textContent))W(n,e=>t+=e.cssText);else{let e=eg(s);if(e===n.length||e>n.length)return null;let i=new csArray(n.length-e);for(let r=e,o=0;r<n.length;r+=1,o+=1)i[o]=n[r];W(i,r=>t+=r.cssText)}return t}function eg(s){if(!ir)return 0;let n=ja.get(s.textContent);if(n)return n;let t=s.cloneNode(!0);t.textContent=s.textContent,ir.head.appendChild(t);let e=ml(t);return n=e?e.length:0,ja.set(s.textContent,n),ir.head.removeChild(t),n}function ml(s){try{if(s.disabled)return null;let n=s.sheet;return n?n.cssRules||n.rules:null}catch(n){if(n.name!=="SecurityError"&&n.name!=="InvalidAccessError")throw n;return null}}var di=s=>s instanceof HTMLFormElement?"form":s.localName;var Cs=(()=>{class s{constructor(t){this.csId=rt(t),this.props=dn.getAll(t)}}return s})(),yl=(()=>{class s extends Cs{constructor(t){super(t),this.nodeType=3,this.data=t.data}}return s})(),js=(()=>{class s extends Cs{constructor(t){var e,i,r;super(t),this.attributes=[],this.nodeType=bi.ELEMENT_NODE,this.localName=di(t),this.namespaceURI=(e=t.namespaceURI)!==null&&e!==void 0?e:void 0,this.children=[];let o=tg(t);if(o){this.children=new csArray(csNodechildNodes.apply(t).length);let c=document.createTextNode(o),l=new yl(c);csArray.prototype.push.call(this.children,l)}Qs(t)&&st.setProperty(this,"SVG",!0),(Pi(t)||ao(t))&&(this.disabledSheet=(r=(i=t.sheet)===null||i===void 0?void 0:i.disabled)!==null&&r!==void 0?r:!1)}static isElement(t){return t.nodeType===bi.ELEMENT_NODE}static getAttribute(t,e){return me(t.attributes,i=>i.name===e)}static getAttributeValue(t,e){var i;return(i=this.getAttribute(t,e))===null||i===void 0?void 0:i.value}}return s})(),sg=(()=>{class s extends Cs{constructor(t){super(t),this.nodeType=4,this.data=t.data}}return s})(),ig=(()=>{class s extends Cs{constructor(t){super(t),this.nodeType=8,this.data=t.data}}return s})(),ng=(()=>{class s extends Cs{constructor(t){super(t),this.nodeType=10,this.name=t.name,this.publicId=t.publicId,this.systemId=t.systemId}}return s})(),rg=(()=>{class s extends Cs{constructor(t){super(t),this.nodeType=9,this.baseURI=s.getBaseURI(t),this.children=[]}static getBaseURI(t){let e=t.baseURI;if(e==null){let i=t.getElementsByTagName("base");e=i.length!==0?i[0].href:t.URL}return e}}return s})(),og=(()=>{class s extends Cs{constructor(t){super(t),this.nodeType=11,this.mode=t.mode,this.children=[]}}return s})(),ag=(()=>{class s{constructor(t,e,i){var r;typeof t=="string"?(this.name=t,this.value=e,this.namespaceURI=i!=null?i:""):(this.name=t.name,this.value=t.value,this.namespaceURI=(r=t.namespaceURI)!==null&&r!==void 0?r:"")}static create(t){let e=t.attributes,i=new csArray(e.length);for(let r=0;r<i.length;r++){let o=e[r];i[r]=new s(o.name,o.value,o.namespaceURI),o.name==="href"&&ao(t)&&(i[r].value=gl(t))}return i}}return s})(),Ha={workTime:40,async:!0,initialDOM:!0};var fi=csSymbol("InitialDom"),Ba=csSymbol.for("ignoreNextSerialization");function El(s){return s[Ba]?(delete s[Ba],!0):!1}function cg(s=Ha){return function(t,e){var i;(i=s.workTime)!==null&&i!==void 0||(s.workTime=Ha.workTime);let r=ls("serialize:callback",E=>e(E)),o=new Ci,c=(E,m)=>{E.hasChildNodes()&&o.push({node:E,serializedNode:m});let S=E instanceof Element&&csElementshadowRoot.apply(E);if(S){let O=m.shadowRoot=gi(S);s.async&&s.initialDOM&&st.setProperty(S,fi,!0),c(S,O)}},l,h=!0,f=8,d=ls("work",()=>{var E;if(h)l=gi(t),s.async&&s.initialDOM&&st.setProperty(t,fi,!0),c(t,l),h=!1;else if(o.isEmpty)return;let m=ug(100);for(;!o.isEmpty;){if(s.async&&m.elapsed()>=s.workTime){--f<=0&&csSetTimeout(d);return}let{node:S,serializedNode:O}=o.pop(),N=(E=O.children)!==null&&E!==void 0?E:[];if(Oi(S))continue;let v=0;for(let _=csNodefirstChild.apply(S);_;_=csNodenextSibling.apply(_)){if(El(_))continue;let M=gi(_);s.async&&s.initialDOM&&st.setProperty(_,fi,!0),N[v++]=M,c(_,M)}}s.async?csSetTimeout(()=>r(l)):e(l)});if(!s.async)s.workTime=1/0,d();else for(let E=0;E<f;E++)csSetTimeout(d,1)}}function lg(s){let n=gi(s),t=n;if(Oi(s))return n;let e=0;for(let r=csNodefirstChild.apply(s);r;r=csNodenextSibling.apply(r))El(r)||(t.children[e++]=Ur(r));let i=s.shadowRoot;return i&&(t.shadowRoot=Ur(i)),n}var Ur=Rs(lg,"serializeSync");function gi(s){let n,t;switch(s.nodeType){case 1:t=n=new js(s),n.attributes=dg(s);break;case 3:t=new yl(s);break;case 4:t=new sg(s);break;case 8:t=new ig(s);break;case 10:t=new ng(s);break;case 9:t=new rg(s);break;case 11:t=new og(s);break;default:throw new Error("Node type not supported: "+s.nodeType)}return t}function hg(){fi=csSymbol("InitialDom")}function ug(s){if(s<1)throw new Error("Precision should be >= 1");let n=0,t=C.elapsed();return{started:t,elapsed(){return++n%s===0&&(t=C.elapsed()),t-this.started}}}function dg(s){return Oi(s)?[]:ag.create(s)}var pg=/[\u4E00-\u9FFF]|[\u3000-\u303F]|[\u3040-\u309F]|[\u30A0-\u30FF]|[\uFF00-\uFFEF]/g,fg="\uFF41",gg=/[^\s]/g,mg="a";function nr(s){let n=csString.prototype.replace.call(s,pg,fg);return csString.prototype.replace.call(n,gg,mg)}var yg=(()=>{class s{constructor(t,e,i,r=null,o=!1){this.Qe=t,this.IS=e,this.M=i,this.zo=r,this.PS=o,this.OS=Xc(this.IS)}sanitize(t,e){return st.traverse(t,(i,r)=>{if(i.anonymized=this.Qe,i.nodeType===bi.TEXT_NODE){let o=i,{anonymizedValue:c,withAnonymization:l}=this.getAnonymizedValue(o.data,r?r==null?void 0:r.localName:e==null?void 0:e.targetLocalName,r?st.getProperties(r):e==null?void 0:e.targetProps);i.anonymized=l,o.data=c;return}if(js.isElement(i))return this.NS(i);if(i.nodeType===bi.CDATA_SECTION_NODE){let o=i;o.data=this.Qe?nr(o.data):this.M.checkAndAnonymizePII(o.data,this.zo);return}}),t}setAnonymization(t){this.Qe=t}getAnonymizedValue(t,e,i){if(e==="style")return{anonymizedValue:t,withAnonymization:!1};let r=(i==null?void 0:i[ge.ANONYMIZED_TEXT_STATUS_PROP])===ge.WHITELISTED_STATUS;return this.Qe&&!r?{anonymizedValue:nr(t),withAnonymization:!0}:{anonymizedValue:this.M.checkAndAnonymizePII(t,this.zo),withAnonymization:!1}}NS(t){if(st.getProperty(t,"SVG"))return;let e=me(t.attributes,r=>r.name==="type"),i=e==null?void 0:e.value;t.attributes=csArray.prototype.map.call(t.attributes,r=>(r.anonymized=this.Qe,r.value=this.getAnonymizedAttributeValue(t.localName,r.name,r.value,i),r))}getAnonymizedAttributeValue(t,e,i,r){if(this.MS(t,e,r))return i;if(ep(e))return sp(t,e,i)?this.M.anonymizePII(i):i;let o=this.PS&&e==="placeholder";return this.Qe&&(ip(t,e,r)||o)?nr(i):this.Qe?"":this.M.checkAndAnonymizePII(i,null)}MS(t,e,i){return tp(t,e,i)||this.OS.has(e)}}return s})(),Eg=(()=>{let s;return function(n){function t(){let i=navigator.userAgent+navigator.language+navigator.platform,r=csString.prototype.slice.call(e(i).toString(16),-4),o=new csDate().getTime(),c="xxxxxxxx-hhhh-axxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,l=>{let h=(o+Math.random()*16)%16|0;return o=Math.floor(o/16),(l==="x"?h:h&7|8).toString(16)});return csString.prototype.replace.call(c,"hhhh",r)}n.generate=t;function e(i){let r=0;for(let o=0;o<i.length;o+=1)r=csString.prototype.charCodeAt.call(i,o)+(r<<6)+(r<<16)-r;return Math.abs(r)}}(s||(s={})),s})();var Sl=(()=>{class s{emit(t,e,i,r=document){let c=`${i!==void 0?`${i}`:`${s.jS}`}${t}`,l=s.createEvent(c,{detail:e});l!==null&&r.dispatchEvent(l)}static createEvent(t,e={}){if(typeof CustomEvent=="function")return new CustomEvent(t,e);let i=this.HS();if(i===null)return null;let{bubbles:r=!1,cancelable:o=!1,detail:c}=e;return i.initCustomEvent(t,r,o,c),i}static HS(){try{return document.createEvent("CustomEvent")}catch{return null}}}return s.jS="cs.tracking.",s})();var vl=(()=>{class s{constructor(){this.YS=["application/json","application/graphql","application/xml","text/plain","text/csv","text/html","text/xml","text/javascript"]}setCollectionOptions(t){this.sl=t}isValidBodyType(t){let e=t["content-type"];if(!e)return!1;let i=csString.prototype.toLocaleLowerCase.call(e);return Si(this.YS,r=>An(i,r))}canCollect(t,e){return this.XS(t,e)&&this.KS(e)}XS(t,e){return t>=400||t>=200&&t<300&&this.sl.statusCodes.has(t)&&this.JS(e)}JS(t){return Si(this.sl.urls,e=>csString.prototype.indexOf.call(t,e)!==-1)}KS(t){return ro(this.sl.excludedDomains,e=>csString.prototype.indexOf.call(t,e)===-1)}}return s})(),Sg=(()=>{class s extends vl{constructor(){super(),this.U=!1,this.ln=null,this.QS=({result:t,args:e,callerName:i})=>{this.interceptFetch(t,e,i)}}onEvent(t){this.L=t}start(){this.U||this.ZS()&&(this.sv(),this.ln&&this.ln.activate(),this.U=!0)}stop(){this.U&&(this.ln&&this.ln.deactivate(),this.U=!1)}ZS(){return!!window.fetch&&typeof window.fetch=="function"}iv(t){if(t[0]&&typeof t[0].clone=="function"){let e=Ws(t);return e[0]=t[0].clone(),e}return t}sv(){this.ln||(this.ln=qt({target:window,methodName:"fetch",hook:this.QS,hookPrepareArgs:this.iv,options:{withCallerName:!0}}))}async interceptFetch(t,e,i){let r=e[0],o=e[1],c=new Request(r,o);if(!A(c.url))return;let l=C.now(),h;try{h=await t}catch(m){if(this.nv(m)||this.pp(m)||this.rv(m)||this.ov(m))return;throw m}let[f,d]=csString.prototype.split.call(c.url,"?"),E=Ee(f);if(h&&super.canCollect(h.status,E)){let m={library:i,method:c.method,url:E,queryParameters:d,requestTime:l,responseTime:C.now(),statusCode:h.status,requestBody:"",responseBody:"",requestHeaders:this.fp(c.headers),responseHeaders:this.fp(h.headers)};if(!h.bodyUsed&&super.isValidBodyType(m.responseHeaders))try{m.responseBody=await h.clone().text()}catch(S){if(this.pp(S))return}super.isValidBodyType(m.requestHeaders)&&(m.requestBody=await c.text()),this.L(m)}}nv(t){return t instanceof TypeError}pp(t){return t instanceof DOMException&&t.name==="AbortError"}ov(t){return t instanceof DOMException&&t.name==="TimeoutError"}rv(t){return t instanceof DOMException&&csArray.prototype.some.call(s.av,e=>e===t.name)}fp(t){let e={};return t.forEach((i,r)=>{i&&(e[csString.prototype.toLowerCase.call(r)]=csString.prototype.trim.call(i))}),e}}return s.av=["NoModificationAllowedError","InvalidStateError","OperationError"],j([P("FetchRequestTracker.interceptFetch")],s.prototype,"interceptFetch",null),s})(),vg=0,_g=(()=>{class s extends vl{constructor(){super(),this.$t=csSymbol("ApiCall"),this.U=!1,this.hn=null,this.un=null,this.Go=null,this.cv=({context:t,args:e,callerName:i})=>this.interceptOpen(t,e,i),this.lv=({context:t,args:e})=>this.interceptSetRequestHeader(t,e),this.hv=({context:t,args:e})=>this.interceptSend(t,e)}onEvent(t){this.L=t}start(){this.U||(this.il(),this.hn&&this.hn.activate(),this.un&&this.un.activate(),this.Go&&this.Go.activate(),this.U=!0)}stop(){this.U&&(this.hn&&this.hn.deactivate(),this.un&&this.un.deactivate(),this.U=!1)}il(){this.hn||(this.hn=qt({target:XMLHttpRequest.prototype,methodName:"open",hook:this.cv,options:{withCallerName:!0}})),this.un||(this.un=qt({target:XMLHttpRequest.prototype,methodName:"setRequestHeader",hook:this.lv})),this.Go||(this.Go=qt({target:XMLHttpRequest.prototype,methodName:"send",hook:this.hv}))}interceptOpen(t,e,i){if(!e[1]||!A(e[1]))return;let[r,o]=csString.prototype.split.call(e[1],"?");t[this.$t]={library:i,requestTime:C.now(),method:e[0],url:Ee(r),queryParameters:o,statusCode:vg,responseHeaders:{},requestHeaders:{},responseBody:"",requestBody:""},t.addEventListener("readystatechange",()=>this.readyStateChangeListener(t))}readyStateChangeListener(t){t[this.$t]&&t.readyState===XMLHttpRequest.DONE&&this.canCollect(t.status,t[this.$t].url)&&(t[this.$t].responseTime=C.now(),t[this.$t].statusCode=t.status,t[this.$t].responseHeaders=this.uv(t.getAllResponseHeaders()),super.isValidBodyType(t[this.$t].responseHeaders)&&(t.responseType===""||t.responseType==="text")&&(t[this.$t].responseBody=t.responseText),this.L(t[this.$t]))}interceptSetRequestHeader(t,e){if(!t[this.$t])return;let i=e[0],r=csString.prototype.valueOf.call(new csString(e[1]));typeof i!="string"||r.length===0||(i=csString.prototype.toLowerCase.call(csString.prototype.trim.call(i)),r=csString.prototype.trim.call(r),t[this.$t].requestHeaders[i]?t[this.$t].requestHeaders[i]+=`, ${r}`:t[this.$t].requestHeaders[i]=r)}interceptSend(t,e){t[this.$t]&&super.isValidBodyType(t[this.$t].requestHeaders)&&typeof e[0]=="string"&&(t[this.$t].requestBody=e[0])}uv(t){let e={};return csArray.prototype.forEach.call(csString.prototype.split.call(t,/[\r\n]+/),i=>{let[r,o]=csString.prototype.split.call(i,/:\s*/);o&&(e[csString.prototype.toLowerCase.call(r)]=csString.prototype.trim.call(o))}),e}}return j([P("XhrRequestTracker.interceptOpen")],s.prototype,"interceptOpen",null),j([P("XhrRequestTracker.readyStateChangeListener")],s.prototype,"readyStateChangeListener",null),j([P("XhrRequestTracker.interceptSetRequestHeader")],s.prototype,"interceptSetRequestHeader",null),j([P("XhrRequestTracker.interceptSend")],s.prototype,"interceptSend",null),s})(),wg=(()=>{class s{constructor(){}onLoad(t){this.Zi=t}onLoadCallbackExecute(){this.Zi()}start(){let t=this.onLoadCallbackExecute.bind(this);this.pv(t)}pv(t){document.readyState==="complete"||document.readyState!=="loading"&&!document.documentElement.doScroll?csSetTimeout(t):(document.addEventListener("DOMContentLoaded",e),window.addEventListener("load",e));function e(){document.removeEventListener("DOMContentLoaded",e),window.removeEventListener("load",e),t()}}}return j([P("onLoad")],s.prototype,"onLoadCallbackExecute",null),s})(),bg=(()=>{class s{constructor(t){this.qo=t.performance}getRequestParameters(){if(this.fv())return{};let t=this.gv();return{str:t.startRender,di:t.domInteractive,dc:t.domComplete,fl:t.fullyLoaded}}gv(){let t=this.qo.timing;return{startRender:`${t.domLoading-t.requestStart}`,domInteractive:`${t.domInteractive-t.requestStart}`,domComplete:`${t.domComplete-t.requestStart}`,fullyLoaded:`${t.loadEventEnd-t.requestStart}`}}fv(){return!(this.qo&&this.qo.timing&&this.qo.timing.loadEventEnd>0)}}return s})(),Ft=(()=>{class s{static build(t,e,i){return csArray.prototype.reduce.call(i,(r,o)=>o.enhanceAnalysisEvent(t,r),e)}}return s})(),z=(()=>{let s;return function(n){n[n.RESIZE=0]="RESIZE",n[n.SCROLL=1]="SCROLL",n[n.MOUSEMOVE=2]="MOUSEMOVE",n[n.MOUSEDOWN=3]="MOUSEDOWN",n[n.MOUSEUP=4]="MOUSEUP",n[n.CLICK=5]="CLICK",n[n.MOUSEOVER=6]="MOUSEOVER",n[n.MOUSEOUT=7]="MOUSEOUT",n[n.CHANGE=10]="CHANGE",n[n.FOCUSIN=11]="FOCUSIN",n[n.FOCUSOUT=12]="FOCUSOUT",n[n.TAP=14]="TAP",n[n.KEYDOWN=15]="KEYDOWN",n[n.KEYUP=16]="KEYUP",n[n.COMMAND=17]="COMMAND",n[n.SUBMIT_COMMAND=18]="SUBMIT_COMMAND",n[n.PERFORMANCE=19]="PERFORMANCE",n[n.DRAG=20]="DRAG",n[n.FLICK=21]="FLICK",n[n.KEYBOARD_NAVIGATION=22]="KEYBOARD_NAVIGATION",n[n.ZOOM=23]="ZOOM",n[n.VIEWPORT_SCALE=24]="VIEWPORT_SCALE",n[n.TEXT_HIGHLIGHT=25]="TEXT_HIGHLIGHT",n[n.DEAD_CLICK=30]="DEAD_CLICK",n[n.DEAD_ZOOM=31]="DEAD_ZOOM",n[n.PAGE_RELOAD=32]="PAGE_RELOAD",n[n.THRASHED_CURSOR=33]="THRASHED_CURSOR",n[n.BLANK_PAGE=34]="BLANK_PAGE",n[n.EXTERNAL_EVENT=35]="EXTERNAL_EVENT",n[n.SUBMIT=36]="SUBMIT",n[n.CUSTOM_EVENT=37]="CUSTOM_EVENT"}(s||(s={})),s})(),rr=(()=>{let s;return function(n){n.SUCCESS="success",n.FAILURE="failure",n.ATTEMPT="attempt"}(s||(s={})),s})(),ns=(()=>{let s;return function(n){n.APPCUES="appcues",n.CHAMELEON="chameleon",n.CONTENTSQUARE="contentsquare",n.SEGMENT="segment",n.WEB="web"}(s||(s={})),s})();function Tg(s){return s.tgtHM!==void 0}function _l(s){return s.tgt!==void 0}function Ag(s){return s.tgtLk!==void 0}function Rg(s){return s.x!==void 0&&s.y!==void 0}function Cg(s){return s===rr.SUCCESS||s===rr.FAILURE||s===rr.ATTEMPT}function Ig(s){return s===ns.APPCUES||s===ns.CHAMELEON||s===ns.CONTENTSQUARE||s===ns.SEGMENT||s===ns.WEB}var Pg=(()=>{class s{constructor(t,e,i){this.Zt=t,this.xt=e,this.Tt=i}processGesture(t,e){switch(t.type){case wt.TAP:this.mv(e);break;case wt.FLICK:this.yv(t,e);break;case wt.DRAG:this.Ev(t,e);break;default:break}}mv(t){let e={type:z.TAP,ts:0,x:0,y:0,tgt:""},i=Ft.build(t,e,this.Zt);i.tgt!==De.INVALID_ELEMENT&&this.L(i)}Ev(t,e){var i,r;let o={type:z.DRAG,ts:0,fd:t.direction,tgt:""};!((i=this.Tt)===null||i===void 0)&&i.collectGestureDistance&&(o.distance=t.distance),!((r=this.Tt)===null||r===void 0)&&r.collectGestureVelocity&&(o.velocity=t.velocity);let c=Ft.build(e,o,this.Zt);c.tgt!==De.INVALID_ELEMENT&&this.L(c)}yv(t,e){var i,r;let o={type:z.FLICK,ts:0,fd:t.direction,tgt:""};!((i=this.Tt)===null||i===void 0)&&i.collectGestureDistance&&(o.distance=t.distance),!((r=this.Tt)===null||r===void 0)&&r.collectGestureVelocity&&(o.velocity=t.velocity);let c=Ft.build(e,o,this.Zt);c.tgt!==De.INVALID_ELEMENT&&this.L(c)}onEvent(t){this.L=t}start(){this.xt.subscribe(s.gp,(t,e)=>this.processGesture(t,e))}stop(){this.xt.unsubscribe(s.gp)}}return s.gp="AnalysisGestureTracker",j([ht()],s.prototype,"processGesture",null),s})();function Un(s,n){typeof n=="number"&&(n={wait:n});let t=n.wait,e=n.mode||"leading",i,r=[],o=null,c=0,l,h=()=>{c=C.now(),o=null,l=s.apply(i,r),r=[],i=null},f=function(...d){if(i=this!==null&&this!==void 0?this:Z,r=[...d],e==="trailing")return o||(o=Z.csSetTimeout(h,t)),l;let E=C.now(),m=t-(E-c);return m<=0||m>t?(c=E,l=s.apply(i,r),o?(Z.csClearTimeout(o),o=null):r=[]):o||(o=Z.csSetTimeout(h,m)),l};return f.cancel=()=>{o&&(Z.csClearTimeout(o),c=0,o=null,r=[])},f.flushPending=()=>{o&&(Z.csClearTimeout(o),h())},f}var Di=s=>(n,t,e)=>{e.value=Un(e.value,s)},Fa="data-cs-scroll-container";function Og(s){try{if(ut(csEventtarget.apply(s)))return!0}catch{}return!1}var Hs=(()=>{let s;return function(n){function t(i){return!!(ut(i)&&Og(i)&&Le(csEventtarget.apply(i))&&csEventtarget.apply(i).getAttribute(Fa)!==null)}n.isEventOnScrollContainer=t;function e(){return window.csquerySelector[document.nodeType].call(document,`[${Fa}]`)}n.getScrollContainer=e}(s||(s={})),s})(),Bs=(()=>{let s;return function(n){n[n.COPY=0]="COPY",n[n.CUT=1]="CUT",n[n.PASTE=2]="PASTE"}(s||(s={})),s})(),q=(()=>{let s;return function(n){n[n.SPACE=0]="SPACE",n[n.ENTER=1]="ENTER",n[n.BACKSPACE=2]="BACKSPACE",n[n.DELETE=3]="DELETE",n[n.ARROWUP=4]="ARROWUP",n[n.ARROWDOWN=5]="ARROWDOWN",n[n.ARROWLEFT=6]="ARROWLEFT",n[n.ARROWRIGHT=7]="ARROWRIGHT",n[n.CAPSLOCK=8]="CAPSLOCK",n[n.SHIFT=9]="SHIFT",n[n.TAB=10]="TAB",n[n.ALPHANUMERICAL=11]="ALPHANUMERICAL",n[n.ESCAPE=12]="ESCAPE",n[n.END=13]="END",n[n.ALT=14]="ALT",n[n.CTRL=15]="CTRL",n[n.META=16]="META"}(s||(s={})),s})(),Ng=(()=>{class s{constructor(t,e,i,r=["submit"]){this.Zt=t,this.mt=e,this.Lt=i,this.Sv=r,this.mp="select, select *, input, textarea",this.vv="select, select *, input, textarea",this.yp="a, a *, button, button *, select, select *, input, textarea",this.fr="input, select, textarea",this._v="form",this.Wo=150,this.wv=400,this.Ep=!1,this.gr=qs((o,c)=>this.scrollListener(o,c),this.Wo),this.Sp=qs(o=>this.resizeListener(o),this.Wo),this.bv=Un(o=>this.mouseMoveListener(o),this.wv),this.Tv=[{boundElement:window,type:"resize",listener:()=>this.Sp()},{boundElement:document,type:"scroll",listener:o=>this.gr(o)},{boundElement:window,type:"mousemove",listener:o=>{this.bv(Pf(o))}},{boundElement:document,type:"mousedown",listener:o=>this.mouseDownListener(o)},{boundElement:document,type:"mouseup",listener:o=>this.mouseUpListener(o)},{boundElement:document,type:"click",listener:o=>this.clickListener(o)}],this.vp=[{type:"change",listener:this.Lt.on(this.vv,o=>this.changeListener(o))},{type:"submit",listener:this.Lt.on(this._v,o=>this.submitListener(o))}],this.Av=[{boundElement:document,type:"mouseover",listener:this.Lt.on(this.yp,o=>this.mouseOverListener(o))},{boundElement:document,type:"mouseout",listener:this.Lt.on(this.yp,o=>this.mouseOutListener(o))},{boundElement:document,type:"focusin",listener:this.Lt.on(this.mp,o=>this.focusInListener(o))},{boundElement:document,type:"focusout",listener:this.Lt.on(this.mp,o=>this.focusOutListener(o))},{boundElement:document,type:"keyup",listener:this.Lt.on(this.fr,o=>this.keyUpListener(o))},{boundElement:document,type:"keydown",listener:this.Lt.on(this.fr,o=>this.keyDownListener(o))},{boundElement:document,type:"copy",listener:this.Lt.on(this.fr,o=>this.copyListener(o))},{boundElement:document,type:"cut",listener:this.Lt.on(this.fr,o=>this.cutListener(o))},{boundElement:document,type:"paste",listener:this.Lt.on(this.fr,o=>this.pasteListener(o))},...csArray.prototype.map.call(this.vp,o=>({...o,boundElement:document}))],this.V={},this.nl=(o,c)=>{switch(c){case"initial":case"added":this.wi(o);break;case"removed":this.bi(o);break}},this.de=new Zs(this.nl),this.rl()}wi(t){if(_n(t)){let e=this._p();csArray.prototype.forEach.call(e,i=>gt(i))}else{let e=this.wp();csArray.prototype.forEach.call(e,i=>{gt({...i,boundElement:t})})}}bi(t){if(_n(t)){let e=this._p();csArray.prototype.forEach.call(e,i=>mt(i))}else{let e=this.wp();csArray.prototype.forEach.call(e,i=>{mt({...i,boundElement:t})})}}onEvent(t){this.L=t}start(){this.de.observe(),this.wi(document),this.resizeListener()}stop(){this.bi(document),this.de.disconnect()}flushPendingDebouncedListeners(){this.gr.flushPending(),this.Sp.flushPending()}bp(t){return csArray.prototype.some.call(this.Sv,e=>e===t)}wp(){return this.Lt.isMatchesSelectorSupported()?csArray.prototype.filter.call(this.vp,t=>!this.bp(t.type)):(H.warn("Element.matches is not implemented yet"),[])}_p(){let t=[];return csArray.prototype.push.call(t,...this.Tv),this.Lt.isMatchesSelectorSupported()?csArray.prototype.push.call(t,...this.Av):H.warn("Element.matches is not implemented yet"),csArray.prototype.filter.call(t,e=>!this.bp(e.type))}resizeListener(t){let e=Hs.getScrollContainer(),i=Le(e);i&&(this.Ep=!0);let r={type:z.RESIZE,ts:0,x:i?e.clientWidth:Et.windowWidth(),y:i?e.clientHeight:Et.windowHeight()};t!==void 0&&(r.d=t),this.L(r)}scrollListener(t,e){let i=Hs.isEventOnScrollContainer(e);!this.Ep&&i&&this.resizeListener();let r={type:z.SCROLL,ts:0,x:i?csEventtarget.apply(e).scrollLeft:Et.windowOffsetX(),y:i?csEventtarget.apply(e).scrollTop:Et.windowOffsetY(),d:t},o=Ft.build(e,r,this.Zt);this.L(o)}mouseMoveListener(t){let e={type:z.MOUSEMOVE,ts:0,x:t.pageX,y:t.pageY},i=Ft.build(t,e,this.Zt);this.L(i)}mouseDownListener(t){let e={type:z.MOUSEDOWN,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Ft.build(t,e,this.Zt);this.pe(i)}mouseUpListener(t){let e={type:z.MOUSEUP,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Ft.build(t,e,this.Zt);this.pe(i)}clickListener(t){let e={type:z.CLICK,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Ft.build(t,e,this.Zt);this.pe(i)}mouseOverListener(t){let e={type:z.MOUSEOVER,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Ft.build(t,e,this.Zt);this.pe(i)}mouseOutListener(t){let e={type:z.MOUSEOUT,ts:0,x:t.pageX,y:t.pageY,tgt:this.mt.getEventTargetPath(t)},i=Ft.build(t,e,this.Zt);this.pe(i)}focusInListener(t){let e={type:z.FOCUSIN,ts:0,tgt:this.mt.getEventTargetPath(t)},i=Ft.build(t,e,this.Zt);this.pe(i)}focusOutListener(t){let e={type:z.FOCUSOUT,ts:0,tgt:this.mt.getEventTargetPath(t)},i=Ft.build(t,e,this.Zt);this.pe(i)}changeListener(t){let e={type:z.CHANGE,ts:0,tgt:""},i=Ft.build(t,e,this.Zt);this.pe(i)}submitListener(t){let e={type:z.SUBMIT,ts:0,tgt:""},i=Ft.build(t,e,this.Zt);this.pe(i)}copyListener(t){let e={type:z.COMMAND,ts:0,tgt:this.mt.getEventTargetPath(t),key:Bs.COPY};this.pe(e)}cutListener(t){let e={type:z.COMMAND,ts:0,tgt:this.mt.getEventTargetPath(t),key:Bs.CUT};this.pe(e)}pasteListener(t){let e={type:z.COMMAND,ts:0,tgt:this.mt.getEventTargetPath(t),key:Bs.PASTE};this.pe(e)}keyUpListener(t){let e={type:z.KEYUP,ts:0,tgt:this.mt.getEventTargetPath(t),key:this.Tp(t)};this.pe(e)}keyDownListener(t){let e={type:z.KEYDOWN,ts:0,tgt:this.mt.getEventTargetPath(t),key:this.Tp(t)};this.pe(e)}Tp(t){let e=this.V[t.key];return e===void 0?q.ALPHANUMERICAL:e}pe(t){_l(t)&&t.tgt!==De.INVALID_ELEMENT&&this.L(t)}rl(){this.V[" "]=q.SPACE,this.V.Spacebar=q.SPACE,this.V.Enter=q.ENTER,this.V.Backspace=q.BACKSPACE,this.V.Delete=q.DELETE,this.V.ArrowUp=q.ARROWUP,this.V.ArrowDown=q.ARROWDOWN,this.V.ArrowLeft=q.ARROWLEFT,this.V.ArrowRight=q.ARROWRIGHT,this.V.Up=q.ARROWUP,this.V.Down=q.ARROWDOWN,this.V.Left=q.ARROWLEFT,this.V.Right=q.ARROWRIGHT,this.V.CapsLock=q.CAPSLOCK,this.V.Shift=q.SHIFT,this.V.Tab=q.TAB}}return j([P("Event handler type: resize")],s.prototype,"resizeListener",null),j([P("Event handler type: scroll")],s.prototype,"scrollListener",null),j([P("Event handler type: mouseMove"),ht()],s.prototype,"mouseMoveListener",null),j([P("Event handler type: mouseDown"),ht()],s.prototype,"mouseDownListener",null),j([P("Event handler type: mouseUp"),ht()],s.prototype,"mouseUpListener",null),j([P("Event handler type: click"),ht()],s.prototype,"clickListener",null),j([P("Event handler type: mouseOver"),ht()],s.prototype,"mouseOverListener",null),j([P("Event handler type: mouseOut"),ht()],s.prototype,"mouseOutListener",null),j([P("Event handler type: focusIn")],s.prototype,"focusInListener",null),j([P("Event handler type: focusOut")],s.prototype,"focusOutListener",null),j([P("Event handler type: change")],s.prototype,"changeListener",null),j([P("Event handler type: submit"),ht()],s.prototype,"submitListener",null),j([P("Event handler type: copy")],s.prototype,"copyListener",null),j([P("Event handler type: cut")],s.prototype,"cutListener",null),j([P("Event handler type: paste")],s.prototype,"pasteListener",null),j([P("Event handler type: keyup")],s.prototype,"keyUpListener",null),j([P("Event handler type: keydown")],s.prototype,"keyDownListener",null),s})(),Mg=(()=>{class s{constructor(){this.Ap=100,this.mr=0,this.yr=Et.documentHeight(),this.Rp={boundElement:document,type:"scroll",listener:t=>this.maxScrollRateListener(t)},this.mr=this.ol(Hs.getScrollContainer()).maxScrollRate}onEvent(t){this.L=t}start(){gt(this.Rp)}stop(){mt(this.Rp)}reset(){let t=Hs.getScrollContainer(),{maxScrollRate:e,maxDocumentHeight:i}=this.ol(t);this.yr=i,this.mr=e,this.L()}ol(t){let e=0,i=0;if(t===null)i=Et.documentHeight(),e=this.Rv(i);else{let r=this.Cv(t);i=this.Cp(t,r),e=this.Iv(t,r)}return{maxScrollRate:e,maxDocumentHeight:i}}maxScrollRateListener(t){let e=null;Hs.isEventOnScrollContainer(t)&&(e=csEventtarget.apply(t));let{maxScrollRate:i,maxDocumentHeight:r}=this.ol(e);(i>this.mr||r>this.yr)&&(this.mr=i,r>this.yr&&(this.yr=r),this.L())}Rv(t){let e=Math.round(this.Pv()/t*100);return Math.min(e,this.Ap)}Pv(){let t=Et.windowHeight();return Et.windowOffsetY()+t}Iv(t,e){let i=t.scrollTop+t.clientHeight+t.getBoundingClientRect().top+e,r=this.Cp(t,e),o=Math.round(i/r*100);return Math.min(o,this.Ap)}Cv(t){let e=window.getComputedStyle(t).paddingTop||"0px";return parseInt(e,10)}Cp(t,e){return t.scrollHeight+t.getBoundingClientRect().top+e}getRequestParameters(){return{sr:`${this.mr}`,mdh:`${this.yr}`}}}return j([P("MaxScrollRate handler")],s.prototype,"maxScrollRateListener",null),s})(),ee=(()=>{let s;return function(n){n.Visible="visible",n.Hidden="hidden",n.Blur="blur",n.PagehideVisible="pagehideVisible",n.PagehideHidden="pagehideHidden",n.ExitPageByNavigate="exitPageByNavigate"}(s||(s={})),s})(),wl=(()=>{class s{constructor(){this.U=!1,this.Ws=t=>{try{switch(t.type){case"visibilitychange":return document.visibilityState==="hidden"?this.te(ee.Hidden):this.te(ee.Visible);case"pagehide":return document.visibilityState==="hidden"?this.te(ee.PagehideHidden):this.te(ee.PagehideVisible);case"blur":return this.te(ee.Blur);case"navigate":return this.Ov(t)?this.te(ee.ExitPageByNavigate):void 0;default:return}}catch{}}}start(){this.U||(this.U=!0,this.al(),this.Nv(),this.Mv(),ha()&&this.kv())}stop(){this.U&&(this.U=!1,this.cl(),this.Dv(),this.xv(),ha()&&this.Lv())}onEvent(t){this.te=t}kv(){window.navigation.addEventListener("navigate",this.Ws)}Lv(){window.navigation.removeEventListener("navigate",this.Ws)}al(){document.addEventListener("visibilitychange",this.Ws)}cl(){document.removeEventListener("visibilitychange",this.Ws)}Nv(){window.addEventListener("pagehide",this.Ws)}Dv(){window.removeEventListener("pagehide",this.Ws)}Mv(){window.addEventListener("blur",this.Ws)}xv(){window.removeEventListener("blur",this.Ws)}Ov(t){return t instanceof NavigateEvent?!t.hashChange&&!t.downloadRequest&&!t.formData:!1}}return s})();var kg=1024,Dg=512,or=1024,ar="||",bl=(()=>{let s;return function(n){function t(c,l){return A(c)&&csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(c),ns.CHAMELEON)!==-1?ns.CHAMELEON:l}n.handleCustomEventCommandMisuse=t;function e(c,l,h){let f=i(h);return{type:z.CUSTOM_EVENT,ts:0,customEventName:K.truncate(c,kg,K.ELLIPSIS),sourceLibrary:Ig(l)?l:ns.WEB,...Ar(f)?{}:{properties:f}}}n.buildCustomEvent=e;function i(c){let l={};for(let h in c){if(h.length>Dg)continue;let f=c[h];if(ft(f)||mn(f))l[h]=csString(f);else if(o(f))l[h]=K.truncate(f,or,K.ELLIPSIS);else if(Qu(f)){let d=r(f);d!==""&&(l[h]=d)}}return l}function r(c){let l="";for(let h=0;h<c.length;h++){let f=c[h];if(!ft(f)&&!mn(f)&&!o(f))continue;let d=csString(f);if(l==="")l=K.truncate(d,or,K.ELLIPSIS);else if(l.length+ar.length+d.length<=or)l+=ar+d;else break}return l}function o(c){return A(c)&&!On(c)&&!csString.prototype.includes.call(c,ar)}}(s||(s={})),s})(),xg=(()=>{class s extends Tt{constructor(t,e,i,r,o,c,l,h,f,d,E,m,S,O,N,v,_,M,k,T,B){super(),this.f=t,this.Ys=e,this.xt=i,this.dn=r,this.ll=o,this.Ge=c,this.Oe=l,this.ul=h,this.F=f,this.Qt=d,this.Z=E,this.dl=m,this.qe=S,this.W=O,this.Yo=N,this.vs=v,this._s=_,this.pl=M,this.Ti=k,this.Ai=T,this.Ri=B,this.qs=new Sl,this.Xo=!1,this.Ci=[]}init(){var t,e,i,r,o,c,l;this.Ys.onEvent(h=>this.Nt(h)),this.xt.onEvent(h=>this.Nt(h)),this.dn.onEvent(()=>{let h=this.dn.getRequestParameters();this.W.setQueryParams(h),this.Oe.setQueryParams(h)}),this.dl.onEvent(h=>this.ee(h)),this.gl(),(t=this.Yo)===null||t===void 0||t.onEvent(h=>this.Nt(h)),(e=this.Ti)===null||e===void 0||e.onEvent(h=>this.Nt(h)),(i=this.vs)===null||i===void 0||i.onEvent(h=>this.Nt(h)),(r=this._s)===null||r===void 0||r.onEvent(h=>this.Nt(h)),this.Uv(),(o=this.pl)===null||o===void 0||o.onEvent(h=>this.ee(h)),(c=this.Ai)===null||c===void 0||c.onEvent(h=>this.ee(h)),(l=this.Ri)===null||l===void 0||l.onEvent(h=>this.ee(h))}Uv(){this.Oe.onBeaconSuccess(()=>{this.Ge.clearEvents()}),this.Oe.onBeaconFailure(t=>{this.jv(t)})}initStates(){let t=this.ul.getRequestParameters(),e=this.ll.getRequestParameters(),i=this.dn.getRequestParameters();this.W.setQueryParams(t),this.W.setQueryParams(e),this.W.setQueryParams(i),this.Oe.setQueryParams(t),this.Oe.setQueryParams(e),this.Oe.setQueryParams(i),this.ml()}clearStates(t){var e,i;this.Ys.flushPendingDebouncedListeners(),(e=this.vs)===null||e===void 0||e.flushPendingKeyboardNavigationEvent(),(i=this._s)===null||i===void 0||i.flushPendingTextHighlightEvent(),t?(this.yl(),this.sendLastMessageBeacon()):this.sendEvents(),this.dn.reset(),this.W.removeQueryParams()}onStart(t){var e,i,r,o,c,l,h;t||(e=this.pl)===null||e===void 0||e.start(),this.qe.start(),this.Ys.start(),this.dn.start(),this.xt.start(),(i=this.Yo)===null||i===void 0||i.start(),(r=this._s)===null||r===void 0||r.start(),t||this.dl.start(),(o=this.vs)===null||o===void 0||o.start(),(c=this.Ti)===null||c===void 0||c.start(),(l=this.Ai)===null||l===void 0||l.start(),(h=this.Ri)===null||h===void 0||h.start(),csArray.prototype.forEach.call(this.Ci,f=>{this.ee(f)}),this.Ci=[]}collectInitialEvents(){var t;(t=this.Yo)===null||t===void 0||t.collectInitialEvents()}onIframeAnalysisBrowserEvent(t){this.ee(t)}onIframeAnalysisUserEvent(t){this.Nt(t)}onExternalEvent(t){this.Q(t)}ee(t){this.F.isCurrentPageviewValid()&&this.Q(t)}Nt(t){this.F.refreshSession(),this.F.isSessionValid()&&this.Q(t)}Q(t){this.Ge.addEvent(this.Hv(t)),this.Ge.isFull()&&this.sendEvents(),this.f.emitDebugEvents&&this.qs.emit("analysisEvent",{...t,typeName:z[t.type]})}Hv(t){return t.ts=this.Ii(),t}yl(){this.Oe.setQueryParams({hlm:"true"}),this.Xo=!0}sendLastMessageBeacon(){this.Oe.removeQueryParams(["i"]),this.Oe.setQueryParams(this.ul.getRequestParameters()),this.Oe.setQueryParams(this.ll.getRequestParameters()),this.Oe.send(this.Ge.stringifyEvents()),this.Oe.removeQueryParams(["hlm"]),this.Xo=!1}sendEvents(){this.Ge.isEmpty()||(this.Oe.removeQueryParams(["i"]),this.W.setQueryParams(this.ul.getRequestParameters()),this.W.setQueryParams(this.ll.getRequestParameters()),this.W.send(this.Ge.getEvents()),this.Ge.clearEvents())}onStop(){var t,e,i,r,o,c,l;this.qe.stop(),this.Ys.stop(),this.dn.stop(),this.xt.stop(),this.dl.stop(),(t=this.Yo)===null||t===void 0||t.stop(),(e=this.vs)===null||e===void 0||e.stop(),(i=this._s)===null||i===void 0||i.stop(),(r=this.Ti)===null||r===void 0||r.stop(),this.Ge.empty(),(o=this.pl)===null||o===void 0||o.stop(),(c=this.Ai)===null||c===void 0||c.stop(),(l=this.Ri)===null||l===void 0||l.stop()}ml(){this.es=C.now()}Ii(){return C.now()-this.es}gl(){this.qe.onEvent(t=>{var e,i;t!==ee.Visible&&((e=this.vs)===null||e===void 0||e.flushPendingKeyboardNavigationEvent(),(i=this._s)===null||i===void 0||i.flushPendingTextHighlightEvent(),t===ee.PagehideVisible?this.yl():t===ee.PagehideHidden?(this.yl(),this.sendLastMessageBeacon()):(!this.Ge.isEmpty()||this.Xo)&&this.sendLastMessageBeacon())})}jv(t){try{(!this.Ge.isEmpty()||this.Xo)&&this.Qt.save({requestParameters:t,events:this.Ge.getEvents()})}catch{}}pushSubmitCommandEvent(t,e){if(!Cg(t)||!Le(e)){H.error(`Command misuse: ${wo}`);return}let i={status:t,type:z.SUBMIT_COMMAND,ts:0,tgt:this.Z.getElementPath(e)};i.tgt!==De.INVALID_ELEMENT&&this.ee(i)}pushCustomEvent(t,e,i){if(!(A(t)&&!On(t))||i!==void 0&&!Y(i)){H.error(`Command misuse: ${$r}`);return}let r=bl.buildCustomEvent(t,e,i);this.isStarted?this.ee(r):csArray.prototype.push.call(this.Ci,r)}}return s})(),Ti=(()=>{class s{constructor(...t){this.Ip=t}addProvider(t){csArray.prototype.push.call(this.Ip,t)}getRequestParameters(){return csArray.prototype.reduce.call(this.Ip,(t,e)=>({...e.getRequestParameters(),...t}),{})}}return s})(),Lg=(()=>{class s{constructor(t,e){this.Qt=t,this.W=e,this.Pp=()=>{document.visibilityState==="visible"&&this.Op()}}start(){this.Op(),this.al()}stop(){this.cl()}getRecoveryStorage(){return this.Qt}Op(){let t=this.Qt.recover();if(t!==null){let{requestParameters:e,events:i}=t;this.W.send(i,e)}}al(){document.addEventListener("visibilitychange",this.Pp)}cl(){document.removeEventListener("visibilitychange",this.Pp)}}return s})(),Tl=(()=>{class s{constructor(t){this.Np=[],this.Mp=[],this.Kt={},this.Jt=t}setQueryParams(t){csArray.prototype.forEach.call(Object.keys(t),e=>{this.Kt[e]=t[e]})}removeQueryParams(t){t?csArray.prototype.forEach.call(t,e=>{delete this.Kt[e]}):this.Kt={}}onBeaconSuccess(t){csArray.prototype.push.call(this.Np,t)}onBeaconFailure(t){csArray.prototype.push.call(this.Mp,t)}send(t){let e=wi.toQuery({...this.Kt,ct:xn.UNCOMPRESSED}),i=this.Bv(e,t);return i?csArray.prototype.forEach.call(this.Np,r=>r()):csArray.prototype.forEach.call(this.Mp,r=>r(this.Kt)),i}Bv(t,e){try{if(typeof csNavigatorsendBeacon!="function")return!1;let i=csNavigatorsendBeacon(`${this.Jt}?${t}`,e||"");if(i)return i}catch{}return typeof navigator.sendBeacon!="function"?!1:navigator.sendBeacon(`${this.Jt}?${t}`,e||"")}}return s})(),Ug=(()=>{class s{constructor(t){this.En=t}save(t){localStorage.setItem(this.En,csJSON.stringify(t))}clear(){localStorage.removeItem(this.En)}recover(){let t=localStorage.getItem(this.En);if(t===null)return null;let e=null;try{e=csJSON.parse(t)}catch{H.error(`Invalid item in localStorage.
         (key:${this.En}; value:${t})`)}finally{this.clear()}return e}}return s})(),Vg=(()=>{class s{constructor(t){this.Er=t,this.Sr=e=>this.processMetric(e),this.U=!1}onEvent(t){this.L=t}start(){this.U||(this.U=!0,this.Er.onFCP(this.Sr),this.Er.onCLS(this.Sr),this.Er.onLCP(this.Sr),this.Er.onTTFB(this.Sr),this.Er.onINP(this.Sr))}stop(){this.U=!1}processMetric(t){if(!this.U)return;let e={type:z.PERFORMANCE,name:t.name,val:t.value,ts:0};this.L(e)}}return j([P("Performance metric handler")],s.prototype,"processMetric",null),s})(),Al=-1,ti=s=>{addEventListener("pageshow",n=>{n.persisted&&(Al=n.timeStamp,s(n))},!0)},we=(s,n,t,e)=>{let i,r;return o=>{n.value>=0&&(o||e)&&(r=n.value-(i!=null?i:0),(r||i===void 0)&&(i=n.value,n.delta=r,n.rating=((c,l)=>c>l[1]?"poor":c>l[0]?"needs-improvement":"good")(n.value,t),s(n)))}},Eo=s=>{requestAnimationFrame(()=>requestAnimationFrame(()=>s()))},So=()=>{let s=performance.getEntriesByType("navigation")[0];if(s&&s.responseStart>0&&s.responseStart<performance.now())return s},xi=()=>{var n;let s=So();return(n=s==null?void 0:s.activationStart)!=null?n:0},be=(s,n=-1)=>{let t=So(),e="navigate";return Al>=0?e="back-forward-cache":t&&(document.prerendering||xi()>0?e="prerender":document.wasDiscarded?e="restore":t.type&&(e=t.type.replace(/_/g,"-"))),{name:s,value:n,rating:"good",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:e}},cr=new WeakMap;function vo(s,n){return cr.get(s)||cr.set(s,new n),cr.get(s)}var Vr=class{constructor(){Re(this,"t");Re(this,"i",0);Re(this,"o",[])}h(n){var i;if(n.hadRecentInput)return;let t=this.o[0],e=this.o.at(-1);this.i&&t&&e&&n.startTime-e.startTime<1e3&&n.startTime-t.startTime<5e3?(this.i+=n.value,this.o.push(n)):(this.i=n.value,this.o=[n]),(i=this.t)==null||i.call(this,n)}},Li=(s,n,t={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(s)){let e=new PerformanceObserver(i=>{Promise.resolve().then(()=>{n(i.getEntries())})});return e.observe({type:s,buffered:!0,...t}),e}}catch{}},_o=s=>{let n=!1;return()=>{n||(s(),n=!0)}},Vs=-1,$a=()=>document.visibilityState!=="hidden"||document.prerendering?1/0:0,In=s=>{document.visibilityState==="hidden"&&Vs>-1&&(Vs=s.type==="visibilitychange"?s.timeStamp:0,jg())},za=()=>{addEventListener("visibilitychange",In,!0),addEventListener("prerenderingchange",In,!0)},jg=()=>{removeEventListener("visibilitychange",In,!0),removeEventListener("prerenderingchange",In,!0)},Rl=()=>{var s;if(Vs<0){let n=xi(),t=document.prerendering||(s=globalThis.performance.getEntriesByType("visibility-state").filter(e=>e.name==="hidden"&&e.startTime>n)[0])==null?void 0:s.startTime;Vs=t!=null?t:$a(),za(),ti(()=>{setTimeout(()=>{Vs=$a(),za()})})}return{get firstHiddenTime(){return Vs}}},Vn=s=>{document.prerendering?addEventListener("prerenderingchange",()=>s(),!0):s()},Ga=[1800,3e3],Cl=(s,n={})=>{Vn(()=>{let t=Rl(),e,i=be("FCP"),r=Li("paint",o=>{for(let c of o)c.name==="first-contentful-paint"&&(r.disconnect(),c.startTime<t.firstHiddenTime&&(i.value=Math.max(c.startTime-xi(),0),i.entries.push(c),e(!0)))});r&&(e=we(s,i,Ga,n.reportAllChanges),ti(o=>{i=be("FCP"),e=we(s,i,Ga,n.reportAllChanges),Eo(()=>{i.value=performance.now()-o.timeStamp,e(!0)})}))})},qa=[.1,.25],Hg=(s,n={})=>{Cl(_o(()=>{let t,e=be("CLS",0),i=vo(n,Vr),r=c=>{for(let l of c)i.h(l);i.i>e.value&&(e.value=i.i,e.entries=i.o,t())},o=Li("layout-shift",r);o&&(t=we(s,e,qa,n.reportAllChanges),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&(r(o.takeRecords()),t(!0))}),ti(()=>{i.i=0,e=be("CLS",0),t=we(s,e,qa,n.reportAllChanges),Eo(()=>t())}),setTimeout(t))}))},Il=0,lr=1/0,nn=0,Bg=s=>{for(let n of s)n.interactionId&&(lr=Math.min(lr,n.interactionId),nn=Math.max(nn,n.interactionId),Il=nn?(nn-lr)/7+1:0)},jr,Wa=()=>{var s;return jr?Il:(s=performance.interactionCount)!=null?s:0},Fg=()=>{"interactionCount"in performance||jr||(jr=Li("event",Bg,{type:"event",buffered:!0,durationThreshold:0}))},Ya=0,Hr=class{constructor(){Re(this,"u",[]);Re(this,"l",new Map);Re(this,"m");Re(this,"p")}v(){Ya=Wa(),this.u.length=0,this.l.clear()}P(){let n=Math.min(this.u.length-1,Math.floor((Wa()-Ya)/50));return this.u[n]}h(n){var i,r;if((i=this.m)==null||i.call(this,n),!n.interactionId&&n.entryType!=="first-input")return;let t=this.u.at(-1),e=this.l.get(n.interactionId);if(e||this.u.length<10||n.duration>t.T){if(e?n.duration>e.T?(e.entries=[n],e.T=n.duration):n.duration===e.T&&n.startTime===e.entries[0].startTime&&e.entries.push(n):(e={id:n.interactionId,entries:[n],T:n.duration},this.l.set(e.id,e),this.u.push(e)),this.u.sort((o,c)=>c.T-o.T),this.u.length>10){let o=this.u.splice(10);for(let c of o)this.l.delete(c.id)}(r=this.p)==null||r.call(this,e)}}},Pl=s=>{let n=globalThis.requestIdleCallback||setTimeout;document.visibilityState==="hidden"?s():(n(s=_o(s)),document.addEventListener("visibilitychange",s,{once:!0}))},Xa=[200,500],$g=(s,n={})=>{globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype&&Vn(()=>{var c;Fg();let t,e=be("INP"),i=vo(n,Hr),r=l=>{Pl(()=>{for(let f of l)i.h(f);let h=i.P();h&&h.T!==e.value&&(e.value=h.T,e.entries=h.entries,t())})},o=Li("event",r,{durationThreshold:(c=n.durationThreshold)!=null?c:40});t=we(s,e,Xa,n.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&(r(o.takeRecords()),t(!0))}),ti(()=>{i.v(),e=be("INP"),t=we(s,e,Xa,n.reportAllChanges)}))})},Br=class{constructor(){Re(this,"m")}h(n){var t;(t=this.m)==null||t.call(this,n)}},Ka=[2500,4e3],zg=(s,n={})=>{Vn(()=>{let t=Rl(),e,i=be("LCP"),r=vo(n,Br),o=l=>{n.reportAllChanges||(l=l.slice(-1));for(let h of l)r.h(h),h.startTime<t.firstHiddenTime&&(i.value=Math.max(h.startTime-xi(),0),i.entries=[h],e())},c=Li("largest-contentful-paint",o);if(c){e=we(s,i,Ka,n.reportAllChanges);let l=_o(()=>{o(c.takeRecords()),c.disconnect(),e(!0)});for(let h of["keydown","click","visibilitychange"])addEventListener(h,()=>Pl(l),{capture:!0,once:!0});ti(h=>{i=be("LCP"),e=we(s,i,Ka,n.reportAllChanges),Eo(()=>{i.value=performance.now()-h.timeStamp,e(!0)})})}})},Ja=[800,1800],Fr=s=>{document.prerendering?Vn(()=>Fr(s)):document.readyState!=="complete"?addEventListener("load",()=>Fr(s),!0):setTimeout(s)},Gg=(s,n={})=>{let t=be("TTFB"),e=we(s,t,Ja,n.reportAllChanges);Fr(()=>{let i=So();i&&(t.value=Math.max(i.responseStart-xi(),0),t.entries=[i],e(!0),ti(()=>{t=be("TTFB",0),e=we(s,t,Ja,n.reportAllChanges),e(!0)}))})},qg=(()=>{class s{onFCP(t){try{Cl(t,{reportAllChanges:!0})}catch{G.counters.webVitalsErrors.count("FCP")}}onCLS(t){try{Hg(t,{reportAllChanges:!0})}catch{G.counters.webVitalsErrors.count("CLS")}}onLCP(t){try{zg(t,{reportAllChanges:!0})}catch{G.counters.webVitalsErrors.count("LCP")}}onTTFB(t){try{Gg(t,{reportAllChanges:!0})}catch{G.counters.webVitalsErrors.count("TTFB")}}onINP(t){try{$g(t,{reportAllChanges:!0})}catch{G.counters.webVitalsErrors.count("INP")}}}return s})();var Ui=(()=>{class s{isEventTypeSupported(t){return csArray.prototype.indexOf.call(this.supportedEventTypes,t)!==-1}enhanceAnalysisEvent(t,e){return this.isEventTypeSupported(e.type)?this.baseEnhanceAnalysisEvent(t,e):e}}return s})(),Wg=(()=>{class s extends Ui{constructor(){super(...arguments),this.supportedEventTypes=[z.CHANGE],this.u_=["text","email","number","search","tel","url","password"]}baseEnhanceAnalysisEvent(t,e){let i=Rt(t);return Mn(i)&&csArray.prototype.indexOf.call(this.u_,i.type)>=0&&(e.isBlank=i.value===""),e}}return s})();var Ol=(()=>{class s extends Ui{constructor(t){super(),this.mt=t,this.supportedEventTypes=[z.MOUSEDOWN,z.MOUSEUP,z.CLICK,z.MOUSEOVER,z.TAP,z.DRAG,z.FLICK,z.SUBMIT,z.CHANGE]}baseEnhanceAnalysisEvent(t,e){return e.tgt||(e.tgt=this.mt.getEventTargetPath(t)),e}}return s})(),Qa=65535,Yg=(()=>{let s;return function(n){function t(e){let i=Rt(e);if(!i||!dt(i)||!Se(i.getBoundingClientRect)||!ut(e.pageX)||!ut(e.pageY))return{xRel:-1,yRel:-1,valid:!1};let r=i.getBoundingClientRect(),o=e.pageX-r.left-Et.windowOffsetX(),c=e.pageY-r.top-Et.windowOffsetY();i!==document.documentElement&&(o+=i.scrollLeft,c+=i.scrollTop);let l=Math.max(i.scrollWidth,r.width),h=Math.max(i.scrollHeight,r.height),f=Math.round(o/l*Qa),d=Math.round(c/h*Qa);return{xRel:f,yRel:d,valid:!0}}n.getRelativePosition=t}(s||(s={})),s})(),Xg=Math.pow(2,31);function Kg(s,n=0){let l=n>>>0,h=s.length;for(let m=0;m<h-3;m+=4){let S=(csString.prototype.charCodeAt.call(s,m)&255|(csString.prototype.charCodeAt.call(s,m+1)&255)<<8|(csString.prototype.charCodeAt.call(s,m+2)&255)<<16|(csString.prototype.charCodeAt.call(s,m+3)&255)<<24)>>>0;S=Math.imul(S,3432918353),S=S<<15|S>>>17,S=Math.imul(S,461845907),l^=S,l=l<<13|l>>>19,l=Math.imul(l,5)+3864292196}let f=0,d=h&3,E=h-d;switch(d){case 3:f^=(csString.prototype.charCodeAt.call(s,E+2)&255)<<16;case 2:f^=(csString.prototype.charCodeAt.call(s,E+1)&255)<<8;case 1:f^=csString.prototype.charCodeAt.call(s,E)&255,f=Math.imul(f,3432918353),f=f<<15|f>>>17,f=Math.imul(f,461845907),l^=f}return l^=h,l^=l>>>16,l=Math.imul(l,2246822507),l^=l>>>13,l=Math.imul(l,3266489909),l^=l>>>16,l>>>0}function Nl(s){return Kg(s)+Xg>>>0}var Jg=(()=>{class s extends Ui{constructor(t,e){super(),this.gs=t,this.mt=e,this.supportedEventTypes=[z.MOUSEMOVE,z.CLICK],this.Rl=""}baseEnhanceAnalysisEvent(t,e){let{valid:i,xRel:r,yRel:o}=Yg.getRelativePosition(t);if(i){let c=this.mt.getEventTargetPath(t);c!==De.INVALID_ELEMENT&&(e.xRel=r,e.yRel=o,e.type===z.MOUSEMOVE&&(c!==this.Rl||this.gs.iframesTracking?(this.Rl=c,e.tgtHM=c,this.gs.isChild||(e.tgtHMH=Nl(e.tgtHM))):e.tgtHM=""))}else e.type===z.MOUSEMOVE&&(this.Rl="");return e}}return s})(),ts=(()=>{let s;return function(n){n[n.ANONYMIZED=0]="ANONYMIZED",n[n.CAPTURED=1]="CAPTURED",n[n.MASKED=2]="MASKED",n[n.ENCRYPTED=3]="ENCRYPTED"}(s||(s={})),s})(),Za=100,Ml=(()=>{class s extends Ui{constructor(t,e,i){super(),this.f=t,this.he=e,this.M=i,this.supportedEventTypes=[z.TAP,z.CLICK,z.SUBMIT]}d_(t){let e="",i=document.createTreeWalker(t,NodeFilter.SHOW_TEXT),r=i.nextNode();for(;r;){if(e+=r.textContent,co(r.parentElement)||kn(r.parentElement)||this.he.getElementSensitiveStatus(r.parentElement)!==ts.CAPTURED)return!0;if(csString.prototype.trim.call(e).length>=Za)break;r=i.nextNode()}return!1}p_(t){let e=Xs(t,"button,a");return e||(this.f.collectTargetText===Nr.ButtonAndLinkOnly?null:t)}baseEnhanceAnalysisEvent(t,e){if(Le(csEventtarget.apply(t))){let i=this.p_(csEventtarget.apply(t));if(i&&A(i.textContent)&&!this.d_(i)&&!this.M.hasPII(i.textContent,this.f.anonymizeDigits)){let r=K.truncate(csString.prototype.trim.call(i.textContent),Za);r.length>0&&(e.text=r)}}return e}}return s})(),kl=(()=>{class s extends Ui{constructor(t,e){super(),this.mt=t,this.he=e,this.supportedEventTypes=[z.CLICK,z.SUBMIT,z.CHANGE,z.TAP]}baseEnhanceAnalysisEvent(t,e){let i=this.he.getSensitiveStatus().useAnonymization,{path:r,hierarchy:o}=this.mt.getEventTargetPathAndHierarchy(t,i);return e.tgt=r,e.hrchy=o,e}}return s})();function Qg(s,n,t){let e=[];return csArray.prototype.push.call(e,new Jg(s,n)),s.isCollectTargetTextEnabled()&&csArray.prototype.push.call(e,new Ml(s,t,new Mi)),s.collectHierarchy&&csArray.prototype.push.call(e,new kl(n,t)),csArray.prototype.push.call(e,new Wg,new Ol(n)),e}function Zg(s,n,t){let e=[];return s.isCollectTargetTextEnabled()&&csArray.prototype.push.call(e,new Ml(s,t,new Mi)),s.collectHierarchy&&csArray.prototype.push.call(e,new kl(n,t)),csArray.prototype.push.call(e,new Ol(n)),e}var tm=50,em=(()=>{class s{constructor(t=[]){this.Ut=t}stringifyEvents(){return csJSON.stringify(this.Ut)}addEvent(t){csArray.prototype.push.call(this.Ut,t)}eventsCount(){return this.Ut.length}clearEvents(){this.Ut=[]}empty(){this.clearEvents()}isFull(){return this.eventsCount()>=tm}isEmpty(){return this.Ut.length===0}getEvents(){return this.Ut}}return s})(),sm="csAnalysisEventsPersisted",tc="v2/events",wo=["submit"],$r=["trackEvent"],im="track",nm=(()=>{class s{constructor(t,e,i,r,o,c,l,h,f,d,E,m,S){this.f=t,this.Et=e,this.O=i,this.Z=r,this.Lt=o,this.E=c,this.F=l,this.xt=h,this.pt=f,this.Vt=d,this.K=E,this.he=m,this.Ue=S}init(){let t=new em,e=this.Vt.create(`${this.f.getTrackerUri()}/${tc}`,!0,"base64");this.Zo=this.f_(e),this.fe=this.g_(t,this.Zo.getRecoveryStorage(),e),this.fe.init(),this.K.addListener(this.fe),this.pt.addListener(this.fe),this.E.register(wo,(i,r)=>{this.fe.pushSubmitCommandEvent(i,r)}),this.E.register($r,i=>{if(!Y(i)){H.error(`Command misuse: ${$r}`);return}this.fe.pushCustomEvent(i.name,i.source,i.properties)}),this.Ue&&this.Ue.register(im,(i,r,o)=>{let c=bl.handleCustomEventCommandMisuse(i,o);this.fe.pushCustomEvent(i,c,r)})}onStartTracking(t){this.Zo.start(),this.fe.start(t)}onAfterNaturalPageView(){this.fe.initStates()}onAfterArtificialPageView(){this.fe.initStates(),this.fe.collectInitialEvents()}onArtificialPageViewEnd(){this.fe.clearStates(!0)}onBeforeSessionRenewal(){this.fe.clearStates(),this.fe.stop(),this.Zo.stop()}onOptout(){this.fe.stop(),this.Zo.stop()}g_(t,e,i){var r;let o=new bg(window),c=new Mg,l=Qg(this.f,this.Z,this.he),h=[];this.f.collectSubmit||csArray.prototype.push.call(h,"submit");let f=new Ng(l,this.Z,this.Lt,h),d=Zg(this.f,this.Z,this.he),E=new Pg(d,this.xt),m=new Vg(new qg),S=new wl,O,N,v,_=new Tl(`${this.f.getTrackerUri()}/${tc}`),M=new Ti(this.Et,this.O),k,T,B,et;return new xg(this.f,f,E,c,o,t,_,M,this.F,e,this.Z,m,S,i,O,N,v,k,T,B,et)}f_(t){return new Lg(new Ug(sm),t)}}return s})(),rm=(()=>{class s extends Tt{constructor(t,e,i,r){super(),this.ft=t,this.Cl=e,this.Et=i,this.ge=r,this.ta=[],this.Js=0}init(){this.ft.init()}initStates(){this.Il(),this.ta=[],this.Js=0,this.ml()}ml(){this.es=C.now()}Ii(){return C.now()-this.es}onStart(){this.ft.subscribe(s.jt,t=>this.Q(t))}onStop(){this.ft.unsubscribe(s.jt)}onIframeApiError(t){this.Q(t)}Q(t){this.isStarted&&this.Js<s.wr&&(t.relativeTime=this.Ii(),csArray.prototype.push.call(this.ta,this.ge.anonymize(t)),this.br(),G.counters.networkRequests.count("collected"))}Il(){this.Cl.removeQueryParams(),this.Cl.setQueryParams(this.Et.getRequestParameters())}br(){this.Cl.send({errors:this.ta}),this.ta=[],this.Js+=1}}return s.jt="ApiErrorsService",s.wr=20,s})(),om="api-errors",zr=["api-errors:maskUrl"],am=(()=>{class s{constructor(t,e,i,r,o,c,l){this.ft=t,this.ge=e,this.f=i,this.Et=r,this.pt=o,this.E=c,this.Vt=l}init(){let t=this.Vt.create(`${this.f.getTrackerUri()}/${om}`,!0);this.Ni=new rm(this.ft,t,this.Et,this.ge),this.Ni.init(),this.pt.addListener(this.Ni),this.ht()}ht(){this.E.register(zr,t=>{if(!A(t))throw new Ct(zr[0]);this.ge.addUrlMaskingPattern(t)})}onStartTracking(){this.Ni.start()}onAfterNaturalPageView(){this.Ni.initStates()}onAfterArtificialPageView(){this.Ni.initStates()}onBeforeSessionRenewal(){this.Ni.stop()}onOptout(){this.Ni.stop()}}return s})(),cm=(()=>{class s{constructor(t){this.Pl=t}buildApiErrors(t,e){let i=this.Pl.collectDataPoints(t,e);if(i===null)return null;let r=this.m_(t,i);if(e){let o=this.y_(t,i);return{apiError:r,detailedApiError:o}}return{apiError:r}}y_(t,e){let i=this.tf(t);return e.collectQueryParam&&t.queryParameters&&(i.queryParameters=t.queryParameters),e.collectRequestBody&&t.requestBody&&(i.requestBody=t.requestBody),e.collectResponseBody&&t.responseBody&&(i.responseBody=t.responseBody),Object.keys(e.standardRequestHeaders).length>0&&(i.standardRequestHeaders=e.standardRequestHeaders),Object.keys(e.standardResponseHeaders).length>0&&(i.standardResponseHeaders=e.standardResponseHeaders),Object.keys(e.customRequestHeaders).length>0&&(i.customRequestHeaders=csJSON.stringify(e.customRequestHeaders)),Object.keys(e.customResponseHeaders).length>0&&(i.customResponseHeaders=csJSON.stringify(e.customResponseHeaders)),Object.keys(e.plainCustomRequestHeaders).length>0&&(i.plainCustomRequestHeaders=e.plainCustomRequestHeaders),Object.keys(e.plainCustomResponseHeaders).length>0&&(i.plainCustomResponseHeaders=e.plainCustomResponseHeaders),e.plainResponseBodyAttributes&&Object.keys(e.plainResponseBodyAttributes).length>0&&(i.plainResponseBodyAttributes=e.plainResponseBodyAttributes),e.plainRequestBodyAttributes&&Object.keys(e.plainRequestBodyAttributes).length>0&&(i.plainRequestBodyAttributes=e.plainRequestBodyAttributes),Object.keys(e.responseBodyAttributes).length>0&&(i.responseBodyAttributes=csJSON.stringify(e.responseBodyAttributes)),Object.keys(e.requestBodyAttributes).length>0&&(i.requestBodyAttributes=csJSON.stringify(e.requestBodyAttributes)),i}tf(t){return{errorType:"apiError",url:t.url,method:t.method,requestTime:t.requestTime,responseTime:t.responseTime,statusCode:t.statusCode,library:t.library}}m_(t,e){let i=this.tf(t);return e.matchingBodyContents.length>0&&(i.matchingBodyContents=e.matchingBodyContents),Object.keys(e.plainResponseBodyAttributes).length>0&&(i.plainBodyResponseAttributes=e.plainResponseBodyAttributes),i}}return s})(),lm=(()=>{class s extends yo{constructor(t,e,i){super(),this.sa=t,this.ia=e,this.Pl=i,this.Ol=0,this.E_=new cm(i)}subscribe(t,e,i){i!=null&&i.detailedEvent&&(Object.defineProperty(e,"detailedEvent",{value:i.detailedEvent}),this.Ol++),super.subscribe(t,e)}unsubscribe(t){var e;!((e=this.subscriptions[t])===null||e===void 0)&&e.hasOwnProperty("detailedEvent")&&this.Ol--,super.unsubscribe(t)}init(){let t=this.Pl.computeApiErrorCollectionOptions();this.sa.setCollectionOptions(t),this.sa.onEvent(e=>this.ef(e)),this.ia.setCollectionOptions(t),this.ia.onEvent(e=>this.ef(e))}onStartTracking(){this.sa.start(),this.ia.start()}onStopTracking(){this.sa.stop(),this.ia.stop()}ef(t){let e=this.E_.buildApiErrors(t,this.Ol!==0);if(e)for(let i in this.subscriptions){let r=this.subscriptions[i];r.hasOwnProperty("detailedEvent")?e.detailedApiError&&r(e.detailedApiError):r(e.apiError)}}}return s})(),hm=(()=>{class s{constructor(t,e,i=!1){this.ut=t,this.J=e,this.Tr=i}addUrlMaskingPattern(t){this.ut.addUrlMaskingPattern(t)}anonymize(t){let e=this.J.removeQueryString(t.url),i={maskingPatterns:this.ut.getUrlMaskingPatterns(),partialMaskingPatterns:this.ut.getPartialUrlMaskingPatterns(),maskNames:this.Tr};return{...t,url:this.J.anonymizeUrl(e,i),library:t.library?this.J.anonymizeUrl(t.library,i):void 0}}}return s})(),um=(()=>{class s{constructor(){this.S_=64e3,this.v_=5e3,this.__=2e3,this.sf=8e3,this.As=!!self.TextEncoder,this.As&&(this.w_=new TextEncoder)}Ar(t){return this.w_.encode(t).byteLength}nf(t,e,i){let r=0;t[e]&&(r+=this.Ar(t[e]),r>this.sf&&(r=0,t[e]=K.ELLIPSIS)),t[i]&&(r+=this.Ar(csJSON.stringify(t[i])),r>this.sf&&(t[i]=s.truncatedObjectMarker))}b_(t){t.queryParameters&&this.Ar(t.queryParameters)>this.__&&(t.queryParameters=K.ELLIPSIS)}T_(t){t.requestBody&&this.Ar(t.requestBody)>this.S_&&(t.requestBody=K.ELLIPSIS),t.responseBody&&this.Ar(t.responseBody)>this.v_&&(t.responseBody=K.ELLIPSIS)}truncate(t){this.As?(this.b_(t),this.T_(t),this.nf(t,"customResponseHeaders","plainCustomResponseHeaders"),this.nf(t,"customRequestHeaders","plainCustomRequestHeaders")):(t.queryParameters="",t.requestBody="",t.responseBody="",t.customResponseHeaders="",t.customRequestHeaders="",t.plainCustomResponseHeaders={},t.plainCustomRequestHeaders={})}}return s.truncatedObjectMarker={[K.ELLIPSIS]:K.ELLIPSIS},s})(),dm=(()=>{let s;return function(n){function t(r){let o="[",c="]",l=[];for(let h=0;h<r.length;++h)if(r[h]===o)csArray.prototype.push.call(l,r[h]);else if(r[h]===c)if(csString.prototype.indexOf.call(r,o)>-1)csArray.prototype.pop.call(l);else return!1;return l.length===0}function e(r){if(!r)return!0;if(!t(r))return!1;let o=csString.prototype.split.call(r,/[\[\]]/);return csArray.prototype.every.call(o,c=>{let l=c[0],h=c[c.length-1];if((l==="'"||l==='"')&&l!==h)return!1;let f=csString.prototype.split.call(c,".");return f[0].length===0&&csArray.prototype.shift.call(f),csArray.prototype.every.call(f,d=>{let E=/^\-?\d+$/.exec(d);return E?parseInt(E[0],10)>=0:d==="$"||/\w+/.test(d)})})}n.isValidJSONPath=e;function i(r,o){if(!r)return;let c=csString.prototype.split.call(r,/[\$\[\]]/),l=[];csArray.prototype.forEach.call(c,f=>{if(f[0]==="'"||f[0]==='"'){csArray.prototype.push.call(l,csString.prototype.substring.call(f,1,f.length-1));return}csArray.prototype.push.call(l,...csArray.prototype.filter.call(csString.prototype.split.call(f,"."),d=>d.length>0))}),l[0]==="$"&&csArray.prototype.shift.call(l);let h=o;for(let f of l)if(h[f]!==void 0)h=h[f];else return;return h}n.getJSONPathValue=i}(s||(s={})),s})(),pm=(()=>{class s{constructor(){this.A_=new Set(["age","cache-control","clear-site-data","expires","pragma","warning","downlink","ect","rtt","last-modified","connection","keep-alive","accept","accept-encoding","accept-language","expect","access-control-allow-origin","access-control-allow-credentials","access-control-allow-headers","access-control-allow-methods","access-control-expose-headers","access-control-max-age","access-control-request-headers","access-control-request-method","origin","timing-allow-origin","content-length","content-type","content-encoding","content-language","via","host","referrer-policy","user-agent","allow","server","accept-ranges","range","if-range","content-range","cross-origin-embedder-policy","cross-origin-opener-policy","cross-origin-resource-policy","content-security-policy","content-security-policy-report-only","expect-ct","feature-policy","strict-transport-security","upgrade-insecure-requests","x-content-type-options","x-download-options","x-frame-options","x-permitted-cross-domain-policies","x-powered-by","x-xss-protection","sec-fetch-site","sec-fetch-mode","sec-fetch-user","sec-fetch-dest"])}isValidStandardHeader(t){return this.A_.has(t)}}return s})(),fm=(()=>{class s{constructor(){this.R_=64e3,this.C_=100,this.et={collectQueryParam:!1,collectRequestBody:!1,collectResponseBody:!1,matchingBodyContents:[],plainResponseBodyAttributes:{},plainRequestBodyAttributes:{},requestBodyAttributes:{},responseBodyAttributes:{},standardRequestHeaders:{},standardResponseHeaders:{},customRequestHeaders:{},customResponseHeaders:{},plainCustomRequestHeaders:{},plainCustomResponseHeaders:{}},this.rf=new pm}I_(t){return t.length<=this.R_}P_(t){let e=t["content-type"];return e!==void 0&&(bt(e,"application/json")||bt(e,"application/graphql"))}O_(t,e){return t&&this.I_(t)&&this.P_(e)}na(t,e,i,r){let o=r==="request"?this.N_:this.M_;if(o!==void 0||this.O_(e,i)){if(o===void 0)try{o=csJSON.parse(e),r==="request"?this.N_=o:this.M_=o}catch{return}let c=dm.getJSONPathValue(t,o);if(c!==void 0&&(c===null||!xe(c))){let l=A(c)?c:csJSON.stringify(c);return K.truncate(l,this.C_,K.ELLIPSIS)}}}isBodyAttributeValueFound(t,e){let i,r;return(e.type==="request-response"||e.type==="response")&&(i=this.na(e.path,t.responseBody,t.responseHeaders,"response")),(e.type==="request-response"||e.type==="request")&&(r=this.na(e.path,t.requestBody,t.requestHeaders,"request")),X(i)||X(r)}collectBodyAttribute(t,e,i){let r;(e.type==="request-response"||e.type==="response")&&(r=this.na(e.path,t.responseBody,t.responseHeaders,"response"),r&&(e.encrypted?this.et.responseBodyAttributes[e.path]=r:(r=i(r),this.et.plainResponseBodyAttributes[e.path]=r))),(e.type==="request-response"||e.type==="request")&&(r=this.na(e.path,t.requestBody,t.requestHeaders,"request"),r&&(e.encrypted?r&&(this.et.requestBodyAttributes[e.path]=r):(r=i(r),this.et.plainRequestBodyAttributes[e.path]=r)))}isBodyContentMatching(t,e){return t.responseBody?!!new csRegExp(e,"i").test(t.responseBody):!1}collectBodyContent(t){csArray.prototype.indexOf.call(this.et.matchingBodyContents,t)===-1&&csArray.prototype.push.call(this.et.matchingBodyContents,t)}collectCustomHeaders(t,e,i){let r=csString.prototype.toLocaleLowerCase.call(e.headerName);t.responseHeaders[r]&&(e.type==="request-response"||e.type==="response")&&(e.encrypted?this.et.customResponseHeaders[r]=t.responseHeaders[r]:this.et.plainCustomResponseHeaders[r]=i(t.responseHeaders[r])),t.requestHeaders[r]&&(e.type==="request-response"||e.type==="request")&&(e.encrypted?this.et.customRequestHeaders[r]=t.requestHeaders[r]:this.et.plainCustomRequestHeaders[r]=i(t.requestHeaders[r]))}collectStandardHeaders(t){if(!(Object.keys(this.et.standardRequestHeaders).length>0||Object.keys(this.et.standardResponseHeaders).length>0)){for(let[e,i]of Object.entries(t.requestHeaders))this.rf.isValidStandardHeader(e)&&(this.et.standardRequestHeaders[e]=i);for(let[e,i]of Object.entries(t.responseHeaders))this.rf.isValidStandardHeader(e)&&(this.et.standardResponseHeaders[e]=i)}}setCollectQueryParam(t){t&&(this.et.collectQueryParam=!0)}setCollectResponseBody(t){t&&(this.et.collectResponseBody=!0)}setCollectRequestBody(t){t&&(this.et.collectRequestBody=!0)}getCollectedDataPoints(){return this.et}}return s})(),hi=(()=>{let s;return function(n){n.CONTENTSQUARE="contentsquare.net",n.CLICKTALE="clicktale.net",n.FAKE_TRACKER="fake-tracker.content-square.fr",n.HEAP_API="heap-api.com",n.HEAP_ANALYTICS="heapanalytics.com"}(s||(s={})),s})(),gm=(()=>{class s{constructor(t,e){this.ra=t,this.M=e}collectDataPoints(t,e){this.et=new fm;let i=!1;if(this.ra.collectionRules)for(let r of this.ra.collectionRules)this.k_(r,t)&&this.D_(r,t)&&this.x_(r,t)&&(i=!0,this.L_(t,r,e));return i||(i=this.U_(t)),i&&e&&this.ra.collectStandardHeaders&&this.et.collectStandardHeaders(t),i?this.et.getCollectedDataPoints():null}computeApiErrorCollectionOptions(){let t=this.ra.collectionRules||[],e=new Set,i=[];for(let o of t)o.statusCode!==void 0&&e.add(o.statusCode),o.url!==void 0&&csArray.prototype.indexOf.call(i,o.url)===-1&&csArray.prototype.push.call(i,o.url);let r=[hi.CONTENTSQUARE,hi.CLICKTALE,hi.HEAP_API,hi.HEAP_ANALYTICS];return csArray.prototype.push.call(r,hi.FAKE_TRACKER),{statusCodes:e,urls:i,excludedDomains:r}}k_(t,e){return(!t.statusCode&&e.statusCode>=400||t.statusCode!==void 0&&t.statusCode===e.statusCode)&&(!t.url||csString.prototype.indexOf.call(e.url,t.url)!==-1)}D_(t,e){return t.bodyContent?this.et.isBodyContentMatching(e,t.bodyContent):!0}x_(t,e){let i=csArray.prototype.find.call(t.bodyAttributePaths,r=>r.primary);return i===void 0?!0:this.et.isBodyAttributeValueFound(e,i)}U_(t){return t.statusCode>=400}L_(t,e,i){e.bodyContent&&this.et.collectBodyContent(e.bodyContent);let r=me(e.bodyAttributePaths,o=>o.primary===1);if(r&&this.et.collectBodyAttribute(t,r,o=>this.M.anonymizePII(o)),i){this.et.setCollectQueryParam(e.collectQueryParam),this.et.setCollectResponseBody(e.collectResponseBody),this.et.setCollectRequestBody(e.collectRequestBody);for(let c of e.customHeaders)this.et.collectCustomHeaders(t,c,l=>this.M.anonymizePII(l));let o=vi(e.bodyAttributePaths,c=>!c.primary);for(let c of o)this.et.collectBodyAttribute(t,c,l=>this.M.anonymizePII(l))}}}return s})();var mm=(()=>{let s;return function(n){function o(h,f,d=!1){let m={message:K.truncate(h,300,K.ELLIPSIS),errorType:"customError"};return(d||l(f))&&(c(f),m.attributes=f),m}n.buildCustomErrorEvent=o;function c(h){for(let f in h){let d=h[f];if(typeof d=="string"&&d.length>30&&(d=K.truncate(d,30,K.ELLIPSIS),h[f]=d),f.length>30){let E=K.truncate(f,30,K.ELLIPSIS);delete h[f],h[E]=d}}}function l(h){let f=Object.keys(h).length;return f>0&&f<=5}}(s||(s={})),s})();var jn=["trackError"],ym=20,Em=(()=>{class s extends Tt{constructor(t,e,i,r,o){super(),this.Dl=t,this.Et=e,this.Qs=i,this.K=r,this.Rs=o,this.oa=[],this.Mi=0,this.ki=[]}initStates(){var t;this.Il(),this.es=C.now(),this.oa=[],this.Mi=0,(t=this.Rs)===null||t===void 0||t.onEvent(e=>this.Q(e))}trackCustomError(t,e={}){if(!(A(t)&&xe(e)&&ut(e)))throw new Ct(jn[0]);let i=mm.buildCustomErrorEvent(t,e);this.Rr(i)}onIframeCustomError(t){this.Q(t)}onStart(){var t;this.xl(),(t=this.Rs)===null||t===void 0||t.start()}onStop(){var t;(t=this.Rs)===null||t===void 0||t.stop()}xl(){this.isStarted&&(csArray.prototype.forEach.call(this.ki,t=>this.Rr(t)),this.ki=[])}Rr(t){if(this.isStarted){let e=this.Q(t);e&&this.K.emitCustomErrorEvent(e)}else csArray.prototype.push.call(this.ki,t)}Q(t){if(this.isStarted&&this.Mi<ym){let e=this.j_(t);return csArray.prototype.push.call(this.oa,e),this.br(),e}return null}j_(t){let e={...t,rt:this.Ii()};return e.message=this.Qs.anonymize(t.message),e}Il(){this.Dl.removeQueryParams(),this.Dl.setQueryParams(this.Et.getRequestParameters())}Ii(){return C.now()-this.es}br(){this.Dl.send({errors:this.oa}),this.oa=[],this.Mi+=1}}return s})(),Sm="custom-errors",vm=(()=>{class s{constructor(t,e,i,r,o,c,l,h){this.Qs=t,this.f=e,this.Et=i,this.E=r,this.Zs=o,this.Vt=c,this.pt=l,this.Rs=h}init(){let t=this.Vt.create(`${this.f.getTrackerUri()}/${Sm}`,!0);this.Di=new Em(t,this.Et,this.Qs,this.Zs,this.Rs),this.pt.addListener(this.Di),this.ht()}ht(){this.E.register(jn,(t,e)=>{this.Di.trackCustomError(t,e)})}onStartTracking(){this.Di.start()}onAfterNaturalPageView(){this.Di.initStates()}onAfterArtificialPageView(){this.Di.initStates()}onBeforeSessionRenewal(){this.Di.stop()}onOptout(){this.Di.stop()}}return s})(),_m=/(\b["']?key["']?\s*[=:]\s*["'](?:first|last|user|profile|primary|primary[ _-]?last)[ _-]?name["']\s*,?\s*["']?value["']?\s*[=:]\s*["'])(.+?)(["']|$)|(\b["']?(?:first|last|user|profile|primary|primary[ _-]?last)[\s_-]?name["']?\s*[=:]\s*["'])(.+?)(["']|$)/gi,wm="$1$4CS_ANONYMIZED_NAME$3$6",bm=/(?:\(\d{3}\) \d{3}[- ]\d{4}\b)|(?:\b\d{3}([-\. ])\d{3}\1\d{4}\b)|(?:\b\d{2} \d{2} \d{2} \d{2} \d{2}\b)|(?:\b\d{4} \d{3} \d{3}\b)|(?:\b\d{2}([-\. ])\d{4}\2\d{4}\b)|(?:\b\d{3}([- ])\d{4}\3\d{4}\b)|(?:\+\d{1,3} \d{3} \d{3} \d{4}\b)|(?:\+\d{1,3} \(\d{3}\) \d{3}-\d{4}\b)|(?:\+\d{1,3}([- ])\d{4}\4\d{3}\4\d{3}\b)|(?:\+\d{1,3} \d \d{4} \d{4}\b)|(?:\+\d{1,3} \d \d{3} \d{3} \d{4}\b)|(?:\+\d{1,3} \d \d{2} \d{2} \d{2} \d{2}\b)|(?:\+\d{7,15}\b)|(?:\+\d{1,3} \d{6,12}\b)|(?:\+\d{1,3}([- ])\d{4}\5\d{3}\5\d{3}\b)/g,Tm="CS_ANONYMIZED_PHONE",Am=(()=>{class s{constructor(t,e){this.M=t,this.J=e}anonymize(t){return this.J?csArray.prototype.join.call(csArray.prototype.map.call(Jd(t),({content:e,isUrl:i})=>{var r;return i?(r=this.J)===null||r===void 0?void 0:r.anonymizeUrl(e,{maskNames:!0}):this.of(e)}),""):this.of(t)}of(t){t=this.M.anonymizePII(t);let e=t;t=this.Tr(t),t!==e&&(G.counters.redactedPII.count("name"),G.counters.redactedPII.count("name-in-custom-error"));let i=t;return t=this.H_(t),t!==i&&(G.counters.redactedPII.count("phone"),G.counters.redactedPII.count("phone-in-custom-error")),t}Tr(t){return csString.prototype.replace.call(t,_m,wm)}H_(t){return csString.prototype.replace.call(t,bm,Tm)}}return s})(),Rm=20,Cm="Custom Error:",Im="https://cserror.com/texterror.js",Pm=(()=>{class s extends Tt{constructor(t,e,i,r,o,c){super(),this.Cs=t,this.Ll=e,this.Et=i,this.ye=r,this.Zs=o,this.w=c,this.aa=[],this.xi=0,this.ki=[]}initStates(){this.es=C.now(),this.Ll.removeQueryParams(),this.Ll.setQueryParams(this.Et.getRequestParameters()),this.aa=[],this.xi=0}onStart(){this.Cs.subscribe(s.jt,t=>this.Q(t)),this.xl()}onStop(){this.Cs.unsubscribe(s.jt)}onIframeJavascriptError(t){this.Q(t)}trackCustomError(t){let e={errorType:"jsError",message:`${Cm} ${t}`,lineno:1,colno:1,filename:Im};this.Rr(e)}Rr(t){if(this.isStarted){let e=this.Q(t);e&&this.Zs.emitCustomJavaScriptErrorEvent(e)}else csArray.prototype.push.call(this.ki,t)}xl(){this.isStarted&&(csArray.prototype.forEach.call(this.ki,t=>this.Rr(t)),this.ki=[])}Q(t){if(this.isStarted&&this.xi<Rm){let e={...t,pageUrl:this.w.getAnonymizedUrl(),rt:this.Ii()};return this.ye.anonymize(e),csArray.prototype.push.call(this.aa,e),this.br(),e}return null}Ii(){return C.now()-this.es}br(){this.Ll.send({errors:this.aa}),this.aa=[],this.xi+=1}}return s.jt="JavaScriptErrorsService",s})(),Om="errors",Nm=(()=>{class s{constructor(t,e,i,r,o,c,l,h,f){this.Cs=t,this.ye=e,this.f=i,this.Et=r,this.pt=o,this.E=c,this.Zs=l,this.w=h,this.Vt=f}init(){let t=this.Vt.create(`${this.f.getTrackerUri()}/${Om}`,!0);this.Li=new Pm(this.Cs,t,this.Et,this.ye,this.Zs,this.w),this.pt.addListener(this.Li),this.ht()}ht(){this.f.jsCustomErrorsEnabled&&!this.f.customErrors.enabled&&this.E.register(jn,t=>{this.Li.trackCustomError(t)})}onStartTracking(){this.Li.start()}onAfterNaturalPageView(){this.Li.initStates()}onAfterArtificialPageView(){this.Li.initStates()}onBeforeSessionRenewal(){this.Li.stop()}onOptout(){this.Li.stop()}}return s})(),Dl=(()=>{class s{constructor(t){this.A=t,this.ti=!1,this.zt={boundElement:Z,type:"error",listener:e=>this.B_(e)}}observe(){gt(this.zt,this.ti)}disconnect(){mt(this.zt,this.ti)}B_(t){this.A(t)}}return s})(),Mm=(()=>{class s extends yo{constructor(){super(),this.G=new Dl(t=>this.errorListener(t))}onStartTracking(){this.G.observe()}onStopTracking(){this.G.disconnect()}errorListener(t){let e=this.F_(t);for(let i in this.subscriptions){let r=this.subscriptions[i];r(e)}}$_(t){return t=t!=null?t:"[NO ERROR MESSAGE]",K.truncate(t,s.Ul,K.ELLIPSIS)}z_(t){return!t||te(t)?"":K.truncate(t,s.Vl,K.ELLIPSIS)}F_(t){return{errorType:"jsError",message:this.$_(t.message),filename:this.z_(t.filename),lineno:t.lineno,colno:t.colno}}}return s.Ul=1024,s.Vl=150,j([P("Event handler type: error")],s.prototype,"errorListener",null),s})(),km="CS_ANONYMIZED_VALUE",Dm=(()=>{class s{constructor(t,e){this.M=t,this.w=e}anonymize(t){return A(t.message)&&(t.message=this.G_(t.message),t.message=this.M.anonymizePII(t.message)),A(t.filename)&&(t.filename=this.w.computeOverriddenUrl(t.filename)),t}G_(t){return csString.prototype.replace.call(t,/(value\s*=\s*".*"|value\s*=\s*'.*')/,`value='${km}'`)}}return s})(),xm=512,Lm=255,hr=(()=>{class s{constructor(t,e){this.key=csString.prototype.slice.call(t,0,xm),this.value=A(e)?csString.prototype.slice.call(e,0,Lm):e}static isKeyValid(t){return A(t)}static isValueValid(t){return A(t)||Gs(t)}}return s})(),Um=(()=>{class s extends Tt{constructor(t,e){super(),this.Gt=t,this.M=e,this.jl=[]}onStart(){csArray.prototype.forEach.call(this.jl,t=>this.af(t.key,t.value)),this.jl=[]}onStop(){}af(t,e){let i=this.M.anonymizePII(t),r=Gs(e)?e:this.M.anonymizePII(e);this.Gt.add(new hr(i,r))}trackDynamicVariable(t,e){if(hr.isKeyValid(t)&&hr.isValueValid(e)){if(!this.isStarted){csArray.prototype.push.call(this.jl,{key:t,value:e});return}this.af(t,e)}else throw new Ct(bo[0])}}return s})(),Vm=(()=>{class s{constructor(t){this.Ee=t,this.Gt=[]}add(t){csArray.prototype.push.call(this.Gt,t),this.setBatchReadyCall()}clear(){this.Gt=[]}onBatchReady(t){this.q_=t}getRequestParameters(){let t={};for(let e of this.Gt)t[e.key]=e.value;return{dv:this.Ee.compressSync(csJSON.stringify(t),"base64"),ct:this.Ee.algorithm}}setBatchReadyCall(){this.q_()}}return j([Di({wait:0,mode:"trailing"}),P("dynamicVariablesBatchReady")],s.prototype,"setBatchReadyCall",null),s})(),jm="dvar",bo=["trackDynamicVariable"],Hm=(()=>{class s{constructor(t,e,i,r,o,c){this.E=t,this.R=e,this.f=i,this.Ve=r,this.Ee=o,this.M=c,this.ms=new Ys(this.f.getTrackerUri(),jm),this.Gt=new Vm(this.Ee),this.Ui=new Um(this.Gt,this.M)}init(){this.ms.setRequestParametersProviders(this.Ve,this.Gt),this.R.setDynamicVariablesService(this.Ui),this.Gt.onBatchReady(()=>this.ms.send()),this.ms.after(()=>this.Gt.clear()),this.E.register(bo,({key:t,value:e}={})=>{this.Ui.trackDynamicVariable(t,e)})}onStartTracking(){this.Ui.start()}}return s})(),ec=(()=>{class s{constructor(t,e){this.id=t,this.revenue=e}static from(t){let e=new s(t.id,parseFloat(t.revenue));return isNaN(parseFloat(t.tax))||(e.tax=parseFloat(t.tax)),isNaN(parseFloat(t.shipping))||(e.shipping=parseFloat(t.shipping)),A(t.currency)&&t.currency.length<=10&&(e.currency=t.currency),e}hasValidRevenue(){return!isNaN(this.revenue)&&this.revenue>=0}static isValid(t){return ut(t)&&ft(t.revenue)&&A(t.currency)&&t.currency.length<=10&&(!ut(t.id)||A(t.id))}}return s})(),xl=100,Bm=100,Fm=(()=>{class s{constructor(t,e,i,r){this.id=t,this.name=e,this.price=i,this.quantity=r}static from(t){if(!s.Xc(t))return null;let e=new s(t.id,t.name,parseFloat(t.price),parseInt(t.quantity,10));return X(t.sku)&&(e.sku=t.sku),X(t.category)&&(e.category=t.category),X(t.merchant)&&t.merchant.length>0&&(e.merchant=t.merchant.slice(0,xl)),e}static Xc(t){return ut(t)&&A(t.id)&&A(t.name)&&ft(parseFloat(t.price))&&Gs(parseInt(t.quantity,10))&&(!X(t.sku)||A(t.sku))&&(!X(t.category)||A(t.category))&&(!X(t.merchant)||A(t.merchant))}}return s})(),$m=(()=>{class s extends Tt{constructor(t,e,i){super(),this.M=t,this.cf=e,this.F=i,this.Hl=[],this.clear()}onStart(){csArray.prototype.forEach.call(this.Hl,t=>{this.Se=t.transaction,this.Cr=t.transactionItems,this.sendTransaction()}),this.Hl=[]}onStop(){}addTransaction(t){let e=this.M.anonymizeFields(t,["id"]);this.Se=ec.from(e)}getTransaction(){return this.Se}sendTransaction(){if(!this.isStarted){csArray.prototype.push.call(this.Hl,{transaction:this.Se,transactionItems:[...this.Cr]}),this.clear();return}if(!(this.cf===null||this.F===null)&&(this.F.refreshSession(),!!this.F.isSessionValid())){if(!this.Se.hasValidRevenue()){H.warn("Transaction Service: unable to send transaction with invalid parameters");return}this.cf.send()}}addItem(t){if(Se(t))throw new Ct(Hn[1]);let e=this.M.anonymizeFields(t,["id","name","sku","category"]),i=Fm.from(e);i!==null&&csArray.prototype.push.call(this.Cr,i)}getItems(){return this.Cr}clear(){this.Se=ec.from({revenue:NaN}),this.Cr=[]}getRequestParameters(){let t={id:this.Se.id?`${this.Se.id}`:"",revenue:`${this.Se.revenue}`};return X(this.Se.tax)&&(t.tax=`${this.Se.tax}`),X(this.Se.shipping)&&(t.shipping=`${this.Se.shipping}`),X(this.Se.currency)&&(t.cu=`${this.Se.currency}`),t.items=window.csJSON.stringify(this.Cr),t}}return s})(),zm=(()=>{class s extends Tt{constructor(t,e){super(),this.W_=t,this.F=e,this.Ne=null,this.Bl=[]}onStart(){csArray.prototype.forEach.call(this.Bl,t=>{this.Ne=t,this.lf()}),this.Bl=[]}onStop(){}addToCart(t){let e={};A(t.sku)&&(e.sku=csString.prototype.slice.call(t.sku,0,Bm)),A(t.merchant)&&(e.merchant=csString.prototype.slice.call(t.merchant,0,xl)),(e.sku||e.merchant)&&(this.Ne=e,this.lf())}getCartItem(){return this.Ne}lf(){if(!this.isStarted&&this.Ne!==null){csArray.prototype.push.call(this.Bl,this.Ne),this.clear();return}this.F.refreshSession(),this.F.isSessionValid()&&this.W_.send()}clear(){this.Ne=null}getRequestParameters(){if(!this.Ne)return{};let t={};return A(this.Ne.sku)&&this.Ne.sku.length>0&&(t.sku=this.Ne.sku),A(this.Ne.merchant)&&this.Ne.merchant.length>0&&(t.me=this.Ne.merchant),t}}return s})(),Gm=["ecommerce:addToCart","ec:cart:add"],To=["ecommerce:addTransaction","ec:transaction:create"],Hn=["ecommerce:addItem","ec:transaction:items:add"],Ao=["ecommerce:send","ec:transaction:send"],qm=(()=>{class s{constructor(t,e,i,r,o,c,l){this.f=t,this.Et=e,this.O=i,this.E=r,this.M=o,this.F=c,this.w=l}init(){let t=new Ys(this.f.getTrackerUri(),"transaction"),e=new Ys(this.f.getTrackerUri(),"addtocart");this.ns=new $m(this.M,t,this.F),this.ca=new zm(e,this.F);let i=new Ti(this.Et,this.O,this.w,this.ns);t.setRequestParametersProviders(i),t.after(()=>{this.ns.clear()});let r=new Ti(this.Et,this.O,this.w,this.ca);e.setRequestParametersProviders(r),e.after(()=>{this.ca.clear()}),this.E.register(To,o=>{this.ns.addTransaction(o)}),this.E.register(Hn,o=>this.ns.addItem(o)),this.E.register(Ao,()=>this.ns.sendTransaction()),this.E.register(Gm,o=>{this.ca.addToCart(o)})}onStartTracking(){this.ns.start(),this.ca.start()}}return s})();var Wm=2,Ro=(()=>{class s{constructor(t){this.ew=t,this.ha=0}addString(t){this.ha+=t.length*Wm}addArrayBuffer(t){this.ha+=t.byteLength}isThresholdReached(){return this.ha>this.ew}reset(){this.ha=0}}return s})();var sc=(()=>{class s{static create(t,e){if(!s.isSupported())throw new Error("IntersectionObserver is not supported");if(e&&e.delay&&e.delay<100)throw new Error("Visibility delay should be > 100ms");return e!=null&&e.trackVisibility&&(t=s.nw(t)),new csIntersectionObserver(t,e)}static isSupported(){return!!window.csIntersectionObserver&&!!window.IntersectionObserverEntry}static nw(t){return(e,i)=>t(ke(e,Ym),i)}}return s})();function Ym(s){return s.isVisible||!ot.isVisibleInViewportInForeground(s.target)?s:{boundingClientRect:s.boundingClientRect,intersectionRatio:s.intersectionRatio,intersectionRect:s.intersectionRect,isIntersecting:s.isIntersecting,rootBounds:s.rootBounds,target:s.target,time:s.time,isVisible:!0}}var Gr=()=>(s,n,t)=>{t.value=Xm(t.value)};function Xm(s){let n=csSymbol("oncePerTickSymbol"),t=null,e={},i=function(){var r;let o=(r=this)!==null&&r!==void 0?r:e;if(t=arguments,o[n])return;o[n]=!0,io(()=>{o[n]=!1,s.apply(o,t)})};return i.oncePerTickSymbol=n,i}Gr.isScheduled=(s,n)=>{let t=n.oncePerTickSymbol;return s[t]};var Km=(()=>{class s{constructor(t){this.A=t,this.si=new Map,this.pf=e=>{let i=e.target;if(this.si.has(i))return!0;let r=!1;return this.si.forEach((o,c)=>{r||!this.si.get(c).subtree||(r=c.contains(i))}),r},yt.general.nbOfMutationObservers.increase(),this.D=new csMutationObserver(e=>{Gr.isScheduled(this,this.garbageCollect)&&(e=vi(e,this.pf)),e.length&&jt(()=>t(e,this))})}disconnect(){yt.general.nbOfMutationObservers.decrease(),this.D.disconnect(),this.si=new Map}takeRecords(){return this.D.takeRecords()}observe(t,e){return yt.mutations.elementMutationObserved.increase(),this.si.set(t,e),this.D.observe(t,e)}unobserve(t){this.si.has(t)&&(yt.mutations.elementMutationObserved.decrease(),this.si.delete(t),this.garbageCollect())}garbageCollect(){yt.mutations.unobserveGarbageCollection.measure(()=>{let t=vi(this.takeRecords(),this.pf);t.length&&this.A(t,this),this.D.disconnect(),this.si.forEach((e,i)=>this.D.observe(i,e))})}}return tt([Gr()],s.prototype,"garbageCollect",null),s})(),Jm=(()=>{class s{constructor(t){this.A=t,this.pa=new Set}onMutations(t){if(Si(t,e=>{var i;return!!(!((i=e.removedNodes)===null||i===void 0)&&i.length)}))for(let e of this.pa.values())ot.isConnected(e)||(this.pa.delete(e),this.A(e))}observe(t){this.G||(this.G=new ce(e=>csSetTimeout(()=>this.onMutations(e))),this.G.observe()),this.pa.add(t)}disconnect(){var t;(t=this.G)===null||t===void 0||t.disconnect(),this.pa.clear(),this.G=void 0}}return tt([P("NodeDisconnectedObserver.onMutations")],s.prototype,"onMutations",null),s})(),Qm=300,cs=(()=>{class s{constructor(t){this.fa=new Set,this.rw=new Jm(e=>this.ff(e)),this.z=!1,this.Tt=t?{...ic,...t}:ic}stop(){var t,e;this.z=!1,(t=this.Nr)===null||t===void 0||t.disconnect(),(e=this.D)===null||e===void 0||e.disconnect()}start(t){if(this.z)throw new Error("VisibilityObserver is already started");this.A=ls("VisibilityObserver:callback",(i,r)=>t(i,r));let e={root:null,rootMargin:"0px",threshold:.5,trackVisibility:!0,delay:Qm};this.Nr=sc.create(i=>this.handleIntersection(i),e),this.D=new Km(i=>csSetTimeout(()=>{W(i,r=>this.ff(r.target))})),this.Fl(),this.z=!0}observe(t){if(!this.z)throw new Error("Observer is stopped.");this.Tt.reobserve===!1&&t[this.$l]||(yt.visibilityObserver.nbElements.increase(),t[this.$l]=!0,this.watchIntersection(t))}Fl(){this.ga=csSymbol("isVisible"),this.$l=csSymbol("ObservedElement"),this.zl=csSymbol("LinkedElement"),this.gf=csSymbol("Tracked")}ff(t){this.fa.add(t);for(let e of this.ow(t))this.fa.add(e);this.recheckCssVisibilityAll()}recheckCssVisibilityAll(){W(this.fa.keys(),t=>{!t.isConnected||ot.areAncestorsHiddenByCSS(t)||t[this.$l]&&this.watchIntersection(t)}),this.fa.clear()}watchIntersection(t){this.D.unobserve(t),this.Nr.unobserve(t);let e=ot.getTopAncestorHiddenByCSS(t);e?(e!==t&&(this.mf(e,t),this.watchMutation(e)),this.watchMutation(t)):this.Nr.observe(t)}watchMutation(t,e=!0){e&&delete t[this.ga],this.Nr.unobserve(t);let i={attributeFilter:["style","class","hidden"]};this.D.observe(t,i)}handleIntersection(t){for(let e of t){let i=e.target;if(!e.isVisible){ot.isVisibleInDocument(i)||this.aw(i);continue}let r=this.Tt.allowSameMatch||!e.target[this.ga];e.target[this.ga]=!0,r&&!this.Tt.delay&&this.onVisibilityChanged(e.target,Fs.VisibleInViewPort)}this.Tt.delay&&csSetTimeout(()=>{for(let e of t){let i=e.isIntersecting&&e.isVisible;e.target[this.ga]&&i&&this.onVisibilityChanged(e.target,Fs.VisibleInViewPort)}},this.Tt.delay)}aw(t){yt.visibilityObserver.hiddenElements.increase();let e=ot.getTopElement(t);this.watchMutation(t),e&&(this.rw.observe(e),this.mf(e,t),this.watchMutation(e,!1))}mf(t,e){var i;(t[this.zl]=(i=t[this.zl])!==null&&i!==void 0?i:new Set).add(e)}ow(t){var e,i;let r=[],o=(i=(e=t[this.zl])===null||e===void 0?void 0:e.values())!==null&&i!==void 0?i:[];return W(o,c=>csArray.prototype.push.call(r,c)),r}onVisibilityChanged(t,e){if(e===Fs.VisibleInViewPort&&this.Tt.trackOnce){if(this.Nr.unobserve(t),this.D.unobserve(t),t[this.gf])return;t[this.gf]=!0}this.A(t,e)}static isSupported(){return sc.isSupported()}}return tt([P()],s.prototype,"observe",null),tt([Di({wait:50}),P(),It("recheckCssVisibilityAll")],s.prototype,"recheckCssVisibilityAll",null),tt([P()],s.prototype,"watchIntersection",null),tt([P()],s.prototype,"watchMutation",null),tt([P(),It("VisibilityObserver.handleIntersection")],s.prototype,"handleIntersection",null),tt([P()],s.prototype,"onVisibilityChanged",null),s})(),Fs=(()=>{let s;return function(n){n.VisibleInViewPort="VisibleInViewPort",n.HiddenByAnother="HiddenByAnother",n.Hidden="Hidden"}(s||(s={})),s})(),ic={delay:1e3,trackOnce:!0,reobserve:!1};var rn=(()=>{let s;return function(n){n[n.NOT_NEEDED=1]="NOT_NEEDED",n[n.NOT_EXPRESSED=2]="NOT_EXPRESSED",n[n.WITHDRAWN=3]="WITHDRAWN",n[n.GRANTED=4]="GRANTED"}(s||(s={})),s})(),rs=(()=>{let s;return function(n){function t(r){return r.replayConsentRequiredForSession}n.isReplayConsentNeeded=t;function e(r){return r.collectState===U.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED||r.collectState===U.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}n.isRecordingBlockedByConsent=e;function i(r){return r.collectState===U.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}n.isRecordingWithDrawn=i}(s||(s={})),s})(),Zm=(()=>{class s{constructor(t,e,i,r){this.O=t,this.R=e,this.f=i,this.ls=r,this.Af=!1}isNaturalPageViewSent(){return this.Af}setNaturalPageViewSent(t){this.Af=t}getTrackingContext(){let t=this.R.getSession();if(!t)return null;let e=this.getSessionKey();if(!e)return null;let i=this.f.projectId,r=this.f.uxaDomain,o=t.pageNumber,c=this.ls.getPageViewType(),l=this.R.isReplayRecorded(),h=this.xw(t);return{projectId:i,sessionKey:e,pageNumber:o,pageViewType:c,isRecording:l,uxaDomain:r,recordingConsentState:h,...this.f.smbConfig}}getSessionKey(){let t=this.O.getVisitor();return t?`${t.id}.${t.visitsCount}`:null}xw(t){return rs.isReplayConsentNeeded(this.f)?t.collectState===U.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED?rn.NOT_EXPRESSED:t.collectState===U.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN?rn.WITHDRAWN:rn.GRANTED:rn.NOT_NEEDED}}return s})(),ty=(()=>{class s{constructor(t){this.It=t,this.ie=[]}handleCommand(t){if(Se(t)&&(this.Dr(t),this.It.isNaturalPageViewSent())){let e=this.It.getTrackingContext();e!==null&&this.Ht(t,e)}}Dr(t){csArray.prototype.push.call(this.ie,t)}executeRegisteredCallbacks(){let t=this.It.getTrackingContext();t!==null&&csArray.prototype.map.call(this.ie,e=>this.Ht(e,t))}Ht(t,e){csSetTimeout(()=>{t(e)})}}return s})(),ey=(()=>{class s{constructor(t){this.It=t,this.Vi=[]}handleCommand(t){if(this.It.isNaturalPageViewSent())return this.Lw(t);this.xr(t)}Lw(t){let e=this.It.getSessionKey();return this.Rf(t)&&e!==null&&this.Ht(t.callback,e),e}xr(t){this.Rf(t)&&csArray.prototype.push.call(this.Vi,t.callback)}flushPendingCallbacks(){let t=this.It.getSessionKey();t!==null&&csArray.prototype.forEach.call(this.Vi,e=>{this.Ht(e,t)}),this.Vi=[]}Rf(t){return t&&typeof t.callback=="function"}Ht(t,e){csSetTimeout(()=>{t(e)})}}return s})();function sy(s,n){let{isRecording:t,pageNumber:e,projectId:i,siteId:r,uxaDomain:o,csLiteDomain:c}=s,l=/^(.+)\.(\d+)$/.exec(s.sessionKey),h;if(t&&l){let[,f,d]=l;r?h=`${c}/sites/${r}/player?uu=${f}&sn=${d}&pn=${e}`:h=`${o}/quick-playback/index.html?pid=${i}&uu=${f}&sn=${d}&pvid=${e}&recordingType=cs`,n.withTimestamp&&(h+=`&t=${C.now()-n.recordingStartTimestamp}`)}return{replayLink:h,isRecording:t}}var iy=(()=>{class s{constructor(t){this.It=t}handleCommand(t,e){xe(t)&&Se(e)&&this.Ht(t,e)}Ht(t,e){csSetTimeout(()=>{let i=this.It.getTrackingContext();if(i){let r=sy(i,t);e(r)}})}}return s})(),ny=(()=>{class s{constructor(){this.ie=new Set}handleCommand(t,e){return!Se(t)||this.ie.has(t)?null:(this.ie.add(t),e&&(this.ke=e,this.Cf(t,e)),()=>this.ie.delete(t))}executeCallbacks(t){this.Uw(t)&&(this.ke=t,this.ie.forEach(e=>this.Cf(e,t)))}Cf(t,e){csSetTimeout(()=>{try{t(e)}catch{}})}Uw(t){let{isRecording:e,recordingStartTimestamp:i,etrState:r,etrStatus:o,collectState:c}=t;return this.ke&&(this.ke.isRecording!==e||this.ke.recordingStartTimestamp!==i||this.ke.etrState!==r||this.ke.etrStatus!==o||this.ke.collectState!==c)}}return s})(),Ll=["afterPageView"],ry=["getSessionKey"],oy=["onRecordingContextChange","onRecordingStateChange"],ay=["replay:link:generate"],cy=(()=>{class s{constructor(t,e,i,r,o,c,l,h){this.O=t,this.R=e,this.E=i,this.pt=r,this.tt=o,this.f=c,this.ls=l,this.$s=h,this.If=null}init(){this.It=new Zm(this.O,this.R,this.f,this.ls),this.ql=new ty(this.It),this.Pf=new ey(this.It),this.Lr=new ny,this.Vw=new iy(this.It),this.E.register(ry,t=>this.Pf.handleCommand(t)),this.E.register(Ll,t=>this.ql.handleCommand(t)),this.E.register(oy,t=>this.Lr.handleCommand(t,this.$s.getRecordingContext())),this.E.register(ay,(t,e)=>{this.Cn&&this.Vw.handleCommand({...t,recordingStartTimestamp:this.$s.getRecordingContext().recordingStartTimestamp},e)})}onAfterNaturalPageView(){var t;this.It.setNaturalPageViewSent(!0),this.Pf.flushPendingCallbacks(),this.ql.executeRegisteredCallbacks(),(t=this.If)===null||t===void 0||t.sendAfterPageViewCallbackToChildren()}onAfterArtificialPageView(){var t;this.ql.executeRegisteredCallbacks(),(t=this.If)===null||t===void 0||t.sendAfterPageViewCallbackToChildren()}onCollectStateChange(){this.executeRecordingContextChangeCallbacks()}onRecordingContextChange(){this.executeRecordingContextChangeCallbacks()}executeRecordingContextChangeCallbacks(){this.Lr.executeCallbacks(this.$s.getRecordingContext())}setRecordingService(t){this.Cn=t}}return j([Di({wait:0,mode:"trailing"})],s.prototype,"executeRecordingContextChangeCallbacks",null),s})(),ly=(()=>{class s{constructor(t){this.E=t}init(){this.Of(s.jw,tl),this.Of(s.Hw,Zc)}Of(t,e){this.E.register([t],(i,r)=>{!A(i)||!(A(r)||ve(r))||H.error(r,`${e}${i}`)})}}return s.Hw="logSnippetError",s.jw="logImplementationSnippetError",s})(),hy="@ETP@",nc="@user-identifier@",uy=(()=>{class s extends Tt{constructor(t,e,i,r){super(),this.f=t,this.Bw=e,this.Ee=i,this.K=r,this.Wl=[],this.ji=[]}onStart(){csArray.prototype.forEach.call(this.Wl,t=>this.Nf(t)),this.Wl=[],csArray.prototype.forEach.call(this.ji,t=>this.Mf(t)),this.ji=[]}onStop(){}Nf(t){this.Fw(t)?as.isSupported()&&this.$w(t):this.zw(t)}trackPageEvent(t){if(!s.kf(t))throw new Ct(Co[0]);this.isStarted?this.Nf(t):csArray.prototype.push.call(this.Wl,t)}Fw(t){return An(t,nc)}async $w(t){if(!this.f.customHashIdEnabled)return;let e=csString.prototype.slice.call(t,nc.length);if(e.length>as.MAX_DIGEST_INPUT_SIZE){H.warn("UserIdentifier event: invalid user identifier");return}let i=await as.digest(e);i?(this.In={eventName:i,isETR:!1,isCustomHashId:!0},this.Ea()):H.warn("Page event: unable to compute customHashId"),this.f.encryptionEnabled&&this.K.emitUserIdentifierEvent(e)}zw(t){this.K.emitPageEvent(t),this.In={eventName:t,isETR:!1,isCustomHashId:!1},this.Ea(),this.f.tagDeploymentMode===bs.LoadClicktalePtc&&xa.sendPageEvent(t)}Mf(t){this.f.malkaEtrEnabled?this.Gw(t):this.qw(t)}trackEventTriggerRecording(t){if(!s.kf(t))throw new Ct(Vi[0]);this.isStarted?this.Mf(t):csArray.prototype.push.call(this.ji,t)}Gw(t){An(t,hy)?this.K.emitEventTriggerRecording(t,os.ETR_PAGE):this.K.emitEventTriggerRecording(t,os.ETR_SESSION),this.In={eventName:t,isETR:!0,isCustomHashId:!1},this.Ea()}qw(t){Uf(this.f)&&(this.K.emitEventTriggerRecording(t,os.ETR_LEGACY),this.In={eventName:t,isETR:!0,isCustomHashId:!1},this.Ea(),this.f.tagDeploymentMode===bs.LoadClicktalePtc&&xa.sendEventTriggerRecording(t))}getRequestParameters(){return{value:this.Ee.compressSync(this.In.eventName,"base64"),ct:this.Ee.algorithm,isETR:`${this.In.isETR}`,isCustomHashId:`${this.In.isCustomHashId}`}}Ea(){this.Bw.send()}static kf(t){return A(t)&&!!csString.prototype.trim.call(t)}}return s})(),Co=["trackPageEvent"],Vi=["trackEventTriggerRecording"],dy=(()=>{class s{constructor(t,e,i,r,o){this.f=t,this.E=e,this.Ee=i,this.Ve=r,this.K=o}init(){let t=new Ys(this.f.getTrackerUri(),"pageEvent");this.Sa=new uy(this.f,t,this.Ee,this.K),t.setRequestParametersProviders(this.Sa,this.Ve),this.E.register(Co,e=>{this.Sa.trackPageEvent(e)}),this.E.register(Vi,e=>{this.Sa.trackEventTriggerRecording(e)})}onStartTracking(){this.Sa.start()}}return s})(),py=["hidePageTitle"],fy=["resetHidePageTitle"],gy="onNextPageviewOnly",my=(()=>{class s{constructor(t,e){this._e=t,this.E=e}init(){this.E.register(py,t=>{let e=t===gy;this._e.setHidePageTitle(e)}),this.E.register(fy,()=>this._e.resetHidePageTitle())}onAfterNaturalPageView(){this._e.updateStateOnAfterPageview()}onAfterArtificialPageView(){this._e.updateStateOnAfterPageview()}}return s})(),Ul=(()=>{class s{constructor(){this.Df=255,this.Ww="****",this.Yw="data-cs-hide-title",this.Xw="data-heap-redact-text",this.va={value:!1,onNextPageviewOnly:!1}}getRequestParameters(){return{t:this.getPageTitle()}}getPageTitle(){return this.va.value||this.Kw()?this.Ww:this.Jw(window.document.title)}setHidePageTitle(t){this.va={value:!0,onNextPageviewOnly:t}}resetHidePageTitle(){this.va={value:!1,onNextPageviewOnly:!1}}updateStateOnAfterPageview(){this.va.onNextPageviewOnly&&this.resetHidePageTitle()}Kw(){let t=window.csquerySelector[document.nodeType].call(document,"head > title");return t===null?!1:t.getAttribute(this.Yw)!==null||t.getAttribute(this.Xw)!==null}Jw(t){return t.length>this.Df?csString.prototype.substring.call(t,0,this.Df):t}}return s})(),fn=(()=>{let s;return function(n){n.Artificial="a",n.Renewal="r",n.Natural="n"}(s||(s={})),s})(),yy=(()=>{class s{constructor(){this.Yl=fn.Natural}setPageViewType(t){this.Yl=t}getPageViewType(){return this.Yl}getRequestParameters(){return{pvt:this.Yl}}}return s})();var Ey=(()=>{class s extends Tt{constructor(t,e,i,r,o){super(),this.S=t,this.K=e,this.Xl=i,this.w=r,this.ls=o}init(){this.Qw()}onStart(t){t?this.Zw():this.tb()}onStop(){}triggerArtificialPageView(t,e){this.isStarted?this.xf(t,e):ut(t)&&this.w.overridePath(t,e),this.isStarted||(this.K.emitTargetingRulesArtificialPageview(this.w.getUrl()),this.w.cleanupOverrideLifespan())}tb(){this.ls.setPageViewType(fn.Natural),this.S.emitBeforeNaturalPageView(this.w.getAnonymizedUrl()),this.Xl.send(),this.w.cleanupOverrideLifespan(),this.S.emitAfterNaturalPageView()}Zw(){this.ls.setPageViewType(fn.Renewal),this.S.emitBeforeNaturalPageView(this.w.getAnonymizedUrl()),this.Xl.send(),this.S.emitAfterNaturalPageView()}xf(t,e){let i=this.w.getAnonymizedUrl();this.ls.setPageViewType(fn.Artificial),this.S.emitArtificialPageViewEnd(),ut(t)&&this.w.overridePath(t,e),this.S.emitBeforeArtificialPageView(i,this.w.getAnonymizedUrl()),this.Xl.send(),this.w.cleanupOverrideLifespan(),this.S.emitAfterArtificialPageView()}Qw(){window.addEventListener("pageshow",t=>{this.isStarted&&t.persisted&&this.xf()})}}return s})(),Sy=window.navigator.language||window.navigator.userLanguage||window.navigator.browserLanguage||window.navigator.systemLanguage||"unknown";function vy(){return{la:Sy}}var _y=99999,wy=(()=>{class s{constructor(t){this.R=t,this.eb=this.sb()&&window.CSCurrentScript}ib(){let t=window.CSCurrentScript;if(!t)return null;let e=window.performance.getEntriesByName(t.src,"resource")[0];return!e||this.nb(e)?null:Math.round(e.responseEnd-e.fetchStart)}nb(t){let e=t.transferSize;return e!==void 0?e===0||e===300||e<t.encodedBodySize:t.connectStart===t.domainLookupEnd}getRequestParameters(){if(!this.eb||this.rb()!==1)return{};let t=this.ib();return t===null?{}:{dt:`${Math.min(t,_y)}`}}rb(){var t;return((t=this.R.getSession())===null||t===void 0?void 0:t.pageNumber)||null}sb(){return typeof window.performance=="object"&&typeof window.performance.getEntriesByName=="function"}}return s})(),Vl=["trackPageview"],qr=["setPath"],Wr=["setQuery"],rc=["referrer:maskUrl"],by=["referrer:removeQueryString"],Ty=["referrer:keepQueryString"],ur=s=>xe(s)&&s!==null,Ay=(s,n,t,e)=>{s.register(Vl,(i,r)=>{if(!A(i)){n.triggerArtificialPageView();return}ur(r)?n.triggerArtificialPageView(i,r):n.triggerArtificialPageView(i)}),s.register(qr,(i,r)=>{if(!A(i))throw new Ct(qr[0]);ur(r)?t.overridePath(i,r):t.overridePath(i)}),s.register(Wr,(i,r)=>{if(!A(i))throw new Ct(Wr[0]);ur(r)?t.overrideQuery(i,r):t.overrideQuery(i)}),e&&(s.register(rc,i=>{if(!A(i))throw new Ct(rc[0]);e.addUrlMaskingPattern(i)}),s.register(by,()=>e.enableRemoveQueryString()),s.register(Ty,()=>e.disableRemoveQueryString()))};var Ry=(()=>{class s{constructor(t,e,i,r,o,c,l,h,f,d,E,m,S,O,N){this.f=t,this.E=e,this.S=i,this.Ve=r,this.O=o,this.R=c,this.Is=l,this.bt=h,this.vt=f,this.w=d,this.ne=E,this.ls=m,this.K=S,this._e=O,this.nn=N}init(){let t=new Ys(this.f.getTrackerUri(),"pageview");this.ii=new Ey(this.S,this.K,t,this.w,this.ls),this.ii.init();let e=new Ti(this.Ve,this.O,Et,this.Is,this.w,this.bt,Zr,this.vt,this.ls,new wy(this.R),this.ne);this._e&&e.addProvider(this._e),this.nn&&e.addProvider(this.nn);let i=this.f.isCsCrosswritingHeap();if(i||this.f.isCsSideloadingHeap()||this.f.isHeapSideloadsCs()){let r=this.f.getHeapEnvId()||void 0;e.addProvider({getRequestParameters(){let o={cw:i?"1":"2"};return r&&(o.happid=r),o}})}t.setRequestParametersProviders(e),Ay(this.E,this.ii,this.w,this.Is)}start(t){this.ii.start(t)}onBeforeSessionRenewal(){this.ii.stop()}}return s})();function Cy(s,n){let t=!1,e=function(){if(!t)return s.apply(n,arguments)};return e.cancel=()=>t=!0,e}var Me=csSymbol(),Io=(()=>{class s{constructor(t){var e,i,r,o,c,l,h,f,d,E,m,S,O;this.A=t,this.Kl=null,this.Jl=null,this.Ql=null,this.Zl=null,this.th=null,this.ob=Ln(N=>this.processUpdateRulesInATick(N)),this.eh=null,this.ih=null,this.nh=null,this.A=N=>jt(()=>t(N)),typeof((i=(e=window.CSSStyleSheet)===null||e===void 0?void 0:e.prototype)===null||i===void 0?void 0:i.insertRule)=="function"&&(this.Kl=qt({target:window.CSSStyleSheet.prototype,methodName:"insertRule",hook:({context:N,args:v})=>{this.processInsertRule(N,v)}})),typeof((o=(r=window.CSSStyleSheet)===null||r===void 0?void 0:r.prototype)===null||o===void 0?void 0:o.deleteRule)=="function"&&(this.Jl=qt({target:window.CSSStyleSheet.prototype,methodName:"deleteRule",hook:({context:N,args:v})=>{this.processDeleteRule(N,v)}})),typeof((l=(c=window.CSSGroupingRule)===null||c===void 0?void 0:c.prototype)===null||l===void 0?void 0:l.insertRule)=="function"&&(this.Ql=qt({target:window.CSSGroupingRule.prototype,methodName:"insertRule",hook:({context:N})=>this.processUpdateRule(N)})),typeof((f=(h=window.CSSGroupingRule)===null||h===void 0?void 0:h.prototype)===null||f===void 0?void 0:f.deleteRule)=="function"&&(this.Zl=qt({target:window.CSSGroupingRule.prototype,methodName:"deleteRule",hook:({context:N})=>this.processUpdateRule(N)})),!((d=window.StyleSheet)===null||d===void 0)&&d.prototype&&"disabled"in window.StyleSheet.prototype&&(this.th=Cn(window.StyleSheet.prototype,"disabled",(N,v,_)=>{v!==_&&this.ab(N,v)})),typeof((m=(E=window.CSSStyleDeclaration)===null||E===void 0?void 0:E.prototype)===null||m===void 0?void 0:m.setProperty)=="function"&&(this.eh=qt({target:window.CSSStyleDeclaration.prototype,methodName:"setProperty",hook:({context:N})=>{let v=N.parentRule;v instanceof CSSStyleRule&&this.processUpdateRule(v)}})),typeof((O=(S=window.CSSStyleDeclaration)===null||S===void 0?void 0:S.prototype)===null||O===void 0?void 0:O.removeProperty)=="function"&&(this.ih=qt({target:window.CSSStyleDeclaration.prototype,methodName:"removeProperty",hook:({context:N})=>{let v=N.parentRule;v instanceof CSSStyleRule&&this.processUpdateRule(v)}})),Object.getOwnPropertyDescriptor(window.CSSStyleRule.prototype,"style")&&(this.nh=gf(window.CSSStyleRule.prototype,"style",N=>{this.processUpdateRule(N)}))}observe(){var t,e,i,r,o,c,l,h;(t=this.Kl)===null||t===void 0||t.activate(),(e=this.Jl)===null||e===void 0||e.activate(),(i=this.Ql)===null||i===void 0||i.activate(),(r=this.Zl)===null||r===void 0||r.activate(),(o=this.th)===null||o===void 0||o.activate(),(c=this.eh)===null||c===void 0||c.activate(),(l=this.ih)===null||l===void 0||l.activate(),(h=this.nh)===null||h===void 0||h.activate()}disconnect(){var t,e,i,r,o,c,l,h;(t=this.Kl)===null||t===void 0||t.deactivate(),(e=this.Jl)===null||e===void 0||e.deactivate(),(i=this.Ql)===null||i===void 0||i.deactivate(),(r=this.Zl)===null||r===void 0||r.deactivate(),(o=this.th)===null||o===void 0||o.deactivate(),(c=this.eh)===null||c===void 0||c.deactivate(),(l=this.ih)===null||l===void 0||l.deactivate(),(h=this.nh)===null||h===void 0||h.deactivate()}processInsertRule(t,[e,i]){if(t[Me]==null&&!t.ownerNode)return;let r={type:"cssRuleInserted",sheet:t,rule:e,index:i};this.A(r)}processUpdateRule(t){let e=t;for(;e.parentRule!==null;)e=e.parentRule;e.parentStyleSheet!==null&&this.ob.push(e)}processUpdateRulesInATick(t){for(let e of t){if(e.parentStyleSheet===null)return;let i=e.parentStyleSheet,r=csArray.prototype.indexOf.call(Ws(i.cssRules),e);if(r===-1)return;let o={type:"cssRuleUpdated",sheet:i,rule:e.cssText,index:r};this.A(o)}}processDeleteRule(t,[e]){if(t[Me]==null&&!t.ownerNode)return;let i={type:"cssRuleDeleted",sheet:t,index:e};this.A(i)}ab(t,e){if(t[Me]==null&&!t.ownerNode)return;let i={type:"cssStyleSheetDisabled",sheet:t,disabled:e};this.A(i)}}return tt([P()],s.prototype,"observe",null),tt([P()],s.prototype,"disconnect",null),tt([P()],s.prototype,"processInsertRule",null),tt([P()],s.prototype,"processUpdateRule",null),tt([P()],s.prototype,"processUpdateRulesInATick",null),tt([P()],s.prototype,"processDeleteRule",null),s})(),Iy=(()=>{class s{constructor(t){this.cb=1,this._a=new Set,this.rh=null,this.oh=null,this.nl=(e,i)=>{(i==="initial"||i==="added")&&this.setStyleSheets(e,e.adoptedStyleSheets)},this.lb=e=>{let i=e.sheet;if(this._a.has(i)){if(e.type==="cssRuleInserted"){let r={type:"adoptedStyleSheetRuleInserted",sheetId:i[Me],rule:e.rule,index:e.index};this.A(r)}else if(e.type==="cssRuleDeleted"){let r={type:"adoptedStyleSheetRuleDeleted",sheetId:i[Me],index:e.index};this.A(r)}else if(e.type==="cssRuleUpdated"){let r={type:"adoptedStyleSheetRuleUpdated",sheetId:i[Me],rule:e.rule,index:e.index};this.A(r)}else if(e.type==="cssStyleSheetDisabled"){let r={type:"adoptedStyleSheetDisabled",sheetId:i[Me],disabled:e.disabled};this.A(r)}}},this.A=e=>jt(async()=>{await Lc(2),t(e)}),this.de=new Zs(this.nl),"adoptedStyleSheets"in Document.prototype&&(this.rh=Cn(window.Document.prototype,"adoptedStyleSheets",(e,i)=>{this.setStyleSheets(e,i)})),"ShadowRoot"in window&&"adoptedStyleSheets"in window.ShadowRoot.prototype&&(this.oh=Cn(window.ShadowRoot.prototype,"adoptedStyleSheets",(e,i)=>{this.setStyleSheets(e,i)})),this.Lf=new Io(this.lb)}observe(){var t,e;this.setStyleSheets(document,document.adoptedStyleSheets),this.de.observe(),(t=this.rh)===null||t===void 0||t.activate(),(e=this.oh)===null||e===void 0||e.activate(),this.Lf.observe()}disconnect(){var t,e;this._a.clear(),this.de.disconnect(),(t=this.rh)===null||t===void 0||t.deactivate(),(e=this.oh)===null||e===void 0||e.deactivate(),this.Lf.disconnect()}setStyleSheets(t,e){if(!e.length)return;this.hb(e);let i=ke(e,o=>o[Me]),r={type:"adoptedStyleSheetsSet",target:t,sheetsIds:i};this.A(r)}hb(t){W(t,e=>{if(this._a.has(e))return;let i=this.cb++;e[Me]=i,this._a.add(e);let r=this.db(e),o={type:"adoptedStyleSheetRegistered",sheetId:i,cssRules:r,disabled:e==null?void 0:e.disabled};this.A(o)})}db(t){let e=[];try{e=ke(t.cssRules,i=>i.cssText)}catch{}return e}}return tt([P()],s.prototype,"observe",null),tt([P()],s.prototype,"disconnect",null),tt([P()],s.prototype,"setStyleSheets",null),s})(),Py=Rs(ky,"optimizeMutations"),Oy=csSymbol.for("ignoreNextSerialization");function Ny(){let s=new Set,n=new Set,t=new Set,e=new Set,i=new Map,r=new Map,o=new Map,c=new Set,l=new Set,h=new Map,f=new Set;return{isMovedNode(d){return s.has(d)},markAsMovedNode(d){f.delete(d),s.add(d)},isDetachedMove(d){return!!ot.findAncestor(d,E=>f.has(E),!0)},isAddedNode(d){let E=ot.findAncestor(d,m=>n.has(m)||l.has(m)||s.has(m),!0);return!!E&&!s.has(E)},isMovedNodeIntoAddedNode(d){return s.has(d)&&!!ot.findAncestor(d,E=>n.has(E)||l.has(E),!0)},markAsAddedNode(d){f.delete(d),l.delete(d),n.add(d)},markAsPendingInsert(d){l.add(d)},isPendingInsert(d){return l.has(d)},isRemovedNode(d){return!!ot.findAncestor(d,E=>t.has(E),!0)},markAsRemovedNode(d){t.add(d)},isUselessNode(d){return e.has(d)},markAsUselessNode(d){e.add(d)},getPlaceholder(d,E){let m=E==="previous"?r:i;return d&&m.has(d)?m.get(d)||null:d},getSiblings(d){let E=d.addedNodes.length,m=this.getPlaceholder(d.previousSibling,"previous"),S=this.getPlaceholder(d.nextSibling,"next");if(E){let O=m,N=S,v=d.previousSibling!==m,_=d.nextSibling!==S;for(let M=0;M<E;M++){let k=d.addedNodes[M],T=d.addedNodes[E-M-1];this.isLatestNodeMutation(k,d)?(r.delete(k),d.previousSibling&&v&&(i.set(d.previousSibling,k),v=!1),O=k):r.set(k,O),this.isLatestNodeMutation(T,d)?(i.delete(T),d.nextSibling&&_&&(r.set(d.nextSibling,T),_=!1),N=T):i.set(T,N)}}else d.previousSibling&&d.previousSibling!==m&&i.set(d.previousSibling,S),d.nextSibling&&d.nextSibling!==S&&r.set(d.nextSibling,m);return{previousSibling:m,nextSibling:S}},setAttributeMutation(d,E){let m=o.get(d)||new Set;m.add(E),o.set(d,m)},isAttributeMutated(d,E){var m;return!!(!((m=o.get(d))===null||m===void 0)&&m.has(E))},setLatestNodeMutation(d,E){h.set(d,E)},isLatestNodeMutation(d,E){return h.get(d)===E},markAsFutureAddedNode(d){h.has(d)||f.add(d)},isTextMutated(d){return c.has(d)},setTextMutated(d){return c.add(d)}}}function My(s,n){for(let t=0;t<s.addedNodes.length;t++){let e=s.addedNodes[t];n.markAsFutureAddedNode(e),n.setLatestNodeMutation(e,s)}for(let t=0;t<s.removedNodes.length;t++){let e=s.removedNodes[t];n.setLatestNodeMutation(e,s)}}function ky(s){let n=Ny(),t=[];for(let e of s)e.type==="childList"&&My(e,n);for(let e of s)switch(e.type){case"attributes":xy(e,n,t);break;case"characterData":Dy(e,n,t);break;case"childList":Vy(e,n,t);break}return t}function Dy(s,n,t=[]){let e=s.target;return ot.isConnected(e)&&!n.isTextMutated(e)&&!n.isAddedNode(e)&&!Uy(e,"characterData")&&(n.setTextMutated(e),csArray.prototype.push.call(t,s)),t}function xy(s,n,t=[]){let e=s.target,i=`${s.attributeNamespace}/${s.attributeName}`;return ot.isConnected(e)&&!n.isAttributeMutated(e,i)&&!n.isAddedNode(e)&&(n.setAttributeMutation(e,i),csArray.prototype.push.call(t,s)),t}var Ly=30;function Uy(s,n,t){let e=csSymbol.for(t?`${n}:${t}`:n),i=C.now(),r=s[e];return r&&i<r?!0:(s[e]=i+Ly,!1)}function Vy(s,n,t=[]){let e=ot.isConnected(s.target),i=!e&&n.isRemovedNode(s.target),r=e&&n.isAddedNode(s.target),o=n.getSiblings(s),c=o.nextSibling,l=o.previousSibling,h=null,f=()=>{if(h){let{childListType:m,movedNodes:S,...O}=h;csArray.prototype.push.call(t,m==="added"?O:{...O,movedNodes:S}),h=null}},d=m=>m===(h==null?void 0:h.childListType)?h:(f(),{childListType:m,type:"childList",target:s.target,addedNodes:[],removedNodes:[],movedNodes:[],previousSibling:l,nextSibling:c});if(e){for(let m=0;m<s.addedNodes.length;m++){let S=s.addedNodes[m];n.isLatestNodeMutation(S,s)?(n.isMovedNode(S)?(h=d("moved"),csArray.prototype.push.call(h.movedNodes,S)):(n.markAsAddedNode(S),r||(h=d("added"),csArray.prototype.push.call(h.addedNodes,S))),l=S):ot.isConnected(S)?n.isMovedNode(S)||n.markAsPendingInsert(S):n.markAsUselessNode(S)}f()}let E=vi(s.removedNodes,m=>{if(ot.isConnected(m)){if(!i&&!n.isPendingInsert(m)){if(n.isDetachedMove(m))return!0;n.markAsMovedNode(m),n.isMovedNodeIntoAddedNode(m)&&(m[Oy]=!0)}return!1}return n.isUselessNode(m)?!1:(n.markAsRemovedNode(m),!0)});return E.length&&csArray.prototype.push.call(t,{type:"childList",removedNodes:E,addedNodes:[],movedNodes:[],target:s.target,nextSibling:c,previousSibling:l}),t}var jy=(()=>{class s{constructor(t){this.A=t,this.ah=!1,this.pb=e=>{e.sheet.ownerNode&&(e.type==="cssRuleInserted"?this.A({type:e.type,target:e.sheet.ownerNode,rule:e.rule,index:e.index}):e.type==="cssRuleDeleted"?this.A({type:e.type,target:e.sheet.ownerNode,index:e.index}):e.type==="cssRuleUpdated"?this.A({type:e.type,target:e.sheet.ownerNode,rule:e.rule,index:e.index}):e.type==="cssStyleSheetDisabled"&&this.A({type:e.type,target:e.sheet.ownerNode,disabled:e.disabled}))},this.A=e=>jt(()=>t(e)),this.Uf=new Io(e=>jt(async()=>{await Lc(),this.pb(e)})),"adoptedStyleSheets"in Document.prototype&&(this.Vf=new Iy(t))}observe(){var t;this.ah=!1,this.D=new ce(e=>this.fb(e),(e,i)=>{i==="added"&&this.gb(e)}),this.D.observe(),this.Uf.observe(),(t=this.Vf)===null||t===void 0||t.observe()}disconnect(){var t,e;(t=this.D)===null||t===void 0||t.disconnect(),this.Uf.disconnect(),(e=this.Vf)===null||e===void 0||e.disconnect(),this.ah=!0}fb(t){if(this.ah)return;let e=Py(t);for(let i=0;i<e.length;i++){let r=e[i];if(!r){it.error("processRawMutations: empty record");continue}switch(r.type){case"attributes":this.processAttributeChanged(r);break;case"characterData":this.processCharacterDataChanged(r);break;case"childList":this.processChildListChanged(r);break;default:it.error(`processRawMutations: unknown record type '${r.type}'`);break}}}processAttributeChanged(t){let e={type:"attributeChanged",target:t.target,attribute:t.attributeName,namespace:t.attributeNamespace,oldValue:t.oldValue,newValue:ot.getAttributeNS(t.target,t.attributeNamespace,t.attributeName)};this.A(e)}processCharacterDataChanged(t){let e={type:"characterDataChanged",target:t.target,oldValue:t.oldValue,newValue:t.target.data};this.A(e)}processChildListChanged(t){var e,i,r;if(!((e=t.movedNodes)===null||e===void 0)&&e.length){let o={type:"nodesMoved",target:t.target,nodes:t.movedNodes,previousSibling:t.previousSibling,nextSibling:t.nextSibling};this.A(o)}if(!((i=t.addedNodes)===null||i===void 0)&&i.length){let o={type:"nodesAdded",target:t.target,previousSibling:t.previousSibling,nextSibling:t.nextSibling,nodes:Ws(t.addedNodes)};this.A(o)}if(!((r=t.removedNodes)===null||r===void 0)&&r.length){let o={type:"nodesRemoved",target:t.target,nodes:ke(t.removedNodes,c=>c)};this.A(o)}}gb(t){let e={type:"shadowRootAttached",target:t.host,shadowRoot:t};this.A(e)}}return tt([P()],s.prototype,"processAttributeChanged",null),tt([P()],s.prototype,"processCharacterDataChanged",null),tt([P()],s.prototype,"processChildListChanged",null),s})(),Po=(()=>{class s{constructor(t){this.type="asyncEvent",this.ch=!1,t&&t(e=>this.resolve(e))}resolve(t){if(this.ch)throw new Error("AsyncEvent already resolve.");t.timestamp==null&&(t={...t,timestamp:this.timestamp}),this.Xs=t,this.ch=!0,this.A&&this.A(this.Xs)}complete(t){this.ch&&t(this.Xs),this.A=t}wait(){return new Promise(t=>this.complete(t))}}return s})(),Hy=cg(),By=(()=>{class s extends le{constructor(){super(...arguments),this.wa=!1}onStart(){this.wa=!0,this.A=Cy(this.mb,this),this.G=new jy(this.A),this.G.observe();let t=yt.mutations.initialDOM.asyncMeasure(),e=()=>{this.wa=!1,hg(),t()};this.produceEvent(new Po(i=>Hy(document,r=>{e(),i({type:"DomEvent",domEvent:"initialDOM",initialDOM:r})})))}onStop(){var t,e;this.wa=!1,(t=this.A)===null||t===void 0||t.cancel(),(e=this.G)===null||e===void 0||e.disconnect()}qt(t,e){let i={type:"DomEvent",domEvent:e.type,target:0,targetProps:{}};return"target"in e&&(i.target=rt(e.target),i.targetProps=st.getProperties(e.target)),[e,i]}mb(t){if(!this.yb(t))switch(t.type){case"attributeChanged":{let[e,i]=this.qt(t.type,t);i.attribute=e.attribute,i.isSvg=Qs(e.target),i.namespace=e.namespace,i.newValue=e.newValue,i.oldValue=e.oldValue,i.localName=di(e.target),i.linkRel=Hc(e.target)?e.target.rel:null,i.parentLocalName=e.target.parentElement?di(e.target.parentElement):void 0,i.localName==="input"&&(i.inputType=e.target.getAttribute("type")),this.produceEvent(i)}break;case"characterDataChanged":{let[e,i]=this.qt(t.type,t);i.newValue=e.newValue,i.oldValue=e.oldValue,i.targetNodeType=e.target.nodeType,i.parentLocalName=e.target.parentElement?di(e.target.parentElement):null,i.parentProps=e.target.parentElement?st.getProperties(e.target.parentElement):void 0,this.produceEvent(i)}break;case"nodesAdded":{let[e,i]=this.qt(t.type,t);i.targetLocalName=dt(e.target)?di(e.target):null,i.nextSibling=e.nextSibling?rt(e.nextSibling):null,i.previousSibling=e.previousSibling?rt(e.previousSibling):null,yt.mutations.serializedMutations.measure(()=>{i.nodes=ke(e.nodes,Ur)}),this.produceEvent(i);break}case"nodesMoved":{let[e,i]=this.qt(t.type,t);i.previousSibling=e.previousSibling?rt(e.previousSibling):null,i.nextSibling=e.nextSibling?rt(e.nextSibling):null,i.nodesIds=ke(e.nodes,rt),this.produceEvent(i);break}case"nodesRemoved":{let[e,i]=this.qt(t.type,t);i.nodesIds=ke(e.nodes,rt),this.produceEvent(i);break}case"shadowRootAttached":{let[e,i]=this.qt(t.type,t);i.shadowRoot=gi(e.shadowRoot),this.produceEvent(i);break}case"cssRuleInserted":{let[e,i]=this.qt(t.type,t);i.index=e.index,i.rule=e.rule,this.produceEvent(i);break}case"cssRuleDeleted":{let[e,i]=this.qt(t.type,t);i.index=e.index,this.produceEvent(i);break}case"cssRuleUpdated":{let[e,i]=this.qt(t.type,t);i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case"cssStyleSheetDisabled":{let[e,i]=this.qt(t.type,t);i.disabled=e.disabled,this.produceEvent(i);break}case"adoptedStyleSheetRegistered":{let[e,i]=this.qt(t.type,t);i.sheetId=e.sheetId,i.cssRules=e.cssRules,i.disabled=e.disabled,this.produceEvent(i);break}case"adoptedStyleSheetsSet":{let[e,i]=this.qt(t.type,t);i.sheetsIds=e.sheetsIds,this.produceEvent(i);break}case"adoptedStyleSheetRuleInserted":{let[e,i]=this.qt(t.type,t);i.sheetId=e.sheetId,i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetRuleDeleted":{let[e,i]=this.qt(t.type,t);i.sheetId=e.sheetId,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetRuleUpdated":{let[e,i]=this.qt(t.type,t);i.sheetId=e.sheetId,i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetDisabled":{let[e,i]=this.qt(t.type,t);i.sheetId=e.sheetId,i.disabled=e.disabled,this.produceEvent(i);break}}}ba(t){return this.wa&&!st.getProperty(t,fi)}yb(t){switch(t.type){case"nodesAdded":case"nodesMoved":case"nodesRemoved":case"shadowRootAttached":return this.ba(t.target)||x.isMaskedElement(t.target)||x.isMaskedElementChild(t.target);case"characterDataChanged":{let e=t.target.parentElement;return e!==null&&(this.ba(e)||x.isMaskedElement(e)||x.isMaskedElementChild(e))}case"attributeChanged":return this.ba(t.target)||x.isMaskedElementChild(t.target)||x.isMaskedAttribute(t.target,t.attribute);case"cssRuleInserted":case"cssRuleDeleted":case"cssRuleUpdated":case"cssStyleSheetDisabled":return this.ba(t.target)||x.isMaskedElementChild(t.target);default:return!1}}}return s})(),ji=(()=>{let s;return function(n){function t(e){return e.type==="DomEvent"}n.isDOMEvent=t}(s||(s={})),s})(),ei=(()=>{class s{constructor(){this.ce=[]}start(){}stop(){this.ce.length=0,this.ce=[]}pushEvent(t){if(s.pendingEvents++,this.isListening(t)){let e=this.ce;csSetTimeout(()=>{let r=ls("Processor:processEvent",o=>this.processEvent(o))(t);r!=null&&csArray.prototype.forEach.call(e,o=>o(r)),s.pendingEvents--})}else csSetTimeout(()=>{csArray.prototype.forEach.call(this.ce,e=>e(t))})}subscribe(t){return csArray.prototype.push.call(this.ce,t),()=>{this.ce=csArray.prototype.filter.call(this.ce,e=>e!==t)}}emitEvent(t){jt(()=>csArray.prototype.forEach.call(this.ce,e=>e(t)))}}return s.pendingEvents=0,s})(),Fy=(()=>{class s extends ei{isListening(t){return ji.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded")}processEvent(t){let e=0,i=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes;for(let r of i){if(r instanceof js){let c=x.getMaskedAttributeDetails(r);r.attributes=this.$o(r,c)}if(x.getMaskedElementDetails(r).state===x.MaskedElementState.Child){if(t.domEvent==="initialDOM")return null;t.nodes=csArray.prototype.filter.call(t.nodes,c=>c!==r);continue}st.traverse(r,c=>{if(c instanceof js){let l=x.getMaskedAttributeDetails(c);c.attributes=this.$o(c,l);let h=x.getMaskedElementDetails(c);h.state===x.MaskedElementState.Parent&&(this.Kc(c,h),e++)}})}return e>0&&G.counters.sensitiveElements.count("masked-elements",e),t}$o(t,e){return e.attributes.length===0?t.attributes:csArray.prototype.filter.call(t.attributes,i=>csArray.prototype.indexOf.call(e.attributes,i.name)===-1)}Kc(t,e){let i=`width: ${e.width}px !important; height: ${e.height}px !important;`;t.children=[],t.shadowRoot=void 0,csArray.prototype.push.call(t.attributes,{name:"style",value:i,namespaceURI:""}),js.getAttribute(t,"data-cs-mask")||csArray.prototype.push.call(t.attributes,{name:"data-cs-mask",value:"",namespaceURI:""})}}return oe([It("MaskedElementProcessor.processEvent")],s.prototype,"processEvent",null),s})(),$y=(()=>{class s{constructor(t){this.A=t,this.Ps=new ki,this.Eb=e=>{jt(()=>{for(let i of e)i.type==="childList"&&W(i.addedNodes,r=>{$t(r,NodeFilter.SHOW_TEXT).visitAll(c=>{this.Ps.has(c)||(this.Ps.add(c),this.A(c))})})})},this.Ur=new ce(this.Eb)}observe(){this.Ur.observe(),$t(document,NodeFilter.SHOW_TEXT).visitAll(e=>{this.Ps.add(e),this.A(e)})}disconnect(){this.Ps.clear(),this.Ur.disconnect()}}return s})(),zy=(()=>{class s extends le{constructor(){super(),this.ni=new Set,this.lh=new Set,this.hh=new Set,this.Qe=!1,this.Ct=new cs,this.jf=new $y(t=>{let e=ot.getParentElement(t);!e||!e.isConnected||x.isMaskedElement(e)||x.isMaskedElementChild(e)||ll.shouldEncrypt(e)||Ne.isEditableNode(e)||Pi(e)||Oi(e)||kn(e)||On(t.data)||(this.ni.add(e),this.watchElements())})}onStart(){cs.isSupported()&&(this.Ct.start((t,e)=>this.onVisibilityChanged(t,e)),this.jf.observe())}onStop(){cs.isSupported()&&(this.Ct.stop(),this.jf.disconnect(),this.ni.clear(),this.lh.clear(),this.hh.clear())}setAnonymization(t){this.Qe=t}watchElements(){if(!this.isStarted)return;let t=this.ni;this.ni=new Set;for(let e of Ue(t))!e.isConnected||this.lh.has(e)||(this.lh.add(e),Si(csNodechildNodes.apply(e),i=>i.nodeType===3)&&this.Ct.observe(e))}onVisibilityChanged(t,e){e!==Fs.VisibleInViewPort||this.Qe&&!ge.isWhitelistedElement(t)||W(csNodechildNodes.apply(t),i=>{if(i.nodeType!==3)return;let r=i.data;this.hh.has(r)||(this.hh.add(r),this.produceEvent({type:"TextVisibility",text:r,state:e}))})}}return oe([P(),Di({wait:50,mode:"trailing"})],s.prototype,"watchElements",null),oe([P()],s.prototype,"onVisibilityChanged",null),s})(),oc=(()=>{let s;return function(n){function t(e){return e.type==="TextVisibility"}n.isTextVisibilityEvent=t}(s||(s={})),s})(),Gy=(()=>{class s extends ei{constructor(t,e,i,r=null,o=!1){super(),this.M=i,this.zo=r,this.captureAnonymizedPlaceholders=o,this.Ta=new yg(t,e,i,r,o)}setAnonymization(t){this.Ta.setAnonymization(t)}isListening(t){return oc.isTextVisibilityEvent(t)||ji.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="attributeChanged"||t.domEvent==="characterDataChanged")}processEvent(t){if(oc.isTextVisibilityEvent(t))return t.text=this.M.checkAndAnonymizePII(t.text,this.zo),t;switch(t.domEvent){case"initialDOM":case"nodesAdded":this.uh(t);break;case"attributeChanged":this.Sb(t);break;case"characterDataChanged":this.vb(t);break}return t}uh(t){let e=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes,i;t.domEvent==="nodesAdded"&&(i={targetLocalName:t.targetLocalName,targetProps:t.targetProps});for(let r of e)this.Ta.sanitize(r,i)}Sb(t){if(!t.isSvg&&t.newValue){if(t.localName===null){t.newValue="";return}t.newValue=this.Ta.getAnonymizedAttributeValue(t.localName,t.attribute,t.newValue,t.inputType)}}vb(t){t.newValue=this.Ta.getAnonymizedValue(t.newValue,t.parentLocalName,t.parentProps).anonymizedValue}}return oe([It("AnonymizedTextProcessor.processEvent")],s.prototype,"processEvent",null),s})();function Oo(s){let n=csString.prototype.trim.call(s);if(s==="")return[];let[t,e]=qy(n);return e?(Js(t,",")||(e=Wy(e)),[ac(t),...Oo(e)]):[ac(t)]}function qy(s){return csString.prototype.split.call(s,/\s(.+)/)}function ac(s){return csString.prototype.split.call(s,/,$/)[0]}function Wy(s){return csString.prototype.split.call(s,/,(.+)/)[1]||""}var Yy=/(@import\s*("([^"]+)"|'([^']+)'))|(url\s*\(\s*((("([^"\]]+)"|'([^'\]]+)')\s*)|([^)\]]+))\)(?!\\))/g;function Xy(s,n){return csString.prototype.replace.call(s,Yy,(...e)=>{let i=e[3]||e[4],r=e[9]||e[10]||e[11],o=Jy((i||r).trim()),c=i?"@import ":"",l=n(o)||o;return`${c}url(${Ky(l)})`})}function Ky(s){return csString.prototype.indexOf.call(s,'"')===-1?`"${s}"`:csString.prototype.indexOf.call(s,"'")===-1?`'${s}'`:s}function mi(s){let n=new Set;return Xy(s,t=>{var e,i;return n.add((i=(e=csString.prototype.match.call(t,/^["|'](.*)?["|']$/))===null||e===void 0?void 0:e[1])!==null&&i!==void 0?i:t),t}),Ue(n)}function Jy(s){let n=/(\\)*\\(?:([a-fA-F0-9]{1,6})|(.))[\n\t\x20]?/g;return csString.prototype.replace.call(s,n,(t,e,i,r)=>{if(e==="\\")return csString.prototype.slice.call(t,1);if(r)return r;let o=parseInt(i,16);return 55296<=o&&o<=57343||o===0||o>1114111?"\uFFFD":csString.fromCodePoint(o)})}var cc=(()=>{class s{static async toStaticResourceEvent(t,e,i){let r=await s.Tb(t);if(!r)return null;let o=await s.Bf(r),c=te(t)?void 0:t,l={type:"StaticResourceManagerEvent",timestamp:i,resourceId:e,resource:{hash:o,data:r}};return c&&(l.originalResourceName=c),l}static async toCSSStaticResourceEvent(t,e,i,r){let o=await s.Ab(t,r),c=Ee(t),l=o.get(c);if(!l)return null;let h={type:"StaticResourceManagerEvent",timestamp:i,resourceId:e,resource:{hash:l.hash,data:l.data}};return o.delete(c),o.size&&(h.nestedResources=[],o.forEach(f=>{f&&csArray.prototype.push.call(h.nestedResources,{hash:f.hash,data:f.data})})),h}static async Bf(t){let e=await t.arrayBuffer(),i=await crypto.subtle.digest(this.Ff,e);return yn(i)}static async Tb(t){let e;if(!te(t))e=await(await window.fetch(t)).blob();else{let i=aa(t);if(!i)return null;e=i}return e}static async Ab(t,e){let i=new Map,r=Ee(t),c=[{resourceRawPath:t,resourceAbsolutePath:r}];for(;c.length>0;){let l=csArray.prototype.pop.call(c);if(!e&&l.resourceAbsolutePath!==null&&!te(l.resourceAbsolutePath)){i.set(l.resourceAbsolutePath,null);continue}if(i.get(l.resourceAbsolutePath)===void 0)try{if(l.resourceRawPath===null||csString.prototype.indexOf.call(l.resourceRawPath,".css")>0){if(!l.data){let m=await fetch(l.resourceAbsolutePath);l.data=await m.text()}l.nestedResources||(l.nestedResources=mi(l.data));let d=!1,E=!1;for(let m of l.nestedResources){let S=te(m)?m:l.resourceAbsolutePath?Op(m,l.resourceAbsolutePath):Ee(m),O=i.get(S);if(O!==void 0){if(O!==null){let v=s.Rb(O,m);l.data=K.stringReplaceAll(l.data,m,v)}continue}me(c,v=>v.resourceAbsolutePath===S)!==void 0||(d=!0,E||(csArray.prototype.push.call(c,l),E=!0),csArray.prototype.push.call(c,{resourceRawPath:m,resourceAbsolutePath:S}))}if(!d){let m=await s.Cb(l.data);i.set(l.resourceAbsolutePath,{hash:m.hash,data:m.data})}}else{let d;if(!te(l.resourceAbsolutePath))d=await(await fetch(l.resourceAbsolutePath)).blob();else{let m=aa(l.resourceAbsolutePath);if(!m){i.set(l.resourceAbsolutePath,null);continue}d=m}let E=await s.Bf(d);i.set(l.resourceAbsolutePath,{hash:E,data:d})}}catch{i.set(l.resourceAbsolutePath,null)}}return i}static Rb(t,e){let i=`cs://resources/${t.hash}`;return te(e)||(i+=`?${s.fh}=${e}`),i}static async Cb(t){let e=new Blob([t],{type:"text/css"}),i=await e.arrayBuffer(),r=await crypto.subtle.digest(s.Ff,i);return{data:e,hash:yn(r)}}}return s.Ff="SHA-256",s.fh="original-resource-name",s})(),Yr=(()=>{class s extends ei{constructor(){super(),this.Aa="cssrm://",this.we=0,this.Os=!1}isListening(t){return!s.isSupported()||!ji.isDOMEvent(t)?!1:t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="attributeChanged"||t.domEvent==="characterDataChanged"}processEvent(t){switch(t.domEvent){case"initialDOM":case"nodesAdded":this.Ib(t);break;case"attributeChanged":this.Pb(t);break;case"characterDataChanged":this.Ob(t);break}return t}disableOnlineAssets(){this.Os=!1}enableOnlineAssets(){this.Os=!0}isOnlineAssetsActivated(){return this.Os}Ib(t){let e=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes;for(let i of e)st.traverse(i,(r,o)=>{if(r.nodeType===bi.TEXT_NODE&&o){this.Nb(r,o.localName);return}if(!js.isElement(r))return;let c=me(r.attributes,l=>l.name==="style");if(c&&(c.value=this.Ra(c.value)),this.Mb(r)||this.kb(r,o)){let l=me(r.attributes,f=>f.name==="src");l&&l.value&&(l.value=this.$f(l.value));let h=me(r.attributes,f=>f.name==="srcset");if(h){h.value=this.zf(h.value);return}}if(this.Db(r)&&this.Os){let l=me(r.attributes,h=>h.name==="href");if(!l||!l.value)return;this.we++,this.Pn(Ee(l.value),this.we,!0),this.xb(r,l,this.we)}})}xb(t,e,i){csArray.prototype.push.call(t.attributes,{name:"data-cs-original-href",namespaceURI:"",value:e.value}),e.value=this.Aa+i}Nb(t,e){if(!t||e!=="style")return;let i=this.Ra(t.data);i!==null&&(t.data=i)}Ob(t){if(t.parentLocalName!=="style"||!t.newValue)return;let e=this.Ra(t.newValue);e!==null&&(t.newValue=e)}Pb(t){if(!t.newValue||t.newValue===t.oldValue)return;let e=t.attribute==="src",i=t.attribute==="srcset";if(t.attribute==="style"){t.newValue=this.Ra(t.newValue);return}if(!e&&!i)return;let o=t.localName==="img",c=t.localName==="source"&&t.parentLocalName&&t.parentLocalName==="picture";!o&&!c||(e&&(t.newValue=this.$f(t.newValue)),i&&(t.newValue=this.zf(t.newValue)))}$f(t){return te(t)||this.Os?(this.we++,this.Pn(t,this.we,!1,C.now()),this.Aa+this.we):t}zf(t){if(!this.Os)return t;let e=t,i=Oo(t),r=C.now();for(let o of i)this.we++,this.Pn(Ee(o),this.we,!1,r),e=csString.prototype.replace.call(e,o,this.Aa+this.we);return e}Ra(t){let e=mi(t),i=t,r=C.now();for(let o of e){let c=te(o);if(!(c||this.Os)||this.Lb(o))continue;this.we++,i=csString.prototype.replace.call(i,o,this.Aa+this.we);let l=Kd(o);c?this.Pn(o,this.we,!1,r):this.Os&&(l?this.Pn(o,this.we,!0,r):this.Pn(Ee(o),this.we,!1,r))}return i}Pn(t,e,i,r=C.now()){let o=i?cc.toCSSStaticResourceEvent:cc.toStaticResourceEvent,c=new Po(async l=>{try{let h=await o(t,e,r,this.Os);l(h||{type:"warning",message:`Failed to process static resource: ${t}`})}catch(h){l({type:"warning",message:h})}});this.emitEvent(c)}Mb(t){return t.localName==="img"}kb(t,e){return t.localName==="source"&&!!e&&e.localName==="picture"}Db(t){return t.localName==="link"&&csArray.prototype.some.call(t.attributes,e=>e.name==="rel"&&e.value==="stylesheet")}static isSupported(){return Dc()&&so()&&!!csArray.from}Lb(t){return csString.prototype.replace.call(t,/['"]+/g,"").length===0}}return oe([It("StaticResourceManagerProcessor.processEvent")],s.prototype,"processEvent",null),s})(),Qy=(()=>{class s extends ei{constructor(t){super(),this.J=t}isListening(t){return ji.isDOMEvent(t)&&t.domEvent==="initialDOM"}processEvent(t){return t.domEvent==="initialDOM"&&(t.initialDOM.baseURI=this.J.anonymizeUrl(t.initialDOM.baseURI)),t}}return oe([It("UrlAnonymizationProcessor.processEvent")],s.prototype,"processEvent",null),s})(),dr="textarea",Zy=(()=>{class s extends ei{isListening(t){return ji.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="characterDataChanged")}processEvent(t){switch(t.domEvent){case"initialDOM":this.Ub(t);break;case"nodesAdded":this.Vb(t);break;case"characterDataChanged":this.jb(t);break}return t}Ub(t){st.traverse(t.initialDOM,(e,i)=>{(this.Gf(e,i)||this.qf(e))&&(e.data=this.gh(e.data))})}Vb(t){for(let e of t.nodes)st.traverse(e,(i,r)=>{(this.Hb(i,r,t)||this.qf(i))&&(i.data=this.gh(i.data))})}jb(t){var e;(t.parentLocalName===dr||!((e=t.targetProps)===null||e===void 0)&&e.editableNode)&&(t.newValue=this.gh(t.newValue))}gh(t){return csString.prototype.replace.call(t,/\S/g,"\u2022")}Hb(t,e,i){return this.Bb(t,i)||this.Gf(t,e)}Bb(t,e){return t.nodeType===3&&e.targetLocalName===dr}Gf(t,e){return t.nodeType===3&&X(e)&&e.localName===dr}qf(t){return t.nodeType===3&&Ne.isEditableNode(t)}}return oe([It("AnonymizedEditableTextProcessor.processEvent")],s.prototype,"processEvent",null),s})(),tE=(()=>{class s{constructor(t){this.A=t,this.zt={boundElement:window,type:"resize",listener:()=>this.resizeListener()},this.A=t}observe(){gt(this.zt),this.mh()}mh(){this.resizeListener()}disconnect(){mt(this.zt)}resizeListener(){let t={width:Et.windowWidth(),height:Et.windowHeight()};this.A(t)}}return tt([P("resize")],s.prototype,"resizeListener",null),s})(),es=(()=>{let s;return function(n){n.PORTRAIT="Portrait",n.LANDSCAPE="Landscape"}(s||(s={})),s})(),on=(()=>{let s;return function(n){n.PORTRAIT_PRIMARY="portrait-primary",n.PORTRAIT_SECONDARY="portrait-secondary",n.LANDSCAPE_PRIMARY="landscape-primary",n.LANDSCAPE_SECONDARY="landscape-secondary"}(s||(s={})),s})(),an=(()=>{let s;return function(n){n[n.PORTRAIT=0]="PORTRAIT",n[n.PORTRAIT_REVERSE=180]="PORTRAIT_REVERSE",n[n.LANDSCAPE=-90]="LANDSCAPE",n[n.LANDSCAPE_REVERSE=90]="LANDSCAPE_REVERSE"}(s||(s={})),s})(),eE=(()=>{let s;return function(n){let t=null;n.isScreenOrientationApiSupported=()=>{var c;return t!=null?t:t=!!(!((c=Z.screen)===null||c===void 0)&&c.orientation)},n.isDeprecatedScreenOrientationApiSupported=()=>"orientation"in Z;function e(){return es.LANDSCAPE}function i(){var c;switch((c=Z.screen.orientation)===null||c===void 0?void 0:c.type){case on.PORTRAIT_PRIMARY:case on.PORTRAIT_SECONDARY:return es.PORTRAIT;case on.LANDSCAPE_PRIMARY:case on.LANDSCAPE_SECONDARY:return es.LANDSCAPE;default:return es.PORTRAIT}}function r(){switch(window.orientation){case an.PORTRAIT:case an.PORTRAIT_REVERSE:return es.PORTRAIT;case an.LANDSCAPE:case an.LANDSCAPE_REVERSE:return es.LANDSCAPE;default:return es.PORTRAIT}}function o(){return n.isScreenOrientationApiSupported()?i():n.isDeprecatedScreenOrientationApiSupported()?r():e()}n.getCurrentOrientation=o}(s||(s={})),s})(),sE=(()=>{class s extends le{constructor(){super(...arguments),this.yh=null,this.Eh=null,this.js=new tE(t=>{this.produceEvent({...t,type:"viewportResize"}),this.onScreenPotentiallyChanged()})}onScreenPotentiallyChanged(){let t=eE.getCurrentOrientation(),{screenWidth:e,screenHeight:i}=this.Fb(t);if(e!==this.yh||i!==this.Eh){this.yh=e,this.Eh=i;let r={type:"screenResize",width:e,height:i};this.produceEvent(r)}}Fb(t){let e,i,r=Et.screenWidth(),o=Et.screenHeight();return t===es.PORTRAIT?(e=r,i=o):(e=Math.max(r,o),i=Math.min(r,o)),{screenWidth:e,screenHeight:i}}onStart(){this.js.observe()}onStop(){this.yh=null,this.Eh=null,this.js.disconnect()}}return s})();function iE(s){let n=csEventtarget.apply(s);return n&&dt(n)&&csElementshadowRoot.apply(n)&&s.composedPath?s.__csOriginalTarget||s.composedPath()[0]:n}var nE=(()=>{class s extends le{constructor(){super(),this.Wf=t=>{let e=iE(t);e&&this.Sh(e,t.type)},this.de=new Zs((t,e)=>{switch(e){case"initial":case"added":this.Yf(t);break;case"removed":this.Xf(t);break}}),this.B=new ae((t,e)=>{(e==="initial"||e==="added")&&this.$b(t)})}static shouldProcessElement(t){return t.tagName==="VIDEO"&&ot.isConnected(t)&&!x.isMaskedElement(t)&&!x.isMaskedElementChild(t)}static isPlaying(t){return!t.paused&&!t.ended}onStart(){this.Yf(document),this.de.observe(),this.B.observe("video")}onStop(){this.Xf(document),this.de.disconnect(),this.B.disconnect()}Sh(t,...e){if(this.isStarted&&s.shouldProcessElement(t))for(let i of e){let r=rt(t),o={type:"VideoEvent",videoEventType:i,nodeId:r};i==="seeked"&&(o.newTimePositionInSec=t.currentTime),io(()=>this.produceEvent(o))}}$b(t){for(let e of t)this.Sh(e,"seeked"),s.isPlaying(e)&&this.Sh(e,"play")}Yf(t){for(let e of["play","pause","seeked"])gt({type:e,listener:this.Wf,boundElement:t})}Xf(t){for(let e of["play","pause","seeked"])mt({type:e,listener:this.Wf,boundElement:t})}}return s})();function rE(s){return s.nodeName==="SELECT"}function No(s){return s.nodeName==="INPUT"}function oE(s){return s.nodeName==="TEXTAREA"||No(s)&&!jl(s)&&!Hl(s)}function jl(s){return No(s)&&s.type==="number"}function Hl(s){return No(s)&&(s.type==="checkbox"||s.type==="radio")}var aE=(()=>{class s extends le{constructor(t){super(),this.ot=t,this.vh=new cf("low"),this.On=e=>this.inputHandler(e),this.Oi=[],this.zb(),this.Gb(),this.B=new ae(e=>{for(let i of e)this._h(i)&&jt(()=>{this.bh(i,rt(i))},"low")}),this.de=new Zs((e,i)=>{switch(i){case"initial":case"added":gt({type:"change",listener:this.On,boundElement:e});break;case"removed":mt({type:"change",boundElement:e,listener:this.On});break}})}onStart(){gt({type:"keyup",boundElement:document,listener:this.On}),gt({type:"change",boundElement:document,listener:this.On}),W(this.Oi,t=>t.activate()),this.B.observe(csArray.prototype.join.call(s.qb,",")),this.de.observe()}onStop(){mt({type:"keyup",boundElement:document,listener:this.On}),mt({type:"change",boundElement:document,listener:this.On}),W(this.Oi,t=>t.deactivate()),this.B.disconnect(),this.de.disconnect(),this.vh.clear()}bh(t,e){var i,r,o;if(this.vh.has(t))return;if(this.vh.add(t),rE(t)){let h={type:"InputEvent",inputType:"select",target:rt(t),selectedIndex:t.selectedIndex,timestamp:C.now()};this.produceEvent(h);return}if(Hl(t)){let h={type:"InputEvent",inputType:"checkable",target:rt(t),checked:t.checked,timestamp:C.now()};this.produceEvent(h);return}let c=oE(t),l=jl(t);if(c||l){let h=(i=t.value)!==null&&i!==void 0?i:"";if(!((r=this.ot)===null||r===void 0)&&r.shouldEncrypt(t)){(o=this.ot)===null||o===void 0||o.registerInputNodeToEncrypt({targetId:e,targetValue:h,date:C.now()});return}let f=l?"0":"\u2022",d={type:"InputEvent",inputType:"text",target:rt(t),value:csString.prototype.replace.call(h,/\S/g,f),timestamp:C.now()};this.produceEvent(d)}}inputHandler(t){if(!this.isStarted)return;let e=Rt(t),i=rt(e);!i||!this._h(e)||ot.isConnected(e)&&jt(()=>{this.bh(e,i)},"low")}zb(){this.trackChanges(HTMLInputElement,"checked"),this.trackChanges(HTMLInputElement,"value"),this.trackChanges(HTMLTextAreaElement,"value")}Gb(){this.trackChanges(HTMLSelectElement,"selectedIndex"),this.trackChanges(HTMLSelectElement,"value"),this.trackChanges(HTMLOptionElement,"selected",!0)}trackChanges(t,e,i=!1){let r=Cn(t.prototype,e,(o,c,l)=>{if(l!==c&&ot.isConnected(o)){let h=i?o.parentElement:o;this.Wb(h)}});r&&csArray.prototype.push.call(this.Oi,r)}_h(t){return!x.isMaskedElement(t)&&!x.isMaskedElementChild(t)&&(Mn(t)||co(t)||kn(t))}Wb(t){if(this.isStarted&&ot.isConnected(t)){let e=rt(t);e&&this._h(t)&&jt(()=>{this.bh(t,e)},"low")}}}return s.qb=["textarea","input:not([type])",'input[type="text"]','input[type="email"]','input[type="search"]','input[type="tel"]','input[type="url"]','input[type="password"]','input[type="number"]','input[type="checkbox"]','input[type="radio"]',"select"],oe([ht()],s.prototype,"inputHandler",null),oe([P()],s.prototype,"trackChanges",null),s})();var cE=(()=>{class s{constructor(t=Number.POSITIVE_INFINITY){this.oi=[],this.nt=[],this.Yb=t}next(t){this.nt.length===this.Yb&&csArray.prototype.shift.call(this.nt),csArray.prototype.push.call(this.nt,t),this.nt.length===1&&csSetTimeout(()=>this.clear());for(let e of this.oi)e(t)}subscribe(t){if(me(this.oi,i=>t===i))return()=>{this.oi=csArray.prototype.filter.call(this.oi,i=>i!==t)};csArray.prototype.push.call(this.oi,t);for(let i of this.nt)t(i);return()=>{this.oi=csArray.prototype.filter.call(this.oi,i=>i!==t)}}clear(){this.nt=[]}hasObservers(){return this.oi.length>0}}return s})(),Bl=(()=>{var s;class n{constructor(e){this.A=e}observe(){this.Xb=s.Vr.subscribe(e=>this.A(e)),s.Ca||(s.Ca=!0,s.Ur.observe(),$t(document,NodeFilter.SHOW_ELEMENT).visitAll(i=>{s.Ps.add(i),s.Vr.next(i)}))}disconnect(){s.Ca&&(this.Xb(),s.Vr.hasObservers()||(s.Ca=!1,s.Ur.disconnect(),s.Vr.clear(),s.Ps.clear()))}}return s=n,n.Ps=new ki,n.Vr=new cE,n.Kb=Rs(t=>{jt(()=>{for(let e of t)e.type==="childList"&&W(e.addedNodes,i=>{$t(i,NodeFilter.SHOW_ELEMENT).visitAll(o=>{s.Ps.has(o)||(s.Ps.add(o),s.Vr.next(o))})})})},"ElementObserver.findAllElements"),n.Ca=!1,n.Ur=new ce(s.Kb),tt([P()],n.prototype,"observe",null),tt([P()],n.prototype,"disconnect",null),n})(),lE=(()=>{class s extends le{constructor(){super(),this.As=typeof window.customElements=="object"&&typeof window.customElements.whenDefined=="function"&&typeof window.Promise=="function",this.Jb=ls("CustomElementRegistrationProducer:onElementsFound",e=>{for(let i of e)x.isMaskedElement(i)||x.isMaskedElementChild(i)||wd(i)&&this.register(csString.prototype.toLowerCase.call(i.tagName))});let t=Ln(this.Jb);this.jr=new Bl(e=>t.push(e)),this.ni=new Set}onStart(){this.As&&this.jr.observe()}onStop(){this.ni.clear(),this.jr.disconnect()}async register(t){this.ni.has(t)||(this.ni.add(t),await window.customElements.whenDefined(t),this.produceEvent({type:"CustomElementRegistration",tagName:csString.prototype.toLowerCase.call(t)}))}}return oe([P()],s.prototype,"register",null),s})(),lc=(()=>{class s{static isNavigationTimingObserverSupported(){var t,e;return(((t=window.PerformanceObserver)===null||t===void 0?void 0:t.supportedEntryTypes)==null?void 0:csArray.prototype.indexOf.call((e=window.PerformanceObserver)===null||e===void 0?void 0:e.supportedEntryTypes,"navigation"))>=0}static getTimeOrigin(){return window.performance.timeOrigin}static Kf(){if(this.isNavigationTimingObserverSupported())return new window.PerformanceObserver(t=>s.Qb(t))}static Qb(t){let i=t.getEntriesByType("navigation")[0];i&&(this.Hi=i,s.Nn(i))}static Zn(t){this.Zb(t),this.Hi&&t(this.Hi),this.je||this.tT()}static Zb(t){this.Mt.add(t)}static eT(t){this.Mt.delete(t)}static tT(){if(this.Hr||(this.Hr=this.Kf()),!this.Hr){this.Hi||(this.Hi={requestStart:window.performance.timing.requestStart,domInteractive:window.performance.timing.domInteractive}),this.Nn(this.Hi);return}this.Hr.observe({type:"navigation",buffered:!0}),this.je=!0}static Nn(t){this.Mt.forEach(e=>e(t))}static er(t){this.eT(t),this.Mt.size===0&&this.Br()}static Br(){var t;this.je&&((t=this.Hr)===null||t===void 0||t.disconnect(),this.je=!1,this.Hi=null,this.Hr=this.Kf())}constructor(t){this.A=t}observe(){s.Zn(this.A)}disconnect(){s.er(this.A)}}return s.je=!1,s.Mt=new Set,s.Hi=null,s})(),hE=(()=>{class s extends le{constructor(){super(...arguments),this.Ia=null,this.Jf=new lc(t=>{if(this.Ia)return;let e=this.sT(t);e&&(this.Ia=e,this.produceEvent(e))})}onStart(){if(this.Ia){this.produceEvent(this.Ia);return}this.Jf.observe()}onStop(){this.Jf.disconnect()}sT(t){let e=lc.getTimeOrigin();return{type:"PerformanceTiming",timings:{timeOrigin:e,requestStart:Math.floor(e+t.requestStart),domInteractive:Math.floor(e+t.domInteractive)},timestamp:C.now()}}}return s})(),uE="touchstart",dE="touchmove",pE="touchend",Fl=(()=>{class s{constructor(t){this.A=t}observe(){s.Qf&&s.Th(this.A)}disconnect(){s.Qf&&s.Ah(this.A)}static iT(t,e){csArray.prototype.forEach.call(Ue(s.Mt),i=>i(t,e))}static Th(t){s.Mt.has(t)||(s.Mt.add(t),s.Mt.size===1&&(s.Fr.onGesture(s.iT),csArray.prototype.forEach.call(s.Fs,e=>gt(e))))}static Ah(t){s.Mt.delete(t),s.Mt.size===0&&csArray.prototype.forEach.call(s.Fs,e=>mt(e))}static Rh(t){if(s.Fr.isValidTouchEvent(t))switch(t.type){case"touchstart":s.Fr.processActionDown(t);break;case"touchmove":s.Fr.processActionMove();break;case"touchend":s.Fr.processActionUp(t);break}}}return s.Fs=[{boundElement:Z.document,type:uE,listener:n=>s.Rh(n)},{boundElement:Z.document,type:dE,listener:n=>s.Rh(n)},{boundElement:Z.document,type:pE,listener:n=>s.Rh(n)}],s.Qf=xr.isGestureDetectionSupported(),s.Mt=new Set,s.Fr=new xr,s})(),fE=(()=>{class s extends le{constructor(){super(),this.$r=new Fl(this.Fc.bind(this))}onStart(){this.$r.observe()}onStop(){this.$r.disconnect()}Fc(t){let e=this.nT(t);e&&this.produceEvent(e)}nT(t){return this.rT(t)?{type:"Gesture",targetId:rt(t.target),data:{type:t.type,direction:t.direction,distance:t.distance,velocity:t.velocity,pageX:t.pageX,pageY:t.pageY}}:null}rT(t){return t.target!==null&&!(dt(t.target)&&x.isMaskedElementChild(t.target))}}return s})(),gE=(()=>{class s extends le{constructor(){super(...arguments),this.Zf=new Dl(t=>this.Pa(t))}Pa({message:t,filename:e,lineno:i,colno:r}){t=t!=null?t:"[NO ERROR MESSAGE]",e=!e||te(e)?"":e,this.produceEvent({type:"JSError",message:t,filename:e,lineno:i,colno:r})}onStart(){this.Zf.observe()}onStop(){this.Zf.disconnect()}}return s})(),mE=(()=>{class s extends ei{constructor(t){super(),this.oT=t,this.Ul=1024,this.Vl=150}isListening(t){return t.type==="JSError"}processEvent(t){return t.message=K.truncate(t.message,this.Ul,K.ELLIPSIS),t.filename=K.truncate(t.filename,this.Vl,K.ELLIPSIS),this.oT(t)}}return s})();var Us=[],Xr=!1,$l=Rs(EE,"executeTasks");function yE(s){if(csArray.prototype.push.call(Us,s),!Xr){for(let n=0;n<3;n++)csSetTimeout($l);Xr=!0}}function EE(){let s=csDate.now();for(let n=0;n<Us.length;n++)if(Us[n](),csDate.now()-s>=35){Us=csArray.prototype.slice.call(Us,n+1),csSetTimeout($l);return}Us=[],Xr=!1}var Je=(()=>{let s;return function(n){n[n.Started=0]="Started",n[n.Stopped=1]="Stopped",n[n.Processing=2]="Processing",n[n.Completed=3]="Completed"}(s||(s={})),s})(),zl=(()=>{class s{constructor(){this.kt=new Ci,this.Pt=Je.Stopped,this.A=null,this.eg=t=>{this.Pt===Je.Stopped||!t||(this.A(t),this.sg())}}get queueLength(){return this.kt.length}start(t){if(this.A)throw new Error("callback already set");this.Pt=Je.Started,this.A=t}push(t){this.kt.push(t),this.Ch()}stop(){this.A=null,this.Pt=Je.Stopped,this.kt.clear()}static pipe(t,e){let i=t,r=new csArray;for(let c of e){let l=new s;l.start(h=>{c.pushEvent(h)}),csArray.prototype.push.call(r,l),W(i,h=>h.subscribe(f=>l.push(f))),i=[c]}let o=new SE(r);return W(i,c=>c.subscribe(l=>o.push(l))),o}ig(){return this.Pt===Je.Stopped}cs(){return this.Pt===Je.Processing}sg(){if(!this.ig()){if(this.kt.isEmpty){this.Pt=Je.Completed;return}this.Pt=Je.Processing,yE(()=>{let t=this.kt.pop();t instanceof Po?t.complete(this.eg):this.eg(t)})}}Ch(){this.ig()||this.cs()||this.sg()}}return s})(),SE=(()=>{class s extends zl{constructor(t){super(),this.ng=t}get queueLength(){return csArray.prototype.reduce.call(this.ng,(t,e)=>t+e.queueLength,0)}stop(){super.stop(),W(this.ng,t=>t.stop())}}return s})(),vE=(()=>{class s{constructor(t,e=[]){this.producers=t,this.processors=e,this.z=!1,this.Mt=[]}get pendingEvents(){var t,e;return(e=(t=this.kt)===null||t===void 0?void 0:t.queueLength)!==null&&e!==void 0?e:0}start(){if(this.z)throw new Error("Recording is already started.");let t=this.Mt;this.kt=zl.pipe(this.producers,this.processors),this.kt.start(e=>csArray.prototype.forEach.call(t,i=>i(e))),W(this.producers,e=>e.start()),W(this.processors,e=>e.start()),this.z=!0}stop(){this.kt.stop(),this.Mt.length=0;for(let t of this.producers)t.stop();for(let t of this.processors)t.stop();this.z=!1,this.Mt=[]}subscribe(t){if(this.z)throw new Error("Recording is already started.");return csArray.prototype.push.call(this.Mt,t),()=>this.Mt=csArray.prototype.filter.call(this.Mt,e=>e!==t)}}return s})(),_E=(()=>{class s{constructor(t){this.Oa={},this.De=new Ro(t)}save({key:t,metadata:e,events:i}){this.De.isThresholdReached()||(this.De.addString(t),typeof i=="string"?this.De.addString(i):this.De.addArrayBuffer(i),!this.De.isThresholdReached()&&(this.Oa[t]={metadata:e,events:i}))}recover(t){let e=[];csArray.prototype.forEach.call(this.hT(),i=>{let r=this.Oa[i];r!==void 0&&(delete r.metadata.datatype,csArray.prototype.push.call(e,r),this.uT(i))}),e.length!==0&&(t(e),this.De.reset())}hT(){return Object.keys(this.Oa)}uT(t){delete this.Oa[t]}}return s})(),Qe=(()=>{let s;return function(n){n[n.NOT_STARTED=0]="NOT_STARTED",n[n.OPEN_IN_PROGRESS=1]="OPEN_IN_PROGRESS",n[n.OPEN_FAILED=2]="OPEN_FAILED",n[n.READY=3]="READY"}(s||(s={})),s})(),wE=(()=>{class s{constructor(t,e,i){this.En=t,this.dT=i,this.Bi=Qe.NOT_STARTED,this.Na=[],this.Ih=0,this.pT=self.origin,this.ke=typeof window=="object"?"":"worker-",this.De=new Ro(e),this.Fl()}async Fl(){await this.rg(),this.Bi===Qe.READY?this.fT():this.dT(this.Na)}fT(){csArray.prototype.forEach.call(this.Na,t=>{this.save(t)}),this.Na=[]}async save(t){try{if(this.Bi===Qe.OPEN_IN_PROGRESS){csArray.prototype.push.call(this.Na,t);return}if(this.Bi!==Qe.READY||this.De.isThresholdReached())return;let{key:e,metadata:i,events:r}=t;if(this.De.addString(e),typeof r=="string"?this.De.addString(r):this.De.addArrayBuffer(r),this.De.isThresholdReached())return;await this.re.put(`${this.pT}/${e}`,new Response(r,{headers:i}))}catch{}}async recover(t){!this.re&&(await this.rg(),this.Bi!==Qe.READY)||this.gT(t)}async rg(){try{this.Bi=Qe.OPEN_IN_PROGRESS,this.re=await self.caches.open(`${this.ke}${this.En}`),this.Bi=Qe.READY}catch{this.Bi=Qe.OPEN_FAILED}}async gT(t){try{if(this.Ih++,this.Ih>1)return;let e=await this.re.keys();if(e.length===0)return;let i=await this.re.matchAll(),r=csArray.prototype.map.call(i,c=>{let l={};c.headers.forEach((f,d)=>{l[d]=f}),delete l["content-type"];let h=l.datatype;return delete l.datatype,h==="json"||h==="base64"?c.text().then(f=>({metadata:l,events:f})):c.arrayBuffer().then(f=>({metadata:l,events:f}))}),o=await Promise.all(r);await Promise.all(csArray.prototype.map.call(e,c=>this.re.delete(c))),t(o),this.De.reset()}catch{}finally{this.Ih--}}}return s})(),bE=(()=>{class s{constructor(t){try{this.mT(t)}catch{this.Ph()}}mT(t){self.caches?this.yT(t):this.Ph()}save(t){this.Ma.save(t)}recover(t){this.Ma.recover(t)}yT(t){this.Ma=new wE(t,s.og,e=>{this.Ph(e)})}Ph(t){this.Ma=new _E(s.og),t&&csArray.prototype.forEach.call(t,e=>{this.Ma.save(e)})}}return s.og=1024*1024*16,s})(),TE=(()=>{class s{constructor(t,e){this.S=t,this.R=e,this.zr=Zt.ETR_DISABLED,this.ka=Zt.ETR_PENDING,this.Oh=!0}getEtrStatus(t){t===void 0&&(t=this.R.getSession());let e=t==null?void 0:t.etrStatus;return this.ag()&&e===Zt.ETR_SAVED_SESSION?e:this.zr}onEventTriggerRecording(t,e){switch(e){case os.ETR_PAGE:this.cg(Zt.ETR_SAVED_PAGE);break;case os.ETR_LEGACY:case os.ETR_SESSION:this.cg(Zt.ETR_SAVED_SESSION);break}}onCollectStateChange(t,e){t===U.RECORDING_TEMPORARILY?this.Oh=!0:this.Oh=!1,t===U.ANALYTICS_ONLY&&e===Wt.ETR_ON?this.lg(this.ka):this.lg(Zt.ETR_DISABLED)}lg(t){this.zr=t,this.ka=Zt.ETR_PENDING,this.hg(t),this.S.emitRecordingContextChange()}cg(t){this.Oh?Number(t)>Number(this.ka)&&(this.ka=t):this.ag()&&Number(t)>Number(this.zr)&&(this.zr=t,this.hg(t),this.S.emitRecordingContextChange())}hg(t){let e=this.R.getSession();e!==null&&e.etrStatus===Zt.ETR_NOT_SAVED_SESSION&&t===Zt.ETR_SAVED_SESSION&&(e.etrStatus=t,this.R.setSession(e))}ag(){return this.zr!==Zt.ETR_DISABLED}}return s})(),D=(()=>{let s;return function(n){n[n.MUTATION_INSERT=1]="MUTATION_INSERT",n[n.MUTATION_REMOVE=2]="MUTATION_REMOVE",n[n.MUTATION_ATTRIBUTE=3]="MUTATION_ATTRIBUTE",n[n.MUTATION_CHARACTER_DATA=4]="MUTATION_CHARACTER_DATA",n[n.INITIAL_DOM=5]="INITIAL_DOM",n[n.SCROLL=6]="SCROLL",n[n.CLICK=8]="CLICK",n[n.RESIZE=9]="RESIZE",n[n.INPUT_CHECKABLE=10]="INPUT_CHECKABLE",n[n.INPUT_SELECT=11]="INPUT_SELECT",n[n.INPUT_TEXT=12]="INPUT_TEXT",n[n.HASH_CHANGE=13]="HASH_CHANGE",n[n.UNANONYMIZED_CONSENT_GRANTED=14]="UNANONYMIZED_CONSENT_GRANTED",n[n.UNANONYMIZED_CONSENT_WITHDRAWN=15]="UNANONYMIZED_CONSENT_WITHDRAWN",n[n.MOUSE_OVER=16]="MOUSE_OVER",n[n.VISIBILITY_CHANGE=17]="VISIBILITY_CHANGE",n[n.STYLESHEET_RULE_INSERT=18]="STYLESHEET_RULE_INSERT",n[n.STATIC_RESOURCE_URL=19]="STATIC_RESOURCE_URL",n[n.PERFORMANCE_TIMINGS=20]="PERFORMANCE_TIMINGS",n[n.ATTACH_SHADOW=22]="ATTACH_SHADOW",n[n.STYLESHEET_CSS_TEXT_UPDATE=23]="STYLESHEET_CSS_TEXT_UPDATE",n[n.JAVASCRIPT_ERROR=26]="JAVASCRIPT_ERROR",n[n.PAGE_EVENT=27]="PAGE_EVENT",n[n.API_ERROR=28]="API_ERROR",n[n.TEXT_VISIBILITY=29]="TEXT_VISIBILITY",n[n.MUTATION_ENCRYPTED_CHARACTER_DATA=30]="MUTATION_ENCRYPTED_CHARACTER_DATA",n[n.INPUT_ENCRYPTED_TEXT=31]="INPUT_ENCRYPTED_TEXT",n[n.KEY_DOWN=32]="KEY_DOWN",n[n.KEY_UP=33]="KEY_UP",n[n.CLIPBOARD_COMMAND=34]="CLIPBOARD_COMMAND",n[n.STYLESHEET_RULE_DELETE=37]="STYLESHEET_RULE_DELETE",n[n.USER_IDENTIFIER=38]="USER_IDENTIFIER",n[n.TOUCH_START=41]="TOUCH_START",n[n.TOUCH_MOVE=42]="TOUCH_MOVE",n[n.TOUCH_END=43]="TOUCH_END",n[n.GESTURE_RECOGNITION=44]="GESTURE_RECOGNITION",n[n.POINTER_DOWN=47]="POINTER_DOWN",n[n.POINTER_MOVE=48]="POINTER_MOVE",n[n.POINTER_UP=49]="POINTER_UP",n[n.CUSTOM_ERROR=50]="CUSTOM_ERROR",n[n.CUSTOM_ELEMENT_REGISTRATION=54]="CUSTOM_ELEMENT_REGISTRATION",n[n.REGISTER_ADOPTED_STYLE_SHEET=60]="REGISTER_ADOPTED_STYLE_SHEET",n[n.SET_ADOPTED_STYLE_SHEETS=61]="SET_ADOPTED_STYLE_SHEETS",n[n.ADOPTED_STYLESHEET_RULE_INSERT=62]="ADOPTED_STYLESHEET_RULE_INSERT",n[n.ADOPTED_STYLESHEET_RULE_DELETE=63]="ADOPTED_STYLESHEET_RULE_DELETE",n[n.SCREEN_RESIZE=65]="SCREEN_RESIZE",n[n.RESOURCE_HASHES=66]="RESOURCE_HASHES",n[n.PERFORMANCE_NAVIGATION_TIMING=67]="PERFORMANCE_NAVIGATION_TIMING",n[n.PERFORMANCE_RESOURCE_TIMING=68]="PERFORMANCE_RESOURCE_TIMING",n[n.RECORDING_INFO_EVENT=72]="RECORDING_INFO_EVENT",n[n.TEXT_REF=73]="TEXT_REF",n[n.TOUCH_CANCEL=74]="TOUCH_CANCEL",n[n.MUTATION_MOVE=75]="MUTATION_MOVE",n[n.STYLESHEET_RULE_UPDATE=76]="STYLESHEET_RULE_UPDATE",n[n.ADOPTED_STYLESHEET_RULE_UPDATE=77]="ADOPTED_STYLESHEET_RULE_UPDATE",n[n.VIDEO_PLAY=78]="VIDEO_PLAY",n[n.VIDEO_PAUSE=79]="VIDEO_PAUSE",n[n.VIDEO_SEEK=80]="VIDEO_SEEK",n[n.ADOPTED_STYLESHEET_DISABLED=98]="ADOPTED_STYLESHEET_DISABLED",n[n.STYLESHEET_DISABLED=99]="STYLESHEET_DISABLED",n[n.DEBUG=999]="DEBUG"}(s||(s={})),s})();var ui=(()=>{let s;return function(n){n[n.SWIPE=0]="SWIPE",n[n.PINCH_IN=1]="PINCH_IN",n[n.PINCH_OUT=2]="PINCH_OUT",n[n.LONG_PRESS=3]="LONG_PRESS",n[n.TAP=4]="TAP",n[n.DOUBLE_TAP=5]="DOUBLE_TAP"}(s||(s={})),s})(),AE=(()=>{class s{constructor(t=100){this.ET=t,this.Da={},this.Gr=null,this.fh="original-resource-name"}onEvent(t){this.ST=t}processEvent(t){this.vT(t.resourceId,t.resource.hash,t.originalResourceName),this._T(t)}flushEvents(){this.Gr&&csClearTimeout(this.Gr),this.ug()}onSendStaticResource(t){this._T=t}ug(){if(!Object.keys(this.Da).length)return;let t={type:D.RESOURCE_HASHES,date:C.now(),args:[this.Da]};this.Gr=null,this.Da={},this.ST(t)}vT(t,e,i){let r=e;i&&(r+=`?${this.fh}=${i}`),this.Da[t]=r,!this.Gr&&(this.Gr=window.csSetTimeout(()=>this.ug(),this.ET))}}return s})();function RE(s,n,t){let{timestamp:e}=s;switch(s.domEvent){case"initialDOM":{let{initialDOM:i}=s,r={type:D.INITIAL_DOM,date:e,args:[i]};t.emitInitialDomDone(r);break}case"nodesAdded":{csArray.prototype.forEach.call(s.nodes,i=>{n({type:D.MUTATION_INSERT,date:e,args:[s.target,s.nextSibling,i]})});break}case"nodesMoved":{for(let i of s.nodesIds)n({type:D.MUTATION_MOVE,date:e,args:[i,s.nextSibling,s.target]});break}case"nodesRemoved":{csArray.prototype.forEach.call(s.nodesIds,i=>{n({type:D.MUTATION_REMOVE,date:e,args:[i]})});break}case"attributeChanged":{let{target:i,namespace:r,attribute:o,newValue:c}=s;n({type:D.MUTATION_ATTRIBUTE,date:e,args:[i,r,o,c]});break}case"characterDataChanged":{let{target:i,newValue:r}=s;n({type:D.MUTATION_CHARACTER_DATA,date:e,args:[i,r]});break}case"cssRuleInserted":{let{target:i,rule:r,index:o}=s,c=X(o)?[i,r,o]:[i,r];n({type:D.STYLESHEET_RULE_INSERT,date:e,args:c});break}case"cssRuleDeleted":{let{target:i,index:r}=s;n({type:D.STYLESHEET_RULE_DELETE,date:e,args:[i,r]});break}case"cssRuleUpdated":{let{target:i,rule:r,index:o}=s;n({type:D.STYLESHEET_RULE_UPDATE,date:e,args:[i,r,o]});break}case"cssStyleSheetDisabled":{let{target:i,disabled:r}=s;n({type:D.STYLESHEET_DISABLED,date:e,args:[i,r]});break}case"shadowRootAttached":{let{target:i,shadowRoot:r}=s;n({type:D.ATTACH_SHADOW,date:e,args:[i,r]});break}case"adoptedStyleSheetRegistered":{let{sheetId:i,cssRules:r,disabled:o}=s;n({type:D.REGISTER_ADOPTED_STYLE_SHEET,date:e,args:[i,{cssRules:r,disabled:o}]});break}case"adoptedStyleSheetsSet":{let{target:i,sheetsIds:r}=s;n({type:D.SET_ADOPTED_STYLE_SHEETS,date:e,args:[i,r]});break}case"adoptedStyleSheetRuleInserted":{let{sheetId:i,rule:r,index:o}=s,c=X(o)?[i,r,o]:[i,r];n({type:D.ADOPTED_STYLESHEET_RULE_INSERT,date:e,args:c});break}case"adoptedStyleSheetRuleDeleted":{let{sheetId:i,index:r}=s;n({type:D.ADOPTED_STYLESHEET_RULE_DELETE,date:e,args:[i,r]});break}case"adoptedStyleSheetRuleUpdated":{let{sheetId:i,rule:r,index:o}=s,c=[i,r,o];n({type:D.ADOPTED_STYLESHEET_RULE_UPDATE,date:e,args:c});break}case"adoptedStyleSheetDisabled":{let{sheetId:i,disabled:r}=s,o=[i,r];n({type:D.ADOPTED_STYLESHEET_DISABLED,date:e,args:o});break}default:H.error("translateDOMEvent: DOMEvent not supported");break}}function CE(s){let n=IE(s.data);return{type:D.GESTURE_RECOGNITION,args:[s.targetId,n],date:s.timestamp}}function IE(s){let n={type:PE(s.type)};for(let t in s){let e=s[t];e!==void 0&&t!=="type"&&(n[t]=e)}return n}function PE(s){switch(s){case wt.DRAG:case wt.FLICK:return ui.SWIPE;case wt.LONG_PRESS:return ui.LONG_PRESS;case wt.TAP:return ui.TAP;case wt.PINCH_IN:return ui.PINCH_IN;case wt.PINCH_OUT:return ui.PINCH_OUT}}function OE(s,n){let t=[],e=!1;return{push(i){if(csArray.prototype.push.call(t,i),t.length===n.batchSize){this.flush();return}n.autoFlushDelay&&n.autoFlushDelay>0&&!e&&(e=!0,csSetTimeout(()=>{e=!1,t.length>0&&this.flush()},n.autoFlushDelay))},flush(){if(!t.length)return;let i=t;t=[],s(i)}}}var NE=20;function ME(s){return OE(n=>{let t={visibleInViewPort:n},e={type:D.TEXT_VISIBILITY,date:C.now(),args:[t]};s(e)},{batchSize:NE,autoFlushDelay:1e3})}var pr=(()=>{let s;return function(n){n.REQUEST_START="requestStart",n.DOM_INTERACTIVE="domInteractive",n.TIME_ORIGIN="timeOrigin"}(s||(s={})),s})(),Gl={connectEnd:"ce",connectStart:"cs",decodedBodySize:"dbs",domainLookupEnd:"dle",domainLookupStart:"dls",duration:"d",fetchStart:"fs",initiatorType:"it",name:"n",nextHopProtocol:"nhp",redirectEnd:"re",redirectStart:"rs",requestStart:"rqs",responseEnd:"rse",responseStart:"rss",responseStatus:"rst",secureConnectionStart:"scs",startTime:"st",transferSize:"ts"},kE={...Gl,domComplete:"dc",domContentLoadedEventEnd:"dclee",domContentLoadedEventStart:"dcles",domInteractive:"di",loadEventEnd:"lee",loadEventStart:"les",type:"t"};function DE(s){return{type:D.PERFORMANCE_TIMINGS,args:[{performanceTiming:pr.REQUEST_START,timestamp:s.timings.requestStart},{performanceTiming:pr.DOM_INTERACTIVE,timestamp:s.timings.domInteractive},{performanceTiming:pr.TIME_ORIGIN,timestamp:s.timings.timeOrigin}],date:s.timestamp}}function xE(s){switch(s.inputType){case"text":return{type:D.INPUT_TEXT,args:[s.target,s.value],date:s.timestamp};case"select":return{type:D.INPUT_SELECT,args:[s.target,s.selectedIndex],date:s.timestamp};case"checkable":return{type:D.INPUT_CHECKABLE,args:[s.target,s.checked],date:s.timestamp}}}var LE=500,fr=0;function UE(){return{processEvent(s,n){if(s.originalEvent.type===D.PERFORMANCE_RESOURCE_TIMING)return fr>=LE?null:(fr+=1,n({...s.originalEvent,date:s.timestamp}));n(s.originalEvent)},reset(){fr=0}}}function VE(s){switch(s.videoEventType){case"play":return{type:D.VIDEO_PLAY,args:[s.nodeId],date:s.timestamp};case"pause":return{type:D.VIDEO_PAUSE,args:[s.nodeId],date:s.timestamp};case"seeked":{let n=s;return{type:D.VIDEO_SEEK,args:[n.nodeId,n.newTimePositionInSec],date:s.timestamp}}default:return null}}var jE=(()=>{class s{get pendingEvents(){return this.xa.pendingEvents}constructor(t,e,i,r,o){this.xa=t,this.S=e,this.xe=i,this.hs=r,this.us=o,this.oe=()=>{},this.La=()=>{},this.dg=ME(c=>this.oe(c))}start(){var t,e;this.pg=UE(),this.xa.subscribe(i=>{var r,o,c,l,h,f;let d=i,{timestamp:E}=d;switch(d.type){case"Legacy":{let m=d.eventType==="user"?(r=this.La)!==null&&r!==void 0?r:()=>{}:this.oe;this.pg.processEvent(d,m)}break;case"CustomElementRegistration":{this.oe({type:D.CUSTOM_ELEMENT_REGISTRATION,date:E,args:[d.tagName]});break}case"DomEvent":{RE(d,this.oe,this.S);break}case"InputEvent":{let m=xE(d);(o=this.La)===null||o===void 0||o.call(this,m);break}case"encryptedCharacterDataChanged":{let{target:m,rawData:S,encryptedData:O,encryptionMetadata:N}=d;this.oe({type:D.MUTATION_ENCRYPTED_CHARACTER_DATA,date:E,args:[m,S,O,N]});break}case"StaticResource":{let{url:m}=d;this.oe({type:D.STATIC_RESOURCE_URL,date:E,args:[m]});break}case"ResizeMaskedElement":{let{target:m,width:S,height:O}=d;this.oe({type:D.MUTATION_ATTRIBUTE,date:E,args:[m,"","style",`width:${S}px !important;height:${O}px !important;`]});break}case"Gesture":{let m=CE(i);(c=this.La)===null||c===void 0||c.call(this,m);break}case"TextVisibility":{this.dg.push(d.text);break}case"StaticResourceManagerEvent":{(l=this.xe)===null||l===void 0||l.processEvent(d);break}case"screenResize":{let{width:m,height:S}=d,O={type:D.SCREEN_RESIZE,date:E,args:[m,S]};this.oe(O);break}case"viewportResize":{let{width:m,height:S}=d,O={type:D.RESIZE,date:E,args:[m,S]};this.oe(O);break}case"PerformanceTiming":{this.oe(DE(d));break}case"CustomError":{let m=(h=this.us)===null||h===void 0?void 0:h.translate(d);m&&this.oe(m);break}case"JSError":{let m=(f=this.hs)===null||f===void 0?void 0:f.translate(d);m&&this.oe(m);break}case"VideoEvent":{let m=VE(d);m&&this.oe(m);break}case"warning":{H.warn(d.message);break}default:H.error(`WebRecorderEventTranslator: Event not supported (${d.type})`);break}}),this.S.emitInitialDomStart(),(t=this.hs)===null||t===void 0||t.start(),(e=this.us)===null||e===void 0||e.start(),this.xa.start()}stop(){var t,e,i;this.reset(),this.flush(),this.xa.stop(),(t=this.xe)===null||t===void 0||t.flushEvents(),(e=this.hs)===null||e===void 0||e.stop(),(i=this.us)===null||i===void 0||i.stop()}flush(){this.dg.flush()}onEvent(t,e){var i;this.oe=t,this.La=e,(i=this.xe)===null||i===void 0||i.onEvent(r=>this.oe(r))}reset(){this.pg.reset()}}return s})(),HE=(()=>{class s{constructor(){this.wr=20,this.Mi=0,this.U=!1}translate(t){if(this.Mi>=this.wr)return null;this.Mi+=1;let{message:e,attributes:i,timestamp:r}=t;return{type:D.CUSTOM_ERROR,date:r,args:[{errorType:"customError",message:e,attributes:i}]}}start(){this.U||(this.Mi=0,this.U=!0)}stop(){this.U=!1}}return s})(),BE=(()=>{class s{constructor(t){this.Ua=t,this.wr=20,this.xi=0,this.U=!1}translate(t){if(this.xi>=this.wr)return this.Ua.stop(),null;this.xi+=1;let{filename:e,message:i,lineno:r,colno:o,timestamp:c}=t;return{type:D.JAVASCRIPT_ERROR,date:c,args:[{errorType:"jsError",message:i,filename:e,lineno:r,colno:o}]}}start(){this.U||(this.xi=0,this.U=!0)}stop(){this.U=!1}}return s})(),FE=(()=>{class s extends le{constructor(t){super(),this.He=t}subscribe(t){return super.subscribe(t)}onStart(){W(this.He,t=>{t.onEvent(e=>{var i;return this.Mn(e,(i=t.eventType)!==null&&i!==void 0?i:"browser")})}),W(this.He,t=>{var e;(e=t.start)===null||e===void 0||e.call(t)})}onStop(){W(this.He,t=>{var e;return(e=t.stop)===null||e===void 0?void 0:e.call(t)})}Mn(t,e){this.produceEvent({timestamp:C.now(),type:"Legacy",originalEvent:t,eventType:e})}}return s})(),xt=(()=>{let s;return function(n){n[n.Active=0]="Active",n[n.Paused=1]="Paused",n[n.Stopped=2]="Stopped"}(s||(s={})),s})(),$E=(()=>{class s{constructor(t,e,i=[]){this.Mn=t,this.Nh=e,this.wT=i,this.Va=null,this.Pt=xt.Active,this.nt=[]}reset(){this.Va=null,this.nt=[],this.Pt=xt.Active}disconnect(){this.Pt=xt.Stopped}bT(){this.Nh(xt.Paused),this.Pt=xt.Paused,csSetTimeout(()=>{this.Pt===xt.Paused&&this.Mh()},s.STOP_TIMEOUT)}TT(){this.Nh(xt.Active),this.Pt=xt.Active,W(this.nt,this.Mn),this.nt=[]}Mh(){this.nt=[],this.Nh(xt.Stopped),this.Pt=xt.Stopped}pushEvent(t,e){if(e.isUserEvent&&(this.Va=t.date,this.Pt!==xt.Active)){this.TT(),this.Mn(t);return}if(this.AT(t)){this.Mn(t);return}switch(this.Pt){case xt.Active:if(this.RT(t,e)){this.bT(),csArray.prototype.push.call(this.nt,t);return}this.Mn(t);break;case xt.Paused:csArray.prototype.push.call(this.nt,t);break;case xt.Stopped:break}}RT(t,e){return!e.isUserEvent&&this.Va!==null&&t.date-this.Va>s.INACTIVITY_TIMEOUT}AT(t){return csArray.prototype.indexOf.call(this.wT,t.type)>-1}}return s.INACTIVITY_TIMEOUT=5e3,s.STOP_TIMEOUT=5e3,s})(),zE=2e3,GE=(()=>{class s extends Tt{constructor(t,e,i,r,o,c,l,h,f,d,E,m,S,O=[],N,v,_,M,k){super(),this.f=t,this.j=e,this.CT=i,this.F=r,this.R=o,this.ye=c,this.ft=l,this.ge=h,this.ot=f,this.W=d,this.Dt=E,this.Rt=m,this.Be=S,this.He=O,this.fg=N,this.Wt=v,this.kn=_,this.hs=M,this.us=k,this.Js=0,this.qs=new Sl,this.Dn={allowFromQuotaService:!0,allowFromSerialization:!0},this.gg=Un(()=>{this.j.eventsCount()>0&&this.mg()},zE),this.Ns=T=>this.processBrowserEvent(T),this.qr=T=>this.Nt(T),this.ja=0,this.Wr=0,this.qe=new wl,this.kh=!1,this.yg=50*1024,this.Fi=!1,this.Yr=!1,this.ji=[],this.Ha=new $E(T=>this.Q(T),T=>{switch(T){case xt.Active:this.IT();break;case xt.Stopped:this.PT();break}},[D.RESOURCE_HASHES,D.TEXT_VISIBILITY,D.API_ERROR,D.JAVASCRIPT_ERROR]),this.Eg=T=>{this.Dt.removeBatchInProgress(`${T.params.sn}.${T.params.pn}.${T.params.ri}`)}}init(){this.Dh(),this.W.onLoad(this.Eg),this.W.onError(this.Eg)}IT(){csArray.prototype.forEach.call(this.fg,t=>t.start())}PT(){csArray.prototype.forEach.call(this.fg,t=>t.stopForInactivity())}Dh(){var t,e,i;this.Be.onEvent(this.Ns,this.qr),(t=this.ot)===null||t===void 0||t.onInputNodeToEncrypt(this.qr),(e=this.ot)===null||e===void 0||e.onApiErrorToEncrypt(r=>{this.Sg(r)}),(i=this.ot)===null||i===void 0||i.onUserIdentifierToEncrypt(this.Ns),this.qe.onEvent(r=>{if(csSetTimeout(()=>this.$i("page-state",r)),r!==ee.Visible){if(r===ee.Blur)return this.vg();if(!this.kh)return this.kh=!0,csSetTimeout(()=>{this.kh=!1}),r===ee.Hidden?this.vg():this.OT()}})}isRecording(){return this.R.hasValidSession()&&this.isStarted}vg(){if(!this.canSendEvents())return;this.Be.flush(),this.Dt.saveBatchesInProgress(),W(this.He,c=>{var l,h;return W((h=(l=c.getPendingEvents)===null||l===void 0?void 0:l.call(c))!==null&&h!==void 0?h:[],f=>this.j.addEvent(f))});let t=this.j.getEvents();if(t.length===0)return;this.$i("pending-events",this.Be.pendingEvents);let e=this.W.getQueryParams();e.rst=this.getRecordingStartTimestamp(),this.Wr=t[t.length-1].date,e.let=this.getRecordingLastEventTimestamp();let i=this.j.getCurrentRequestIndex(),r=i.getCurrentIndex();e.ri=r.toString(),this.Rt.removeQueryParams(),this.Rt.setQueryParams(e);let o=this.j.stringifyEvents();if(o.length>this.yg){let c=this._g();if(c.length>0){let l=ws(c);this.Rt.send(l)||this.Dt.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:l}),i.increment()}if(this.j.eventsCount()>0){e.ri=i.getCurrentIndex().toString();let l=this.j.stringifyEvents();this.Dt.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:l}),i.increment()}}else this.Rt.send(o)||this.Dt.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:o}),i.increment();this.Rt.removeQueryParams(),this.j.clearEvents()}OT(){if(!this.canSendEvents())return;this.Be.flush();let t=this.W.getQueryParams();this.Dt.saveBatchesInProgress(),t.rst=this.getRecordingStartTimestamp(),delete t.ri,t.hlm="true",this.Rt.removeQueryParams(),W(this.He,r=>{var o,c;return W((c=(o=r.getPendingEvents)===null||o===void 0?void 0:o.call(r))!==null&&c!==void 0?c:[],l=>this.j.addEvent(l))});let e=this.j.getEvents();if(e.length===0){delete t.let,delete t.rst,this.Rt.setQueryParams(t),this.Rt.send(),this.Rt.removeQueryParams();return}this.$i("pending-events",this.Be.pendingEvents),this.Wr=e[e.length-1].date,t.let=this.getRecordingLastEventTimestamp(),this.Rt.setQueryParams(t);let i=this.j.stringifyEvents();if(i.length>this.yg){let r=this._g();if(r.length>0){let o=ws(r);this.Rt.send(o)||this.Dt.save({key:`${t.sn}.${t.pn}.last`,metadata:{...t,datatype:"json"},events:o})}else delete t.let,delete t.rst,delete t.ri,this.Rt.removeQueryParams(),this.Rt.setQueryParams(t),this.Rt.send(),this.Rt.removeQueryParams();if(this.j.eventsCount()>0){t.rst=this.getRecordingStartTimestamp(),t.let=this.getRecordingLastEventTimestamp();let o=this.j.getCurrentRequestIndex(),c=o.getCurrentIndex();t.ri=c.toString();let l=this.j.stringifyEvents();this.Dt.save({key:`${t.sn}.${t.pn}.${t.ri}.last`,metadata:{...t,datatype:"json"},events:l}),o.increment()}}else this.Rt.send(i)||(this.Dt.save({key:`${t.sn}.${t.pn}.${t.ri}.last`,metadata:{...t,datatype:"json"},events:i}),this.j.getCurrentRequestIndex().increment());this.Rt.removeQueryParams(),this.j.clearEvents()}blockSendingEventsFromQuotaService(){this.Dn.allowFromQuotaService=!1}allowSendingEventsFromQuotaService(){this.Dn.allowFromQuotaService=!0}blockSendingEventsFromSerialization(){this.Dn.allowFromSerialization=!1}allowSendingEventsFromSerialization(){this.Dn.allowFromSerialization=!0}canSendEvents(){return this.Dn.allowFromQuotaService&&this.Dn.allowFromSerialization}onIframeJavascriptError(t){var e;if(this.ye&&this.hs){(e=this.ye)===null||e===void 0||e.anonymize(t);let i=this.hs.translate({message:t.message,colno:t.colno,lineno:t.lineno,filename:t.filename,timestamp:C.now(),type:"JSError"});i&&this.Ns(i)}}onIframeCustomError(t){if(this.us){let e=this.us.translate({...t,timestamp:C.now(),type:"CustomError"});e&&this.Ns(e)}}onIframeDetailedApiError(t){this.wg(t)}onIframeRecordingUserEvent(t){for(let e of t)this.Nt(e)}onIframeRecordingBrowserEvent(t){if(this.isStarted)for(let e of t)this.processBrowserEvent(e)}processBrowserEvent(t){this.F.isCurrentPageviewValid()&&this.Ha.pushEvent(t,{isUserEvent:!1})}Nt(t){this.F.refreshSession(),this.F.isSessionValid()&&this.Ha.pushEvent(t,{isUserEvent:!0})}Q(t){yt.general.nbEvents.increase(),this.j.addEvent(t),this.j.isThresholdReached()?this.pushEvents():this.j.isFull()&&this.gg(),this.bg(t)}bg(t){this.f.emitDebugEvents&&this.qs.emit("recordingEvent",{...t,typeName:D[t.type]})}onStart(){var t;this.$i("tag-version","15.140.1"),this.$i("page-state",document.visibilityState),this.Ha.reset(),this.qe.start(),this.initStates(),this.Be.start(),this.ft&&this.ge&&this.ft.subscribe(s.jt,e=>this.wg(e),{detailedEvent:!0}),this.f.emitDebugEvents&&this.qs.emit("replayRecordingStarted"),csArray.prototype.forEach.call(this.ji,e=>this.Tg(e)),this.ji=[],this.Fi&&((t=this.Wt)===null||t===void 0||t.enableOnlineAssets(),this.Fi=!1)}onStop(){var t;this.qe.stop(),this.ft&&this.ft.unsubscribe(s.jt),this.Be.stop(),this.Ha.disconnect(),(t=this.Wt)===null||t===void 0||t.disableOnlineAssets()}clearStates(){this.Be.flush(),this.gg.cancel(),this.pushEvents(),this.W.removeQueryParams()}initStates(){this.ja=C.now(),this.j.getCurrentRequestIndex().reset(),this.Js=0,this.W.setQueryParams(this.CT.getRequestParameters())}pushEvents(){W(this.He,t=>{var e;return(e=t.flushEvents)===null||e===void 0?void 0:e.call(t)}),this.j.eventsCount()>0&&(this.isStarted?this.mg():this.j.clearEvents())}mg(){if(!this.canSendEvents())return;let t=this.j.getOrderedBatchSlots();for(let e of t){let i=e.batch.getEvents();if(!i.length)continue;this.Wr=i[i.length-1].date;let r=e.metadata.requestIndex,o=r.getCurrentIndex(),c=this.ja>this.Wr?i[0].date:this.ja;this.W.setQueryParams({pn:csString(e.metadata.pageNumber),ri:o.toString(),rst:c.toString(),let:this.getRecordingLastEventTimestamp()});let l=this.W.getQueryParams();this.Dt.addBatchInProgress(`${l.sn}.${l.pn}.${o}`,{...this.W.getQueryParams()},i),this.W.send(i),r.increment(),e.batch.clearEvents(),this.Ag&&this.Ag()}this.j.clearEmptyBatchSlots()}addInitialDom(t){this.j.addEventByTimestamp(t),this.bg(t)}wg(t){if(this.kn&&(t.plainCustomRequestHeaders||t.plainCustomResponseHeaders||t.requestBodyAttributes||t.responseBodyAttributes||t.customRequestHeaders||t.customResponseHeaders||t.queryParameters||t.requestBody||t.responseBody)){if(this.kn.truncate(t),this.ot){this.ot.registerApiErrorToEncrypt(t);return}t.customRequestHeaders="",t.customResponseHeaders="",t.requestBodyAttributes="",t.responseBodyAttributes="",t.queryParameters="",t.requestBody="",t.responseBody=""}this.Sg(t)}Sg(t){if(this.Js<s.NT){let e={type:D.API_ERROR,date:C.now(),args:[this.ge.anonymize(t)]};this.Ns(e),this.Js=this.Js+1,G.counters.networkRequests.count("collected")}}MT(t){t===os.ETR_SESSION?this.W.setQueryParams({[s.kT]:s.Rg}):t===os.ETR_PAGE&&this.W.setQueryParams({[s.DT]:s.Rg})}clearEvents(){this.j.clearEvents()}onCustomJavaScriptErrorEvent(t){var e;let i=(e=this.hs)===null||e===void 0?void 0:e.translate({type:"JSError",timestamp:C.now(),message:t.message,colno:t.colno,lineno:t.lineno,filename:t.filename});i&&this.Ns(i)}onCustomErrorEvent(t){var e;let i=(e=this.us)===null||e===void 0?void 0:e.translate({type:"CustomError",timestamp:C.now(),message:t.message,attributes:t.attributes});i&&this.Ns(i)}onPageEvent(t){this.Cg(t)}onUserIdentifierEvent(t){var e;let i={userIdentifier:t,date:C.now(),keyId:this.f.encryptionPublicKeyId};(e=this.ot)===null||e===void 0||e.registerUserIdentifierToEncrypt(i)}onEventTriggerRecording(t,e){this.isStarted?this.Tg({eventName:t,eventType:e}):csArray.prototype.push.call(this.ji,{eventName:t,eventType:e})}Tg(t){this.MT(t.eventType),this.Cg(t.eventName),this.pushEvents()}Cg(t){let e={type:D.PAGE_EVENT,date:C.now(),args:[{eventName:csString.prototype.slice.call(t,0,s.xT)}]};this.j.addEvent(e)}triggerUnanonymizationConsentGranted(){let t={date:C.now(),type:D.UNANONYMIZED_CONSENT_GRANTED};this.j.addEvent(t)}triggerUnanonymizationConsentWithdrawn(){let t={date:C.now(),type:D.UNANONYMIZED_CONSENT_WITHDRAWN};this.j.addEvent(t)}triggerRecordingForSessionGranted(){this.$i("consent-granted")}triggerRecordingForSessionWithdrawn(){this.$i("consent-withdrawn")}activateOnlineAssetsOnNextPageview(){this.Yr=!0}getStaticResourceManagerStatus(){return this.Wt?{isStarted:this.f.useStaticResourceManager&&Yr.isSupported(),onlineAssets:{activated:this.Wt.isOnlineAssetsActivated(),enabledOnNextPageview:this.Yr}}:null}resetOnlineAssetsOnPageview(){this.Fi=!1,this.Yr=!1}updateOnlineAssetsOnPageview(){this.Wt&&this.Yr&&(this.Fi=!0,this.Yr=!1)}onRecordingRequestSent(t){this.Ag=t}getRecordingStartTimestamp(){return this.ja.toString()}getRecordingLastEventTimestamp(){return this.Wr.toString()}onOptOut(){W(this.He,t=>{var e;return(e=t.releaseResources)===null||e===void 0?void 0:e.call(t)})}$i(t,e){if(!this.f.emitRecordInfoEvents)return;let i={date:C.now(),type:D.RECORDING_INFO_EVENT,args:e==null?[t]:[t,e]};this.j.addEvent(i)}_g(){return this.j.extractEvents(D.API_ERROR,D.JAVASCRIPT_ERROR,D.CUSTOM_ERROR,D.TEXT_VISIBILITY,D.POINTER_DOWN)}}return s.jt="RecordingService",s.xT=255,s.NT=20,s.DT="etrp",s.kT="etrs",s.Rg="1",j([It("addInitialDom")],s.prototype,"addInitialDom",null),s})(),qE=(()=>{class s extends Tt{constructor(t,e,i){super(),this.Qt=t,this.Rt=e,this.W=i,this.xh=!1,this.Xr={},this.LT=r=>{if(r.length!==0)for(let o of r){let{metadata:c,events:l}=o;this.UT(c.rt)&&this.W.send(l,c)}},window.addEventListener("focus",()=>{this.recover()})}onStart(){this.Xr={}}onStop(){}recover(){this.Qt.recover(this.LT)}addBatchInProgress(t,e,i){this.Xr[t]={metadata:{...e},events:i}}removeBatchInProgress(t){delete this.Xr[t]}blockSendingLastMessage(){this.xh=!1}allowSendingLastMessage(){this.xh=!0}sendLastMessageBeacon(){if(this.xh){let{ri:t,rst:e,let:i,...r}=this.W.getQueryParams();r.hlm="true",this.Rt.setQueryParams(r),this.Rt.send()}}UT(t){return!!t&&csString.prototype.indexOf.call(t,U.RECORDING_TEMPORARILY)===-1}saveBatchesInProgress(){csArray.prototype.forEach.call(Object.keys(this.Xr),t=>{let{metadata:e,events:i}=this.Xr[t];this.Qt.save({key:`${e.sn}.${e.pn}.${e.ri}`,metadata:{...e,datatype:"json"},events:csJSON.stringify(i)})})}save(t){this.Qt.save(t)}}return j([P("RecordingRecovery")],s.prototype,"recover",null),s})(),WE=(()=>{let s;return function(n){n[n.NOT_EXIST=2]="NOT_EXIST"}(s||(s={})),s})(),YE=8*1024*1024,XE=(()=>{class s extends Tt{constructor(t,e,i){super(),this.xe=t,this.Ig=e,this.Et=i,this.Lh={},this.Pg=new Set,this.cs=!1}initState(){Dc()&&(this.Ve=this.Et.getRequestParameters(),this.VT=`${this.Ig}/exist?${wi.toQuery(this.Ve)}`,this.jT=`${this.Ig}/putTag?${wi.toQuery(this.Ve)}`,this.Og=qs(async()=>{if(this.cs){this.Og();return}this.cs=!0;try{await this.HT()}finally{this.cs=!1}},300),this.xe.onSendStaticResource(t=>{this.Ng(t)}))}onStart(){}onStop(){}onIframeStaticResource(t){this.Ng(t)}Ng(t){this.Mg(t.resource.hash,t.resource.data),t.nestedResources&&t.nestedResources.length>0&&csArray.prototype.forEach.call(t.nestedResources,e=>{this.Mg(e.hash,e.data)})}Mg(t,e){this.Pg.has(t)||(this.Pg.add(t),this.Lh[t]=e,this.Og())}async HT(){let t=this.Lh;this.Lh={};let e=await this.BT(t);if(!e.length)return;let i=this.FT(e);await Promise.all(csArray.prototype.map.call(i,r=>window.fetch(this.jT,{method:"POST",body:r})))}async $T(t){try{let e=Object.keys(t);if(!e.length)return[];let i={projectId:this.Ve.pid,filter:WE.NOT_EXIST,hashes:e,touch:!0};return await(await window.fetch(this.VT,{method:"POST",body:csJSON.stringify(i)})).json()}catch{return[]}}async BT(t){let e=[],i=await this.$T(t);return csArray.prototype.forEach.call(i,r=>{let o=t[r];o?csArray.prototype.push.call(e,{hash:r,data:o}):H.warn("SRM: received unknown hash: "+r)}),e}FT(t){let e=0,i=[new FormData];for(let r of t){let{data:o,hash:c}=r,l=i.length-1;if(e=e+o.size,e<YE)i[l].append("",o,c);else{let h=new FormData;h.append("",o,c),e=o.size,csArray.prototype.push.call(i,h)}}return i}}return s})(),ql=2*1e3*1024,KE=200,hc=(()=>{class s{constructor(t=ql){this.Ut=[],this.Uh=new Ro(t)}addEvent(t){this.Uh.addString(ws(t)),csArray.prototype.push.call(this.Ut,t)}addEventByTimestamp(t){let e=0;for(;e<this.Ut.length&&!(this.Ut[e].date>=t.date);e+=1);csArray.prototype.splice.call(this.Ut,e,0,t)}eventsCount(){return this.Ut.length}clearEvents(){this.Uh.reset(),this.Ut=[]}isFull(){return this.eventsCount()>=KE}isThresholdReached(){return this.Uh.isThresholdReached()}getEvents(){return this.Ut}extractEvents(...t){let e=[],i=[];return csArray.prototype.forEach.call(this.Ut,r=>{csArray.prototype.indexOf.call(t,r.type)!==-1?csArray.prototype.push.call(e,r):csArray.prototype.push.call(i,r)}),this.Ut=i,e}stringifyEvents(){return ws(this.Ut)}dI(t){t.type===D.INITIAL_DOM&&(window.CSDomSerialized=window.CSDomSerialized?window.CSDomSerialized+1:1)}}return j([It("RecordingBatch.addEvent")],s.prototype,"addEvent",null),s})();function JE(s){if(typeof Object.values=="function")return Object.values(s);let n=[];for(let t in s)s.hasOwnProperty(t)&&csArray.prototype.push.call(n,s[t]);return n}var uc=(()=>{class s{constructor(){this.Ba=1}getCurrentIndex(){return this.Ba}increment(){this.Ba+=1}reset(){this.Ba=1}getRequestParameters(){return{ri:`${this.Ba}`}}}return s})(),QE=3,ZE=8,tS=(()=>{class s{constructor(t,e=ql,i=QE){this.zT=t,this.kg=e,this.Vh=i,this.Fa={}}addEvent(t){this.Dg().addEvent(t)}addEventByTimestamp(t){this.Dg().addEventByTimestamp(t)}eventsCount(){return csArray.prototype.reduce.call(this.zi(),(t,e)=>t+e.batch.eventsCount(),0)}isFull(){return csArray.prototype.some.call(this.zi(),t=>t.batch.isFull())}isThresholdReached(){let t=this.zi();return t.length>=this.Vh||csArray.prototype.some.call(t,e=>e.batch.isThresholdReached())}getEvents(){return csArray.prototype.reduce.call(this.getOrderedBatchSlots(),(t,e)=>csArray.prototype.concat.call(t,e.batch.getEvents()),[])}extractEvents(...t){return csArray.prototype.reduce.call(this.getOrderedBatchSlots(),(e,i)=>csArray.prototype.concat.call(e,i.batch.extractEvents(...t)),[])}stringifyEvents(){return ws(this.getEvents())}clearEvents(){csArray.prototype.forEach.call(this.zi(),t=>t.batch.clearEvents())}clearEmptyBatchSlots(){let t=this.getOrderedBatchSlots();for(let e=0;e<t.length-1;e++)t[e].batch.eventsCount()===0&&delete this.Fa[t[e].metadata.pageNumber]}zi(){return JE(this.Fa)}getOrderedBatchSlots(){return csArray.prototype.sort.call(this.zi(),eS)}xg(){let t=this.zT();if(t<=0)return{batch:new hc(this.kg),metadata:{pageNumber:0,requestIndex:new uc}};let e=this.Fa[t];if(e)return e;let i={batch:new hc(this.kg),metadata:{pageNumber:t,requestIndex:new uc}};return this.Fa[t]=i,this.zi().length>Math.max(this.Vh,ZE)&&H.warn(`RecordingBatchGroup: max number of slots overflowed(${this.zi().length}/${this.Vh})`),i}Dg(){return this.xg().batch}getCurrentRequestIndex(){return this.xg().metadata.requestIndex}}return s})();function eS(s,n){return s.metadata.pageNumber-n.metadata.pageNumber}function Lt(s,n=0){let t=Math.pow(10,n);return Math.round(s*t)/t}var sS=(()=>{class s{constructor(t,e){this.J=t,this.ut=e,this.L=Tn,this.$a=!1,this.je=!1,this.Kr=null,this.We=this.GT()}onEvent(t){this.L=t}start(){this.We&&(this.je=!0,this.jh())}stop(){this.je=!1}releaseResources(){this.Br()}jh(){this.$a||(this.$a=!0,this.Kr=this.qT(),this.Kr.observe({type:"navigation",buffered:!0}))}qT(){return new window.PerformanceObserver(t=>{this.je&&csArray.prototype.forEach.call(t.getEntriesByType("navigation"),e=>{let i=this.WT(e);this.L(i)})})}Br(){this.Kr&&(this.Kr.disconnect(),this.Kr=null)}WT(t){let e={};for(let r in t){let o=kE[r],c=t[r];!o||c instanceof csArray||c instanceof Function||(A(c)?e[o]=c:ft(c)&&(e[o]=Lt(c,1)))}G.counters.networkRequests.count("collected");let i={...e,n:this.J.anonymizeUrl(this.J.removeQueryString(t.name),{maskingPatterns:this.ut.getUrlMaskingPatterns(),partialMaskingPatterns:this.ut.getPartialUrlMaskingPatterns()})};return{date:C.now(),type:D.PERFORMANCE_NAVIGATION_TIMING,args:[i]}}GT(){var t,e;return((t=window.PerformanceObserver)===null||t===void 0?void 0:t.supportedEntryTypes)==null?void 0:csArray.prototype.includes.call((e=window.PerformanceObserver)===null||e===void 0?void 0:e.supportedEntryTypes,"navigation")}}return s})(),iS=(()=>{class s{constructor(t,e){this.J=t,this.ut=e,this.je=!1,this.L=Tn,this.Jr=null,this.We=this.YT()}onEvent(t){this.L=t}start(){this.We&&(this.je=!0,this.jh())}stop(){this.je=!1}releaseResources(){this.Br()}jh(){this.$a||(this.$a=!0,this.Jr=this.XT(),this.Jr.observe({type:"resource",buffered:!0}))}XT(){return new window.PerformanceObserver(t=>{this.KT(t)})}KT(t){if(this.je){let e=t.getEntries();csArray.prototype.forEach.call(csArray.prototype.map.call(e,i=>this.JT(i)),i=>{this.L(i)})}}Br(){this.Jr&&(this.Jr.disconnect(),this.Jr=null)}JT(t){let e={};for(let r in t){let o=Gl[r],c=t[r];!o||c instanceof csArray||c instanceof Function||(typeof c=="string"&&o?e[o]=c:typeof c=="number"&&o&&(e[o]=Lt(c,1)))}G.counters.networkRequests.count("collected");let i={...e,n:this.J.anonymizeUrl(this.J.removeQueryString(t.name),{maskingPatterns:this.ut.getUrlMaskingPatterns(),partialMaskingPatterns:this.ut.getPartialUrlMaskingPatterns()})};return{date:C.now(),type:D.PERFORMANCE_RESOURCE_TIMING,args:[i]}}YT(){var t,e;return((t=window.PerformanceObserver)===null||t===void 0?void 0:t.supportedEntryTypes)==null?void 0:csArray.prototype.includes.call((e=window.PerformanceObserver)===null||e===void 0?void 0:e.supportedEntryTypes,"resource")}}return s})(),nS=(()=>{class s{constructor(t,e){this.Ot=t,this.M=e,this.Fs=[{boundElement:window,type:"hashchange",listener:()=>this.hashChangeListener()},{boundElement:document,type:"visibilitychange",listener:()=>this.visibilityChangeListener()}]}onEvent(t){this.L=t}start(){this.wi(),this.triggerInitialEvents()}stop(){this.bi()}wi(){csArray.prototype.forEach.call(this.Fs,t=>gt(t))}bi(){csArray.prototype.forEach.call(this.Fs,t=>mt(t))}triggerInitialEvents(){this.hashChangeListener()}hashChangeListener(){let t={type:D.HASH_CHANGE,args:[this.M.anonymizePII(this.Ot.href)],date:C.now()};this.L(t)}visibilityChangeListener(){let t={type:D.VISIBILITY_CHANGE,args:[document.visibilityState],date:C.now()};this.L(t)}}return j([P("hashChange")],s.prototype,"hashChangeListener",null),j([P("visibilityChange")],s.prototype,"visibilityChangeListener",null),s})();function rS(s){if(!A(s))return null;let t=/iP(ad|hone|od).+Version\/(\d+)\..*Safari/i.exec(s);return t?Number(t[2]):null}var oS=!!window.chrome,aS=33,cS=(()=>{class s{constructor(){this.eventType="user",this.Hh=[],this.QT=[{type:"pointerup",listener:e=>this.pointerUpListener(e),boundElement:document},{type:"pointermove",listener:e=>this.pointerMoveListener(e),boundElement:document},{type:"pointerdown",listener:e=>this.pointerDownListener(e),boundElement:document}],this.ZT=[{type:"touchstart",listener:e=>this.touchStartListener(e),boundElement:document},{type:"touchmove",listener:e=>this.touchMoveListener(e),boundElement:document},{type:"touchend",listener:e=>this.touchEndCancelListener(e),boundElement:document},{type:"touchcancel",listener:e=>this.touchEndCancelListener(e),boundElement:document}],this.za=[{type:"click",listener:e=>this.clickListener(e),boundElement:document},{type:"keyup",listener:e=>this.keyUpListener(e),boundElement:document},{type:"keydown",listener:e=>this.keyDownListener(e),boundElement:document},{type:"copy",listener:e=>this.copyListener(e),boundElement:document},{type:"cut",listener:e=>this.cutListener(e),boundElement:document},{type:"paste",listener:e=>this.pasteListener(e),boundElement:document},{type:"scroll",listener:e=>this.scrollListener(csEventtarget.apply(e)),boundElement:document},{type:"mouseover",listener:e=>this.mouseOverListener(e),boundElement:document}],this.Bh=[{type:"scroll",listener:e=>this.scrollListener(csEventtarget.apply(e))}];let t=rS(window.navigator.userAgent);(t===null||t&&t>=16)&&csArray.prototype.push.call(this.Bh,{type:"mouseover",listener:e=>this.mouseOverListener(e)}),this.de=new Zs((e,i)=>{switch(i){case"initial":case"added":this.wi(e);break;case"removed":this.bi(e);break}})}init(){this.tA(),this.eA(),this.rl()}onEvent(t){csArray.prototype.push.call(this.Hh,t)}ae(t,e=!1){csArray.prototype.forEach.call(this.Hh,i=>i(t,e))}start(){this.mh(),this.wi(document),this.de.observe()}stop(){this.bi(document),this.de.disconnect(),this.Hh=[]}eA(){this.sA()&&csArray.prototype.push.call(this.za,...this.QT)}tA(){this.iA()&&csArray.prototype.push.call(this.za,...this.ZT)}wi(t){_n(t)?csArray.prototype.forEach.call(this.za,e=>gt(e)):csArray.prototype.forEach.call(this.Bh,e=>{let i={type:e.type,listener:e.listener,boundElement:t};gt(i)})}bi(t){_n(t)?csArray.prototype.forEach.call(this.za,e=>mt(e)):csArray.prototype.forEach.call(this.Bh,e=>{let i={type:e.type,listener:e.listener,boundElement:t};mt(i)})}sA(){return"PointerEvent"in window&&typeof window.PointerEvent=="function"}iA(){return"TouchEvent"in window&&typeof window.TouchEvent=="function"}mh(){this.nA()}nA(){let t=Hs.getScrollContainer()||document,e=rt(t),i=this.Lg(t);if(i.top!==0||i.left!==0){let r={type:D.SCROLL,args:[e,i.left,i.top],date:C.now()};this.ae(r,!0)}}Lg(t){return t===document?{top:window.pageYOffset,left:window.pageXOffset}:{top:t.scrollTop,left:t.scrollLeft}}scrollListener(t){if(x.isMaskedElement(t)||x.isMaskedElementChild(t))return;let e=rt(t),i=this.Lg(t),r={type:D.SCROLL,args:[e,i.left,i.top],date:C.now()};this.ae(r)}mouseOverListener(t){if(x.isMaskedElementChild(t.target))return;let e=rt(t.target),i={type:D.MOUSE_OVER,args:[e],date:C.now()};this.ae(i)}clickListener(t){let e=Rt(t);if(x.isMaskedElementChild(e))return;let i=rt(e),r={type:D.CLICK,args:[i],date:C.now()};this.ae(r)}keyUpListener(t){let e=Rt(t);if(x.isMaskedElementChild(e))return;let i=rt(e),r=this.V[t.key];if(r===void 0)return;let o={type:D.KEY_UP,args:[i,r],date:C.now()};this.ae(o)}keyDownListener(t){let e=Rt(t);if(x.isMaskedElementChild(e))return;let i=rt(e),r=this.V[t.key];if(r===void 0)return;let o={type:D.KEY_DOWN,args:[i,r],date:C.now()};this.ae(o)}copyListener(t){let e=Rt(t);if(x.isMaskedElementChild(e))return;let i=rt(e),r={type:D.CLIPBOARD_COMMAND,args:[i,Bs.COPY],date:C.now()};this.ae(r)}cutListener(t){let e=Rt(t);if(x.isMaskedElementChild(e))return;let i=rt(e),r={type:D.CLIPBOARD_COMMAND,args:[i,Bs.CUT],date:C.now()};this.ae(r)}pasteListener(t){let e=Rt(t);if(x.isMaskedElementChild(e))return;let i=rt(e),r={type:D.CLIPBOARD_COMMAND,args:[i,Bs.PASTE],date:C.now()};this.ae(r)}pointerUpListener(t){let e=Rt(t);if(x.isMaskedElementChild(e))return;let i=rt(e),r={type:D.POINTER_UP,args:[t.pointerId,t.pointerType,Lt(t.clientX,1),Lt(t.clientY,1),i,t.button],date:C.now()};this.ae(r)}pointerMoveListener(t){let e={type:D.POINTER_MOVE,args:[t.pointerId,t.pointerType,Lt(t.clientX,1),Lt(t.clientY,1)],date:C.now()};this.ae(e)}pointerDownListener(t){let e=Rt(t);if(x.isMaskedElementChild(e))return;let i=rt(e),r={type:D.POINTER_DOWN,args:[t.pointerId,t.pointerType,Lt(t.clientX,1),Lt(t.clientY,1),i,t.button,{pageX:Lt(t.pageX,1),pageY:Lt(t.pageY,1)}],date:C.now()};this.ae(r)}touchStartListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let r=e[i],o={type:D.TOUCH_START,args:[r.identifier,Lt(r.clientX,1),Lt(r.clientY,1)],date:C.now()};this.ae(o)}}touchMoveListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let r=e[i],o={type:D.TOUCH_MOVE,args:[r.identifier,Lt(r.clientX,1),Lt(r.clientY,1)],date:C.now()};this.ae(o)}}touchEndCancelListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let r=e[i],o={type:t.type==="touchend"?D.TOUCH_END:D.TOUCH_CANCEL,args:[r.identifier,Lt(r.clientX,1),Lt(r.clientY,1)],date:C.now()};this.ae(o)}}rl(){this.V={},this.V[" "]=q.SPACE,this.V.Spacebar=q.SPACE,this.V.Backspace=q.BACKSPACE,this.V.Enter=q.ENTER,this.V.Delete=q.DELETE,this.V.ArrowUp=q.ARROWUP,this.V.ArrowDown=q.ARROWDOWN,this.V.ArrowLeft=q.ARROWLEFT,this.V.ArrowRight=q.ARROWRIGHT,this.V.Up=q.ARROWUP,this.V.Down=q.ARROWDOWN,this.V.Left=q.ARROWLEFT,this.V.Right=q.ARROWRIGHT,this.V.CapsLock=q.CAPSLOCK,this.V.Shift=q.SHIFT,this.V.Tab=q.TAB,this.V.Escape=q.ESCAPE,this.V.Esc=q.ESCAPE,this.V.End=q.END,this.V.Alt=q.ALT,this.V.Control=q.CTRL,this.V.Meta=q.META}}return j([It("RecordingPageEvents.start")],s.prototype,"start",null),j([P("scroll")],s.prototype,"scrollListener",null),j([P("mouseOver"),ht(),Of()],s.prototype,"mouseOverListener",null),j([P("click"),ht()],s.prototype,"clickListener",null),j([P("Event handler type: keyup")],s.prototype,"keyUpListener",null),j([P("Event handler type: keydown")],s.prototype,"keyDownListener",null),j([P("Event handler type: copy")],s.prototype,"copyListener",null),j([P("Event handler type: cut")],s.prototype,"cutListener",null),j([P("Event handler type: paste")],s.prototype,"pasteListener",null),j([P("Event handler type: pointerup"),ht()],s.prototype,"pointerUpListener",null),j([P("Event handler type: pointermove"),ht(),Di({wait:aS})],s.prototype,"pointerMoveListener",null),j([P("Event handler type: pointerdown"),ht()],s.prototype,"pointerDownListener",null),j([P("Event handler type: touchstart"),ht()],s.prototype,"touchStartListener",null),j([P("Event handler type: touchmove"),ht()],s.prototype,"touchMoveListener",null),j([P("Event handler type: touchend-cancel"),ht()],s.prototype,"touchEndCancelListener",null),s})(),lS=(()=>{class s{constructor(){}onScannedAsset(t){this.Ga=t}scanCssString(t){this.Fh(mi(t))}scanElement(t,e){x.getMaskedElementDetails(t).state!==x.MaskedElementState.NotMasked||e&&x.isMaskedAttribute(t,e)||(Pi(t)?this.rA(t):ao(t)?this.oA(t,e):(this.aA(t,e),this.cA(t,e),this.lA(t,e)))}oA(t,e){var i;if((!e||e==="href")&&t.href){let o={assetId:((i=t.sheet)===null||i===void 0?void 0:i.href)||t.href,assetBasePath:window.location.href,assetRawPath:gl(t)};this.Ga({type:"stylesheet",asset:o})}}rA(t){var e;let i=new Set;if(t.textContent)for(let o of mi(t.textContent))i.add(o);let r;try{r=(e=t.sheet)===null||e===void 0?void 0:e.cssRules}catch(o){o.name==="SecurityError"||o.name==="InvalidAccessError"||H.error(o.message)}if(r)for(let o=0;o<r.length;o++){let c=r.item(o).cssText;for(let l of mi(c))i.add(l)}this.Fh(Ue(i))}$h(t){return!this.hA(t)&&!te(t)&&!Xd(t)}aA(t,e){if(dd(t)||ud(t)){if(!e||e==="src"){let i=t.getAttribute("src");if(i&&this.$h(i)){let r={assetId:t.src,assetRawPath:i,assetBasePath:window.location.href};this.Ga({type:"asset",asset:r})}}(!e||e==="srcset")&&t.srcset&&this.uA(t.srcset)}}cA(t,e){if(t.nodeType!==1){it.warn(`StaticResourceUrlTracker: Wrong element nodeType: ${t==null?void 0:t.nodeName}/${t.nodeType}`);return}if(t.hasAttribute&&(!e||e==="style")&&t.hasAttribute("style")){let i=t.getAttribute("style");if(typeof i=="string")this.scanCssString(i);else throw new Error("Unexpected style: "+t.outerHTML)}}uA(t){this.Fh(Oo(t))}lA(t,e){if((md(t)||yd(t)||Ed(t))&&(!e||e==="href"||e==="xlink:href")){let i=t.getAttribute("href")||t.getAttribute("xlink:href");if(i&&this.$h(i)){let r={assetId:Ee(i),assetRawPath:i,assetBasePath:window.location.href};this.Ga({type:"asset",asset:r})}}}Fh(t){return csArray.prototype.forEach.call(csArray.prototype.map.call(csArray.prototype.filter.call(t,e=>this.$h(e)),e=>({rawUrl:e,absoluteUrl:Ee(e)})),e=>{let i={assetId:e.absoluteUrl,assetBasePath:window.location.href,assetRawPath:e.rawUrl};this.Ga({type:"asset",asset:i})})}hA(t){return/^https:\/\/\w+:\w+@/.test(t)}}return s})(),hS=30,uS=0,Wl=(()=>{class s{constructor(t,e=hS,i=uS){this.dA=t,this.pA=e,this.fA=i,this.Ye=new Ci,this.$e=!1,this.zh=0,this.Ug=()=>{for(this.zh=0;this.Ye.length;){if(this.zh>=this.pA){csSetTimeout(this.Ug,this.fA);return}let r=C.elapsed(),o=this.Ye.pop();if(!o)break;this.runTask(o);let c=C.elapsed()-r;this.zh+=c}this.$e=!1}}schedule(t,e=!1){if(!this.dA||e){t();return}yt.general.pendingTasks.increase(),this.Ye.push(t),this.gA()}gA(){this.$e||(this.$e=!0,csSetTimeout(()=>{this.Ug()}))}runTask(t){yt.general.pendingTasks.decrease(),t()}runPendingTasks(){this.Ye.forEach(t=>{this.runTask(t)}),this.Ye.clear()}clearQueue(){yt.general.pendingTasks.clear(),yt.mutations.pendingMutations.clear(),this.Ye.clear()}isEmpty(){return this.Ye.length===0}}return j([P("TaskScheduler"),It("runTask")],s.prototype,"runTask",null),j([It("runPendingTasks")],s.prototype,"runPendingTasks",null),s})(),dS=(()=>{class s{constructor(){this.z=!1,this.Vg=new Io(t=>t.type==="cssRuleInserted"&&this.mA(t)),this.yA=Ln(t=>{this.z&&t.length>0&&this.C.schedule(()=>W(t,e=>this.Qr.scanElement(e)))}),this.EA=({type:t,asset:e})=>{var i,r,o;t==="stylesheet"&&((i=this.SA)===null||i===void 0||i.call(this,e)),(r=this.vA)===null||r===void 0||r.call(this,e);let c={date:C.now(),type:D.STATIC_RESOURCE_URL,args:[e.assetId]};(o=this.L)===null||o===void 0||o.call(this,c)},this.C=new Wl(!0,30,0),this.jr=new Bl(t=>this._A(t)),this.D=new ce(t=>this.Po(t)),this.Qr=new lS,this.Qr.onScannedAsset(this.EA)}onEvent(t){this.L=t}onAsset(t){this.vA=t}onStyleSheetFound(t){this.SA=t}start(){this.z||(this.z=!0,this.Vg.observe(),this.jr.observe(),this.D.observe())}stop(){this.z&&(this.Vg.disconnect(),this.jr.disconnect(),this.D.disconnect(),this.z=!1)}mA(t){!t.rule||!this.z||this.Qr.scanCssString(t.rule)}_A(t){this.z&&x.getMaskedElementDetails(t).state===x.MaskedElementState.NotMasked&&this.yA.push(t)}Po(t){csSetTimeout(()=>{for(let e of t)switch(e.type){case"attributes":this.Qr.scanElement(e.target,e.attributeName);break;case"characterData":this.wA(e.target);break;case"childList":}})}wA(t){vn(t)&&csNodeparentNode.apply(t)&&Pi(csNodeparentNode.apply(t))&&this.Qr.scanCssString(t.data)}}return s})(),pS="csPersisted",dc="v2/recording",fS=["isRecording"],Yl=["replay:resourceManager:enableForOnlineResource:nextPageviewOnly","cssrm:onlineAssets:activateForNextPageview"],gS=["replay:resourceManager:getStatus","cssrm:getStatus"],mS=(()=>{class s{constructor(t,e,i,r,o,c,l,h,f,d,E,m,S,O,N,v,_,M,k,T,B,et){this.$s=t,this.R=e,this.f=i,this.Ve=r,this.E=o,this.M=c,this.F=l,this.ue=h,this.ye=f,this.ft=d,this.ge=E,this.ut=m,this.S=S,this.Zs=O,this.jg=N,this.ne=v,this.Vt=_,this.J=M,this.kn=k,this.it=T,this.pI=B,this.ot=et}init(){var t,e;let i=[],r=[];csArray.prototype.push.call(r,new Fy),this.Zr=new Gy(this.it.shouldUseAnonymization(),this.f.whitelistedAttributes,this.M,this.f.anonymizeDigits),this.Gi();let o=new bE(pS);this.bA(o),this.j=new tS(()=>{var M;return((M=this.R.getSession())===null||M===void 0?void 0:M.pageNumber)||0});let c=new dS;csArray.prototype.push.call(i,c),this.f.useStaticResourceManager&&Yr.isSupported()&&(this.Wt=new Yr,this.xe=new AE,this.Hg=new XE(this.xe,this.f.getStaticResourceManagerUri(),this.Ve),this.jg.addListener(this.Hg),csArray.prototype.push.call(r,this.Wt));let l=new Ti(this.Ve,{getRequestParameters:()=>({let:this.recordingService.getRecordingLastEventTimestamp()})},{getRequestParameters:()=>({rst:this.recordingService.getRecordingStartTimestamp()})},{getRequestParameters:()=>({rt:csArray.prototype.join.call(this.R.getCollectStates(),",")})}),h=new Tl(`${this.f.getRecordingUri()}/${dc}`);csArray.prototype.push.call(r,this.Zr),csArray.prototype.push.call(r,new Qy(this.J)),csArray.prototype.push.call(r,new Zy),this.qi=new cS,this.qi.init(),csArray.prototype.push.call(i,this.qi),this.Dt=new qE(o,h,this.W);{let{withResource:M,withNavigation:k}=(t=this.f.performanceTimingOptions)!==null&&t!==void 0?t:{};M&&csArray.prototype.push.call(i,new iS(this.J,this.ut)),k&&csArray.prototype.push.call(i,new sS(this.J,this.ut))}csArray.prototype.push.call(i,new nS(window.location,this.M));let f=new By,d=new sE,E=new nE,m=new aE(this.ot),S=new lE,O=[d,this.ue,f,new FE(csArray.prototype.filter.call(i,M=>M)),S,new hE,new fE,m,E];this.f.textVisibilityEnabled&&cs.isSupported()&&(this.to=new zy,csArray.prototype.push.call(O,this.to)),this.f.jsErrorsEnabled&&(this.Ua=new gE,this.TA=new mE(M=>this.ye.anonymize(M)),this.hs=new BE(this.Ua),csArray.prototype.push.call(O,this.Ua),csArray.prototype.push.call(r,this.TA)),!((e=this.f.customErrors)===null||e===void 0)&&e.enabled&&(this.us=new HE);let N=new vE(O,r),v=new jE(N,this.S,this.xe,this.hs,this.us),_=[f,d,E,m,S];this.recordingService=new GE(this.f,this.j,l,this.F,this.R,this.ye,this.ft,this.ge,this.ot,this.W,this.Dt,h,v,i,_,this.Wt,this.kn,this.hs,this.us),this.Zs.addListener(this.recordingService),this.jg.addListener(this.recordingService),this.recordingService.init(),this.E.register(fS,()=>this.R.isReplayRecorded()&&!this.ne.isUrlExcludedForSessionReplay()),this.E.register(Yl,()=>{this.recordingService.activateOnlineAssetsOnNextPageview(),this.S.emitRecordingContextChange()}),this.E.register(gS,()=>this.recordingService.getStaticResourceManagerStatus()),this.eo=new TE(this.S,this.R),this.Zs.addListener(this.eo),this.$s.enableRecordingContext(this.recordingService,this.R,this.eo),this.Gh()}onAfterNaturalPageView(){var t;this.ne.isUrlExcludedForSessionReplay()?this.recordingService.resetOnlineAssetsOnPageview():this.recordingService.updateOnlineAssetsOnPageview(),(t=this.Hg)===null||t===void 0||t.initState()}onStartTracking(){this.Dt.recover(),this.Gi(),this.R.isReplayRecorded()&&!this.ne.isUrlExcludedForSessionReplay()&&(this.R.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.qh())}onArtificialPageViewEnd(){this.R.isReplayRecorded()&&!this.ne.isUrlExcludedForSessionReplay()&&!this.R.isTemporarilyRecorded()&&this.Dt.sendLastMessageBeacon(),this.recordingService.clearStates()}onAfterArtificialPageView(){this.Gi(),this.R.isReplayRecorded()&&!this.ne.isUrlExcludedForSessionReplay()?(this.R.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.recordingService.updateOnlineAssetsOnPageview(),this.AA()):(this.recordingService.resetOnlineAssetsOnPageview(),this.xn())}onBeforeSessionRenewal(){this.recordingService.clearStates(),this.xn()}onOptout(){this.xn(),this.recordingService.onOptOut()}onReplayUnanonymizationConsentGranted(){this.Gi(),this.recordingService.triggerUnanonymizationConsentGranted(),this.S.emitRecordingContextChange()}onReplayUnanonymizationConsentWithdrawn(){this.Gi(),this.recordingService.triggerUnanonymizationConsentWithdrawn(),this.S.emitRecordingContextChange()}onCollectStateChange(t,e){t===U.QUOTA_REACHED||t===U.ANALYTICS_ONLY&&e===Wt.ETR_OFF?(this.recordingService.clearEvents(),this.xn()):(this.W.setQueryParams({rt:csArray.prototype.join.call(this.R.getCollectStates(),",")}),this.recordingService.allowSendingEventsFromQuotaService(),this.recordingService.pushEvents(),this.eo.onCollectStateChange(t,e))}onInitialDomStart(){this.recordingService.blockSendingEventsFromSerialization(),this.Dt.blockSendingLastMessage()}onInitialDomDone(t){this.recordingService.allowSendingEventsFromSerialization(),this.recordingService.addInitialDom(t),this.Dt.allowSendingLastMessage(),this.qi.start(),this.recordingService.pushEvents(),G.counters.longTasks.count>0&&G.counters.longTasks.flush(),G.counters.tasks.count>0&&G.counters.tasks.flush()}onAfterReplayRecordingConsentGranted(){this.R.isReplayRecorded()&&!this.ne.isUrlExcludedForSessionReplay()&&(this.R.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.qh(),this.recordingService.triggerRecordingForSessionGranted())}onAfterReplayRecordingConsentWithdrawn(){this.recordingService.isRecording()&&(this.recordingService.triggerRecordingForSessionWithdrawn(),this.recordingService.clearStates(),this.xn())}Gh(){var t,e,i,r;if(!((e=(t=this.f.experimental.sessionReplay)===null||t===void 0?void 0:t.shadowRoot)===null||e===void 0)&&e.filterByHostSelector){let o=(r=(i=this.f.experimental.sessionReplay)===null||i===void 0?void 0:i.shadowRoot)===null||r===void 0?void 0:r.filterByHostSelector;W(o,c=>{kt(c)&&ce.setShadowRootFilter(l=>{try{return Yt.call(l.host,c)}catch{return!1}})})}}qh(){this.recordingService.start(),this.Dt.start(),this.S.emitRecordingContextChange()}xn(){this.recordingService.stop(),this.Dt.stop(),this.S.emitRecordingContextChange()}AA(){this.xn(),this.qh()}bA(t){let e="byteArray";this.W=this.Vt.create(`${this.f.getRecordingUri()}/${dc}`,!0,e,t,["rt","v","pid","pn","sn","uu"])}Gi(){var t;let e=this.it.shouldUseAnonymization();this.Zr.setAnonymization(e),(t=this.to)===null||t===void 0||t.setAnonymization(e)}}return j([It("Recording.onStartTracking")],s.prototype,"onStartTracking",null),j([It("onInitialDomDone")],s.prototype,"onInitialDomDone",null),s})(),yS=(()=>{class s{constructor(t,e){this.he=t,this.f=e,this.Bg=!1}enableRecordingContext(t,e,i){this.Bg=!0,this.Cn=t,this.R=e,this.eo=i}getRecordingContext(){var t,e,i;if(!this.Bg)return{isRecording:!1,recordingStartTimestamp:0,etrState:Wt.ETR_OFF,etrStatus:Zt.ETR_DISABLED,collectState:U.ANALYTICS_ONLY};let r=this.R.getSession();return{isRecording:this.Cn.isRecording(),useAnonymization:this.he.getSensitiveStatus().useAnonymization,enableOnlineResources:(t=this.Cn.getStaticResourceManagerStatus())===null||t===void 0?void 0:t.onlineAssets.activated,enableOnlineResourcesOnNextPageview:(e=this.Cn.getStaticResourceManagerStatus())===null||e===void 0?void 0:e.onlineAssets.enabledOnNextPageview,recordingStartTimestamp:parseInt(this.Cn.getRecordingStartTimestamp(),10),etrState:this.f.malkaEtrEnabled?Wt.ETR_ON:Wt.ETR_OFF,etrStatus:this.eo.getEtrStatus(r),collectState:(i=r==null?void 0:r.collectState)!==null&&i!==void 0?i:U.ANALYTICS_ONLY}}}return s})(),Ai=(()=>{class s{static isRecordingSupported(){return"MutationObserver"in window&&"visibilityState"in document}static isAsyncSerializationSupported(){return"Promise"in window&&"findIndex"in csArray.prototype}}return s})(),ES=(()=>{let s;return function(n){n.COMPRESSION_DISABLED="compressionDisabled"}(s||(s={})),s})(),SS=(()=>{class s{constructor(){}static init(t){(!this.Wh||t!==void 0)&&this.initFlags(t)}static initFlags(t=document.cookie){var e;let i=(e=/_cs_debug=((\w|\.|\:|=)+)/g.exec(t))===null||e===void 0?void 0:e[1];if(this.Wh=new Map,i){let r=csString.prototype.split.call(i,".");for(let o=0;o<r.length;o++){let[c,l]=csString.prototype.split.call(r[o],"=");this.Wh.set(c,l||"true")}}}static getBoolean(t){let e=this.getString(t);return e!=null&&e!=="false"&&parseInt(e)!==0}static getString(t){var e;return this.init(),(e=this.Wh)===null||e===void 0?void 0:e.get(t)}static isCompressionEnabled(){return!this.getBoolean(ES.COMPRESSION_DISABLED)}static Log(t){return(e,i,r)=>{var o;let c=i.toString(),l=`${(o=e.constructor)===null||o===void 0?void 0:o.name}.${c}`,h=r.value;vS(s.getString("debugLog"),t)&&(r.value=function(...f){return console.log(l,...f),h.bind(this)(...f)})}}}return s})();function vS(s,n){var t;return s==null?!1:s===n||!!(!((t=csString.prototype.match.call(s,new csRegExp("(^|,)("+n+")(,|$)")))===null||t===void 0)&&t.length)}function pc(){function i(a){let p=a.length;for(;--p>=0;)a[p]=0}let r=0,o=1,c=2,l=3,h=258,f=29,d=256,E=d+1+f,m=30,S=19,O=2*E+1,N=15,v=16,_=7,M=256,k=16,T=17,B=18,et=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),ct=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Ht=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Ut=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),w=512,L=new Array((E+2)*2);i(L);let V=new Array(m*2);i(V);let F=new Array(w);i(F);let lt=new Array(h-l+1);i(lt);let Dt=new Array(f);i(Dt);let se=new Array(m);i(se);function Te(a,p,g,y,u){this.static_tree=a,this.extra_bits=p,this.extra_base=g,this.elems=y,this.max_length=u,this.has_stree=a&&a.length}let hs,zt,Bt;function he(a,p){this.dyn_tree=a,this.max_code=0,this.stat_desc=p}let Is=a=>a<256?F[a]:F[256+(a>>>7)],Ae=(a,p)=>{a.pending_buf[a.pending++]=p&255,a.pending_buf[a.pending++]=p>>>8&255},At=(a,p,g)=>{a.bi_valid>v-g?(a.bi_buf|=p<<a.bi_valid&65535,Ae(a,a.bi_buf),a.bi_buf=p>>v-a.bi_valid,a.bi_valid+=g-v):(a.bi_buf|=p<<a.bi_valid&65535,a.bi_valid+=g)},Kt=(a,p,g)=>{At(a,g[p*2],g[p*2+1])},Bi=(a,p)=>{let g=0;do g|=a&1,a>>>=1,g<<=1;while(--p>0);return g>>>1},Fi=a=>{a.bi_valid===16?(Ae(a,a.bi_buf),a.bi_buf=0,a.bi_valid=0):a.bi_valid>=8&&(a.pending_buf[a.pending++]=a.bi_buf&255,a.bi_buf>>=8,a.bi_valid-=8)},Bn=(a,p)=>{let g=p.dyn_tree,y=p.max_code,u=p.stat_desc.static_tree,R=p.stat_desc.has_stree,b=p.stat_desc.extra_bits,I=p.stat_desc.extra_base,Q=p.stat_desc.max_length,$,Gt,qe,at,gs,Ms,tn=0;for(at=0;at<=N;at++)a.bl_count[at]=0;for(g[a.heap[a.heap_max]*2+1]=0,$=a.heap_max+1;$<O;$++)Gt=a.heap[$],at=g[g[Gt*2+1]*2+1]+1,at>Q&&(at=Q,tn++),g[Gt*2+1]=at,!(Gt>y)&&(a.bl_count[at]++,gs=0,Gt>=I&&(gs=b[Gt-I]),Ms=g[Gt*2],a.opt_len+=Ms*(at+gs),R&&(a.static_len+=Ms*(u[Gt*2+1]+gs)));if(tn!==0){do{for(at=Q-1;a.bl_count[at]===0;)at--;a.bl_count[at]--,a.bl_count[at+1]+=2,a.bl_count[Q]--,tn-=2}while(tn>0);for(at=Q;at!==0;at--)for(Gt=a.bl_count[at];Gt!==0;)qe=a.heap[--$],!(qe>y)&&(g[qe*2+1]!==at&&(a.opt_len+=(at-g[qe*2+1])*g[qe*2],g[qe*2+1]=at),Gt--)}},$i=(a,p,g)=>{let y=new Array(N+1),u=0,R,b;for(R=1;R<=N;R++)y[R]=u=u+g[R-1]<<1;for(b=0;b<=p;b++){let I=a[b*2+1];I!==0&&(a[b*2]=Bi(y[I]++,I))}},si=()=>{let a,p,g,y,u,R=new Array(N+1);for(g=0,y=0;y<f-1;y++)for(Dt[y]=g,a=0;a<1<<et[y];a++)lt[g++]=y;for(lt[g-1]=y,u=0,y=0;y<16;y++)for(se[y]=u,a=0;a<1<<ct[y];a++)F[u++]=y;for(u>>=7;y<m;y++)for(se[y]=u<<7,a=0;a<1<<ct[y]-7;a++)F[256+u++]=y;for(p=0;p<=N;p++)R[p]=0;for(a=0;a<=143;)L[a*2+1]=8,a++,R[8]++;for(;a<=255;)L[a*2+1]=9,a++,R[9]++;for(;a<=279;)L[a*2+1]=7,a++,R[7]++;for(;a<=287;)L[a*2+1]=8,a++,R[8]++;for($i(L,E+1,R),a=0;a<m;a++)V[a*2+1]=5,V[a*2]=Bi(a,5);hs=new Te(L,et,d+1,E,N),zt=new Te(V,ct,0,m,N),Bt=new Te(new Array(0),Ht,0,S,_)},Ps=a=>{let p;for(p=0;p<E;p++)a.dyn_ltree[p*2]=0;for(p=0;p<m;p++)a.dyn_dtree[p*2]=0;for(p=0;p<S;p++)a.bl_tree[p*2]=0;a.dyn_ltree[M*2]=1,a.opt_len=a.static_len=0,a.last_lit=a.matches=0},zi=a=>{a.bi_valid>8?Ae(a,a.bi_buf):a.bi_valid>0&&(a.pending_buf[a.pending++]=a.bi_buf),a.bi_buf=0,a.bi_valid=0},fh=(a,p,g,y)=>{zi(a),y&&(Ae(a,g),Ae(a,~g)),a.pending_buf.set(a.window.subarray(p,p+g),a.pending),a.pending+=g},Ho=(a,p,g,y)=>{let u=p*2,R=g*2;return a[u]<a[R]||a[u]===a[R]&&y[p]<=y[g]},Fn=(a,p,g)=>{let y=a.heap[g],u=g<<1;for(;u<=a.heap_len&&(u<a.heap_len&&Ho(p,a.heap[u+1],a.heap[u],a.depth)&&u++,!Ho(p,y,a.heap[u],a.depth));)a.heap[g]=a.heap[u],g=u,u<<=1;a.heap[g]=y},Bo=(a,p,g)=>{let y,u,R=0,b,I;if(a.last_lit!==0)do y=a.pending_buf[a.d_buf+R*2]<<8|a.pending_buf[a.d_buf+R*2+1],u=a.pending_buf[a.l_buf+R],R++,y===0?Kt(a,u,p):(b=lt[u],Kt(a,b+d+1,p),I=et[b],I!==0&&(u-=Dt[b],At(a,u,I)),y--,b=Is(y),Kt(a,b,g),I=ct[b],I!==0&&(y-=se[b],At(a,y,I)));while(R<a.last_lit);Kt(a,M,p)},$n=(a,p)=>{let g=p.dyn_tree,y=p.stat_desc.static_tree,u=p.stat_desc.has_stree,R=p.stat_desc.elems,b,I,Q=-1,$;for(a.heap_len=0,a.heap_max=O,b=0;b<R;b++)g[b*2]!==0?(a.heap[++a.heap_len]=Q=b,a.depth[b]=0):g[b*2+1]=0;for(;a.heap_len<2;)$=a.heap[++a.heap_len]=Q<2?++Q:0,g[$*2]=1,a.depth[$]=0,a.opt_len--,u&&(a.static_len-=y[$*2+1]);for(p.max_code=Q,b=a.heap_len>>1;b>=1;b--)Fn(a,g,b);$=R;do b=a.heap[1],a.heap[1]=a.heap[a.heap_len--],Fn(a,g,1),I=a.heap[1],a.heap[--a.heap_max]=b,a.heap[--a.heap_max]=I,g[$*2]=g[b*2]+g[I*2],a.depth[$]=(a.depth[b]>=a.depth[I]?a.depth[b]:a.depth[I])+1,g[b*2+1]=g[I*2+1]=$,a.heap[1]=$++,Fn(a,g,1);while(a.heap_len>=2);a.heap[--a.heap_max]=a.heap[1],Bn(a,p),$i(g,Q,a.bl_count)},Fo=(a,p,g)=>{let y,u=-1,R,b=p[0*2+1],I=0,Q=7,$=4;for(b===0&&(Q=138,$=3),p[(g+1)*2+1]=65535,y=0;y<=g;y++)R=b,b=p[(y+1)*2+1],!(++I<Q&&R===b)&&(I<$?a.bl_tree[R*2]+=I:R!==0?(R!==u&&a.bl_tree[R*2]++,a.bl_tree[k*2]++):I<=10?a.bl_tree[T*2]++:a.bl_tree[B*2]++,I=0,u=R,b===0?(Q=138,$=3):R===b?(Q=6,$=3):(Q=7,$=4))},$o=(a,p,g)=>{let y,u=-1,R,b=p[0*2+1],I=0,Q=7,$=4;for(b===0&&(Q=138,$=3),y=0;y<=g;y++)if(R=b,b=p[(y+1)*2+1],!(++I<Q&&R===b)){if(I<$)do Kt(a,R,a.bl_tree);while(--I!==0);else R!==0?(R!==u&&(Kt(a,R,a.bl_tree),I--),Kt(a,k,a.bl_tree),At(a,I-3,2)):I<=10?(Kt(a,T,a.bl_tree),At(a,I-3,3)):(Kt(a,B,a.bl_tree),At(a,I-11,7));I=0,u=R,b===0?(Q=138,$=3):R===b?(Q=6,$=3):(Q=7,$=4)}},gh=a=>{let p;for(Fo(a,a.dyn_ltree,a.l_desc.max_code),Fo(a,a.dyn_dtree,a.d_desc.max_code),$n(a,a.bl_desc),p=S-1;p>=3&&a.bl_tree[Ut[p]*2+1]===0;p--);return a.opt_len+=3*(p+1)+5+5+4,p},mh=(a,p,g,y)=>{let u;for(At(a,p-257,5),At(a,g-1,5),At(a,y-4,4),u=0;u<y;u++)At(a,a.bl_tree[Ut[u]*2+1],3);$o(a,a.dyn_ltree,p-1),$o(a,a.dyn_dtree,g-1)},yh=a=>{let p=4093624447,g;for(g=0;g<=31;g++,p>>>=1)if(p&1&&a.dyn_ltree[g*2]!==0)return 0;if(a.dyn_ltree[9*2]!==0||a.dyn_ltree[10*2]!==0||a.dyn_ltree[13*2]!==0)return 1;for(g=32;g<d;g++)if(a.dyn_ltree[g*2]!==0)return 1;return 0},zo=!1,Eh=a=>{zo||(si(),zo=!0),a.l_desc=new he(a.dyn_ltree,hs),a.d_desc=new he(a.dyn_dtree,zt),a.bl_desc=new he(a.bl_tree,Bt),a.bi_buf=0,a.bi_valid=0,Ps(a)},Go=(a,p,g,y)=>{At(a,(r<<1)+(y?1:0),3),fh(a,p,g,!0)},Sh=a=>{At(a,o<<1,3),Kt(a,M,L),Fi(a)},vh=(a,p,g,y)=>{let u,R,b=0;a.level>0?(a.strm.data_type===2&&(a.strm.data_type=yh(a)),$n(a,a.l_desc),$n(a,a.d_desc),b=gh(a),u=a.opt_len+3+7>>>3,R=a.static_len+3+7>>>3,R<=u&&(u=R)):u=R=g+5,g+4<=u&&p!==-1?Go(a,p,g,y):a.strategy===4||R===u?(At(a,(o<<1)+(y?1:0),3),Bo(a,L,V)):(At(a,(c<<1)+(y?1:0),3),mh(a,a.l_desc.max_code+1,a.d_desc.max_code+1,b+1),Bo(a,a.dyn_ltree,a.dyn_dtree)),Ps(a),y&&zi(a)},_h=(a,p,g)=>(a.pending_buf[a.d_buf+a.last_lit*2]=p>>>8&255,a.pending_buf[a.d_buf+a.last_lit*2+1]=p&255,a.pending_buf[a.l_buf+a.last_lit]=g&255,a.last_lit++,p===0?a.dyn_ltree[g*2]++:(a.matches++,p--,a.dyn_ltree[(lt[g]+d+1)*2]++,a.dyn_dtree[Is(p)*2]++),a.last_lit===a.lit_bufsize-1);var wh=Eh,bh=Go,Th=vh,Ah=_h,Rh=Sh,Ch={_tr_init:wh,_tr_stored_block:bh,_tr_flush_block:Th,_tr_tally:Ah,_tr_align:Rh},qo=(a,p,g,y)=>{let u=a&65535|0,R=a>>>16&65535|0,b=0;for(;g!==0;){b=g>2e3?2e3:g,g-=b;do u=u+p[y++]|0,R=R+u|0;while(--b);u%=65521,R%=65521}return u|R<<16|0};let Ih=()=>{let a,p=[];for(var g=0;g<256;g++){a=g;for(var y=0;y<8;y++)a=a&1?3988292384^a>>>1:a>>>1;p[g]=a}return p},Ph=new Uint32Array(Ih());var Ve=(a,p,g,y)=>{let u=Ph,R=y+g;a^=-1;for(let b=y;b<R;b++)a=a>>>8^u[(a^p[b])&255];return a^-1},Gi={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Wo={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};let{_tr_init:Oh,_tr_stored_block:Nh,_tr_flush_block:Mh,_tr_tally:je,_tr_align:kh}=Ch,{Z_NO_FLUSH:us,Z_PARTIAL_FLUSH:Dh,Z_FULL_FLUSH:xh,Z_FINISH:He,Z_BLOCK:Yo,Z_OK:ue,Z_STREAM_END:Xo,Z_STREAM_ERROR:Jt,Z_DATA_ERROR:Lh,Z_BUF_ERROR:zn,Z_DEFAULT_COMPRESSION:Uh,Z_FILTERED:Vh,Z_HUFFMAN_ONLY:qi,Z_RLE:jh,Z_FIXED:Hh,Z_DEFAULT_STRATEGY:Bh,Z_UNKNOWN:Fh,Z_DEFLATED:Wi}=Wo,$h=9,zh=15,Gh=8,Gn=256+1+29,qh=30,Wh=19,Yh=2*Gn+1,Xh=15,J=3,Be=258,ie=Be+J+1,Kh=32,Yi=42,qn=69,Xi=73,Ki=91,Ji=103,ds=113,ii=666,_t=1,ni=2,ps=3,Os=4,Jh=3,Fe=(a,p)=>(a.msg=Gi[p],p),Ko=a=>(a<<1)-(a>4?9:0),$e=a=>{let p=a.length;for(;--p>=0;)a[p]=0},ze=(a,p,g)=>(p<<a.hash_shift^g)&a.hash_mask,Ge=a=>{let p=a.state,g=p.pending;g>a.avail_out&&(g=a.avail_out),g!==0&&(a.output.set(p.pending_buf.subarray(p.pending_out,p.pending_out+g),a.next_out),a.next_out+=g,p.pending_out+=g,a.total_out+=g,a.avail_out-=g,p.pending-=g,p.pending===0&&(p.pending_out=0))},Pt=(a,p)=>{Mh(a,a.block_start>=0?a.block_start:-1,a.strstart-a.block_start,p),a.block_start=a.strstart,Ge(a.strm)},nt=(a,p)=>{a.pending_buf[a.pending++]=p},ri=(a,p)=>{a.pending_buf[a.pending++]=p>>>8&255,a.pending_buf[a.pending++]=p&255},Qh=(a,p,g,y)=>{let u=a.avail_in;return u>y&&(u=y),u===0?0:(a.avail_in-=u,p.set(a.input.subarray(a.next_in,a.next_in+u),g),a.state.wrap===1?a.adler=qo(a.adler,p,u,g):a.state.wrap===2&&(a.adler=Ve(a.adler,p,u,g)),a.next_in+=u,a.total_in+=u,u)},Jo=(a,p)=>{let g=a.max_chain_length,y=a.strstart,u,R,b=a.prev_length,I=a.nice_match,Q=a.strstart>a.w_size-ie?a.strstart-(a.w_size-ie):0,$=a.window,Gt=a.w_mask,qe=a.prev,at=a.strstart+Be,gs=$[y+b-1],Ms=$[y+b];a.prev_length>=a.good_match&&(g>>=2),I>a.lookahead&&(I=a.lookahead);do if(u=p,!($[u+b]!==Ms||$[u+b-1]!==gs||$[u]!==$[y]||$[++u]!==$[y+1])){y+=2,u++;do;while($[++y]===$[++u]&&$[++y]===$[++u]&&$[++y]===$[++u]&&$[++y]===$[++u]&&$[++y]===$[++u]&&$[++y]===$[++u]&&$[++y]===$[++u]&&$[++y]===$[++u]&&y<at);if(R=Be-(at-y),y=at-Be,R>b){if(a.match_start=p,b=R,R>=I)break;gs=$[y+b-1],Ms=$[y+b]}}while((p=qe[p&Gt])>Q&&--g!==0);return b<=a.lookahead?b:a.lookahead},fs=a=>{let p=a.w_size,g,y,u,R,b;do{if(R=a.window_size-a.lookahead-a.strstart,a.strstart>=p+(p-ie)){a.window.set(a.window.subarray(p,p+p),0),a.match_start-=p,a.strstart-=p,a.block_start-=p,y=a.hash_size,g=y;do u=a.head[--g],a.head[g]=u>=p?u-p:0;while(--y);y=p,g=y;do u=a.prev[--g],a.prev[g]=u>=p?u-p:0;while(--y);R+=p}if(a.strm.avail_in===0)break;if(y=Qh(a.strm,a.window,a.strstart+a.lookahead,R),a.lookahead+=y,a.lookahead+a.insert>=J)for(b=a.strstart-a.insert,a.ins_h=a.window[b],a.ins_h=ze(a,a.ins_h,a.window[b+1]);a.insert&&(a.ins_h=ze(a,a.ins_h,a.window[b+J-1]),a.prev[b&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=b,b++,a.insert--,!(a.lookahead+a.insert<J)););}while(a.lookahead<ie&&a.strm.avail_in!==0)},Zh=(a,p)=>{let g=65535;for(g>a.pending_buf_size-5&&(g=a.pending_buf_size-5);;){if(a.lookahead<=1){if(fs(a),a.lookahead===0&&p===us)return _t;if(a.lookahead===0)break}a.strstart+=a.lookahead,a.lookahead=0;let y=a.block_start+g;if((a.strstart===0||a.strstart>=y)&&(a.lookahead=a.strstart-y,a.strstart=y,Pt(a,!1),a.strm.avail_out===0)||a.strstart-a.block_start>=a.w_size-ie&&(Pt(a,!1),a.strm.avail_out===0))return _t}return a.insert=0,p===He?(Pt(a,!0),a.strm.avail_out===0?ps:Os):(a.strstart>a.block_start&&(Pt(a,!1),a.strm.avail_out===0),_t)},Wn=(a,p)=>{let g,y;for(;;){if(a.lookahead<ie){if(fs(a),a.lookahead<ie&&p===us)return _t;if(a.lookahead===0)break}if(g=0,a.lookahead>=J&&(a.ins_h=ze(a,a.ins_h,a.window[a.strstart+J-1]),g=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),g!==0&&a.strstart-g<=a.w_size-ie&&(a.match_length=Jo(a,g)),a.match_length>=J)if(y=je(a,a.strstart-a.match_start,a.match_length-J),a.lookahead-=a.match_length,a.match_length<=a.max_lazy_match&&a.lookahead>=J){a.match_length--;do a.strstart++,a.ins_h=ze(a,a.ins_h,a.window[a.strstart+J-1]),g=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart;while(--a.match_length!==0);a.strstart++}else a.strstart+=a.match_length,a.match_length=0,a.ins_h=a.window[a.strstart],a.ins_h=ze(a,a.ins_h,a.window[a.strstart+1]);else y=je(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++;if(y&&(Pt(a,!1),a.strm.avail_out===0))return _t}return a.insert=a.strstart<J-1?a.strstart:J-1,p===He?(Pt(a,!0),a.strm.avail_out===0?ps:Os):a.last_lit&&(Pt(a,!1),a.strm.avail_out===0)?_t:ni},Ns=(a,p)=>{let g,y,u;for(;;){if(a.lookahead<ie){if(fs(a),a.lookahead<ie&&p===us)return _t;if(a.lookahead===0)break}if(g=0,a.lookahead>=J&&(a.ins_h=ze(a,a.ins_h,a.window[a.strstart+J-1]),g=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),a.prev_length=a.match_length,a.prev_match=a.match_start,a.match_length=J-1,g!==0&&a.prev_length<a.max_lazy_match&&a.strstart-g<=a.w_size-ie&&(a.match_length=Jo(a,g),a.match_length<=5&&(a.strategy===Vh||a.match_length===J&&a.strstart-a.match_start>4096)&&(a.match_length=J-1)),a.prev_length>=J&&a.match_length<=a.prev_length){u=a.strstart+a.lookahead-J,y=je(a,a.strstart-1-a.prev_match,a.prev_length-J),a.lookahead-=a.prev_length-1,a.prev_length-=2;do++a.strstart<=u&&(a.ins_h=ze(a,a.ins_h,a.window[a.strstart+J-1]),g=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);while(--a.prev_length!==0);if(a.match_available=0,a.match_length=J-1,a.strstart++,y&&(Pt(a,!1),a.strm.avail_out===0))return _t}else if(a.match_available){if(y=je(a,0,a.window[a.strstart-1]),y&&Pt(a,!1),a.strstart++,a.lookahead--,a.strm.avail_out===0)return _t}else a.match_available=1,a.strstart++,a.lookahead--}return a.match_available&&(y=je(a,0,a.window[a.strstart-1]),a.match_available=0),a.insert=a.strstart<J-1?a.strstart:J-1,p===He?(Pt(a,!0),a.strm.avail_out===0?ps:Os):a.last_lit&&(Pt(a,!1),a.strm.avail_out===0)?_t:ni},tu=(a,p)=>{let g,y,u,R,b=a.window;for(;;){if(a.lookahead<=Be){if(fs(a),a.lookahead<=Be&&p===us)return _t;if(a.lookahead===0)break}if(a.match_length=0,a.lookahead>=J&&a.strstart>0&&(u=a.strstart-1,y=b[u],y===b[++u]&&y===b[++u]&&y===b[++u])){R=a.strstart+Be;do;while(y===b[++u]&&y===b[++u]&&y===b[++u]&&y===b[++u]&&y===b[++u]&&y===b[++u]&&y===b[++u]&&y===b[++u]&&u<R);a.match_length=Be-(R-u),a.match_length>a.lookahead&&(a.match_length=a.lookahead)}if(a.match_length>=J?(g=je(a,1,a.match_length-J),a.lookahead-=a.match_length,a.strstart+=a.match_length,a.match_length=0):(g=je(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++),g&&(Pt(a,!1),a.strm.avail_out===0))return _t}return a.insert=0,p===He?(Pt(a,!0),a.strm.avail_out===0?ps:Os):a.last_lit&&(Pt(a,!1),a.strm.avail_out===0)?_t:ni},eu=(a,p)=>{let g;for(;;){if(a.lookahead===0&&(fs(a),a.lookahead===0)){if(p===us)return _t;break}if(a.match_length=0,g=je(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++,g&&(Pt(a,!1),a.strm.avail_out===0))return _t}return a.insert=0,p===He?(Pt(a,!0),a.strm.avail_out===0?ps:Os):a.last_lit&&(Pt(a,!1),a.strm.avail_out===0)?_t:ni};function de(a,p,g,y,u){this.good_length=a,this.max_lazy=p,this.nice_length=g,this.max_chain=y,this.func=u}let oi=[new de(0,0,0,0,Zh),new de(4,4,8,4,Wn),new de(4,5,16,8,Wn),new de(4,6,32,32,Wn),new de(4,4,16,16,Ns),new de(8,16,32,32,Ns),new de(8,16,128,128,Ns),new de(8,32,128,256,Ns),new de(32,128,258,1024,Ns),new de(32,258,258,4096,Ns)],su=a=>{a.window_size=2*a.w_size,$e(a.head),a.max_lazy_match=oi[a.level].max_lazy,a.good_match=oi[a.level].good_length,a.nice_match=oi[a.level].nice_length,a.max_chain_length=oi[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=J-1,a.match_available=0,a.ins_h=0};function iu(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Wi,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(Yh*2),this.dyn_dtree=new Uint16Array((2*qh+1)*2),this.bl_tree=new Uint16Array((2*Wh+1)*2),$e(this.dyn_ltree),$e(this.dyn_dtree),$e(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Xh+1),this.heap=new Uint16Array(2*Gn+1),$e(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*Gn+1),$e(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}let Qo=a=>{if(!a||!a.state)return Fe(a,Jt);a.total_in=a.total_out=0,a.data_type=Fh;let p=a.state;return p.pending=0,p.pending_out=0,p.wrap<0&&(p.wrap=-p.wrap),p.status=p.wrap?Yi:ds,a.adler=p.wrap===2?0:1,p.last_flush=us,Oh(p),ue},Zo=a=>{let p=Qo(a);return p===ue&&su(a.state),p},nu=(a,p)=>!a||!a.state||a.state.wrap!==2?Jt:(a.state.gzhead=p,ue),ta=(a,p,g,y,u,R)=>{if(!a)return Jt;let b=1;if(p===Uh&&(p=6),y<0?(b=0,y=-y):y>15&&(b=2,y-=16),u<1||u>$h||g!==Wi||y<8||y>15||p<0||p>9||R<0||R>Hh)return Fe(a,Jt);y===8&&(y=9);let I=new iu;return a.state=I,I.strm=a,I.wrap=b,I.gzhead=null,I.w_bits=y,I.w_size=1<<I.w_bits,I.w_mask=I.w_size-1,I.hash_bits=u+7,I.hash_size=1<<I.hash_bits,I.hash_mask=I.hash_size-1,I.hash_shift=~~((I.hash_bits+J-1)/J),I.window=new Uint8Array(I.w_size*2),I.head=new Uint16Array(I.hash_size),I.prev=new Uint16Array(I.w_size),I.lit_bufsize=1<<u+6,I.pending_buf_size=I.lit_bufsize*4,I.pending_buf=new Uint8Array(I.pending_buf_size),I.d_buf=1*I.lit_bufsize,I.l_buf=3*I.lit_bufsize,I.level=p,I.strategy=R,I.method=g,Zo(a)},ru=(a,p)=>ta(a,p,Wi,zh,Gh,Bh),ou=(a,p)=>{let g,y;if(!a||!a.state||p>Yo||p<0)return a?Fe(a,Jt):Jt;let u=a.state;if(!a.output||!a.input&&a.avail_in!==0||u.status===ii&&p!==He)return Fe(a,a.avail_out===0?zn:Jt);u.strm=a;let R=u.last_flush;if(u.last_flush=p,u.status===Yi)if(u.wrap===2)a.adler=0,nt(u,31),nt(u,139),nt(u,8),u.gzhead?(nt(u,(u.gzhead.text?1:0)+(u.gzhead.hcrc?2:0)+(u.gzhead.extra?4:0)+(u.gzhead.name?8:0)+(u.gzhead.comment?16:0)),nt(u,u.gzhead.time&255),nt(u,u.gzhead.time>>8&255),nt(u,u.gzhead.time>>16&255),nt(u,u.gzhead.time>>24&255),nt(u,u.level===9?2:u.strategy>=qi||u.level<2?4:0),nt(u,u.gzhead.os&255),u.gzhead.extra&&u.gzhead.extra.length&&(nt(u,u.gzhead.extra.length&255),nt(u,u.gzhead.extra.length>>8&255)),u.gzhead.hcrc&&(a.adler=Ve(a.adler,u.pending_buf,u.pending,0)),u.gzindex=0,u.status=qn):(nt(u,0),nt(u,0),nt(u,0),nt(u,0),nt(u,0),nt(u,u.level===9?2:u.strategy>=qi||u.level<2?4:0),nt(u,Jh),u.status=ds);else{let b=Wi+(u.w_bits-8<<4)<<8,I=-1;u.strategy>=qi||u.level<2?I=0:u.level<6?I=1:u.level===6?I=2:I=3,b|=I<<6,u.strstart!==0&&(b|=Kh),b+=31-b%31,u.status=ds,ri(u,b),u.strstart!==0&&(ri(u,a.adler>>>16),ri(u,a.adler&65535)),a.adler=1}if(u.status===qn)if(u.gzhead.extra){for(g=u.pending;u.gzindex<(u.gzhead.extra.length&65535)&&!(u.pending===u.pending_buf_size&&(u.gzhead.hcrc&&u.pending>g&&(a.adler=Ve(a.adler,u.pending_buf,u.pending-g,g)),Ge(a),g=u.pending,u.pending===u.pending_buf_size));)nt(u,u.gzhead.extra[u.gzindex]&255),u.gzindex++;u.gzhead.hcrc&&u.pending>g&&(a.adler=Ve(a.adler,u.pending_buf,u.pending-g,g)),u.gzindex===u.gzhead.extra.length&&(u.gzindex=0,u.status=Xi)}else u.status=Xi;if(u.status===Xi)if(u.gzhead.name){g=u.pending;do{if(u.pending===u.pending_buf_size&&(u.gzhead.hcrc&&u.pending>g&&(a.adler=Ve(a.adler,u.pending_buf,u.pending-g,g)),Ge(a),g=u.pending,u.pending===u.pending_buf_size)){y=1;break}u.gzindex<u.gzhead.name.length?y=u.gzhead.name.charCodeAt(u.gzindex++)&255:y=0,nt(u,y)}while(y!==0);u.gzhead.hcrc&&u.pending>g&&(a.adler=Ve(a.adler,u.pending_buf,u.pending-g,g)),y===0&&(u.gzindex=0,u.status=Ki)}else u.status=Ki;if(u.status===Ki)if(u.gzhead.comment){g=u.pending;do{if(u.pending===u.pending_buf_size&&(u.gzhead.hcrc&&u.pending>g&&(a.adler=Ve(a.adler,u.pending_buf,u.pending-g,g)),Ge(a),g=u.pending,u.pending===u.pending_buf_size)){y=1;break}u.gzindex<u.gzhead.comment.length?y=u.gzhead.comment.charCodeAt(u.gzindex++)&255:y=0,nt(u,y)}while(y!==0);u.gzhead.hcrc&&u.pending>g&&(a.adler=Ve(a.adler,u.pending_buf,u.pending-g,g)),y===0&&(u.status=Ji)}else u.status=Ji;if(u.status===Ji&&(u.gzhead.hcrc?(u.pending+2>u.pending_buf_size&&Ge(a),u.pending+2<=u.pending_buf_size&&(nt(u,a.adler&255),nt(u,a.adler>>8&255),a.adler=0,u.status=ds)):u.status=ds),u.pending!==0){if(Ge(a),a.avail_out===0)return u.last_flush=-1,ue}else if(a.avail_in===0&&Ko(p)<=Ko(R)&&p!==He)return Fe(a,zn);if(u.status===ii&&a.avail_in!==0)return Fe(a,zn);if(a.avail_in!==0||u.lookahead!==0||p!==us&&u.status!==ii){let b=u.strategy===qi?eu(u,p):u.strategy===jh?tu(u,p):oi[u.level].func(u,p);if((b===ps||b===Os)&&(u.status=ii),b===_t||b===ps)return a.avail_out===0&&(u.last_flush=-1),ue;if(b===ni&&(p===Dh?kh(u):p!==Yo&&(Nh(u,0,0,!1),p===xh&&($e(u.head),u.lookahead===0&&(u.strstart=0,u.block_start=0,u.insert=0))),Ge(a),a.avail_out===0))return u.last_flush=-1,ue}return p!==He?ue:u.wrap<=0?Xo:(u.wrap===2?(nt(u,a.adler&255),nt(u,a.adler>>8&255),nt(u,a.adler>>16&255),nt(u,a.adler>>24&255),nt(u,a.total_in&255),nt(u,a.total_in>>8&255),nt(u,a.total_in>>16&255),nt(u,a.total_in>>24&255)):(ri(u,a.adler>>>16),ri(u,a.adler&65535)),Ge(a),u.wrap>0&&(u.wrap=-u.wrap),u.pending!==0?ue:Xo)},au=a=>{if(!a||!a.state)return Jt;let p=a.state.status;return p!==Yi&&p!==qn&&p!==Xi&&p!==Ki&&p!==Ji&&p!==ds&&p!==ii?Fe(a,Jt):(a.state=null,p===ds?Fe(a,Lh):ue)},cu=(a,p)=>{let g=p.length;if(!a||!a.state)return Jt;let y=a.state,u=y.wrap;if(u===2||u===1&&y.status!==Yi||y.lookahead)return Jt;if(u===1&&(a.adler=qo(a.adler,p,g,0)),y.wrap=0,g>=y.w_size){u===0&&($e(y.head),y.strstart=0,y.block_start=0,y.insert=0);let Q=new Uint8Array(y.w_size);Q.set(p.subarray(g-y.w_size,g),0),p=Q,g=y.w_size}let R=a.avail_in,b=a.next_in,I=a.input;for(a.avail_in=g,a.next_in=0,a.input=p,fs(y);y.lookahead>=J;){let Q=y.strstart,$=y.lookahead-(J-1);do y.ins_h=ze(y,y.ins_h,y.window[Q+J-1]),y.prev[Q&y.w_mask]=y.head[y.ins_h],y.head[y.ins_h]=Q,Q++;while(--$);y.strstart=Q,y.lookahead=J-1,fs(y)}return y.strstart+=y.lookahead,y.block_start=y.strstart,y.insert=y.lookahead,y.lookahead=0,y.match_length=y.prev_length=J-1,y.match_available=0,a.next_in=b,a.input=I,a.avail_in=R,y.wrap=u,ue};var lu=ru,hu=ta,uu=Zo,du=Qo,pu=nu,fu=ou,gu=au,mu=cu,yu="pako deflate (from Nodeca project)",ai={deflateInit:lu,deflateInit2:hu,deflateReset:uu,deflateResetKeep:du,deflateSetHeader:pu,deflate:fu,deflateEnd:gu,deflateSetDictionary:mu,deflateInfo:yu};let Eu=(a,p)=>Object.prototype.hasOwnProperty.call(a,p);var Su=function(a){let p=Array.prototype.slice.call(arguments,1);for(;p.length;){let g=p.shift();if(g){if(typeof g!="object")throw new TypeError(g+"must be non-object");for(let y in g)Eu(g,y)&&(a[y]=g[y])}}return a},vu=a=>{let p=0;for(let y=0,u=a.length;y<u;y++)p+=a[y].length;let g=new Uint8Array(p);for(let y=0,u=0,R=a.length;y<R;y++){let b=a[y];g.set(b,u),u+=b.length}return g},ea={assign:Su,flattenChunks:vu};let sa=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{sa=!1}let ci=new Uint8Array(256);for(let a=0;a<256;a++)ci[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;ci[254]=ci[254]=1;var _u=a=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(a);let p,g,y,u,R,b=a.length,I=0;for(u=0;u<b;u++)g=a.charCodeAt(u),(g&64512)===55296&&u+1<b&&(y=a.charCodeAt(u+1),(y&64512)===56320&&(g=65536+(g-55296<<10)+(y-56320),u++)),I+=g<128?1:g<2048?2:g<65536?3:4;for(p=new Uint8Array(I),R=0,u=0;R<I;u++)g=a.charCodeAt(u),(g&64512)===55296&&u+1<b&&(y=a.charCodeAt(u+1),(y&64512)===56320&&(g=65536+(g-55296<<10)+(y-56320),u++)),g<128?p[R++]=g:g<2048?(p[R++]=192|g>>>6,p[R++]=128|g&63):g<65536?(p[R++]=224|g>>>12,p[R++]=128|g>>>6&63,p[R++]=128|g&63):(p[R++]=240|g>>>18,p[R++]=128|g>>>12&63,p[R++]=128|g>>>6&63,p[R++]=128|g&63);return p};let ia=(a,p=a.length)=>{if(p<65534&&a.subarray&&sa)return String.fromCharCode.apply(null,a.length===p?a:a.subarray(0,p));let g="";for(let y=0;y<p;y++)g+=String.fromCharCode(a[y]);return g};var wu=(a,p)=>{let g=p||a.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(a.subarray(0,p));let y,u,R=new Array(g*2);for(u=0,y=0;y<g;){let b=a[y++];if(b<128){R[u++]=b;continue}let I=ci[b];if(I>4){R[u++]=65533,y+=I-1;continue}for(b&=I===2?31:I===3?15:7;I>1&&y<g;)b=b<<6|a[y++]&63,I--;if(I>1){R[u++]=65533;continue}b<65536?R[u++]=b:(b-=65536,R[u++]=55296|b>>10&1023,R[u++]=56320|b&1023)}return ia(R,u)},bu=(a,p)=>{p=p||a.length,p>a.length&&(p=a.length);let g=p-1;for(;g>=0&&(a[g]&192)===128;)g--;return g<0||g===0?p:g+ci[a[g]]>p?g:p},na={string2buf:_u,buf2string:wu,utf8border:bu};function Tu(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Au=Tu;let ra=Object.prototype.toString,{Z_NO_FLUSH:Ru,Z_SYNC_FLUSH:Cu,Z_FULL_FLUSH:Iu,Z_FINISH:Pu,Z_OK:Qi,Z_STREAM_END:Ou,Z_DEFAULT_COMPRESSION:Nu,Z_DEFAULT_STRATEGY:Mu,Z_DEFLATED:ku}=Wo;function Zi(a){this.options=ea.assign({level:Nu,method:ku,chunkSize:16384,windowBits:15,memLevel:8,strategy:Mu},a||{});let p=this.options;p.raw&&p.windowBits>0?p.windowBits=-p.windowBits:p.gzip&&p.windowBits>0&&p.windowBits<16&&(p.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Au,this.strm.avail_out=0;let g=ai.deflateInit2(this.strm,p.level,p.method,p.windowBits,p.memLevel,p.strategy);if(g!==Qi)throw new Error(Gi[g]);if(p.header&&ai.deflateSetHeader(this.strm,p.header),p.dictionary){let y;if(typeof p.dictionary=="string"?y=na.string2buf(p.dictionary):ra.call(p.dictionary)==="[object ArrayBuffer]"?y=new Uint8Array(p.dictionary):y=p.dictionary,g=ai.deflateSetDictionary(this.strm,y),g!==Qi)throw new Error(Gi[g]);this._dict_set=!0}}Zi.prototype.push=function(a,p){let g=this.strm,y=this.options.chunkSize,u,R;if(this.ended)return!1;for(p===~~p?R=p:R=p===!0?Pu:Ru,typeof a=="string"?g.input=na.string2buf(a):ra.call(a)==="[object ArrayBuffer]"?g.input=new Uint8Array(a):g.input=a,g.next_in=0,g.avail_in=g.input.length;;){if(g.avail_out===0&&(g.output=new Uint8Array(y),g.next_out=0,g.avail_out=y),(R===Cu||R===Iu)&&g.avail_out<=6){this.onData(g.output.subarray(0,g.next_out)),g.avail_out=0;continue}if(u=ai.deflate(g,R),u===Ou)return g.next_out>0&&this.onData(g.output.subarray(0,g.next_out)),u=ai.deflateEnd(this.strm),this.onEnd(u),this.ended=!0,u===Qi;if(g.avail_out===0){this.onData(g.output);continue}if(R>0&&g.next_out>0){this.onData(g.output.subarray(0,g.next_out)),g.avail_out=0;continue}if(g.avail_in===0)break}return!0},Zi.prototype.onData=function(a){this.chunks.push(a)},Zi.prototype.onEnd=function(a){a===Qi&&(this.result=ea.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg};function Du(a,p){p=p||{};let g=new Zi(p);if(g.push(a,!0),g.err)throw g.msg||Gi[g.err];return g.result}function xu(a,p){return p=p||{},p.gzip=!0,Du(a,p)}return(a,p,g)=>{let y=xu(a);return p==="base64"?y=btoa(ia(y)):y=y.buffer,g&&g(y),y}}var _S=(()=>{class s extends sl{constructor(t){super(t),this.algorithm=xn.GZIP,this.Fg=pc(),this.RA=(i,r,o)=>{let c=this.Fg(i,r);o(c)},this.compress=fc(),typeof CompressionStream!="undefined"&&oS||(this.compress=this.RA,this.getCompressorSourceCode=()=>pc.toString())}compressSync(t,e){return this.Fg(t,e)}getCompressorSourceCode(){return fc.toString()}}return s})();function fc(){let s=n=>new Promise(t=>{let e=new FileReader;e.onload=i=>t(i.target.result.split(",")[1]),e.readAsDataURL(new Blob([n]))});return(n,t,e)=>{let i=new Response(n).body.pipeThrough(new CompressionStream("gzip")),r=new Response(i).arrayBuffer();if(t==="base64"){r.then(o=>s(o)).then(o=>e(o));return}r.then(o=>e(o))}}var wS=(()=>{class s extends sl{constructor(){super(...arguments),this.algorithm=xn.UNCOMPRESSED}compress(t,e,i){i(this.compressSync(t,e))}compressSync(t,e){return t}getCompressorSourceCode(){return function(){return(t,e,i)=>i(t)}.toString()}}return s})(),Xl=(()=>{class s{static create(t,e=!0){return this.instance?this.instance:e&&!SS.isCompressionEnabled()?new wS(t):this.instance=new _S(t)}}return s})(),Kl=["setEncryptionSelectors"],Mo=["setPIISelectors"],Jl=["setCapturedElementsSelector"],bS=(()=>{class s{constructor(t,e,i,r,o,c,l){this.S=t,this.E=e,this.lt=i,this.be=r,this.Ft=o,this.ot=c,this.Ln=l}init(){var t,e;this.Ln&&this.ot&&((t=this.Ln)===null||t===void 0||t.addSelector((e=this.ot)===null||e===void 0?void 0:e.getEncryptionSelectors())),this.ht()}onStartTracking(t){this.be.start(),this.S.emitSensitiveStatusChange()}onBeforeArtificialPageView(){this.be.stop(),this.S.emitSensitiveStatusChange()}onAfterArtificialPageView(){this.be.start(),this.S.emitSensitiveStatusChange()}onBeforeSessionRenewal(){this.be.stop(),this.S.emitSensitiveStatusChange()}onOptout(){this.be.stop(),this.S.emitSensitiveStatusChange()}onReplayUnanonymizationConsentGranted(){this.S.emitSensitiveStatusChange()}onReplayUnanonymizationConsentWithdrawn(){this.S.emitSensitiveStatusChange()}ht(){this.E.register(Mo,t=>{this.lt.setMaskedElementSettingsFromCommand(t),this.S.emitSensitiveStatusChange()}),this.E.register(Jl,t=>{this.Ft.setWhitelistedElementsSelector(t),this.S.emitSensitiveStatusChange()}),this.E.register(Kl,t=>{var e,i;(e=this.ot)===null||e===void 0||e.setEncryptionSelectors(t),(i=this.Ln)===null||i===void 0||i.addSelector(t)})}}return s})();var TS=(()=>{class s extends Tt{constructor(t,e,i,r,o,c){super(),this.ue=t,this.lt=e,this.Ft=i,this.Ln=r,this.Un=o,this.it=c}onStart(){var t,e,i;this.Ft.start(),this.ue.setMaskedElementSettings(this.lt.getMaskedElementSettings((t=this.it)===null||t===void 0?void 0:t.shouldMaskNonTextElements())),this.ue.startIdentifier(),(e=this.Ln)===null||e===void 0||e.start(),(i=this.Un)===null||i===void 0||i.start()}onStop(){var t,e;this.Ft.stop(),this.ue.stopIdentifier(),(t=this.Ln)===null||t===void 0||t.stop(),(e=this.Un)===null||e===void 0||e.stop()}}return s})(),AS=(()=>{class s{constructor(t,e,i,r,o){this.it=t,this.lt=e,this.be=i,this.Ft=r,this.ot=o}getSensitiveStatus(){var t,e;return{started:this.be.isStarted,useAnonymization:this.it.shouldUseAnonymization(),capturedElementSelector:this.Ft.getWhitelistedElementsSelector(),maskedElementSettings:this.lt.getMaskedElementSettings((t=this.it)===null||t===void 0?void 0:t.shouldMaskNonTextElements()),encryptionSelectors:(e=this.ot)===null||e===void 0?void 0:e.getEncryptionSelectors()}}getElementSensitiveStatus(t){let e=this.be.isStarted,i=this.it.shouldUseAnonymization();return e?x.isMaskedElement(t)||x.isMaskedElementChild(t)?ts.MASKED:ll.shouldEncrypt(t)?ts.ENCRYPTED:Ne.isEditableNode(t)?ts.ANONYMIZED:i?ge.isWhitelistedElement(t)?ts.CAPTURED:ts.ANONYMIZED:ts.CAPTURED:ts.ANONYMIZED}}return s})(),RS=(()=>{class s{constructor(t){this.F=t}onAfterVisitorRenewal(){this.F.renewSession()}}return s})(),CS=(()=>{let s;return function(n){n.URL="url"}(s||(s={})),s})(),gc=(()=>{let s;return function(n){function t(d,E){for(let m of d)if(i(m,E))return!0;return!1}n.isUrlMatching=t;function e(d,E){if(A(E)){for(let m of d)if(i(m,E))return!0}else if(mn(E)){for(let m of d)if(i(m,csString(E)))return!0}return!1}n.isMatching=e;function i(d,E){let m=r(d,E);return d.negate?!m:m}function r(d,E){switch(d.rule_type==="date"&&(d.match_operation==="less_than"||d.match_operation==="greater_than")&&(E=(new csDate(E).valueOf()/1e3).toFixed(0)),d.match_operation){case"exact":switch(d.rule_type){case"string":return A(d.pattern)?csString.prototype.toLowerCase.call(E)===csString.prototype.toLowerCase.call(d.pattern):!1;case"boolean":return E===d.pattern||E===csString(d.pattern);case"number":return ut(E)?Number(E)===Number(d.pattern):!1;default:return E===d.pattern}case"starts_with":return A(d.pattern)?csString.prototype.indexOf.call(E,d.pattern)===0:!1;case"ends_with":return A(d.pattern)?Js(E,d.pattern):!1;case"contains":return A(d.pattern)?csString.prototype.indexOf.call(E,d.pattern)!==-1:!1;case"regex":if(!A(d.pattern))return!1;try{return new csRegExp(d.pattern).test(E)}catch(m){return H.warn(`targeting.matchOperation.regex invalid ${m==null?void 0:m.message}`),!1}case"simple":return A(d.pattern)?f(E)===f(d.pattern):!1;case"greater_than":return Number(E)>Number(d.pattern);case"less_than":return Number(E)<Number(d.pattern);case"exact_date":{let m=Number(d.pattern);if(!ft(m))return!1;let S=new csDate(m*1e3);return new csDate(E).toDateString()===S.toDateString()}case"exact_days_ago":return o(d,E);case"more_than_days_ago":return c(d,E);case"less_than_days_ago":return l(d,E);case"unknown":return h(E);default:return H.warn(`targeting.matchOperation.regex not managed operation ${d.match_operation}`),!1}}function o(d,E){let m=new csDate,S=m.setDate(m.getDate()-Number(d.pattern)),O=new csDate(S);return new csDate(E).toDateString()===O.toDateString()}function c(d,E){let m=Number(d.pattern);if(!ft(m))return!1;let S=Number(m)+1,O=new csDate,N=new csDate(O);return N.setDate(O.getDate()-S),new csDate(E).getTime()<=N.getTime()}function l(d,E){let m=Number(d.pattern);if(!ft(m))return!1;if(m===0)return o(d,E);let S=new csDate,O=new csDate(S);return O.setDate(S.getDate()-m),new csDate(E).getTime()>=O.getTime()}function h(d){return ut(d)?A(d)?csString.prototype.trim.call(d)==="":mn(d)?d===!0:ft(d)?d!==0:!1:!0}function f(d){let E=bt(d,"http://")||bt(d,"https://")?d:`https://${d}`,m=el(E);return m!==null?csString.prototype.replace.call(m.host,/^www./,""):d}}(s||(s={})),s})(),gr={isLegacyURL:s=>s.component==="url",isLegacyTrigger:s=>s.component==="trigger",isURL:s=>s.type===CS.URL},IS=(()=>{class s{constructor(){this.zg=new mo,this.Gg=[],this.qg=[]}setTargetingRules(t){this.zg.setRegexRules(csArray.prototype.filter.call(t,gr.isURL));for(let e of t)gr.isLegacyURL(e)?csArray.prototype.push.call(this.Gg,e):gr.isLegacyTrigger(e)&&csArray.prototype.push.call(this.qg,e)}matchUrl(t){return gc.isUrlMatching(this.Gg,t)||this.zg.evaluateUrl(t)}matchTrigger(t){return gc.isMatching(this.qg,t)}}return s})(),PS=(()=>{class s extends Tt{constructor(t,e,i){super(),this.qa=t,this.Xh=e,this.w=i}init(){this.Kh=new IS,this.qa&&this.Kh.setTargetingRules(this.qa)}onStart(){}checkInitialUrlTargetingRules(){let t=this.w.getAnonymizedUrl();this.Jh(t,"url")&&this.Xh()}onStop(){}onTargetingRulesArtificialPageview(t){this.isStarted&&this.Jh(t,"url")&&this.Xh()}onExternalEvent(t){this.isStarted&&this.Jh(t.name,"trigger")&&this.Xh()}Jh(t,e){var i,r;return e==="url"&&A(t)&&(!((i=this.Kh)===null||i===void 0)&&i.matchUrl(t))?!0:!!(e==="trigger"&&(!((r=this.Kh)===null||r===void 0)&&r.matchTrigger(t)))}}return s})(),OS=(()=>{class s{constructor(t,e,i,r,o,c){this.qa=t,this.MA=e,this.S=i,this._t=r,this.K=o,this.w=c}init(){this.io=new PS(this.qa,this.MA,this.w),this.K.addListener(this.io),this.io.init()}start(){this.io.start()}stop(){this.io.stop()}checkInitialUrlTargetingRules(){this.io.checkInitialUrlTargetingRules()}emitTargetingCollectState(){let t=this._t.getInitialCollectState();t===U.ANALYTICS_ONLY?this.S.emitCollectStateChange(U.ANALYTICS_ONLY_RULES_TARGETING,Wt.ETR_OFF):t===U.RECORDING_GLOBAL_SAMPLING&&this.S.emitCollectStateChange(U.RECORDING_RULES_TARGETING,Wt.ETR_OFF)}}return s})(),Ql=["networkRequest:maskUrls"],NS=["networkRequest:maskUrls:reset"],MS=(()=>{class s{constructor(t,e){this.Wg=t,this.ut=e}init(){this.Wg.register(Ql,t=>{if(A(t)){this.ut.addPartialUrlMaskingPattern(t);return}if(csArray.isArray(t))for(let e of t)A(e)&&this.ut.addPartialUrlMaskingPattern(e)}),this.Wg.register(NS,()=>this.ut.resetPartialUrlMaskingPatterns())}}return s})(),Zl=":";function mc(s){let n=[],t=kS(s),e=csString.prototype.split.call(t,"/");for(let i of e)bt(i,Zl)?csArray.prototype.push.call(n,{key:i,value:`CS_ANONYMIZED_${csString.prototype.toUpperCase.call(csString.prototype.slice.call(i,1))}`}):csArray.prototype.push.call(n,{key:i,value:null});return n}function kS(s){let n=s;return bt(s,"/")&&(n=csString.prototype.substring.call(n,1)),Js(s,"/")&&(n=csString.prototype.slice.call(n,0,-1)),n}var th=(()=>{class s{constructor(){this.Yg=new Set,this.Xg=[],this.Qh=new Set,this.Zh=[]}addUrlMaskingPattern(t){if(this.Yg.has(t))return;this.Yg.add(t);let e=mc(t);csArray.prototype.push.call(this.Xg,e)}getUrlMaskingPatterns(){return this.Xg}resetPartialUrlMaskingPatterns(){this.Qh.clear(),this.Zh=[]}addPartialUrlMaskingPattern(t){if(this.Qh.has(t))return;this.Qh.add(t);let e=mc(t);csArray.prototype.push.call(this.Zh,e)}getPartialUrlMaskingPatterns(){return this.Zh}}return s})(),DS=(()=>{class s extends Tt{onStart(){this.kA()}onStop(){}register(t,e){let i=(...r)=>{try{e(...r)}catch(o){H.warn(`Misused Heap Command: ${t}; Args: ${csJSON.stringify(r)}; Error: ${ve(o)?o.stack:o}`)}};window.heap=window.heap||[],window.heap[t]=i}kA(){var t,e;!((t=window.heapReadyCb)===null||t===void 0)&&t.length?this.DA():!((e=window.heap)===null||e===void 0)&&e.length&&this.xA()}DA(){csArray.prototype.forEach.call(window.heapReadyCb,({name:t,fn:e})=>{window.heap[t]&&e()}),window.heapReadyCb.length=0}xA(){window.heap.forEach(([t,...e])=>{window.heap[t]&&window.heap[t](...e)}),window.heap.length=0}}return s})(),xS=(()=>{class s{constructor(t,e,i){this.f=t,this.O=e,this.R=i,this.es=C.now()}resetStartTime(){this.es=C.now()}getSessionData(){let{projectId:t}=this.f,e=this.O.getVisitor();e==null&&H.warn("Visitor is null. This happens when a snippet tries to get Session Data before the tag was initialized.");let{id:i,visitsCount:r}=e!=null?e:{},o=this.R.getSession();o===null&&H.warn("Session is null. This happens when a snippet tries to get Session Data before the tag was initialized.");let{pageNumber:c}=o!=null?o:{};return{projectId:t,userId:i,sessionNumber:r,pageNumber:c,relativeTimestamp:C.now()-this.es}}}return s})(),LS=["clearSession"],US=["extendSession"];var VS=["getSessionData"],jS=["session:start:newVisitor"],HS=["session:clear:visitor"],BS=(()=>{class s{constructor(t,e,i,r){this.f=t,this.O=e,this.R=i,this.E=r}init(){this.tu=new xS(this.f,this.O,this.R),this.E.register(LS,()=>this.R.removeSession()),this.E.register(US,()=>this.R.extendSessionPeriodically(),{disableApplyPending:!0}),this.E.register(VS,()=>this.tu.getSessionData(),{disableApplyPending:!0}),this.E.register(jS,()=>this.O.renewVisitor()),this.E.register(HS,()=>{this.O.resetVisitor()},{disableApplyImmediate:!0})}onBeforeNaturalPageView(){this.O.createOrUpdateVisitor(),this.R.createOrUpdateSession()}onBeforeArtificialPageView(){this.O.createOrUpdateVisitor(),this.R.createOrUpdateSession()}onAfterNaturalPageView(){this.tu.resetStartTime()}onAfterArtificialPageView(){this.tu.resetStartTime()}onOptout(){this.O.removeVisitor(),this.R.removeSession()}onCollectStateChange(t){this.R.updateCollectState(t)}}return s})(),FS=(()=>{class s{constructor(t,e,i,r,o,c,l,h,f,d,E,m,S,O,N,v,_,M,k,T,B,et,ct,Ht,Ut,w,L,V,F,lt,Dt,se,Te,hs){this.Et=t,this.Wi=e,this.Ee=i,this.O=r,this.R=o,this.F=c,this.Is=l,this.S=h,this.E=f,this.eu=d,this.f=E,this.su=m,this.ai=S,this.no=O,this.bt=N,this.M=v,this.Z=_,this.J=M,this.w=k,this.LA=T,this.K=B,this.pt=et,this.vt=ct,this.Kg=Ht,this.ne=Ut,this.UA=w,this.C=L,this.Vt=V,this.N=F,this.At=lt,this._t=Dt,this.lt=se,this._e=Te,this.Je=hs,this.VA=(zt=!1)=>{let Bt=this.R.getSession();Bt===null?(this.Vn=new OS(this.f.recordTargetingRules,this.Jg,this.S,this._t,this.K,this.w),this.Vn.init(),this.Vn.start()):(Bt.collectState===U.RECORDING_RULES_TARGETING||Bt.collectState===U.ANALYTICS_ONLY_RULES_TARGETING)&&this.Jg(zt)},this.Jg=(zt=!1)=>{this.Hn.onLoad(()=>{var Bt,he;(Bt=this.Vn)===null||Bt===void 0||Bt.emitTargetingCollectState(),(he=this.Vn)===null||he===void 0||he.stop(),this.S.emitStartTracking(zt)}),this.Wa(zt)},this.Wa=(zt=!1)=>{this.ai.isActive()||(this.lt.init(),this.iu.start(zt),this.Hn.start())},this.jA=()=>{this.S.emitBeforeSessionRenewal(),this.Bn(!0),this.S.emitAfterSessionRenewal()},this.HA=()=>{this.S.emitBeforeSessionRenewal(),this._t.refreshQuota(zt=>{zt!==U.QUOTA_REACHED&&(this.Bn(!0),this.S.emitAfterSessionRenewal())})}}start(){if(this.su.init(),this.ai.init(),this.ai.isActive())return;let t,e,i,r,o,c,l,h,f,d,E,m,S,O,N,v,_,M,k;this.C.schedule(()=>{this.f.isCsCrosswritingHeap()&&(this.Ue=new DS),N=new RS(this.F),m=new Vf(this.Z),S=new _f(()=>{}),v=new wf,k=new bf;let T=new TS(S,this.lt,v,M,k,this.nu());O=new AS(this.nu(),this.lt,T,v,_);let B=new bS(this.S,this.E,this.lt,T,v,_,M);B.init(),this.S.addListener(B),t=new nm(this.f,this.Wi,this.O,this.Z,m,this.E,this.F,new Lf(H),this.pt,this.Vt,this.K,O,this.Ue),e=new Hm(this.E,this.R,this.f,this.Et,this.Ee,this.M),E=new yS(O,this.f);let et=null,ct=new yy;i=new cy(this.O,this.R,this.E,this.pt,et,this.f,ct,E),r=new qm(this.f,this.Wi,this.O,this.E,this.M,this.F,this.w),this.f.isCsCrosswritingHeap()&&(this._e||(this._e=new Ul),this.Qg=new my(this._e,this.E),this.S.addListener(this.Qg),this.Qg.init());let Ht;this.f.isCsCrosswritingHeap()&&(this.Zg=new $f(this.E,this.Je),this.S.addListener(this.Zg),this.Zg.init(),this.tm=new Zf(this.E,this.f,this.O,this.F),this.S.addListener(this.tm),this.tm.init()),this.iu=new Ry(this.f,this.E,this.S,this.Wi,this.O,this.R,this.Is,this.bt,this.vt,this.w,this.ne,ct,this.K,this._e,Ht),this.em=new BS(this.f,this.O,this.R,this.E),l=new dy(this.f,this.E,this.Ee,this.Wi,this.K),h=new ly(this.E),f=new Hf,this.Hn=new wg}),(this.f.apiErrors.enabled||this.f.isNetworkDetailsEnabled())&&this.C.schedule(()=>{this.ut=new th,this.BA=new MS(this.E,this.ut),this.BA.init()}),this.f.apiErrors.enabled&&this.C.schedule(()=>{var T,B;let et=new gm(this.f.apiErrors,this.M);this.ft=new lm(new _g,new Sg,et),this.ge=new hm(this.ut,this.J,!!(!((B=(T=this.f)===null||T===void 0?void 0:T.experimental)===null||B===void 0)&&B.anonymizeNameInUrls)),this.kn=new um;let ct=new am(this.ft,this.ge,this.f,this.Wi,this.pt,this.E,this.Vt);ct.init(),this.S.addListener(ct)}),this.f.customErrors.enabled&&this.C.schedule(()=>{var T,B,et;let ct;this.Qs=new Am(this.M,!((et=(B=this.f)===null||B===void 0?void 0:B.experimental)===null||et===void 0)&&et.anonymizeNameInUrls?this.J:void 0);let Ht=new vm(this.Qs,this.f,this.Wi,this.E,this.K,this.Vt,this.pt,ct);Ht.init(),this.S.addListener(Ht)}),this.f.jsErrorsEnabled&&this.C.schedule(()=>{this.Cs=new Mm,this.ye=new Dm(this.M,this.w);let T=new Nm(this.Cs,this.ye,this.f,this.Wi,this.pt,this.E,this.K,this.w,this.Vt);T.init(),this.S.addListener(T)}),this.C.schedule(()=>{this.no.init()}),this.C.schedule(()=>{i.init()}),this.C.schedule(()=>{e.init()}),this.C.schedule(()=>{r.init()}),this.C.schedule(()=>{this.Kg.init()}),this.C.schedule(()=>{this.iu.init()}),this.C.schedule(()=>{this.em.init()}),this.C.schedule(()=>{l.init()}),this.C.schedule(()=>{this.LA.init()}),this.C.schedule(()=>{h.init()}),this.C.schedule(()=>{f.init()}),this.C.schedule(()=>{this.UA.init()}),this.C.schedule(()=>{this.S.addListener(this.em),this.S.addListener(this.eu),this.S.addListener(t),this.S.addListener(this.no),this.S.addListener(i),this.S.addListener(r),this.S.addListener(this.Kg),this.S.addListener(this.iu),this.S.addListener(l),this.S.addListener(e),this.S.addListener(f),this.S.addListener(N)}),Ai.isRecordingSupported()&&this.C.schedule(()=>{let T=new mS(E,this.R,this.f,this.Et,this.E,this.M,this.F,S,this.ye,this.ft,this.ge,this.ut,this.S,this.K,this.pt,this.ne,this.Vt,this.J,this.kn,this.nu(),this.Qs,_);T.init(),this.S.addListener(T),i.setRecordingService(T.recordingService)}),this.C.schedule(()=>{var T;let B,et}),this.C.schedule(()=>{t.init()}),this.C.schedule(()=>{this.f.isQuotaEnabled()?this.F.onSessionExpired(()=>{this.HA()}):this.F.onSessionExpired(()=>{this.jA()}),this.Bn()})}Bn(t=!1){var e,i,r;if(this.f.hasTargetingRules()){this.VA(t),this.E.start(),(e=this.Ue)===null||e===void 0||e.start(),this.Vn&&this.Vn.checkInitialUrlTargetingRules();return}this.E.start(),(i=this.Ue)===null||i===void 0||i.start(),this.Hn.onLoad(()=>{this.S.emitStartTracking(t)}),(!dl(this.f)||t)&&this.Wa(t)}nu(){if(this.it)return this.it;let t=new mo;return this.it=new Cf(this.f,this.w,t,this.bt),this.it.init(),this.it.shouldUseAnonymization()&&G.counters.pageAnonymisation.count("anonymized-on-start"),this.it}}return s})(),$S=(()=>{class s{constructor(t,e,i,r,o,c,l,h){this.f=t,this.O=e,this.Ke=i,this.sm=r,this.FA=o,this.$A=c,this.zA=l,this.ru=h}compute(t){var e,i;this.f.crossDomainTracking&&!this.f.cookielessTrackingEnabled?this.f.crossDomainSingleIframeTracking?(e=this.zA)===null||e===void 0||e.start(()=>this.ou(t)):(i=this.$A)===null||i===void 0||i.applyUpToDate(()=>this.ou(t)):this.ou(t)}ou(t){this.FA.handle(),this.sm.clear(),this.GA()?(this.sm.restoreClearedVisitor(),t(!0)):(this.Ke.exclude(this.f),t(!1))}GA(){let t=_s.boolean(this.f.sampleRate);return this.ru.isForceIncluded()||!this.Ke.isExcluded()&&this.O.doesVisitorExist()||!this.Ke.isExcluded()&&t}}return s})(),zS=(()=>{class s{constructor(t,e,i,r){this.f=t,this.gt=e,this.S=i,this.R=r,this.qA=10*1e3}createOrUpdateVisitor(){var t;let e=this.getVisitor();e===null&&(e=this.WA(),(t=this.R)===null||t===void 0||t.removeSession()),this.YA(e),this.setVisitor(e)}WA(){return{id:Eg.generate(),visitsCount:0,appliedTrackingDraw:this.f.lastTrackingDraw,creationTimestamp:la(),lastVisitTimestamp:0,hitTimestamp:0,expires:C.now()+this.f.visitorCookieTimeout,allowSubdomains:this.f.allowSubdomains,identityPrint:null}}YA(t){let e=la();this.R&&!this.R.doesSessionExist()&&(t.visitsCount+=1,t.lastVisitTimestamp=e),t.hitTimestamp=e,t.appliedTrackingDraw=this.f.lastTrackingDraw,this.im=t.visitsCount}getRequestParameters(){let t=this.getVisitor();return t?{uu:t.id,sn:`${t.visitsCount}`,hd:`${t.hitTimestamp}`}:{}}getVisitor(){return this.gt.get()}setVisitor(t){this.gt.set(t)}doesVisitorExist(){return this.gt.get()!==null}resetVisitor(){this.nm(),this.S.emitAfterVisitorCleared()}removeVisitor(){this.gt.remove()}hasAllowSubdomainsChanged(){let t=this.getVisitor();return t?t.allowSubdomains!==this.f.allowSubdomains:!1}handleSubdomainChange(){this.gt.handleSubdomainChange()}isSessionRenewed(){let t=this.getVisitor();return t===null||this.im===void 0?!1:t.visitsCount!==this.im}KA(){return!X(this.rm)||C.now()-this.rm>this.qA}renewVisitor(){this.KA()?(this.rm=C.now(),this.nm(),this.S.emitAfterVisitorRenewal()):H.warn("session:start:newVisitor is trying to renew visitor under time limit")}nm(){this.S.emitBeforeVisitorRenewal(),this.removeVisitor()}}return s})(),ne="_cs_s",Pn=18e5,mr=".",GS=13,cn=(()=>{let s;return function(n){n[n.NOT_FOUND=0]="NOT_FOUND",n[n.EXPIRED=1]="EXPIRED",n[n.FOUND=2]="FOUND"}(s||(s={})),s})(),qS=(()=>{class s{constructor(t,e,i){this.f=t,this.N=e,this.X=i,this.re=null,this.au=!1}get(t){let e=this.getRawSession(t);return this.isValid(e)?al(e):null}getRawSession(t){if(t){let f=this.lu();return Dr(f)}let{sessionString:e,status:i}=this.JA(),r=Dr(e);if(i!==cn.EXPIRED)return r;if(this.f.cookielessTrackingEnabled)return null;let o=this.lu();if(!o)return null;let c=csString.prototype.split.call(o,mr);if(!s.om(c))return o;let l=c[c.length-1],h=parseInt(l,10);return isNaN(h)||this.QA(h),r}onCookieToSet(t){this.Si=t}onCookieToRemove(t){this.vi=t}set(t,e=Pn){var i;let r=C.now()+e,o=ef(t);o+=`${mr}${r}`,this.ZA(o,r),this.f.cookielessTrackingEnabled?this.X.setItem(ne,o):(this.N.set(ne,o,e),(i=this.Si)===null||i===void 0||i.call(this,ne,o,e))}remove(){var t;this.f.cookielessTrackingEnabled?this.X.removeItem(ne):(this.N.delete(ne),(t=this.vi)===null||t===void 0||t.call(this,ne)),this.t0()}handleSubdomainChange(){if(this.f.cookielessTrackingEnabled)return;let t=this.get(!0);t&&(this.f.allowSubdomains?this.N.delete(ne,Dn.CURRENT_DOMAIN):this.N.delete(ne,this.N.getRootDomain()),this.set(t))}isValid(t){return t!==null&&go(t)}ZA(t,e){this.re={sessionString:t,expires:e}}JA(){return this.re?this.re&&C.now()<=this.re.expires?{sessionString:this.re.sessionString,status:cn.FOUND}:{sessionString:this.re.sessionString,status:cn.EXPIRED}:{sessionString:this.lu(),status:cn.NOT_FOUND}}t0(){this.re=null}QA(t){this.re&&(this.re.expires=t,this.au=!0)}isCacheRefreshed(){return this.au}resetCacheRefreshed(){this.au=!1}lu(){if(this.f.cookielessTrackingEnabled){let e=this.X.getItem(ne);return!e||this.am(e)?null:e}let t=this.N.get(ne);return!t||this.am(t)?null:t}am(t){let e=csString.prototype.split.call(t,mr);if(!s.om(e))return!1;let i=parseInt(e[e.length-1],10);return!isNaN(i)&&C.now()>i}static om(t){return t[t.length-1].length===GS}}return s})(),ko=60*1e3,WS=60*ko,YS=4*WS-ko,Ls=(()=>{let s;return function(n){n[n.NO=0]="NO",n[n.WITHDRAWN=1]="WITHDRAWN",n[n.GRANTED=2]="GRANTED"}(s||(s={})),s})(),XS=(()=>{class s{constructor(t,e,i,r,o){this.Le=t,this._t=e,this.S=i,this.e0=r,this.s0=o,this.ro=null,this.hu=0,this.oo=Ls.NO}setDynamicVariablesService(t){this.i0=t}createOrUpdateSession(){this.du(),this.n0=C.now(),this.hu=0;let t=this.cm();t===null?(t=this.r0(),this.Ya(t),this.S.emitSessionCreated()):(t=this._t.sanitizeSessionCollectState(t),this.o0(t),t.collectState=this._t.getEligibleCollectState(t)),this.setSession(t)}grantReplayRecording(t){t.collectState=this._t.getInitialCollectState(),t.collectState=this._t.computeInitialCollectStateFromRecordingConsentGranted(t),this.setSession(t)}grantReplayRecordingBeforeSessionStart(){this.oo=Ls.GRANTED}withdrawnReplayRecording(t){t.collectState=this._t.getRecordingConsentWithdrawn(),this.setSession(t)}withdrawnReplayRecordingBeforeSessionStart(){this.oo=Ls.WITHDRAWN}Ya(t){this.oo===Ls.WITHDRAWN?(t.collectState=this._t.getRecordingConsentWithdrawn(),this.setSession(t)):this.oo===Ls.GRANTED?t.collectState=this._t.computeInitialCollectStateFromRecordingConsentGranted(t):t.collectState=this._t.computeInitialCollectState(t),this.oo=Ls.NO}r0(){return{pageNumber:1,collectState:this._t.getInitialCollectState(),replayConsent:this.e0?kr.NOT_EXPRESSED:kr.UNNECESSARY,etrStatus:Zt.ETR_NOT_SAVED_SESSION}}o0(t){t.pageNumber+=1}isReplayRecorded(){let t=this.getSession();return!!t&&this._t.isReplayRecorded(t)}isTemporarilyRecorded(){let t=this.getSession();return(t==null?void 0:t.collectState)===U.RECORDING_TEMPORARILY}getRequestParameters(){let t={},e=this.getSession();return e!==null&&(t.pn=`${e.pageNumber}`),t}getSession(){return this.Le.get()}cm(){return this.Le.get(!0)}doesSessionExist(){return this.Le.get()!==null}setSession(t){this.Le.set(t),this.S.emitSessionRefreshed()}refreshSession(){let t=this.cm();t&&this.setSession(t)}removeSession(){this.Le.remove(),this.S.emitSessionRemoved()}getCollectStates(){let t=this.getSession(),e=[];return t&&(t.collectState!==U.ANALYTICS_ONLY&&csArray.prototype.push.call(e,t.collectState===U.RECORDING_RULES_TARGETING?U.RECORDING_GLOBAL_SAMPLING:t.collectState),this.s0&&csArray.prototype.push.call(e,U.RECORDING_ETR_SAMPLING)),e}updateCollectState(t){let e=this.getSession();e!==null&&(e.collectState=t,this.setSession(e))}hasValidSession(){let t=this.Le.getRawSession();return this.Le.isValid(t)}handleSubdomainChange(){this.Le.handleSubdomainChange()}pollCacheRefreshEvent(t=!0){let e=this.Le.isCacheRefreshed();return e&&t&&this.Le.resetCacheRefreshed(),e}extendSessionPeriodically(){this.ro||this.lm()}extendSession(){let t=this.getSession();return t===null?(H.warn("extendSession is trying to extend an expired session"),this.du(),!1):(this.setSession(t),!0)}lm(){if(this.a0()){this.du();return}this.extendSession()&&(this.c0(),this.l0())}l0(){this.ro=window.csSetTimeout(()=>{this.lm()},Pn-ko)}a0(){return YS-(C.now()+Pn-this.n0)<0}du(){this.ro&&(window.csClearTimeout(this.ro),this.ro=null)}c0(){this.hu+=1,this.i0.trackDynamicVariable("session_expiry_update",this.hu)}}return s})(),KS=(()=>{class s{constructor(t,e,i){this.f=t,this.O=e,this.Ke=i}clear(){this.h0()&&(this.hm=this.O.getVisitor(),this.O.removeVisitor()),this.u0()&&this.Ke.removeExclusion()}h0(){return this.O.doesVisitorExist()&&this.O.getVisitor().appliedTrackingDraw!==this.f.lastTrackingDraw}u0(){return this.Ke.getAppliedTrackingDraw()!==this.f.lastTrackingDraw}restoreClearedVisitor(){this.hm&&this.O.setVisitor(this.hm)}}return s})(),JS=(()=>{class s{constructor(t,e,i){this.O=t,this.R=e,this.d0=i}handle(){this.O.hasAllowSubdomainsChanged()&&(this.O.handleSubdomainChange(),this.R.handleSubdomainChange(),this.d0.handleSubdomainChange())}}return s})(),Ze="_cs_c",ys=(()=>{let s;return function(n){n[n.NOT_REQUIRED=0]="NOT_REQUIRED",n[n.NOT_EXPRESSED=1]="NOT_EXPRESSED",n[n.GRANTED=2]="GRANTED",n[n.WITHDRAWN=3]="WITHDRAWN"}(s||(s={})),s})(),QS=(()=>{class s{constructor(t,e,i){this.f=t,this.N=e,this.At=i}get(){let t;return this.f.cookielessTrackingEnabled?t=this.At.getItem(Ze):t=this.N.get(Ze),t===null?t:Number(t)}set(t){this.f.cookielessTrackingEnabled?this.At.setItem(Ze,csString(t)):this.N.set(Ze,csString(t),eo)}remove(){this.f.cookielessTrackingEnabled?this.At.removeItem(Ze):this.N.delete(Ze)}handleSubdomainChange(){this.f.cookielessTrackingEnabled||(this.f.allowSubdomains?this.N.delete(Ze,Dn.CURRENT_DOMAIN):this.N.delete(Ze,this.N.getRootDomain()))}}return s})(),ZS=(()=>{class s{constructor(t,e,i){this.f=t,this.R=e,this.S=i}grantReplayConsent(){if(!rs.isReplayConsentNeeded(this.f))return;let t=this.R.getSession();if(!t){this.R.grantReplayRecordingBeforeSessionStart();return}rs.isRecordingBlockedByConsent(t)&&(this.R.grantReplayRecording(t),this.S.emitAfterReplayRecordingConsentGranted())}withdrawReplayConsent(){if(!rs.isReplayConsentNeeded(this.f))return;let t=this.R.getSession();if(!t){this.R.withdrawnReplayRecordingBeforeSessionStart();return}rs.isRecordingWithDrawn(t)||(this.R.withdrawnReplayRecording(t),this.S.emitAfterReplayRecordingConsentWithdrawn())}}return s})(),tv=["replay:consent:unanonymized:granted","trackConsentGranted"],ev=["replay:consent:unanonymized:withdrawn","trackConsentWithdrawn"],sv=["replay:consent:startForSession:granted"],iv=["replay:consent:startForSession:withdrawn"],nv=(()=>{class s{constructor(t,e,i,r,o){this.f=t,this.E=e,this.bt=i,this.R=r,this.S=o}init(){this.um=new ZS(this.f,this.R,this.S),this.bt.setInitialConsent(),this.ht()}ht(){this.E.register(tv,()=>{this.bt.grantReplayAnonymizationConsent()}),this.E.register(ev,()=>{this.bt.withdrawReplayAnonymizationConsent()}),this.E.register(sv,()=>{this.um.grantReplayConsent()}),this.E.register(iv,()=>{this.um.withdrawReplayConsent()})}onOptout(){this.bt.removeAllConsents()}onBeforeVisitorRenewal(){this.bt.removeAllConsents()}onAfterVisitorRenewal(){this.bt.setInitialConsent()}onAfterVisitorCleared(){this.bt.setInitialConsent()}}return s})(),rv=(()=>{class s{constructor(t,e,i){this.f=t,this.gt=e,this.S=i}setInitialConsent(){let t=this.gt.get();(t===null||this.hasConsentRequiredChanged(t))&&this.setDefaultReplayAnonymization()}hasConsentRequiredChanged(t){let e=this.f.consentRequired;return e&&t===ys.NOT_REQUIRED||!e&&t!==ys.NOT_REQUIRED}handleSubdomainChange(){this.gt.handleSubdomainChange()}setDefaultReplayAnonymization(){let t=this.f.consentRequired?ys.NOT_EXPRESSED:ys.NOT_REQUIRED;this.gt.set(t)}grantReplayAnonymizationConsent(){this.f.consentRequired&&(this.gt.set(ys.GRANTED),this.S.emitReplayUnanonymizationConsentGranted())}withdrawReplayAnonymizationConsent(){this.f.consentRequired&&(this.gt.set(ys.WITHDRAWN),this.S.emitReplayUnanonymizationConsentWithdrawn())}removeAllConsents(){this.gt.remove()}isReplayUnanonymizedAllowedByConsent(){return!this.f.consentRequired||this.gt.get()===ys.GRANTED}getRequestParameters(){return{uc:`${this.gt.get()}`}}}return s})(),ov=(()=>{class s{constructor(t,e,i,r,o,c,l){this.S=t,this.E=e,this.eu=i,this.su=r,this.ai=o,this.p0=c,this.no=l}start(){this.S.addListener(this.p0),this.S.addListener(this.no),this.S.addListener(this.eu),this.no.init(),this.su.init(),this.ai.init(),!this.ai.isActive()&&this.E.start()}}return s})(),av=(()=>{class s{constructor(t,e){this.Ot=t,this.gt=e}exclude(t){this.gt.set(csString(t.lastTrackingDraw))}removeExclusion(){this.gt.remove()}isExcluded(){return this.f0()||this.g0()}f0(){return this.getAppliedTrackingDraw()!==0}getAppliedTrackingDraw(){return this.gt.get()}g0(){return csString.prototype.indexOf.call(this.Ot.href,Oe)>0}}return s})(),cv=(()=>{class s{constructor(t){this.Ui=t}onOptout(){this.Ui.removeExclusion()}}return s})(),yr=(()=>{let s;return function(n){n.SessionReplay="SR",n.None=""}(s||(s={})),s})(),lv=".^",eh=".*",hv=(()=>{class s{constructor(t){this.w=t,this.pu=new csRegExp(`${lv}`)}setExcludeUrlForSessionReplay(t){try{this.pu=new csRegExp(t)}catch{H.warn(`excludeURLforReplay - invalid regex '${t}'`),this.pu=new csRegExp(`${eh}`)}}dm(){return this.pu.test(this.w.getAnonymizedUrl())?yr.SessionReplay:yr.None}isUrlExcludedForSessionReplay(){return this.dm()===yr.SessionReplay}getRequestParameters(){return{ex:this.dm()}}}return s})(),sh=["excludeURLforReplay"],uv=(()=>{class s{constructor(t,e){this.Ui=t,this.E=e}init(){this.E.register(sh,t=>{if(A(t))this.Ui.setExcludeUrlForSessionReplay(t);else throw new Ct("excludeURLforReplay")})}}return s})(),Er="_cs_inc",dv=(()=>{class s{constructor(t,e){this.Ot=t,this.N=e}isForceIncluded(){return this.m0()||this.y0()}isForceReplayRecorded(){return this.E0(U.RECORDING_GLOBAL_SAMPLING)}m0(){return this.N.get(Er)!==null}E0(t){return this.N.get(Er)===t}y0(){return csString.prototype.indexOf.call(this.Ot.href,Er)>0}}return s})(),pi="_cs_optout",pv=(()=>{class s{constructor(t,e,i){this.f=t,this.N=e,this.At=i}get(){return this.f.cookielessTrackingEnabled?this.At.getItem(pi):this.N.get(pi)}set(t){this.f.cookielessTrackingEnabled?this.At.setItem(pi,t):this.N.set(pi,t,eo)}}return s})(),yc="1",fv=(()=>{class s{constructor(t,e,i){this.S=t,this.Ot=e,this.gt=i}init(){!this.isActive()&&this.S0()&&this.activate()}isActive(){return this.gt.get()===yc}activate(){this.S.emitOptout(),this.gt.set(yc)}S0(){return csString.prototype.indexOf.call(this.Ot.href,pi)>0}}return s})(),gv=["optout"];var mv=(()=>{class s{constructor(t,e){this.E=t,this.ai=e}init(){this.E.register(gv,()=>{this.ai.activate()})}}return s})();var yv=(()=>{class s{constructor(t,e){this.E=t,this.pt=e}init(){this.pt.addListener(this.E)}onOptout(){this.E.stop()}onBeforeSessionRenewal(){this.E.stop()}}return s})();var Ev=(()=>{let s;return function(n){n.UXA="_uxa",n.WVT="cs_wvt"}(s||(s={})),s})(),Sv=(()=>{class s extends Tt{constructor(t){super(),this.fu=t,this.ds={}}register(t,e,i){for(let r of t){let o=(...c)=>{try{let l=e(...c);return G.counters.commandApplied.count(r),l}catch(l){l instanceof Ct?(G.counters.commandMisuse.count(r),H.warn(`Misused Command: ${r}; Args: ${csJSON.stringify(c)}; Error: ${ve(l)?l.stack:l}`)):(G.counters.commandError.count(r),H.error(`Command Error - ${r}: ${ve(l)?l.stack:l}`))}};this.ds[r]={callback:o,configuration:i},this.ds}}onStart(){this._0(),this.w0()}onStop(){for(let t of this.fu)window[t]=[]}applyFromIntegration(t,e,i){this.pm(t,e,`Commands.apply.from.integration: ${i}`),G.counters.commandsFromIntegrations.count(t)}applyFromImplementation(t,e,i){this.pm(t,e,`Commands.apply.from.implementation: ${i}`),G.counters.commandsFromCSTC.count(t)}onIframeCommands(t){for(let e of t.commands)this.b0(e.name,e.params,t.iframePath),G.counters.commandsFromIframe.count(e.name)}pm(t,e,i){if(!this.isStarted){window._uxa.push([t,...e]);return}H.tryToExecute(i,()=>{if(this.ds[t])return this.ds[t].callback(...e)})()}b0(t,e,i){H.tryToExecute(`Commands.apply.from.iframe: ${i}`,()=>{if(this.ds[t])return this.ds[t].callback(...e)})()}_0(){for(let t of this.fu)window[t].forEach(([e,...i])=>this.fm(e,i,!1))}w0(){for(let t of this.fu)window[t]={push:([e,...i])=>this.fm(e,i,!0)}}fm(t,e,i){var r,o;if(this.ds[t]){if(((r=this.ds[t].configuration)===null||r===void 0?void 0:r.disableApplyPending)&&!i||((o=this.ds[t].configuration)===null||o===void 0?void 0:o.disableApplyImmediate)&&i)return;try{return this.ds[t].callback(...e)}catch(l){H.error(`Command ${t} failed - params: ${csJSON.stringify(e)}`,l)}}}}return s})();var Ec=(()=>{class s{constructor(t,e,i,r,o){this.f=t,this.O=e,this.R=i,this.Tm=r,this.Ms=o}getRequestParameters(){var t;let e={...po(),...this.f.getRequestParameters()},i=this.R.getSession();i&&(e.pn=`${i.pageNumber}`);let r=this.O.getVisitor();if(r&&(e.sn=`${r.visitsCount}`,e.uu=`${r.id}`),!((t=this.Tm)===null||t===void 0)&&t.hasSubProjectId()&&(e.subProjectID=`${this.Tm.getSubProjectId()}`),this.P0(e),window.heap&&!this.f.isCsCrosswritingHeap())try{e.happid=window.heap.appid,window.heap.getSessionId&&(e.hsid=window.heap.getSessionId()),window.heap.getUserId?e.huu=window.heap.getUserId():window.heap.userId&&(e.huu=window.heap.userId),window.heap.getPageviewMetadata&&(e.hpvid=window.heap.getPageviewMetadata().pageviewId)}catch{delete e.happid,delete e.hsid,delete e.huu,delete e.hpvid}return e}P0(t){if(!this.Ms)return;let e=this.Ms.getSharedContext();e&&(t.happid=e.happid,t.t=e.pageTitle,t.fvt=csString(e.firstViewTime),t.fvurl=e.firstViewUrl,e.previousViewUrl&&(t.pvurl=e.previousViewUrl),t.url=e.currentViewUrl,e.sessionReferrer&&(t.fpvurl=e.sessionReferrer),t.sw=csString(e.screenWidth),t.sh=csString(e.screenHeight),t.cvt=csString(e.currentViewTime),e.encryptedIdentity&&(t.i=e.encryptedIdentity),e.cvarp&&(t.cvarp=e.cvarp))}}return s})(),vv=(()=>{class s{constructor(t,e){this.E=t,this.gs=e}init(){this.E.register(["debugEvents"],t=>{typeof t=="boolean"&&this.gs.updateDynamicFields("emitDebugEvents",t)})}}return s})();function Sc(s,n,t){if(!X(n)&&!X(t))return s.href;let e=X(n)?ih(n):s.pathname,i=X(t)?nh(t):s.search;return`${s.protocol}//${s.host}${e}${i}`}function ih(s){return bt(s,"/")?s:`/${s}`}function nh(s){return bt(s,"?")||s===""?s:`?${s}`}var Sr=(()=>{let s;return function(n){n[n.page=1]="page",n[n.onNextPageviewOnly=2]="onNextPageviewOnly"}(s||(s={})),s})(),_v=(()=>{class s{constructor(t,e){this.Ot=t,this.J=e,this.O0=10}overridePath(t,e){if(t===""){this.Fn=void 0;return}let i=this.Am(e);i&&(this.yu=i),this.Fn=e?this.Rm(t,e):t}overrideQuery(t,e){let i=this.Am(e);i&&(this.Eu=i),this.co=e?this.Rm(t,e):t}computeOverriddenUrl(t){return this.N0(t)?this.getAnonymizedUrl():t}M0(t){return(typeof t=="string"||typeof t=="number")&&t in Sr}N0(t){let e=this.ko(this.Ot.href);return this.ko(t)===e}ko(t){return lp(t,"/")?csString.prototype.slice.call(t,0,-1):t}Am(t){return X(t==null?void 0:t.lifespan)&&this.M0(t==null?void 0:t.lifespan)?t==null?void 0:t.lifespan:null}k0(){return this.yu&&this.yu in Sr}D0(){return this.Eu&&this.Eu in Sr}cleanupOverrideLifespan(){this.k0()&&(this.Fn=void 0,this.yu=void 0),this.D0()&&(this.co=void 0,this.Eu=void 0)}getAnonymizedUrl(){let t=Sc(this.Ot,this.Fn,this.co);return this.J.anonymizeUrl(t)}getUrl(){return Sc(this.Ot,this.Fn,this.co)}getAnonymizedPathAndQuery(){let t=X(this.Fn)?ih(this.Fn):this.Ot.pathname,e=X(this.co)?nh(this.co):this.Ot.search;return this.J.anonymizeUrl(t+e)}getUrlProtocol(){return this.Ot.protocol}getRequestParameters(){return{url:this.getAnonymizedUrl()}}Rm(t,e){return this.x0(e)?this.L0(t):this.U0(e)?this.V0(t):t}U0(t){return!!t.decodeURI}V0(t){return this.Cm(t,1,!1)}x0(t){return!!t.decodeURIDeep}L0(t){return this.Cm(t,this.O0,!0)}Cm(t,e,i){let r=t;for(let o=0;o<e;o++)try{let c=window.decodeURI(r);if(c===r)return r;r=c}catch{return r}return i&&H.warn(`decodeURIDeep limit reached: ${r}`),r}}return s})(),Do=(()=>{class s{constructor(){this.listeners=[]}addListener(t){csArray.prototype.push.call(this.listeners,t)}}return s})(),wv=(()=>{class s extends Do{emitPageEvent(t){for(let e of this.listeners)e.onPageEvent&&e.onPageEvent(t)}emitEventTriggerRecording(t,e){for(let i of this.listeners)i.onEventTriggerRecording&&i.onEventTriggerRecording(t,e)}emitCustomJavaScriptErrorEvent(t){for(let e of this.listeners)e.onCustomJavaScriptErrorEvent&&e.onCustomJavaScriptErrorEvent(t)}emitCustomErrorEvent(t){for(let e of this.listeners)e.onCustomErrorEvent&&e.onCustomErrorEvent(t)}emitUserIdentifierEvent(t){for(let e of this.listeners)e.onUserIdentifierEvent&&e.onUserIdentifierEvent(t)}emitExternalEvent(t){for(let e of this.listeners)e.onExternalEvent&&e.onExternalEvent({type:z.EXTERNAL_EVENT,name:t,ts:0})}emitTargetingRulesArtificialPageview(t){for(let e of this.listeners)e.onTargetingRulesArtificialPageview&&e.onTargetingRulesArtificialPageview(t)}}return s})(),yi="|iframe|",bv=(()=>{class s extends Do{constructor(t,e,i,r){super(),this.j0=t,this.H0=e,this.B0=i,this.F0=r}emitIframeEvent(t,e,i){if(this.$0(e)&&t===null){H.error(`iframeEventEmitter received event ${e} with null iframe, content:${csJSON.stringify(i)}`);return}switch(e){case Nt.ChildLogMessage:this.z0(i);break;case Nt.AnalysisEvent:{let r=i,o=this.j0.transformEvent(t,r);o.isUserEvent?this.G0(o.event):this.q0(o.event);break}case Nt.RecordingEvent:{let r=i,o=this.F0.transformEvents(t,r);if(o.events.length===0)return;o.containsUserEvent?this.W0(o.events):this.Y0(o.events);break}case Nt.JavascriptError:this.X0(i);break;case Nt.ApiError:this.K0(i);break;case Nt.DetailedApiError:this.J0(i);break;case Nt.CustomError:this.Q0(i);break;case Nt.EmerchandisingMessage:{let r=this.B0.transformEvent(t,i);this.Z0(r);break}case Nt.Commands:{let r=this.H0.transformEvent(t,i);this.tR(r);break}case Nt.IntegrationCallback:this.eR(i);break;case Nt.StaticResource:this.sR(i);break;case Nt.TrackingContextRequestMessage:this.iR(i);break;default:H.error(`Parent received unknown data type from iframe : ${csJSON.stringify(i)}`)}}$0(t){let e=[Nt.AnalysisEvent,Nt.RecordingEvent,Nt.EmerchandisingMessage,Nt.Commands];return csArray.prototype.indexOf.call(e,t)!==-1}z0(t){let{message:e,errorCode:i,level:r}=t;switch(r){case pt.debug:H.debug(e,i);break;case pt.warn:H.warn(e,!0,i);break;case pt.implementation:H.implementation(e,i);break;case pt.error:H.error(e,i);break;case pt.critical:H.critical(e,i);break}}G0(t){for(let e of this.listeners)e.onIframeAnalysisUserEvent&&e.onIframeAnalysisUserEvent(t)}q0(t){for(let e of this.listeners)e.onIframeAnalysisBrowserEvent&&e.onIframeAnalysisBrowserEvent(t)}W0(t){for(let e of this.listeners)e.onIframeRecordingUserEvent&&e.onIframeRecordingUserEvent(t)}Y0(t){for(let e of this.listeners)e.onIframeRecordingBrowserEvent&&e.onIframeRecordingBrowserEvent(t)}X0(t){for(let e of this.listeners)e.onIframeJavascriptError&&e.onIframeJavascriptError(t)}K0(t){for(let e of this.listeners)e.onIframeApiError&&e.onIframeApiError(t)}J0(t){for(let e of this.listeners)e.onIframeDetailedApiError&&e.onIframeDetailedApiError(t)}Z0(t){for(let e of this.listeners)e.onIframeEmerchandisingMessage&&e.onIframeEmerchandisingMessage(t)}tR(t){for(let e of this.listeners)e.onIframeCommands&&e.onIframeCommands(t)}eR(t){for(let e of this.listeners)e.onIframeIntegrationCallback&&e.onIframeIntegrationCallback(t)}sR(t){for(let e of this.listeners)e.onIframeStaticResource&&e.onIframeStaticResource(t)}iR(t){for(let e of this.listeners)e.onTrackingContextRequestCallback&&e.onTrackingContextRequestCallback(t)}Q0(t){for(let e of this.listeners)e.onIframeCustomError&&e.onIframeCustomError(t)}}return s})(),Tv=(()=>{class s{setItem(t,e){window.localStorage.setItem(t,e)}getItem(t){return window.localStorage.getItem(t)}removeItem(t){window.localStorage.removeItem(t)}}return s})(),xo=["setCustomVariable"],Av=(()=>{class s{constructor(t,e){this.E=t,this.vt=e}init(){this.E.register(xo,(t,e,i,r)=>{this.vt.set(t,e,i,r)})}onAfterArtificialPageView(){this.vt.deleteNextPageOnlyCustomVariables()}onAfterNaturalPageView(){this.vt.deleteNextPageOnlyCustomVariables()}onOptout(){this.vt.removeCustomVariablesSession()}onBeforeVisitorRenewal(){this.vt.removeCustomVariablesSession(),this.vt.removeCustomVariablesPage()}}return s})(),vc=512,_c=255,vr={SESSION:["visit",2],PAGE:["page",3],NEXT_PAGE_ONLY:["nextPageOnly",4]},Rv=(()=>{class s{constructor(t,e){this.M=t,this.gt=e,this.Yt={},this.Fe={}}set(t,e,i,r){let o,c;if((ft(t)||A(t))&&Number(t)>0&&ut(e)&&ut(i)&&!Se(e)&&!Se(i)&&this.nR(r)){let l=this.M.anonymizePII(csString(e)),h=this.M.anonymizePII(csString(i));if(o=[csString.prototype.slice.call(l,0,vc),csString.prototype.slice.call(h,0,_c)],c=i!=="",!X(r)||csArray.prototype.indexOf.call(vr.SESSION,r)>=0){let f=this.getCustomVariablesSession();c?f[t]=o:delete f[t],this.setCustomVariableSession(f)}(!X(r)||csArray.prototype.indexOf.call(vr.PAGE,r)>=0)&&(c?this.Yt[t]=o:delete this.Yt[t]),X(r)&&csArray.prototype.indexOf.call(vr.NEXT_PAGE_ONLY,r)>=0&&(c?this.Fe[t]=o:delete this.Fe[t])}else throw new Ct(xo[0])}getCustomVariablesSession(){let t=this.gt.get();if(!t)return{};let e=window.csJSON.parse(t);return e!==null&&xe(e)?e:{}}setCustomVariableSession(t){this.gt.set(window.csJSON.stringify(t))}removeCustomVariablesSession(){this.gt.remove()}removeCustomVariablesPage(){this.Yt={}}getRequestParameters(){let t=this.getCustomVariablesSession();for(let i in this.Fe)this.Fe.hasOwnProperty(i)&&(this.Yt[i]=this.Fe[i]);for(let i in this.Yt)this.Yt.hasOwnProperty(i)&&(t[i]=this.Yt[i]);if(window.csJSON.stringify(t).length<=2)return{};let e={cvars:this.Im(t)};return this.hasCustomVariablesPage()&&(e.cvarp=this.getCustomVariablesPage()),e}deleteNextPageOnlyCustomVariables(){if(Object.keys(this.Fe).length>0)for(let t in this.Fe)this.Fe[t]===this.Yt[t]&&(delete this.Yt[t],delete this.Fe[t])}hasCustomVariablesPage(){return this.Yt&&!Ar(this.Yt)}getCustomVariablesPage(){return this.Im(this.Yt)}Pm(t){for(let e in t)if(t.hasOwnProperty(e)){let i=parseInt(e,10),r=t[e],o=r[0],c=r[1];(!Vu(i,1,20)||o.length>vc||c.length>_c)&&delete t[e]}}Im(t){this.Pm(t);let e=Ar(t)?[]:t;return window.csJSON.stringify(e)}nR(t){return!X(t)||A(t)||ft(t)}getAllValidCustomVars(){let t=this.getCustomVariablesSession();for(let e in this.Fe)this.Fe.hasOwnProperty(e)&&(this.Yt[e]=this.Fe[e]);for(let e in this.Yt)this.Yt.hasOwnProperty(e)&&(t[e]=this.Yt[e]);return this.Pm(t),t}}return s})(),pe="_cs_id",Cv=(()=>{class s{constructor(t,e,i){this.f=t,this.N=e,this.X=i}onCookieToSet(t){this.Si=t}onCookieToRemove(t){this.vi=t}get(){let t;return this.f.cookielessTrackingEnabled?t=this.X.getItem(pe):t=this.N.get(pe),t?(Kp(t)||H.warn(`Invalid visitor string: ${t}`),Yp(t)):null}set(t){var e;let i=Xp(t);if(this.f.cookielessTrackingEnabled)this.X.setItem(pe,i);else{let r=new csDate(t.expires);this.N.set(pe,i,r),(e=this.Si)===null||e===void 0||e.call(this,pe,i,r)}}remove(){var t;this.f.cookielessTrackingEnabled?this.X.removeItem(pe):(this.N.delete(pe),(t=this.vi)===null||t===void 0||t.call(this,pe))}handleSubdomainChange(){if(this.f.cookielessTrackingEnabled)return;let t=this.get();t&&(t.allowSubdomains=this.f.allowSubdomains,this.f.allowSubdomains?this.N.delete(pe,Dn.CURRENT_DOMAIN):this.N.delete(pe,this.N.getRootDomain()),this.set(t))}}return s})(),Iv=["class","data-com.agilebits.onepassword.initial-value","data-com.onepassword.iv","data-ember-action","data-initial-value","data-previous-value","data-react-checksum","data-reactid","id","maxlength","onclick","onsubmit","style"],Pv=1024,Ov=1024,Nv=(()=>{class s{constructor(t,e){this.mt=t,this.f=e}getEventTargetPathAndHierarchy(t,e){let i=Rt(t),r={isNodeSensitive(o){return x.isMaskedElement(o)||x.isMaskedElementChild(o)},isAttributeSensitive(o,c){return x.isMaskedAttribute(o,c)},allWhitelistedAttributes:Xc(this.f.whitelistedAttributes),attributeIgnoreTokens:Iv,useAnonymization:e,attrMaxLength:Ov,hierarchyMaxLength:Pv};return this.mt.getElementPathAndHierarchy(i,r,{dynamicIdRegex:this.f.dynamicIdRegex,...this.f.pathComputationRules})}getEventTargetPath(t){let e=Rt(t);return this.mt.getElementPath(e,{dynamicIdRegex:this.f.dynamicIdRegex,...this.f.pathComputationRules})}getEventTargetPathAndTargetLink(t){let e=Rt(t),{path:i,firstAnchorParent:r}=this.mt.getElementPathAndFirstAnchorParent(e,{dynamicIdRegex:this.f.dynamicIdRegex,...this.f.pathComputationRules}),o=this.rR(r)?r.href:"";return{path:i,targetLink:o}}hasValidEventTarget(t){let e=Rt(t);return this.mt.isValidElement(e)}getElementPath(t){return this.mt.getElementPath(t,{dynamicIdRegex:this.f.dynamicIdRegex,...this.f.pathComputationRules})}rR(t){var e;return t!==null&&t.hasAttribute("href")&&!An((e=t.getAttribute("href"))!==null&&e!==void 0?e:"","#")}}return s})(),Mv=(()=>{class s{constructor(t,e){this.Z=t,this.oR=e}transformEvent(t,e){this.aR(t,e.event);let i=this.Z.getElementPath(t);return this.cR(i,e.event),e}aR(t,e){if(Rg(e)){let i=t.getBoundingClientRect();e.x=Math.round(i.left+e.x+Et.windowOffsetX()),e.y=Math.round(i.top+e.y+Et.windowOffsetY())}}cR(t,e){_l(e)&&(e.tgt=`${t}${yi}${e.tgt}`),Tg(e)&&(e.tgtHM=`${t}${yi}${e.tgtHM}`,this.oR||(e.tgtHMH=Nl(e.tgtHM))),Ag(e)&&(e.tgtLk=`${t}${yi}${e.tgtLk}`)}}return s})(),kv=(()=>{class s{constructor(t){this.Z=t}transformEvent(t,e){let i=this.Z.getElementPath(t);return{iframePath:e.iframePath?`${i}${yi}${e.iframePath}`:i,commands:e.commands}}}return s})(),Dv=(()=>{class s{constructor(t){this.Z=t}transformEvent(t,e){if(e.products.length===0)return e;let i=this.Z.getElementPath(t),r=csArray.prototype.map.call(e.products,o=>({...o,targetPath:`${i}${yi}${o.targetPath}`}));return{...e,products:r}}}return s})(),xv=(()=>{class s{constructor(){this.lR={clientX:2,clientY:3},this.hR={clientX:1,clientY:2},this.uR=[D.POINTER_DOWN,D.POINTER_MOVE,D.POINTER_UP],this.dR=[D.TOUCH_START,D.TOUCH_MOVE,D.TOUCH_END]}transformEvents(t,e){if(!ot.isConnected(t))return e.events=csArray.prototype.filter.call(e.events,c=>c.type!==D.VISIBILITY_CHANGE),e.events.length===0||(H.warn(`IframeRecordingEventsTransformer received event ${Nt.RecordingEvent}
        from disconnected iframe, content:${csJSON.stringify(e.events)}`),e.events=[]),e;let i=rt(t),r=null;csArray.prototype.some.call(e.events,c=>this.Om(c)||this.Nm(c))&&(r=t.getBoundingClientRect());for(let c of e.events)this.Om(c)?this.pR(r,c):this.Nm(c)&&this.fR(r,c),c.context=c.context&&c.context.length>0?`${i}/${c.context}`:`${i}`;return e}fR(t,e){this.Mm(this.hR,t,e)}pR(t,e){this.Mm(this.lR,t,e)}Mm(t,e,i){i.args&&(i.args[t.clientX]=Math.round(e.left+i.args[t.clientX]),i.args[t.clientY]=Math.round(e.top+i.args[t.clientY]))}Om(t){return csArray.prototype.indexOf.call(this.uR,t.type)!==-1}Nm(t){return csArray.prototype.indexOf.call(this.dR,t.type)!==-1}}return s})(),Lv=(()=>{class s{constructor(t){this.Su=t}start(){this.Su.onEvent(t=>this.Q(t)),this.Su.start()}stop(){this.Su.stop()}Q(t){let e=`Content Security Policy error. Violated directive: ${t.violatedDirective} - Source file: ${t.sourceFile}`;H.warn(e)}}return s})(),Uv=(()=>{class s{constructor(){this.zt={boundElement:document,type:"securitypolicyviolation",listener:t=>this.securityPolicyViolationListener(t)}}start(){gt(this.zt)}stop(){mt(this.zt)}onEvent(t){this.L=t}gR(t){if(!t)return!1;let e=t.disposition;return A(t.sourceFile)&&csArray.prototype.some.call(s.mR,i=>csString.prototype.indexOf.call(t.sourceFile,i)>0)&&e!=="report"}securityPolicyViolationListener(t){this.gR(t)&&this.L({violatedDirective:t.violatedDirective,sourceFile:t.sourceFile})}}return s.mR=["contentsquare","cdnssl.clicktale.net"],j([P("Event handler type: securitypolicyviolation")],s.prototype,"securityPolicyViolationListener",null),s})(),Vv=(()=>{class s{init(){this.km=new Lv(new Uv),this.km.start()}onOptout(){this.km.stop()}}return s})();var wc=1/0,{toString:jv}=Object.prototype;function Hv(s){return s==null?s===void 0?"[object Undefined]":"[object Null]":jv.call(s)}var Lo=s=>typeof s=="symbol"||typeof s=="object"&&s!=null&&Hv(s)==="[object Symbol]";function rh(s){if(typeof s=="string"||Lo(s))return s;let n=`${s}`;return typeof s=="number"?n==="0"&&1/s===-wc?"-0":n:s instanceof Number&&n==="0"&&1/s.valueOf()===-wc?"-0":n}var Bv=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Fv=/^\w*$/;function $v(s,n){return csArray.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||Lo(s)?!0:Fv.test(s)||!Bv.test(s)||n!=null&&s in Object(n)}function Uo(s,n){if(typeof s!="function"||n!=null&&typeof n!="function")throw new TypeError("Expected a function");let t=function(...e){let i=n?n.apply(this,e):e[0],{cache:r}=t;if(r.has(i))return r.get(i);let o=s.apply(this,e);return t.cache=r.set(i,o)||r,o};return t.cache=new(Uo.Cache||Map),t}Uo.Cache=Map;var zv=500;function Gv(s){let n=Uo(s,t=>{let{cache:e}=n;return e.size===zv&&e.clear(),t});return n}var qv=46,Wv=/\\(\\)?/g,Yv=csRegExp(`[^.[\\]]+|\\[(?:([^"'][^[]*)|(["'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))`,"g"),oh=Gv(s=>{let n=[];return csString.prototype.charCodeAt.call(s,0)===qv&&csArray.prototype.push.call(n,""),csString.prototype.replace.call(s,Yv,(t,e,i,r)=>{let o=t;return i?o=csString.prototype.replace.call(r,Wv,"$1"):e&&(o=csString.prototype.trim.call(e)),csArray.prototype.push.call(n,o),t}),n});function Xv(s,n){return csArray.isArray(s)?s:$v(s,n)?[s]:oh(s)}function Kv(s,n){let t=Xv(n,s),e=s,i=0,{length:r}=t;for(;e!=null&&i<r;){let o=rh(t[i]);e=e[o],i+=1}return i&&i===r?e:void 0}function Jv(s){return"iterable"in s}function ah(s){return X(s.iterable)?A(s.iterable)||s.iterable===null:!0}function ch(s,n,t){let e=s==null?void 0:Kv(s,n);return e===void 0?t:e}var Qv=/\b__p \+= '';/g,Zv=/\b(__p \+=) '' \+/g,t_=/(__e\(.*?\)|\b__t\)) \+\n'';/g,e_=/['\n\r\u2028\u2029\\]/g,lh=/[&<>"']/g,s_=csRegExp(lh.source),i_=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ln=/($^)/,n_={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},r_=/[()=,{}[\]/\s]/,o_=/<%-([\s\S]+?)%>/g,a_=/<%([\s\S]+?)%>/g,hh=/<%=([\s\S]+?)%>/g,{hasOwnProperty:bc}=Object.prototype,c_="Invalid `variable` option passed into `_.template`";function l_(s){return`\\${n_[s]}`}var h_={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},u_={escape:o_,evaluate:a_,interpolate:hh,variable:"",imports:{_:{template:gn,escape(s){return s&&s_.test(s)?csString.prototype.replace.call(s,lh,n=>h_[n]):s!=null?s:""}}}};function gn(s,n){let t={...u_,...n},e=Object.keys(t.imports||{}),i=csArray.prototype.map.call(e,S=>t==null?void 0:t.imports[S]),r,o,c=0,l=t.interpolate||ln,h="__p += '",f=csRegExp(`${(t.escape||ln).source}|${l.source}|${(l===hh?i_:ln).source}|${(t.evaluate||ln).source}|$`,"g"),d=`//# sourceURL=${bc.call(t,"sourceURL")?csString.prototype.replace.call(`${t.sourceURL}`,/\s/g," "):void 0}
`;s==null||csString.prototype.replace.call(s,f,(S,O,N,v,_,M)=>{let k=N||v;return h+=csString.prototype.replace.call(csString.prototype.slice.call(s,c,M),e_,l_),O&&(r=!0,h+=`' +
__e(${O}) +
'`),_&&(o=!0,h+=`';
${_};
__p += '`),k&&(h+=`' +
((__t = (${k})) == null ? '' : __t) +
'`),c=M+S.length,S}),h+=`';
`;let E=bc.call(t,"variable")&&t.variable;if(!E)h=`with (obj) {
${h}
}
`;else if(r_.test(E))throw new Error(c_);h=csString.prototype.replace.call(csString.prototype.replace.call(o?csString.prototype.replace.call(h,Qv,""):h,Zv,"$1"),t_,"$1;"),h=`function(${E||"obj"}) {
${E?"":`obj || (obj = {});
`}var __t, __p = ''${r?", __e = _.escape":""}${o?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`}${h}return __p
}`;let m;try{m=Function(...e,`${d}return ${h}`)(...i)}catch(S){m=S}if(m.source=h,m instanceof Error)throw m;return m}var d_=/^(\s*("(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*')\s*,?)+$/,p_=/<%[\s\S]+?%>|<%-[\s\S]+?%>|<%=[\s\S]+?%>|\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/,f_=/^document\.querySelector\(("(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*')\)\.(textContent|value)$/;function Tc(s){if(!d_.test(s)||p_.test(s))throw new Error("whitelisted function is wrongly used")}var Ac={"window.location.hash.replace(":(s,n)=>{let t=csString.prototype.substring.call(s,29,s.length-1);return Tc(t),gn(`\${${s}}`)(n)},"window.sessionStorage.getItem(":(s,n)=>{let t=csString.prototype.substring.call(s,30,s.length-1);return Tc(t),gn(`\${${s}}`)(n)},"document.querySelector(":(s,n)=>{if(f_.test(s))return gn(`\${${s}}`)(n)},"new Date().getTime()":(s,n)=>new csDate().getTime().toString()};function g_(s){let n=me(Object.keys(Ac),t=>bt(s,t));if(n)return Ac[n]}function m_(s){return bt(s,"'")&&Js(s,"'")}var y_=/\$\{([\s\S]+?)\}/g,E_=s=>(n,t,e)=>{let i="";return csArray.prototype.forEach.call(csString.prototype.split.call(t,"+"),r=>{let o=csString.prototype.trim.call(r),c=ch(s,o);if(c===void 0)if(m_(o))c=csString.prototype.substring.call(o,1,o.length-1);else{let l=g_(o);if(l&&(c=l(o,s)),c===void 0)throw new Error("undefined not allowed")}i+=c}),i};function Ks(s,n){try{return csString.prototype.replace.call(s,y_,E_(n))}catch{return null}}function Kr(s,n){let t={};for(let e of Object.keys(s)){let i=s[e];if(A(i)){let r=Ks(i,n);if(r===null)return null;t[e]=r}else t[e]=i}return t}function Jr(s,n){let t=csArray.prototype.join.call(csArray.prototype.filter.call(csArray.prototype.map.call(csString.prototype.split.call(s,","),e=>Ks(e,n)),e=>e!==null&&kt(e)),",");return kt(t)?t:null}function S_(s){return csArray.isArray(s)?csArray.prototype.map.call(s,rh):Lo(s)?[s]:csArray.from(oh(s))}function v_(s,n){try{let e=/^values\(([a-zA-Z0-9_$[\].]+)\)\[\?([a-zA-Z0-9_$]+)\]$/.exec(s);if(!e)return null;let i=e[1],r=e[2],o=ch(n,S_(i));if(typeof o!="object"||o===null)return null;let c=[];return csArray.prototype.forEach.call(Object.keys(o),l=>{let h=o[l];typeof h=="object"&&h!==null&&!csArray.isArray(h)&&r in h&&csArray.prototype.push.call(c,h)}),c}catch{return null}}function __(s,n){let e=/^\[([0-9]+):([0-9+])\]$/.exec(s);if(!e)return null;let i=parseInt(e[1],10),r=parseInt(e[2],10);return r<=i||r>n.length?null:csArray.prototype.slice.call(n,i,r)}function w_(s,n){let t=csString.prototype.split.call(s,"|");if(t.length>2)return null;let e=v_(csString.prototype.trim.call(t[0]),n);return t.length===2?e===null?null:__(csString.prototype.trim.call(t[1]),e):e}var _r=(()=>{let s;return function(n){n.AND="AND",n.OR="OR"}(s||(s={})),s})(),re=(()=>{let s;return function(n){n.STARTS_WITH="startsWith",n.EQUALS="equals",n.NOT_EQUALS="notEquals",n.CONTAINS="contains",n.NOT_CONTAINS="notContains",n.MATCHES="matches",n.NOT_MATCHES="notMatches",n.EXIST="exist",n.NOT_EXIST="notExist"}(s||(s={})),s})();function uh(s,n){return b_(s.operator,C_(s.args,n))}function b_(s,n){switch(s){case re.EXIST:case re.NOT_EXIST:return T_(s,n);default:return A_(s,n)}}function T_(s,n){let[t]=n;if(!kt(t))return!1;switch(s){case re.EXIST:return window.csquerySelector[document.nodeType].call(document,t)!==null;case re.NOT_EXIST:return window.csquerySelector[document.nodeType].call(document,t)===null;default:return!1}}function A_(s,n){let[t,e]=n;if(!(s in _r)&&!(A(t)&&A(e)))return!1;switch(s){case _r.AND:return!!csArray.prototype.reduce.call(n,(r,o)=>r&&o);case _r.OR:return!!csArray.prototype.reduce.call(n,(r,o)=>r||o);case re.STARTS_WITH:return bt(t,e);case re.EQUALS:return t===e;case re.NOT_EQUALS:return t!==e;case re.CONTAINS:return csString.prototype.indexOf.call(t,e)>-1;case re.NOT_CONTAINS:return csString.prototype.indexOf.call(t,e)===-1;case re.MATCHES:{let r=Rc(e);return r!==null&&r.test(t)}case re.NOT_MATCHES:{let r=Rc(e);return r!==null&&!r.test(t)}default:return!1}}function R_(s){return!!(s&&s.operator&&s.args)}function C_(s,n){return csArray.prototype.map.call(s,t=>R_(t)?uh(t,n):A(t)?Ks(t,n):t)}function Rc(s){let n=/^\/(.*)\/([gimy]*)$/.exec(s),t=null;if(n){let[,e,i]=n;try{t=new csRegExp(e,i)}catch{}}else try{t=new csRegExp(s)}catch{}return t}function Vo(s){switch(s){case"no decoding":return null;case"decode once":return{decodeURI:!0};case"decode multiple times":return{decodeURIDeep:!0};default:return null}}function jo(s){switch(s==null?void 0:s[0]){case"on next pageview only":return{lifespan:"onNextPageviewOnly"};default:return null}}var vt=(()=>{class s{constructor(t,e){this.commandsService=t,this.args=e}}return s})(),Hi=(()=>{class s extends vt{}return s})(),dh=(()=>{class s extends vt{validateArgs(t){if(Y(t)){let e=X(t.path)?A(t.path):!0,i=X(t.decodeURI)?A(t.decodeURI):!0,r=X(t.lifespan)?csArray.isArray(t.lifespan):!0;return e&&i&&r}return!1}execute(t){if(!t.path)this.lo([]);else{let e=[t.path],i=Vo(t.decodeURI),r=jo(t.lifespan),o={...i,...r};Object.keys(o).length&&e.push(o),this.lo(e)}}lo(t){this.commandsService.applyFromImplementation(Vl[0],t,"ArtificialPageviewTemplate")}}return s})(),I_=(()=>{class s extends Hi{validateArgs(t){return Y(t)?A(t.message)&&csArray.isArray(t.attributes):!1}execute(t,e){let i=Ks(t.message,e);if(!i)return;let r={};for(let o of t.attributes){let c=Ks(o.value,e);c!==null&&(r[o.key]=c)}this.commandsService.applyFromImplementation(jn[0],[i,r],"CustomErrorTemplate")}}return s})(),P_=(()=>{class s extends vt{validateArgs(t){if(Y(t)){let e=ah(t),i=csArray.isArray(t.scope)?ro(t.scope,r=>A(r)):!0;return e&&i&&ft(t.index)&&A(t.name)&&A(t.value)}return!1}execute(t){this.commandsService.applyFromImplementation(xo[0],[t.index,t.name,t.value,t.scope[0]],"CustomVariableTemplate")}}return s})(),O_=(()=>{class s extends vt{validateArgs(t){return Y(t)?A(t.selector):!1}execute(t){this.commandsService.applyFromImplementation(Kl[0],[t.selector],"DataCsEncryptTemplate")}}return s})(),N_="data-cs-override-id",M_=(()=>{class s extends vt{validateArgs(t){if(Y(t)){let e=ut(t.value)?A(t.value):!0;return A(t.selector)&&e}return!1}execute(t){var e;if(!kt(t.selector))return;let i=window.csquerySelector[document.nodeType].call(document,t.selector);i&&i.setAttribute(N_,(e=t.value)!==null&&e!==void 0?e:"")}}return s})(),k_=20,D_=(()=>{class s extends Hi{validateArgs(t){return Y(t)?ah(t)&&A(t.key)&&A(t.value)&&A(t.type):!1}execute(t,e){let i=Kr(t,e);i!==null?this.lo(i):this.ER(t,e)()}ER(t,e){return()=>{let i=0,r=window.csSetInterval(()=>{i+=1;let o=Kr(t,e);if(o!==null){window.csClearInterval(r),r=void 0,i=0,this.lo(o);return}i>=k_&&(window.csClearInterval(r),r=void 0,i=0)},100)}}lo(t){let e=t.value;if(t.type==="Integer"){let i=Number.parseInt(t.value,10);Number.isNaN(i)||(e=i)}this.commandsService.applyFromImplementation(bo[0],[{key:t.key,value:e}],"DynamicVariableTemplate")}}return s})(),x_=(()=>{class s extends vt{validateArgs(t){return Y(t)?A(t.transactionId)&&ft(t.revenue)&&A(t.currency)&&A(t.name)&&A(t.sku)&&A(t.category)&&ft(t.price)&&ft(t.quantity):!1}execute(t){this.SR({id:t.transactionId,revenue:t.revenue,currency:t.currency}),this.vR({id:t.transactionId,name:t.name,sku:t.sku,category:t.category,price:t.price,quantity:t.quantity}),this.Ka()}SR(t){this.commandsService.applyFromImplementation(To[0],[t],"EcTransactionAllTemplate")}vR(t){this.commandsService.applyFromImplementation(Hn[0],[t],"EcTransactionAllTemplate")}Ka(){this.commandsService.applyFromImplementation(Ao[0],[],"EcTransactionAllTemplate")}}return s})(),L_=(()=>{class s extends vt{validateArgs(t){return Y(t)?A(t.id)&&ft(t.revenue)&&A(t.currency):!1}execute(t){this.commandsService.applyFromImplementation(To[0],[t],"EcTransactionCreateTemplate")}}return s})(),U_=(()=>{class s extends vt{validateArgs(t){return Y(t)?A(t.id)&&A(t.name)&&A(t.sku)&&A(t.category)&&ft(t.price)&&ft(t.quantity):!1}execute(t){this.commandsService.applyFromImplementation(Hn[0],[t],"EcTransactionItemsAddTemplate")}}return s})(),V_=(()=>{class s extends vt{validateArgs(t){return!!Y(t)}execute(){this.commandsService.applyFromImplementation(Ao[0],[],"EcTransactionSendTemplate")}}return s})(),j_=(()=>{class s extends Hi{validateArgs(t){return Y(t)?ut(t)&&A(t.selector):!1}execute(t,e){if(!ut(t)||!A(t==null?void 0:t.selector))return;let i=Jr(t.selector,e);i!==null&&this.commandsService.applyFromImplementation(Jl[0],[i],"ElementUnmaskingTemplate")}}return s})(),H_=(()=>{class s extends vt{validateArgs(t){return Y(t)?A(t.eventName):!1}execute(t){this.commandsService.applyFromImplementation(Vi[0],[`@ETP@${t.eventName}`],"EventTriggerRecordingPageTemplate")}}return s})(),B_=(()=>{class s extends vt{validateArgs(t){return Y(t)?A(t.eventName):!1}execute(t){this.commandsService.applyFromImplementation(Vi[0],[`@ETS@${t.eventName}`],"EventTriggerRecordingSessionTemplate")}}return s})(),F_=(()=>{class s extends vt{validateArgs(t){return Y(t)?A(t.eventName):!1}execute(t){this.commandsService.applyFromImplementation(Co[0],[t.eventName],"PageEventTemplate")}}return s})(),$_=(()=>{class s extends Hi{validateArgs(t){if(Y(t)){let e=csArray.isArray(t.cssSelectors),i=csArray.isArray(t.attributes);return e&&i}return!1}execute(t,e){let i=csArray.prototype.filter.call(csArray.prototype.map.call(t.cssSelectors,c=>Jr(c,e)),c=>!!c),r=csArray.prototype.filter.call(csArray.prototype.map.call(t.attributes,c=>{let l=Ks(c.attrName,e),h=Jr(c.selector,e);return{attrName:l,selector:h}}),c=>!!c.attrName&&!!c.selector),o={PIISelectors:[...i],Attributes:[...r]};this.commandsService.applyFromImplementation(Mo[0],[o],"PIIMaskingTemplate")}}return s})(),z_=(()=>{class s extends vt{validateArgs(t){return Y(t)?A(t.eventName):!1}execute(t){this.commandsService.applyFromImplementation(Vi[0],[`${t.eventName}`],"RecordingEventTriggerTemplate")}}return s})(),G_=(()=>{class s extends vt{validateArgs(t){return Y(t)?A(t.path):!1}execute(t){let e=[t.path],i=Vo(t.decodeURI),r=jo(t.lifespan),o={...i,...r};Object.keys(o).length&&e.push(o),this.commandsService.applyFromImplementation(qr[0],e,"SetPathTemplate")}}return s})(),q_=(()=>{class s extends vt{validateArgs(t){return Y(t)?A(t.query):!1}execute(t){let e=[t.query],i=Vo(t.decodeURI),r=jo(t.lifespan),o={...i,...r};Object.keys(o).length&&e.push(o),this.commandsService.applyFromImplementation(Wr[0],e,"SetQueryTemplate")}}return s})(),W_=(()=>{class s extends vt{validateArgs(t){return!!Y(t)}execute(){this.commandsService.applyFromImplementation(Yl[0],[],"SrmOnlineAssetsTemplate")}}return s})(),Y_=(()=>{class s extends vt{validateArgs(t){return Y(t)?A(t.status)&&A(t.selector):!1}execute(t){if(!kt(t.selector))return;let e=window.csquerySelector[document.nodeType].call(document,t.selector);e&&this.commandsService.applyFromImplementation(wo[0],[t.status,e],"SubmitTemplate")}}return s})(),Xt=(()=>{class s{onEvent(t){this.onEventCallback=t}constructor(t,e,i){this.commandsService=t,this.condition=i,this.isStarted=!1,this.Dm=!1,this.args=e}start(){this.Dm||(this.onInit(),this.Dm=!0),this.isStarted||(this.onStart(),this.isStarted=!0)}stop(){this.isStarted&&(this.onStop(),this.isStarted=!1)}}return j([P()],s.prototype,"start",null),j([P()],s.prototype,"stop",null),s})(),Cc="once per pageview",X_="always",K_=(()=>{class s extends Xt{constructor(){super(...arguments),this.St=!0}validateArgs(t){if(Y(t)){let e=A(t.selector),i=t.frequency?t.frequency===Cc||t.frequency===X_:!0;return e&&i}return!1}onInit(){if(!kt(this.args.selector)){this.St=!1;return}this.ho=this.args.frequency?this.args.frequency===Cc:!0,this.G=new ae((t,e)=>this.A(t,e))}onStart(){this.St&&this.G.observe(this.args.selector)}onStop(){this.St&&(this.G.processPendingMutations(),this.G.disconnect())}A(t,e){e==="added"&&(this.ho?(this.stop(),this.onEventCallback({element:t[0]})):new Set(t).forEach(i=>this.onEventCallback({element:i})))}}return s})(),J_=(()=>{class s extends Xt{constructor(){super(...arguments),this.St=!0,this.xm=!1}validateArgs(t){return Y(t)?A(t.selector):!1}onInit(){if(!kt(this.args.selector)){this.St=!1;return}this.G=new ae((t,e)=>{this.A(t,e)})}onStart(){this.St&&(this.G.observe(this.args.selector),this.xm=!0)}onStop(){this.St&&(this.G.processPendingMutations(),this.G.disconnect())}A(t,e){this.xm?e==="added"&&new Set(t).forEach(i=>this.onEventCallback({element:i})):this.onEventCallback({element:t[0]})}}return s})(),Q_=(()=>{class s extends Xt{constructor(){super(...arguments),this.St=!0}validateArgs(t){return Y(t)?A(t.selector):!1}onInit(){if(!kt(this.args.selector)){this.St=!1;return}this.B=new ae(t=>this._R(t)),this.D=new ce(t=>this.wR(t))}onStart(){this.St&&(this.Ja=csSymbol("MatchingElement"),this.B.observe(this.args.selector),this.D.observe())}onStop(){this.St&&(this.B.processPendingMutations(),this.B.disconnect(),this.D.disconnect())}_R(t){new Set(t).forEach(e=>this.bR(e))}wR(t){let e=no(t,r=>r.removedNodes),i=[];for(let r of e)csArray.prototype.push.call(i,...this.TR(r));new Set(i).forEach(r=>this.onEventCallback({element:r}))}bR(t){t[this.Ja]=!0}TR(t){let e=[];return $t(t,NodeFilter.SHOW_ELEMENT).visitAll(i=>{i[this.Ja]&&(ot.isConnected(i)?Yt.call(i,this.args.selector)||delete i[this.Ja]:delete i[this.Ja],csArray.prototype.push.call(e,i))}),e}}return s})(),Z_=(()=>{class s{static readyStateChangeListener(t){csArray.prototype.forEach.call(Ue(s.callbacks),e=>e(t))}static Th(t){s.callbacks.has(t)||(s.callbacks.add(t),s.callbacks.size===1&&gt(s.eventHandler,!1))}static Ah(t){s.callbacks.delete(t),s.callbacks.size===0&&mt(s.eventHandler,!1)}constructor(t){this.A=t}observe(){s.Th(this.A)}disconnect(){s.Ah(this.A)}}return s.callbacks=new Set,s.eventHandler={boundElement:Z.document,type:"readystatechange",listener:s.readyStateChangeListener},tt([P("readyStateChangeListener"),ht()],s,"readyStateChangeListener",null),s})(),tw=(()=>{class s extends Xt{constructor(){super(...arguments),this._u={state:"Any"}}validateArgs(t){var e;return Y(t)&&A(t.state)||(H.implementation(`PageStateTrigger has wrong argument: ${(e=this.args)===null||e===void 0?void 0:e.state}, fallback to default config.`),this.args=this._u),!0}onInit(){this.Pt=this.args.state.toLowerCase(),this.G=new Z_(()=>{this.Lm(this.Pt,document.readyState)&&(this.onEventCallback(),this.G.disconnect())})}onStart(){this.Lm(this.Pt,document.readyState)?this.onEventCallback():this.G.observe()}onStop(){this.G.disconnect()}Lm(t,e){let i=s.Um[e];return s.Um[t]<=i}}return s.Um={complete:3,interactive:2,loading:1,any:0},s})(),ew=(()=>{class s extends Xt{validateArgs(t){return!!Y(t)}AR(){this.isStarted&&this.onEventCallback()}onInit(){this.commandsService.applyFromImplementation(Ll[0],[()=>this.AR()],"AfterPageViewTrigger")}onStart(){}onStop(){}}return s})(),sw=(()=>{class s extends Xt{constructor(){super(...arguments),this.wu=!1,this.St=!0,this.ti=!0,this.hi={boundElement:document,type:"click",listener:t=>{if(this.wu){this.wu=!1;return}this.onClickOrTap(t)}},this.RR=(t,e)=>{t.type===wt.TAP&&(this.wu=!0,this.onClickOrTap(e))}}validateArgs(t){return Y(t)?A(t.selector):!1}onClickOrTap({target:t}){if(ut(t)&&Le(t)){let e=Xs(t,this.args.selector);e&&this.onEventCallback({element:e})}}onInit(){if(!kt(this.args.selector)){this.St=!1;return}this.$r=new Fl(this.RR)}onStart(){var t;this.St&&(gt(this.hi,this.ti),(t=this.$r)===null||t===void 0||t.observe())}onStop(){var t;this.St&&(mt(this.hi,this.ti),(t=this.$r)===null||t===void 0||t.disconnect())}}return j([P("onClickOrTap"),ht()],s.prototype,"onClickOrTap",null),s})(),iw=(()=>{class s{static CR(){var t,e,i,r;if("history"in window){let o=Object.getOwnPropertyDescriptors(history);if(!((t=o.pushState)===null||t===void 0)&&t.writable&&(!((e=o.replaceState)===null||e===void 0)&&e.writable))return history}if(History.prototype){let o=Object.getOwnPropertyDescriptors(History.prototype);if(!((i=o.pushState)===null||i===void 0)&&i.writable&&(!((r=o.replaceState)===null||r===void 0)&&r.writable))return History.prototype}it.warn("Unable to override pushState, replaceState",!0,"HistoryChangeObserver")}static il(){let t=s.CR();s.uo===null&&Se(t==null?void 0:t.pushState)&&(s.uo=qt({target:t,methodName:"pushState",hook:({args:e})=>{s.Vm("pushstate",e)}})),s.po===null&&Se(t==null?void 0:t.replaceState)&&(s.po=qt({target:t,methodName:"replaceState",hook:({args:e})=>{s.Vm("replacestate",e)}}))}static Zn(t){var e,i;s.Re.add(t),s.Re.size===1&&((s.uo===null||s.po===null)&&s.il(),(e=s.uo)===null||e===void 0||e.activate(),(i=s.po)===null||i===void 0||i.activate(),gt(s.jm),gt(s.Hm))}static er(t){var e,i;s.Re.delete(t),s.Re.size===0&&((e=s.uo)===null||e===void 0||e.deactivate(),(i=s.po)===null||i===void 0||i.deactivate(),mt(s.jm),mt(s.Hm))}static Vm(t,e){let i={type:t,state:e[0]};A(e[2])&&(i.url=e[2]),s.Nn(i)}static popstateListener(t){s.Nn({type:"popstate",state:t.state})}static hashchangeListener(t){s.Nn({type:"hashchange",state:null,url:t.newURL})}static Nn(t){csArray.prototype.forEach.call(Ue(s.Re),e=>{e(t)})}constructor(t){this.A=t}observe(){s.Zn(this.A)}disconnect(){s.er(this.A)}}return s.uo=null,s.po=null,s.jm={boundElement:Z,type:"popstate",listener:n=>s.popstateListener(n)},s.Hm={boundElement:Z,type:"hashchange",listener:n=>s.hashchangeListener(n)},s.Re=new Set,tt([P("popstateListener"),ht()],s,"popstateListener",null),tt([P("hashchangeListener"),ht()],s,"hashchangeListener",null),s})(),nw=(()=>{class s extends Xt{validateArgs(t){if(Y(t)){let e=A(t.useDebounce),i=t.useDebounce==="yes"?ft(t==null?void 0:t.window):!0,r=A(t.listeners);return e&&i&&r}return!1}onInit(){this.args.useDebounce==="yes"?this.te=qs(()=>{this.onEventCallback()},this.args.window):this.te=this.onEventCallback,this.G=new iw(t=>this.IR(t))}Bm(){return window.location.href}IR(t){let e=t.type==="replacestate"&&this.args.listeners.indexOf("replaceState")===-1,i=t.type==="hashchange"&&this.args.listeners.indexOf("hashchange")===-1;if(e||i)return;let r=this.Bm();this.Fm!==r&&(this.Fm=r,this.te())}onStart(){this.Fm=this.Bm(),this.G.observe()}onStop(){this.G.disconnect()}}return s})(),rw=(()=>{class s extends Xt{constructor(){super(...arguments),this.St=!0,this.ti=!0,this.hi={boundElement:document,type:"submit",listener:t=>this.submitListener(t)}}validateArgs(t){return Y(t)?A(t.selector):!1}submitListener({target:t}){ut(t)&&Le(t)&&Yt.call(t,this.args.selector)&&this.onEventCallback({element:t})}onInit(){kt(this.args.selector)||(this.St=!1)}onStart(){this.St&&gt(this.hi,this.ti)}onStop(){this.St&&mt(this.hi,this.ti)}}return j([P("submitListener"),ht()],s.prototype,"submitListener",null),s})(),ow=(()=>{class s extends Xt{constructor(){super(...arguments),this.St=!0,this.$m={boundElement:document,type:"mouseover",listener:t=>this.mouseoverListener(t)},this.zm={boundElement:document,type:"mouseleave",listener:t=>this.mouseleaveListener(t)}}validateArgs(t){return Y(t)?A(t.selector):!1}onInit(){kt(this.args.selector)||(this.St=!1)}mouseleaveListener({target:t}){ut(t)&&Le(t)&&t[this.Qa]&&delete t[this.Qa]}mouseoverListener({target:t}){if(ut(t)&&Le(t)){let e=Xs(t,this.args.selector);e!==null&&!e[this.Qa]&&(e[this.Qa]=!0,this.onEventCallback({element:e}))}}onStart(){this.St&&(this.Qa=csSymbol("Hovered"),gt(this.zm,!0),gt(this.$m,!0))}onStop(){this.St&&(mt(this.$m),mt(this.zm))}}return j([P("mouseleaveListener"),ht()],s.prototype,"mouseleaveListener",null),j([P("mouseoverListener"),ht()],s.prototype,"mouseoverListener",null),s})(),aw=(()=>{class s extends Xt{constructor(){super(...arguments),this.hi={boundElement:window,type:"hashchange",listener:t=>this.hashChangedListener(t)}}validateArgs(t){return!!Y(t)}hashChangedListener(t){t.newURL&&t.newURL===t.oldURL||this.onEventCallback()}onInit(){}onStart(){gt(this.hi)}onStop(){mt(this.hi)}}return j([P("hashChangedListener"),ht()],s.prototype,"hashChangedListener",null),s})(),cw=(()=>{class s extends Xt{constructor(){super(...arguments),this.Za=!0}validateArgs(t){return Y(t)?A(t.selector):!1}onInit(){if(!kt(this.args.selector)||!cs.isSupported()){this.Za=!1;return}this.Ct=new cs({delay:0,trackOnce:!0,reobserve:!0}),this.B=new ae(t=>this.bu(t),{closest:!0})}bu(t){for(let e of t)this.Ct.observe(e)}Tu(t,e){if(this.isStarted&&e===Fs.VisibleInViewPort){let i=Xs(t,this.args.selector);i&&(this.onEventCallback({element:i}),this.stop(),this.Za=!1)}}onStart(){this.Za&&(this.Ct.start((t,e)=>this.Tu(t,e)),this.B.observe(this.args.selector))}onStop(){this.Za&&(this.Ct.stop(),this.B.disconnect())}}return s})(),lw=(()=>{class s extends vt{validateArgs(t){return Y(t)?A(t.url):!1}execute(t){this.commandsService.applyFromImplementation(zr[0],[t.url],"ApiErrorsMaskUrlTemplate")}}return s})(),hw=(()=>{class s extends vt{validateArgs(t){return Y(t)?A(t.maskingPattern):!1}execute(t){this.commandsService.applyFromImplementation(Ql[0],[t.maskingPattern],"NetworkRequestMaskUrlTemplate")}}return s})(),Ic="once per pageview",uw="always",dw=(()=>{class s extends Xt{constructor(){super(...arguments),this.Au=!1,this.We=!1,this.ho=!0}validateArgs(t){if(Y(t)){let e=A(t.selector),i=t.frequency?t.frequency===Ic||t.frequency===uw:!0;return e&&i}return!1}onInit(){cs.isSupported()&&(this.We=!0,this.ho=this.args.frequency?this.args.frequency===Ic:!0,this.B=new ae((t,e)=>{if(e==="initial")for(let i of t)ot.isVisibleInViewportInForeground(i)&&(i[this.Ru]=!0);this.bu(t)},{closest:!0}),this.Ct=new cs({delay:0,trackOnce:!1,reobserve:!0,allowSameMatch:!0}))}onStart(){!this.We||this.isStarted||(this.Ru=csSymbol("skipElement"),this.Au=!1,this.Ct.start((t,e)=>this.Tu(t,e)),this.B.observe(this.args.selector))}onStop(){!this.We||!this.isStarted||(this.B.disconnect(),this.Ct.stop())}Tu(t,e){if(this.isStarted&&e===Fs.VisibleInViewPort){let i=t.closest(this.args.selector);if(i){if(i[this.Ru]){delete i[this.Ru];return}this.ho&&this.stop(),(!this.ho||!this.Au)&&(this.Au=!0,this.onEventCallback({element:i}))}}}bu(t){for(let e of t)this.Ct.observe(e)}}return s})(),Qr=(()=>{class s extends Xt{constructor(){super(...arguments),this._u={pageviewTypes:["natural","artificial"]}}validateArgs(t){var e;return Y(t)&&xe(t)&&csArray.isArray(t.pageviewTypes)&&ro(t.pageviewTypes,r=>A(r))||(H.implementation(`BeforePageViewTrigger has wrong argument: ${(e=this.args)===null||e===void 0?void 0:e.pageviewTypes}, fallback to default config.`),this.args=this._u),!0}onInit(){this.PR=this.args.pageviewTypes}onPageView(t){this.isStarted&&csArray.prototype.indexOf.call(this.PR,t)!==-1&&this.onEventCallback()}onStart(){}onStop(){}}return s})(),pw=(()=>{class s extends vt{constructor(){super(...arguments),this.Cu=!1}validateArgs(t){return Y(t)&&A(t.type)&&A(t.urls)&&(t.type==="allow"||t.type==="block")&&csString.prototype.trim.call(t.urls).length>0?(this.Cu=!1,!0):(H.implementation(`BlockAllowListForSRTemplate has wrong argument: ${t}, fallback to default config.`),this.Cu=!0,!0)}execute(t){let e="";this.Cu?e=eh:e=this.NR(t.urls,t.type),this.commandsService.applyFromImplementation(sh[0],[e],"BlockAllowListForSRTemplate")}NR(t,e){let i=e==="allow"?"?!":"";return i+=csArray.prototype.join.call(csArray.prototype.map.call(csString.prototype.split.call(t,","),r=>`.*${csString.prototype.trim.call(r)}`),"|"),`^(${i}).*?`}}return s})(),fw=(()=>{class s{constructor(t){this.E=t,this.MR={ApiErrorsMaskUrl:lw,NetworkRequestMaskUrls:hw,ArtificialPageview:dh,BlockAllowListForSr:pw,CustomError:I_,CustomVariable:P_,DataCsEncrypt:O_,DataCsOverride:M_,DynamicVariable:D_,EcTransactionAll:x_,EcTransactionCreate:L_,EcTransactionItemsAdd:U_,EcTransactionSend:V_,ElementUnmasking:j_,EventTriggerRecordingPage:H_,EventTriggerRecordingSession:B_,PageEvent:F_,PiiMasking:$_,RecordingEventTrigger:z_,SetPath:G_,SetQuery:q_,SrmOnlineAssets:W_,Submit:Y_},this.$n={AfterPageView:ew,ElementAdded:K_,ElementBecomesVisible:dw,ElementExist:J_,ElementRemoved:Q_,ElementVisibility:cw,ElementClick:sw,FormSubmit:rw,HashChange:aw,HistoryChange:nw,Mouseover:ow,PageState:tw,BeforePageView:Qr}}kR(t){let e=this.MR[t.name];return e?new e(this.E,t.args):(H.error(`Implementations: template ${t.name} does not exist`),null)}DR(t){let e=this.$n[t.name];return e?new e(this.E,t.args,t.condition):(H.error(`Implementations: trigger ${t.name} does not exist`),null)}parse(t){let e=[];for(let{triggers:i,template:r}of t){let o=this.kR(r);if(!o)continue;if(!o.validateArgs(o.args)){H.implementation(`${r.name} has wrong argument.`);continue}for(let l of i){let h=this.DR(l);if(!h)continue;if(!h.validateArgs(h.args)){H.implementation(`${l.name} has wrong argument.`);continue}csArray.prototype.push.call(e,{name:`${l.name}_${r.name}`,trigger:h,template:o})}}return e}}return s})(),gw=(()=>{class s{constructor(t,e,i){this.xR=t,this.C=i,this.ke={window,document,location,cookies:{}},this.$n=new Set,this.LR=new fw(e)}init(){Object.defineProperty(this.ke,"cookies",{get:()=>this.UR()});let t=this.LR.parse(this.xR);for(let{name:e,trigger:i,template:r}of t)i instanceof Qr&&r instanceof dh||(this.$n.add(i),i.onEvent(o=>{this.onTriggerEvent(o,r),G.counters.CSTCSnippetUsed.count(e)}))}start(t=!1){this.$n.forEach(e=>{e.condition&&!uh(e.condition,this.ke)||(t?this.C.schedule(()=>{e.start()}):e.start())})}stop(){this.$n.forEach(t=>{t.stop()})}onBeforePageView(t){this.$n.forEach(e=>{if(e instanceof Qr){e.onPageView(t);return}})}onTriggerEvent(t,e){let i=this.VR(t),r={...this.ke,...i},o=[];if(Jv(e.args)&&A(e.args.iterable)&&e.args.iterable.length>0){let c=w_(e.args.iterable,r);if(ut(c)){let l=csArray.prototype.map.call(c,h=>({...r,$:h}));csArray.prototype.push.call(o,...l)}}else csArray.prototype.push.call(o,r);if(e instanceof Hi){for(let c of o)e.execute(e.args,c);return}for(let c of o){let l=Kr(e.args,c);l&&e.execute(l)}}UR(){let t;try{t=document.cookie}catch{t=""}return csArray.prototype.reduce.call(csString.prototype.split.call(t,"; "),(e,i)=>{let[r,o]=csString.prototype.split.call(i,"=");return o!==void 0&&(e[r]=o),e},{})}VR(t){let e={...t};for(let i in e)dt(e[i])&&(x.isMaskedElement(e[i])||x.isMaskedElementChild(e[i]))&&delete e[i];return e}}return j([It("implementationsService.start")],s.prototype,"start",null),j([P()],s.prototype,"onTriggerEvent",null),s})(),mw=(()=>{class s{constructor(t,e,i){this.ks=new gw(t,e,i)}init(){this.ks.init()}onInitTracking(){this.ks.start(!0)}onOptout(){this.ks.stop()}onBeforeSessionRenewal(){this.ks.stop(),this.ks.start()}onBeforeArtificialPageView(){this.ks.stop(),this.ks.start(),this.ks.onBeforePageView("artificial")}onBeforeNaturalPageView(){this.ks.onBeforePageView("natural")}}return s})(),ph=(()=>{class s{constructor(t){this.configuration=t}}return s})(),yw=(()=>{class s extends ph{constructor(t,e,i){super(t),this.configuration=t,this.fo=e,this.S=i,this.jR=U.RECORDING_GLOBAL_SAMPLING}refreshQuota(t){this.Gm=t,this.go=void 0,this.HR()}init(t){this.BR();let e=St.get(ne);e!==null&&go(e)?t(this.canCollect(sf(e))):this.refreshQuota(i=>{t(i!==U.QUOTA_REACHED)})}sanitizeSessionCollectState(t){return t}canCollect(t){return t!==null&&t.collectState!==U.QUOTA_REACHED}computeInitialCollectState(t){return this.go?(this.S.emitCollectStateChange(this.go,this.configuration.malkaEtrEnabled?Wt.ETR_ON:Wt.ETR_OFF),this.go):(H.warn("Quota file error computeInitialCollectState() called before quota answered"),U.QUOTA_REACHED)}getEligibleCollectState(t){return t.collectState===U.QUOTA_REACHED?U.QUOTA_REACHED:!Ai.isRecordingSupported()&&this.isReplayRecorded(t)?U.ANALYTICS_ONLY:t.collectState===U.RECORDING_RULES_TARGETING?U.RECORDING_RULES_TARGETING:t.collectState===U.ANALYTICS_ONLY_RULES_TARGETING?U.ANALYTICS_ONLY_RULES_TARGETING:t.collectState===U.RECORDING_GLOBAL_SAMPLING?U.RECORDING_GLOBAL_SAMPLING:U.ANALYTICS_ONLY}isReplayRecorded(t){return t.collectState===U.RECORDING_GLOBAL_SAMPLING||t.collectState===U.RECORDING_RULES_TARGETING}getInitialCollectState(){return this.go||U.QUOTA_REACHED}computeInitialCollectStateFromRecordingConsentGranted(t){return U.ANALYTICS_ONLY}mo(t){this.go=t,this.Gm&&this.Gm(t)}BR(){this.fo.onError(t=>this.quotaServiceErrorHandler(`HTTP:${t.status} - fetching quota file for pid: ${this.configuration.projectId}`)),this.fo.onTimeout(()=>this.quotaServiceErrorHandler("timeout")),this.fo.onLoad(t=>this.quotaFileHandler(t))}HR(){this.fo.isInProgress()||this.fo.send()}quotaFileHandler(t){var e;if(!(!((e=t==null?void 0:t.quotas)===null||e===void 0)&&e.length)){this.quotaServiceErrorHandler("Quota types missing from config file");return}this.FR(t)}quotaServiceErrorHandler(t){let e=`Quota error - ${t}`;H.warn(e),this.mo(this.jR)}FR(t){let e=!1,i=!1;for(let r of t.quotas)r.quotaType==="ANALYTICS"&&r.value?e=!0:r.quotaType==="RECORDING"&&r.value&&_s.boolean(Math.round(r.value*100))&&(i=!0);!e&&i?this.quotaServiceErrorHandler(`Quota types impossible: replay without analytics - ${csJSON.stringify(t)}`):e&&i?Ai.isRecordingSupported()?this.mo(U.RECORDING_GLOBAL_SAMPLING):this.mo(U.ANALYTICS_ONLY):e&&!i?this.mo(U.ANALYTICS_ONLY):this.mo(U.QUOTA_REACHED)}getRecordingConsentWithdrawn(){return U.ANALYTICS_ONLY}}return j([P("Quota File: quotaFileHandler")],s.prototype,"quotaFileHandler",null),j([P("Quota File: onerror")],s.prototype,"quotaServiceErrorHandler",null),s})(),Ew=(()=>{class s extends ph{constructor(t,e,i,r,o){super(t),this.configuration=t,this.S=e,this.ru=i,this.w=r,this.Iu=o,this.Pu=!1}refreshQuota(){}canCollect(t){return!0}init(){this.configuration.malkaUrlEnabled&&this.configuration.hasRecordingUrlRules()&&(this.Pu=!0,this.Iu.setRegexRules(this.configuration.recordingUrlRules))}sanitizeSessionCollectState(t){return(t.collectState===U.QUOTA_REACHED||t.collectState===U.RECORDING_RULES_TARGETING||t.collectState===U.RECORDING_TEMPORARILY)&&(t.collectState=U.ANALYTICS_ONLY),t}computeInitialCollectState(){return rs.isReplayConsentNeeded(this.configuration)?U.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED:this.Ya()}computeInitialCollectStateFromRecordingConsentGranted(){return this.Ya()}Ya(){if(!Ai.isRecordingSupported())return U.ANALYTICS_ONLY;let t=U.ANALYTICS_ONLY,e=Wt.ETR_OFF;return _s.percentage()<this.configuration.replayRecordingRate||this.ru.isForceReplayRecorded()?t=U.RECORDING_GLOBAL_SAMPLING:this.Pu&&this.Iu.evaluateUrl(this.w.getAnonymizedUrl())&&(t=U.RECORDING_URL_SAMPLING),this.configuration.malkaEtrEnabled&&(e=Wt.ETR_ON),this.S.emitCollectStateChange(t,e),t}getEligibleCollectState(t){if(!Ai.isRecordingSupported())return U.ANALYTICS_ONLY;if(rs.isRecordingBlockedByConsent(t))return t.collectState===U.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN?U.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN:U.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED;if(t.collectState===U.RECORDING_GLOBAL_SAMPLING)return U.RECORDING_GLOBAL_SAMPLING;let e=this.configuration.malkaEtrEnabled?Wt.ETR_ON:Wt.ETR_OFF;return this.Pu&&this.Iu.evaluateUrl(this.w.getAnonymizedUrl())?(this.S.emitCollectStateChange(U.RECORDING_URL_SAMPLING,e),U.RECORDING_URL_SAMPLING):(this.S.emitCollectStateChange(U.ANALYTICS_ONLY,e),U.ANALYTICS_ONLY)}isReplayRecorded(t){return rs.isRecordingBlockedByConsent(t)?!1:t.collectState===U.RECORDING_TEMPORARILY||t.collectState===U.RECORDING_GLOBAL_SAMPLING||t.collectState===U.RECORDING_URL_SAMPLING||this.configuration.malkaEtrEnabled}getInitialCollectState(){return U.ANALYTICS_ONLY}getRecordingConsentWithdrawn(){return U.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}}return s})();function Sw(){let s="[data-cs-mask]",n="#c1_card_info_id",t=".ctHidden",e=["[data-heap-redact-text]","[heap-ignore]","[data-heap-ignore]","[data-heap-redact-attributes]"],i=["[data-hj-suppress]",".data-hj-suppress","[data-hj-masked]"];return[s,n,t,...e,...i]}function vw(){return[{selector:".ctHidden,input:not([type=button]):not([type=submit])",attrName:"value"}]}var _w=(()=>{class s{constructor(){this.$R={PIISelectors:["picture","img","video","audio"],Attributes:[]},this.Ss={elementSelector:"",attrSelector:"",attrSelectors:[]};let t={PIISelectors:Sw(),Attributes:vw()};this.Ss=x.getComputedSelectorSettings(t,this.Ss)}init(){this.zR()}setMaskedElementSettingsFromCommand(t){if(t=x.sanitizeSelectorUserInput(t),!x.isSelectorUserInput(t))throw new Ct(Mo[0]);this.Ou(t)}setMaskedElementSettingsFromParent(t){let e={PIISelectors:csString.prototype.split.call(t.elementSelector,","),Attributes:t.attrSelectors};this.Ou(e)}getMaskedElementSettings(t){return t?this.qm(this.$R):this.Ss}zR(){var t,e,i,r,o,c;let l={PIISelectors:[],Attributes:[]};((i=(e=(t=window==null?void 0:window.ClickTaleSettings)===null||t===void 0?void 0:t.DOM)===null||e===void 0?void 0:e.PII)===null||i===void 0?void 0:i.Text)instanceof Array&&l.PIISelectors.push(...window.ClickTaleSettings.DOM.PII.Text),((c=(o=(r=window==null?void 0:window.ClickTaleSettings)===null||r===void 0?void 0:r.DOM)===null||o===void 0?void 0:o.PII)===null||c===void 0?void 0:c.Attributes)instanceof Array&&window.ClickTaleSettings.DOM.PII.Attributes.forEach(h=>{A(h.attr)&&A(h.rule)&&l.Attributes.push({selector:h.rule,attrName:h.attr})}),this.Ou(l)}Ou(t){this.Ss=this.qm(t)}qm(t){return x.getComputedSelectorSettings(t,this.Ss)}}return s})();var ww=(()=>{class s{constructor(t,e){this.J=t,this.ut=e,this.Nu=!1}getRequestParameters(){return{dr:this.get()}}addUrlMaskingPattern(t){this.ut.addUrlMaskingPattern(t)}enableRemoveQueryString(){this.Nu=!0}disableRemoveQueryString(){this.Nu=!1}get(){let t=this.Nu?this.J.removeQueryString(this.Wm()):this.Wm();return this.J.anonymizeUrl(t,{maskingPatterns:this.ut.getUrlMaskingPatterns()})}set(t){this.Ym=t}Wm(){if(this.Ym)return this.Ym;let t="";try{t=window.top.document.referrer}catch{if(window.parent)try{t=window.parent.document.referrer}catch{t=""}}return t===""&&(t=document.referrer),typeof t!="string"&&(t=""),t}}return s})(),bw=60*1e3,Tw=30*1e3,Aw=(()=>{class s{constructor(t,e){this.R=t,this.O=e,this.Mu=!1,this.GR=Un(()=>this.R.refreshSession(),Tw)}onSessionExpired(t){this.qR=t}isSessionValid(){return this.Mu?!0:!(!this.R.hasValidSession()||this.R.pollCacheRefreshEvent()&&this.O.isSessionRenewed())}isCurrentPageviewValid(){let t=this.R.hasValidSession();return this.R.pollCacheRefreshEvent(!1)?!this.O.isSessionRenewed():t}refreshSession(){this.isSessionValid()?this.GR():this.WR()&&(this.Xm=C.now(),this.renewSession())}renewSession(){this.Mu=!0,this.qR(),this.Mu=!1}WR(){return!document.hidden&&(!X(this.Xm)||C.now()-this.Xm>bw)}}return s})(),Rw=["undefined","anonymous","true","false","not_authenticated","NaN","NA","Na","unique_identifier","0","",'""',"[object Object]","{{ customer.email }}","{{ email }}"],Cw=[/^email$/i,/^none$/i,/^unknown$/i,/^guest$/i,/^null$/i],Iw=255,Pw="%-idtt_Salt!",Ow="spki",Pc="RSA-OAEP",wr="SHA-256",Oc=318,Nw=(()=>{class s extends Tt{constructor(t,e,i,r,o,c){super(),this.Gs=t,this.Wc=e,this.O=i,this.F=r,this.Ds=o,this.ku=c,this.nt=null,this.Du=null,this.xu=null,this.Km=!1,this.Lu=null,this.Uu=null,this.Vu=null,this.tc=null,this.ju=null,so()&&(this.Km=!0,this.Lu=new TextEncoder,e.setRequestParametersProviders({getRequestParameters:()=>{var l;return(l=this.Uu)!==null&&l!==void 0?l:{}}}),e.after(()=>{this.Uu=null}))}onStart(){var t,e;let i=(t=this.O.getVisitor())===null||t===void 0?void 0:t.id,r=(e=this.Ds.get()==null?void 0:csString.prototype.split.call(this.Ds.get(),"."))===null||e===void 0?void 0:e[0];if(i!==r&&this.Ds.remove(),this.ku?!this.ju&&as.isSupported()&&(this.ju=Promise.all([this.Jm(this.ku).then(this.YR.bind(this)),this.XR(this.ku)])):it.warn("identify: missing encryption key",!0,"identify"),this.nt!==null){let{identity:o,sendHashedIdentity:c}=this.nt;this.nt=null,this.identify(o,c)}}onStop(){}async identify(t,e){if(!this.Km)return;if(!this.Gs){it.error("missing heap env id","identify");return}if(!this.isStarted){this.nt={identity:t,sendHashedIdentity:e};return}if(this.KR(t))return;let i=K.truncate(t,Iw),r=this.O.getVisitor();if(!r){it.warn("identify: visitor not found",!0,"identify");return}if(await this.JR(i,r.identityPrint)){if(this.O.renewVisitor(),r=this.O.getVisitor(),!r){it.warn("identify: visitor not found",!0,"identify");return}}else this.F.refreshSession();await Promise.all([this.QR(i,e,this.Gs,r.id),this.ZR(i,r),this.tC(i,r)])}resetIdentity(){this.nt!==null&&(this.nt=null),this.getIdentity()&&this.O.renewVisitor(),this.Ds.get()&&this.Ds.remove()}getIdentity(){let t=this.O.getVisitor();return!t||!t.identityPrint?null:t.identityPrint}getEncryptedIdentityAndKey(){let t=this.Ds.get();if(!t)return null;let e=csString.prototype.split.call(t,".");return e.length!==3?null:`${e[1]}.${e[2]}`}async JR(t,e){return e?await this.Qm(t)!==e:!1}async ZR(t,e){e.identityPrint=await this.Qm(t),this.O.setVisitor(e)}async Qm(t){var e;if(((e=this.Du)===null||e===void 0?void 0:e.identity)===t)return this.Du.identityPrint;let i=await this.Jm(t),r=K.truncate(i,12);return this.Du={identity:t,identityPrint:r},r}async Jm(t){return ua(wr,this.Lu.encode(Pw+t))}async YR(t){this.tc=K.truncate(t,16);let e=this.Ds.get();if(!e)return;let i=csString.prototype.split.call(e,".");i.length===3&&i[2]!==this.tc&&this.Ds.remove()}async XR(t){try{this.Vu=await as.crypto.importKey(Ow,to(t),{name:Pc,hash:wr},!1,["encrypt"])}catch{it.error(`fail to import encryption key '${t}'`,"IdentityService")}}async eC(t){if(!this.Vu)return null;let e=Nn(t);e.byteLength>Oc&&(it.error("arrayBuffer too long","encryptIdentity"),e=e.slice(0,Oc));try{let i=await as.crypto.encrypt({name:Pc},this.Vu,e);return Bu(i)}catch{return null}}async tC(t,e){if(await this.ju,!this.tc)return;let i=await this.sC(t);i&&this.Ds.set(`${e.id}.${i}.${this.tc}`)}async sC(t){var e;if(((e=this.xu)===null||e===void 0?void 0:e.identity)===t)return this.xu.encryptedIdentity;let i=await this.eC(t);return i?(this.xu={identity:t,encryptedIdentity:i},i):null}async QR(t,e,i,r){let o=e?await ua(wr,this.Lu.encode(t)):t,c=csString(await pl(r));this.Uu={a:i,u:c,st:C.now().toString(),b:"web",i:o,v:"1",s:"1"},this.Wc.send()}KR(t){for(let e of Rw)if(t===e)return!0;for(let e of Cw)if(e.test(t))return!0;return!1}}return s})(),$s="_cs_s_ctx",Mw=800,kw=(()=>{class s{constructor(t){this.N=t}set(t,e=Pn){let i=csJSON.stringify(t);this.N.set($s,i,e)}remove(){this.N.delete($s)}get(){let t=this.N.get($s);return t===null?null:csJSON.parse(t)}}return s})(),br=(()=>{let s;return function(n){function t(r,o){if(!o)return"";try{let c=new csURL(o);return csArray.prototype.forEach.call(r,l=>c.searchParams.delete(l)),c.toString()}catch{return o}}n.removeQueryParams=t;function e(r,o){if(!o)return"";try{let c=new csURL(o),l=csArray.from(c.searchParams.keys());return csArray.prototype.forEach.call(l,h=>{csArray.prototype.includes.call(r,h)||c.searchParams.delete(h)}),c.toString()}catch{return o}}n.keepOnlyQueryParams=e;function i(r){if(!r)return"";try{let o=new csURL(r);return o.search="",o.toString()}catch{return r}}n.removeAllQueryParams=i}(s||(s={})),s})(),Dw=(()=>{class s{constructor(t,e,i,r,o,c,l,h){this.Gs=t,this.Yi=e,this.Is=i,this.w=r,this.vt=o,this.Je=c,this._e=l,this.Xi=h}createSessionContext(){var t;let e=(t=this.Hu)!==null&&t!==void 0?t:this.Is.get(),i=this.sc(e),r=this.w.getAnonymizedUrl(),o=this.sc(r),c={firstViewTime:C.now(),firstViewUrl:o,sessionReferrer:i,currentViewUrl:o};this.Yi.set(c)}removeSessionContext(){this.Yi.remove()}refreshSessionContext(){let t=this.Yi.get();t!==null&&this.Yi.set(t)}getSharedContext(){var t,e,i,r,o;let c=this.Yi.get();if(c===null)return null;let l={pageTitle:this._e.getPageTitle(),happid:this.Gs,firstViewTime:(t=c.firstViewTime)!==null&&t!==void 0?t:0,firstViewUrl:(e=c.firstViewUrl)!==null&&e!==void 0?e:"",sessionReferrer:(i=c.sessionReferrer)!==null&&i!==void 0?i:this.Is.get(),previousViewUrl:(r=this.Hu)!==null&&r!==void 0?r:"",currentViewTime:C.now(),currentViewUrl:(o=c.currentViewUrl)!==null&&o!==void 0?o:"",screenWidth:Et.screenWidth(),screenHeight:Et.screenHeight()};this.vt.hasCustomVariablesPage()&&(l.cvarp=this.vt.getCustomVariablesPage());let h=this.Je.getEncryptedIdentityAndKey();return h&&(l.encryptedIdentity=h),l}updateSharedContextPaths(t,e){let i=this.Yi.get(),r=i!=null?i:{},o=t!=null?t:r.currentViewUrl;this.Hu=this.sc(o),r.currentViewUrl=this.sc(e),this.Yi.set(r)}getPreviousViewUrl(){return this.Hu}truncateString(t){return t&&K.truncate(t,Mw)}iC(t){var e,i,r;if(t)return!((e=this.Xi)===null||e===void 0)&&e.blockAll?br.removeAllQueryParams(t):csArray.isArray((i=this.Xi)===null||i===void 0?void 0:i.blockList)&&this.Xi.blockList.length>0?br.removeQueryParams(this.Xi.blockList,t):csArray.isArray((r=this.Xi)===null||r===void 0?void 0:r.allowList)&&this.Xi.allowList.length>0?br.keepOnlyQueryParams(this.Xi.allowList,t):t}sc(t){if(!t)return;let e=this.iC(t);return this.truncateString(e)}}return s})(),xw=(()=>{class s{constructor(t){this.Ms=t}onSessionCreated(){this.Ms.createSessionContext()}onSessionRemoved(){this.Ms.removeSessionContext()}onSessionRefreshed(){this.Ms.refreshSessionContext()}onBeforeNaturalPageView(t){this.Ms.updateSharedContextPaths(null,t)}onBeforeArtificialPageView(t,e){this.Ms.updateSharedContextPaths(t,e)}onOptout(){this.Ms.removeSessionContext()}}return s})(),Lw=(()=>{class s{constructor(t){this.X=t}set(t){let e=csJSON.stringify(t);this.X.setItem($s,e)}remove(){this.X.removeItem($s)}get(){let t=this.X.getItem($s);return t===null?null:csJSON.parse(t)}}return s})(),zs="_cs_i",Uw=(()=>{class s{constructor(t){this.X=t}set(t){this.X.setItem(zs,t)}remove(){this.X.removeItem(zs)}get(){return this.X.getItem(zs)}}return s})(),Vw=2592e5,jw=(()=>{class s{constructor(t){this.N=t}set(t,e=Vw){this.N.set(zs,t,e,!0)}remove(){this.N.delete(zs)}get(){return this.N.get(zs)}}return s})();var Hw=/\b((?:profile|user|last|first|primary|primary(?:[/_+-]|%20)?last)(?:[/_+-]|%20)?(?:name)[/=])[^#;?&/]+/gi,Bw="$1CS_ANONYMIZED_NAME",Fw=(()=>{class s{constructor(t){this.M=t}anonymizeUrl(t,e={}){let i=e.maskingPatterns||[],r=e.partialMaskingPatterns||[],o=this.M.anonymizePII(t);if(o=this.M.anonymizeJwt(o),e.maskNames){let h=o;o=this.Tr(o),o!==h&&(G.counters.redactedPII.count("name"),G.counters.redactedPII.count("name-in-url"))}let c=this.rC(o,i);if(c!==o)return G.counters.redactedPII.count("url"),c;let l=this.oC(o,r);return l!==o&&G.counters.redactedPII.count("url"),l}removeQueryString(t){let{path:e,queryString:i}=this.Bu(t);return i!==""?`${e}?`:e}Bu(t){let e=csString.prototype.indexOf.call(t,"?"),i,r="";return e!==-1?(i=csString.prototype.slice.call(t,0,e),r=csString.prototype.slice.call(t,e,t.length)):i=t,{path:i,queryString:r}}rC(t,e){if(e.length===0)return t;let{path:i,queryString:r}=this.Bu(t),o=csString.prototype.split.call(i,"/");for(let c of e){let l=this.aC(o,c);if(l!==null)return`${l}${r}`}return t}aC(t,e){if(t.length<e.length)return null;let i=[];for(let r=0;r<t.length;r++){let o=t[r];if(r>=e.length){csArray.prototype.push.call(i,o);continue}let c=e[r].key;if(this.ey(c)){let l=e[r].value;csArray.prototype.push.call(i,l);continue}if(o===c){csArray.prototype.push.call(i,o);continue}return null}return csArray.prototype.join.call(i,"/")}oC(t,e){if(e.length===0)return t;let{path:i,queryString:r}=this.Bu(t),o=csString.prototype.split.call(i,"/");for(let c of e)o=this.cC(o,c);return`${csArray.prototype.join.call(o,"/")}${r}`}cC(t,e){let i=[],r=0,c=t[0]==="http:"||t[0]==="https:"?2:0;for(let l=0;l<t.length;l++){let h=t[l],f=e[r].key;if(this.ey(f)&&l>=c){let d=e[r].value;csArray.prototype.push.call(i,h.length>0?d:""),r++,r===e.length&&(r=0);continue}if(h===f){csArray.prototype.push.call(i,h),r++,r===e.length&&(r=0);continue}for(let d=0;d<r;d++){let E=l-r+d;i[E]=t[E]}r=0,csArray.prototype.push.call(i,h)}for(let l=0;l<r;l++){let h=t.length-r+l;i[h]=t[h]}return i}ey(t){return bt(t,Zl)}Tr(t){return csString.prototype.replace.call(t,Hw,Bw)}}return s})(),Nc=["setReferrer"],$w=(()=>{class s{constructor(t,e){this.E=t,this.Is=e}init(){this.E.register(Nc,t=>{if(!A(t))throw new Ct(Nc[0]);this.Is.set(t)})}}return s})(),zw=(()=>{class s{constructor(t,e,i,r,o,c){this.f=t,this.yi=e,this.ys=i,this.C=r,this.S=o,this.X=c}initWithQuota(){if(!this.f.collectionEnabled){this.sy();return}let t=new Lr(this.f.getSettingsFileUri(),"",{type:"json",cacheMinutes:15});this._t=new yw(this.f,t,this.S),this._t.init(e=>{e?this.init():this.sy()})}lC(){this.C.schedule(()=>{this.M=new Mi,this.J=new Fw(this.M),this.w=new _v(window.location,this.J),this.N=new Dn(this.f,this.w,this.yi),this.N.init(),this.At=new Tv,this.E=new Sv([Ev.UXA]),this.K=new wv,this.lt=new _w,this.bt=new rv(this.f,new QS(this.f,this.N,this.At),this.S)})}sy(){}init(){as.isSupported()&&as.setDigestSalt(this.f.projectId.toString());let t,e,i,r,o,c,l,h,f,d,E,m,S,O,N,v,_,M,k,T,B,et,ct,Ht,Ut,w,L;this.lC(),this.C.schedule(()=>{E=new dv(window.location,this.N),new Vv().init(),m=Xl.create(H.warn),d=new il(m),this._t===void 0&&(this._t=new Ew(this.f,this.S,E,this.w,new mo),this._t.init())}),this.C.schedule(()=>{t=new qS(this.f,this.N,this.X),e=new XS(t,this._t,this.S,this.f.replayConsentRequiredForSession,this.f.malkaEtrEnabled),i=new Cv(this.f,this.N,this.X),r=new zS(this.f,i,this.S,e),this.ys.setContext(r,e)}),this.C.schedule(()=>{c=new JS(r,e,this.bt),l=new rf(this.f,this.N,this.X),h=new av(window.location,l),f=new cv(h),N=new KS(this.f,r,h),Ut=new Nv(De,this.f),T=new Mv(Ut,this.f.isChild),B=new kv(Ut),et=new Dv(Ut),ct=new xv,Ht=new bv(T,B,et,ct),v=new yv(this.E,Ht),_=new hv(this.w),M=new uv(_,this.E);let V=new of(this.f,this.N,this.X);w=new Rv(this.M,V),k=new Av(this.E,w);let F=new qp(r,e,h,w,this.f)}),this.C.schedule(()=>{let V=new $S(this.f,r,h,N,c,S,o,E);this.f.implementations&&(L=new mw(this.f.implementations,this.E,this.C),L.init(),this.S.addListener(L)),V.compute(F=>{this.C.schedule(()=>{var lt;v.init();let Dt=new nv(this.f,this.E,this.bt,e,this.S),se=new pv(this.f,this.N,this.At),Te=new fv(this.S,window.location,se),hs=new mv(this.E,Te),zt=new vv(this.E,this.f),Bt=new ww(this.J,new th),he=new Aw(e,r),Is,Ae,At;if(this.f.isCsCrosswritingHeap()){new $w(this.E,Bt).init();let Bn="api/identify_v3",$i=new Lr(this.f.getPaProxyDomainUri(),Bn),si;this.f.cookielessTrackingEnabled?si=new Uw(this.X):si=new jw(this.N),Is=new Nw(this.f.getHeapEnvId(),$i,r,he,si,this.f.identityEncryptionKey),At=new Ul;let Ps;this.f.cookielessTrackingEnabled?Ps=new Lw(this.X):Ps=new kw(this.N),Ae=new Dw(this.f.getHeapEnvId(),Ps,Bt,this.w,w,Is,At,(lt=this.f.experimental.sharedContext)===null||lt===void 0?void 0:lt.queryParamControl);let zi=new xw(Ae);this.S.addListener(zi)}let Kt=new Ec(this.f,r,e,O),Bi=new Ec(this.f,r,e,O,Ae);F?(this.S.emitInitTracking(),new FS(Kt,Bi,m,r,e,he,Bt,this.S,this.E,v,this.f,hs,Te,Dt,this.bt,this.M,Ut,this.J,this.w,zt,this.K,Ht,w,k,_,M,this.C,d,this.N,this.At,this._t,this.lt,At,Is).start()):new ov(this.S,this.E,v,hs,Te,f,Dt).start()})})})}}return s})(),Ss=(()=>{let s;return function(n){let t="{domain}/tag/tag.bundle.js?v={version}",e,i={loadBundle(_){let M=_.source,k=_.data;if(c(k)){let T=()=>{let B=r(t,k);E(B,()=>M.postMessage("csBundleLoaded",_.origin))};e=k.token,v(i.loadBundle),l(_.origin)&&T()}}};function r(_,M){return csString.prototype.replace.call(csString.prototype.replace.call(csString.prototype.replace.call(_,"{version}",M.version),"{token}",M.token),"{domain}",M.domain)}function o(){return e}n.getToken=o;function c(_){return _&&_.type==="csBundleInjection"&&l(_.domain)&&f(_.version)&&h(_.token)}n.isAuthorizedIncomingMessage=c,n.hjDomainRegex=/^https?:\/\/[a-zA-Z0-9\.\-]+\.hotjar\.com$/;function l(_){return/^https?:\/\/[a-zA-Z0-9\.\-]+\.(content-square\.fr|contentsquare\.com|csq\.io)$/.test(_)||n.hjDomainRegex.test(_)}n.isAuthorizedDomain=l;function h(_){return/^[a-zA-Z0-9]+$/.test(_)}n.isAuthorizedToken=h;function f(_){return/^[a-zA-Z0-9\.]+$/.test(_)}n.isAuthorizedTagVersion=f;function d(){let _=window.opener||window.parent;return window!==_&&window.addEventListener}n.isActivable=d;function E(_,M){let k=document.createElement("script");k.type="text/javascript",k.async=!0,k.src=_,k.onload=M,k.charset="utf-8",document.head.appendChild(k)}n.addScript=E;function m(_){let M=document.createElement("link");M.rel="stylesheet",M.href=_,document.head.appendChild(M)}n.addStyle=m;function S(_){return`${_}?cb=${new csDate().getTime()}`}n.addCacheBusting=S;function O(){N(i.loadBundle)}n.waitForBundleInjection=O;function N(_){window.addEventListener("message",_,!1)}n.listen=N;function v(_){window.removeEventListener("message",_,!1)}n.removeListener=v}(s||(s={})),s})(),Mc="_hp_ved",Gw=18e5,qw="/js/ved.js",Ww="/css/ved.css",Yw="/js/ved.css",Xw=(()=>{let s;return function(n){n.StatusUpdate="status"}(s||(s={})),s})(),Kw=(()=>{let s;return function(n){n.ReceivedInitMessage="received_init_message"}(s||(s={})),s})();var Tr=(()=>{let s;return function(n){let t=!1,e;function i(E){return e+E}function r(){let E=[i(Ww),i(Yw)];csArray.prototype.forEach.call(E,m=>{Ss.addStyle(m)})}function o(E){let m=new csRegExp("(^|;)[ ]*"+E+"=([^;]*)"),S=m.exec(document.cookie);return S?decodeURIComponent(S[2]):null}function c(E,m,S){let O=encodeURIComponent(E)+"="+encodeURIComponent(m),N=new csDate;N.setTime(N.getTime()+S);let v=O+"; expires="+N.toUTCString()+"; path=/";document.cookie=v}function l(){c(Mc,"on",Gw)}function h(){return o(Mc)==="on"}n.isVLCookieEnabled=h;function f(E){window.heapV=Object.assign({},window.heap,{source:E==null?void 0:E.source,uri:e,loadArgs:E==null?void 0:E.data.args,identify:()=>{},track:()=>{}})}n.initializeHeapV=f;function d(E,m){var S;if(e=E,m){let O={type:Xw.StatusUpdate,value:Kw.ReceivedInitMessage},N={targetOrigin:m==null?void 0:m.origin};(S=m==null?void 0:m.source)===null||S===void 0||S.postMessage(O,N)}t||(t=!0,l(),f(m),window.heapV&&(Ss.addScript(i(qw)),r()))}n.init=d}(s||(s={})),s})(),Jw=(()=>{let s;return function(n){let t=window.opener||window.parent,e="tag",i="https://app.contentsquare.com",r=[/^https:\/\/app\.contentsquare\.com$/,/^https:\/\/dev-app\.contentsquare\.com$/,/^https:\/\/staging-app\.contentsquare\.com$/,/^https:\/\/.*\.test\.contentsquare\.com$/,/^https:\/\/app\.[a-z0-9-]+\.csiab\.[a-z0-9-]+\.csq\.io$/,Ss.hjDomainRegex],o,c,l,h={initHeapVisualLabeler(T){var B;T.origin===l&&((B=T.data)===null||B===void 0?void 0:B.message)==="init"&&T.source&&(Tr.init(l,T),_(h.initHeapVisualLabeler))},ping(T){typeof T.data=="string"&&T.data==="ping"&&E(T.origin)&&(c=T.origin,o=Ss.hjDomainRegex.test(T.origin)?i:T.origin,_(h.ping),v(h.insertMessageScript),m(Ss.addCacheBusting("utils.js")))},insertMessageScript:M(T=>{typeof T.data=="string"&&T.data!=="ping"&&(_(h.insertMessageScript),m(T.data))})};function f(){return Ss.getToken()}n.getToken=f;function d(){return window!==t&&window.addEventListener}n.isActivable=d;function E(T){return csArray.prototype.some.call(r,B=>B.test(T))}n.isAuthorizedDomain=E;function m(T,B){let et=document.createElement("script");et.type="text/javascript",et.async=!0;let ct=o==null?void 0:csString.prototype.replace.call(o,/^https?:/,"");et.src=`${ct}/${e}/${T}`,et.onload=B,et.charset="utf-8",document.getElementsByTagName("head")[0].appendChild(et),S(T)}function S(T){csString.prototype.includes.call(T,"&mode=")&&sessionStorage.setItem("_hjRetakerMode",csString.prototype.split.call(T,"&mode=")[1])}function O(){v(h.ping),Ss.waitForBundleInjection()}n.waitForConnection=O;function N(T){l=T,v(h.initHeapVisualLabeler),Tr.isVLCookieEnabled()&&Tr.init(l)}n.waitForHeapVisualLabeler=N;function v(T){window.addEventListener("message",T,!1)}n.listen=v;function _(T){window.removeEventListener("message",T,!1)}n.removeListener=_;function M(T){return function(B){B.origin===c&&T(B)}}n.secureListener=M;function k(T){c&&t.postMessage(T,c)}n.post=k}(s||(s={})),s})();var hn=window.CSFrameCommunication||Jw;var Qw=(()=>{class s extends Do{constructor(t){super(),this.C=t}emitBeforeNaturalPageView(t){for(let e of this.listeners)e.onBeforeNaturalPageView&&e.onBeforeNaturalPageView(t)}emitAfterNaturalPageView(){for(let t of this.listeners)t.onAfterNaturalPageView&&t.onAfterNaturalPageView()}emitInitTracking(){for(let t of this.listeners)t.onInitTracking&&t.onInitTracking()}emitStartTracking(t){for(let e of this.listeners)e.onStartTracking&&this.C.schedule(()=>e.onStartTracking(t))}emitStartNoTrackingMode(){for(let t of this.listeners)t.onStartNoTrackingMode&&this.C.schedule(()=>t.onStartNoTrackingMode())}emitArtificialPageViewEnd(){for(let t of this.listeners)if(t.onArtificialPageViewEnd)try{t.onArtificialPageViewEnd()}catch(e){H.error(e)}}emitBeforeArtificialPageView(t,e){for(let i of this.listeners)i.onBeforeArtificialPageView&&i.onBeforeArtificialPageView(t,e)}emitAfterArtificialPageView(){for(let t of this.listeners)t.onAfterArtificialPageView&&t.onAfterArtificialPageView()}emitBeforeSessionRenewal(){for(let t of this.listeners)t.onBeforeSessionRenewal&&t.onBeforeSessionRenewal()}emitAfterSessionRenewal(){for(let t of this.listeners)t.onAfterSessionRenewal&&t.onAfterSessionRenewal()}emitOptout(){for(let t of this.listeners)t.onOptout&&t.onOptout()}emitReplayUnanonymizationConsentGranted(){for(let t of this.listeners)t.onReplayUnanonymizationConsentGranted&&t.onReplayUnanonymizationConsentGranted()}emitReplayUnanonymizationConsentWithdrawn(){for(let t of this.listeners)t.onReplayUnanonymizationConsentWithdrawn&&t.onReplayUnanonymizationConsentWithdrawn()}emitAfterReplayRecordingConsentGranted(){for(let t of this.listeners)t.onAfterReplayRecordingConsentGranted&&t.onAfterReplayRecordingConsentGranted()}emitAfterReplayRecordingConsentWithdrawn(){for(let t of this.listeners)t.onAfterReplayRecordingConsentWithdrawn&&t.onAfterReplayRecordingConsentWithdrawn()}emitCollectStateChange(t,e){for(let i of this.listeners)i.onCollectStateChange&&i.onCollectStateChange(t,e)}emitInitialDomStart(){for(let t of this.listeners)t.onInitialDomStart&&t.onInitialDomStart()}emitInitialDomDone(t){for(let e of this.listeners)e.onInitialDomDone&&e.onInitialDomDone(t)}emitRecordingContextChange(){for(let t of this.listeners)t.onRecordingContextChange&&t.onRecordingContextChange()}emitSensitiveStatusChange(){var t;for(let e of this.listeners)(t=e.onSensitiveStatusChange)===null||t===void 0||t.call(e)}emitBeforeVisitorRenewal(){for(let t of this.listeners)t.onBeforeVisitorRenewal&&t.onBeforeVisitorRenewal()}emitAfterVisitorCleared(){for(let t of this.listeners)t.onAfterVisitorCleared&&t.onAfterVisitorCleared()}emitAfterVisitorRenewal(){for(let t of this.listeners)t.onAfterVisitorRenewal&&t.onAfterVisitorRenewal()}emitSessionCreated(){for(let t of this.listeners)t.onSessionCreated&&t.onSessionCreated()}emitSessionRemoved(){for(let t of this.listeners)t.onSessionRemoved&&t.onSessionRemoved()}emitSessionRefreshed(){for(let t of this.listeners)t.onSessionRefreshed&&t.onSessionRefreshed()}}return j([It("emitStartTracking")],s.prototype,"emitStartTracking",null),s})();var Zw=(()=>{let s;return function(n){function t(){return typeof window.CSJavascriptBridge=="object"&&typeof window.CSJavascriptBridge.optIn=="function"&&typeof window.CSJavascriptBridge.optOut=="function"&&typeof window.CSJavascriptBridge.sendEvent=="function"&&typeof window.CSJavascriptBridge.sendDynamicVar=="function"&&typeof window.CSJavascriptBridge.sendTransaction=="function"}n.isCSJavascriptBridgeDefined=t;function e(){if(typeof window.CSJavascriptBridge.getVersion=="function")try{let v=window.CSJavascriptBridge.getVersion();if(ft(v))return v}catch{H.warn("an error occurred when calling getVersion")}return null}n.getBridgeVersion=e;function i(){typeof window.CSJavascriptBridge.onWebviewTrackingReady=="function"&&window.CSJavascriptBridge.onWebviewTrackingReady()}n.notifyIsReadyForTracking=i;function r(v,_){window.CSJavascriptBridge.identify&&window.CSJavascriptBridge.identify(v,csJSON.stringify(_))}n.identify=r;function o(){window.CSJavascriptBridge.resetIdentity&&window.CSJavascriptBridge.resetIdentity()}n.resetIdentity=o;function c(v){window.CSJavascriptBridge.addUserProperties&&window.CSJavascriptBridge.addUserProperties(csJSON.stringify(v))}n.addUserProperties=c;function l(v){window.CSJavascriptBridge.sendEvent(csJSON.stringify(v))}n.sendAnalysisEvent=l;function h(v){if(window.CSJavascriptBridge.sendSREvent)for(let _ of v.events)window.CSJavascriptBridge.sendSREvent(csJSON.stringify(_))}n.sendSREvent=h;function f(v){window.CSJavascriptBridge&&window.CSJavascriptBridge.sendLog&&window.CSJavascriptBridge.sendLog(csJSON.stringify(v))}n.sendLog=f;function d(){window.CSJavascriptBridge.optIn()}n.sendOptIn=d;function E(){window.CSJavascriptBridge.optOut()}n.sendOptOut=E;function m(v,_){window.CSJavascriptBridge.sendDynamicVar(v,_)}n.sendDynamicVariable=m;function S(v,_,M){window.CSJavascriptBridge.sendTransaction(v,_,M)}n.sendTransaction=S;function O(v,_){if(window.CSJavascriptBridge.sendAssets){let M=csJSON.stringify(v);window.CSJavascriptBridge.sendAssets(M,_||null)}else window.CSJavascriptBridge.sendSRAssets&&window.CSJavascriptBridge.sendSRAssets(csArray.prototype.map.call(v,M=>M.assetId))}n.sendAssets=O;function N(v){window.CSJavascriptBridge&&window.CSJavascriptBridge.sendNativeSREvent&&window.CSJavascriptBridge.sendNativeSREvent(csJSON.stringify(v))}n.sendNativeSREvent=N}(s||(s={})),s})();var tb=(()=>{class s{setItem(t,e){window.sessionStorage.setItem(t,e)}getItem(t){return window.sessionStorage.getItem(t)}removeItem(t){window.sessionStorage.removeItem(t)}}return s})(),eb=(()=>{class s{constructor(t,e,i){this.f=t,this.wt=e,this.ys=i}start(){var t,e,i,r,o;if(window.CSQ_TAGS=csArray.prototype.concat.call(window.CSQ_TAGS||[],this.f.projectId),window.UXAnalytics)return;window.UXAnalytics={};let c=new tb,l=new Wl(!!(!((t=this.f.taskSchedulerOptions)===null||t===void 0)&&t.enabled),(e=this.f.taskSchedulerOptions)===null||e===void 0?void 0:e.maxProcessingTime,(i=this.f.taskSchedulerOptions)===null||i===void 0?void 0:i.waitDuration),h=new Hp(this.wt,this.f);h.init();let f=new Fp(this.f,h);if(this.wt.isTopWindowTracker()&&f.canTrack()){if(!((r=window.CSProtectnativeFunctionsLogs)===null||r===void 0)&&r.Warning&&H.warn(`protectNativeFunctions failed: ${window.CSProtectnativeFunctionsLogs.Warning}`),!((o=window.CSProtectnativeFunctionsLogs)===null||o===void 0)&&o.Critical){H.error(`protectNativeFunctions failed: ${window.CSProtectnativeFunctionsLogs.Critical}`);return}Vp();let E=new Qw(l),m=new zw(this.f,h,this.ys,l,E,c);this.f.isQuotaEnabled()?m.initWithQuota():m.init()}let d=csString.prototype.indexOf.call(window.location.href,"csDebug=1")>-1;window.UXAnalytics={Sensitive:{isNodeSensitive(E){return x.isMaskedElement(E)||x.isMaskedElementChild(E)},isAttributeSensitive(E,m){return x.isMaskedAttribute(E,m)},getSensitiveAttributes(E){return vi(E.attributes,m=>x.isMaskedAttribute(E,m.name))}},Console:{warn(E){d&&console.warn("cs.tracking.warning",E)},error(E){d&&console.error("cs.tracking.error",E)}},Version:Qc},window.CSFrameCommunication||(window.CSFrameCommunication=hn,hn.isActivable()&&hn.waitForConnection(),this.f.isCsCrosswritingHeap()&&hn.waitForHeapVisualLabeler(this.f.getHeapWebAppUri()))}}return j([It("main.start"),P("main.start")],s.prototype,"start",null),s})(),sb=(()=>{class s{constructor(){}send(t,e,i=pt.warn){let r={message:t,errorCode:e,level:i};Zw.sendLog(r)}}return s})();var ib=(()=>{class s{constructor(t,e,i){this.W=t,this.M=e,this.hI=i,this.kt=[],this.uI=po().v}flush(){this.kt.length!==0&&(this.W.send({m:csArray.prototype.map.call(this.kt,t=>({n:t.name,p:t.parameter,v:t.value})),p:this.M.anonymizePII(window.location.pathname),pid:this.hI,v:this.uI}),this.kt=[])}push(t){csArray.prototype.push.call(this.kt,...t),this.flush()}}return s.DEBOUNCE_INTERVAL=5e3,j([zu(s.DEBOUNCE_INTERVAL)],s.prototype,"flush",null),s})();function nb(s,n){let t=s.validationRate/10,e=_s.boolean(t);if((s.environment==="staging"||!1||e)&&!n.isInWebViewContext())try{let o=Xl.create(H.warn,n.isTopWindowTracker()),l=new il(o).create(s.getMetricsUri(),!0),h=new Mi,f=new ib(l,h,s.projectId);G.setService(f)}catch(o){H.warn(`Error initializing metrics: ${o.message}`)}}function rb(){var s;td();let n=new ap(window.CS_CONF);window._uxa=window._uxa||[],n.processOptionOverrides(window._uxa);let t=new cp(window,n);t.init();let e=new kp;if(Hu(H),Dp(),H.computeIsActive(n.validationRate),t.isTopWindowTracker()){let o=new Ip(n,e);H.setStrategy(o)}else if(t.isInWebViewContext()){let r=new sb;H.setStrategy(r)}!((s=n==null?void 0:n.experimental)===null||s===void 0)&&s.disableMutationObserverProtection&&window.csMutationObserver&&(window.csMutationObserver=Ts(window,"MutationObserver")),Bd(),nb(n,t),new eb(n,t,e).start()}window.CSCurrentScript=document.currentScript;csSetTimeout(()=>{try{xp(rb)}catch{}});})();

// signature-f582ff52e589b04698ca5d90bb173161146510b9183414b21e791f185288e768